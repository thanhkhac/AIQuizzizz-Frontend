import{d as U,O as E,u as j,i as O,C as J,D as X,s as le,k as ie,_ as V,r as c,G as P,o as _,w as n,b as a,c as s,t as m,a as g,F as N,E as L,f as M,q as B,l as te,j as Y,P as W,M as re,p as de,e as D}from"./index-C2jtDg6B.js";import{I as G}from"./Input-0Otcuoto.js";import{u as ce}from"./utc-BGTnualw.js";import{A as ae}from"./ApiFolder-DE_T1vB3.js";import{F as H}from"./folderShareMode-BudLQ2R2.js";import{A as oe}from"./ApiTestTemplate-Ds5LzdWO.js";import{Q as ee}from"./questionTypes-CS3lcRlq.js";const me={LAST_ATTEMPT:"LastAttemp",HIGHEST_SCORE:"HighestScore"},K={PARTIAL:"Partial",ALL_OR_NOTHING:"AllOrNothing"},ue=U({__name:"SettingTestModal",props:{className:{type:String,required:!0},formState:{type:null,required:!0},formRef:{type:null,required:!0}},setup(v,{expose:t}){E.extend(ce);const{t:f}=j(),e=v,q=O(!1),k=()=>{q.value=!0,e.formState.startTime&&e.formState.endTime&&(u.value[0]=E(e.formState.startTime),u.value[1]=E(e.formState.endTime))},h=async()=>{e.formState.startTime=u.value[0].toISOString(),e.formState.endTime=u.value[1].toISOString();try{await l.value.validate()&&(q.value=!1)}catch{}};t({openTestSettingModal:k});const l=O(e.formRef),u=O([E(),E()]),r=o=>{o&&(e.formState.startTime=o[0].toISOString(),e.formState.endTime=o[1].toISOString(),u.value[0]=o[0],u.value[1]=o[1])},w={range:[{validator(o,x){return u.value?u.value[1].diff(u.value[0],"minute")<e.formState.timeLimit?Promise.reject(`Start time and end time must be at least ${e.formState.timeLimit} minutes (time limit) apart`):Promise.resolve():Promise.reject("required")},trigger:"change"}],title:[{required:!0,message:"This field is required.",trigger:"change"},{validator:(o,x)=>(x==null?void 0:x.length)>100?Promise.reject("Limit: 100 characters."):Promise.resolve(),trigger:"change"}],timeLimit:[{required:!0,message:"This field is required.",trigger:"change"}],passingScore:[{required:!0,message:"This field is required.",trigger:"change"}],shuffle:[{required:!0,message:"This field is required.",trigger:"change"}],maxAttempt:[{required:!0,message:"This field is required.",trigger:"change"}]},b=Object.values(me),S=J(()=>b.map(o=>({label:o,value:o}))),z=o=>{e.formState.gradeQuestionMethod=o?K.PARTIAL:K.ALL_OR_NOTHING};X(()=>[e.formState.startTime,e.formState.endTime],([o,x])=>{o&&x&&(u.value[0]=E(o),u.value[1]=E(x))},{immediate:!0}),X(()=>e.formState.timeLimit,async o=>{try{await l.value.validate()}catch{}}),le(async()=>{ie.info("Change to startTime endTime when api fixed")});const i={t:f,props:e,modal_open:q,openTestSettingModal:k,closeModal:h,formRef:l,range:u,onRangeChange:r,rules:w,optionAttemptKeys:b,select_attempt_options:S,onQuestionGradeMethodChange:z,get TEST_GRADE_QUESTION_METHOD(){return K},Input:G};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),_e={class:"modal-container"},pe={class:"modal-title-container"},fe={class:"content-item modal-test-setting"};function ge(v,t,f,e,q,k){const h=c("RouterLink"),l=c("a-col"),u=c("a-row"),r=c("a-form-item"),w=c("a-range-picker"),b=c("a-input-number"),S=c("a-switch"),z=c("a-select-option"),i=c("a-select"),o=c("a-form"),x=c("a-button"),C=c("a-modal");return _(),P(C,{centered:"",width:"100%","wrap-class-name":"full-modal setting-modal",open:e.modal_open,onCancel:e.closeModal},{footer:n(()=>[s(x,{class:"main-color-btn-ghost",size:"large",key:"submit",type:"ghost",onClick:e.closeModal},{default:n(()=>t[18]||(t[18]=[M(" Cancel ")])),_:1,__:[18]}),s(x,{class:"main-color-btn",size:"large",key:"submit",type:"primary",onClick:e.closeModal},{default:n(()=>t[19]||(t[19]=[M(" Next ")])),_:1,__:[19]})]),default:n(()=>[a("div",_e,[a("div",pe,[s(u,{class:"w-100 d-flex align-items-center"},{default:n(()=>[s(l,{span:1},{default:n(()=>[s(h,{to:{name:"User_Class_Exam",params:{id:f.formState.classId}}},{default:n(()=>t[9]||(t[9]=[a("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[9]},8,["to"])]),_:1}),s(l,{class:"main-title",span:23},{default:n(()=>[a("span",null,"Assign new test for class "+m(f.className),1)]),_:1})]),_:1})]),a("div",fe,[t[17]||(t[17]=a("div",{class:"content-item-title"},[a("div",null,[a("span",null,"Test settings"),a("span",null,"Config how your test work")])],-1)),s(o,{ref:"formRef",model:f.formState,rules:e.rules,class:"w-100",layout:"vertical"},{default:n(()=>[s(r,null,{default:n(()=>[s(e.Input,{class:"question-input-item",modelValue:f.formState.name,"onUpdate:modelValue":t[0]||(t[0]=p=>f.formState.name=p),isRequired:!0,placeholder:"Enter test title",label:"Test title","max-length":100},null,8,["modelValue"])]),_:1}),s(u,{class:"form-item-row"},{default:n(()=>[s(l,{span:24},{default:n(()=>[s(r,{rules:e.rules.range,label:"Start date | End date",class:"input-item",name:"range"},{default:n(()=>[s(w,{onChange:e.onRangeChange,size:"large","show-time":"",value:e.range,"onUpdate:value":t[1]||(t[1]=p=>e.range=p)},null,8,["value"])]),_:1},8,["rules"])]),_:1})]),_:1}),s(u,{class:"form-item-row"},{default:n(()=>[s(l,{span:10},{default:n(()=>[s(r,{label:"Number of Attempts",class:"input-item",name:"maxAttempt"},{default:n(()=>[s(b,{size:"large","addon-after":"time",value:f.formState.maxAttempt,"onUpdate:value":t[2]||(t[2]=p=>f.formState.maxAttempt=p),min:"1",max:"100"},{prefix:n(()=>t[10]||(t[10]=[a("i",{class:"bx bx-repost"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1}),s(l,{span:10},{default:n(()=>[s(r,{label:"Shuffle",class:"input-item",name:"shuffle"},{default:n(()=>[s(b,{size:"large","addon-after":"times",value:f.formState.shuffle,"onUpdate:value":t[3]||(t[3]=p=>f.formState.shuffle=p),min:"1",max:"100"},{prefix:n(()=>t[11]||(t[11]=[a("i",{class:"bx bx-shuffle"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),s(u,{class:"form-item-row"},{default:n(()=>[s(l,{span:10},{default:n(()=>[s(r,{label:"Time Limit",class:"input-item",name:"timeLimit"},{default:n(()=>[s(b,{size:"large","addon-after":"minutes",value:f.formState.timeLimit,"onUpdate:value":t[4]||(t[4]=p=>f.formState.timeLimit=p),min:"1",max:"1500"},{prefix:n(()=>t[12]||(t[12]=[a("i",{class:"bx bx-time-five"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1}),s(l,{span:10},{default:n(()=>[s(r,{label:"Passing score",class:"input-item",name:"passingScore"},{default:n(()=>[s(b,{size:"large","addon-after":"%",value:f.formState.passingScore,"onUpdate:value":t[5]||(t[5]=p=>f.formState.passingScore=p),min:"1",max:"100"},{prefix:n(()=>t[13]||(t[13]=[a("i",{class:"bx bx-check-circle"},null,-1)])),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),s(u,{class:"form-item-row"},{default:n(()=>[s(l,{span:10,class:"input-item switch"},{default:n(()=>[t[14]||(t[14]=a("div",{class:"switch-content"},[a("div",{class:"switch-title"},"Show correct answers"),a("div",{class:"switch-sub-title"}," Allow students to view correct answer after test ")],-1)),s(S,{checked:f.formState.isShowCorrectAnswerInReview,"onUpdate:checked":t[6]||(t[6]=p=>f.formState.isShowCorrectAnswerInReview=p)},null,8,["checked"])]),_:1,__:[14]}),s(l,{span:10},{default:n(()=>[s(r,{label:"Final score (optional)",class:"input-item"},{default:n(()=>[s(i,{size:"large",value:f.formState.gradeAttemptMethod,"onUpdate:value":t[7]||(t[7]=p=>f.formState.gradeAttemptMethod=p)},{default:n(()=>[(_(!0),g(N,null,L(e.select_attempt_options,p=>(_(),P(z,{value:p.value},{default:n(()=>[M(m(p.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),s(u,{class:"form-item-row"},{default:n(()=>[s(l,{span:10,class:"input-item switch"},{default:n(()=>[t[15]||(t[15]=a("div",{class:"switch-content"},[a("div",{class:"switch-title"},"Partial grade method"),a("div",{class:"switch-sub-title"}," Give partial credit if the studentâ€™s answer partially matches the expected answer ")],-1)),s(S,{checked:f.formState.gradeQuestionMethod===e.TEST_GRADE_QUESTION_METHOD.PARTIAL,onChange:e.onQuestionGradeMethodChange},null,8,["checked"])]),_:1,__:[15]}),s(l,{span:10,class:"input-item switch"},{default:n(()=>[t[16]||(t[16]=a("div",{class:"switch-content"},[a("div",{class:"switch-title"},"Review attempts"),a("div",{class:"switch-sub-title"}," Allow students to review their answers after taking the test ")],-1)),s(S,{checked:f.formState.isAllowReviewAfterSubmit,"onUpdate:checked":t[8]||(t[8]=p=>f.formState.isAllowReviewAfterSubmit=p)},null,8,["checked"])]),_:1,__:[16]})]),_:1})]),_:1},8,["model"])])])]),_:1},8,["open"])}const sa=V(ue,[["render",ge],["__scopeId","data-v-34f39973"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/SettingTestModal.vue"]]),ve=U({__name:"ChooseFolderModal",emits:["switchToTestTemplate","openFolder"],setup(v,{expose:t,emit:f}){var T;const e=B(),q=te(),{t:k}=j(),h=Object.values(H),l=J(()=>h.map(d=>({label:k(`folder_index.select_option.${d}`),value:d!==H.ALL?d:""}))),u=O([]),r=Y({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,folderName:((T=e.query.folderName)==null?void 0:T.toString())||"",shareMode:e.query.shareMode||l.value[0].value,totalCount:0,statusFilter:!1}),w=async()=>{try{let d=await ae.GetAllByLimit(r);if(d.data.success){let I=d.data.data;u.value=I.items,r.pageNumber=I.pageNumber,r.pageSize=I.pageSize,r.totalCount=I.totalCount}}catch(d){console.log("ERROR: GETALLBYLIMIT folder: "+d)}};W(()=>{var d;Object.keys(e.query).length===0&&(r.pageNumber=e.query.pageNumber||1,r.pageSize=e.query.pageSize||10,r.folderName=((d=e.query.folderName)==null?void 0:d.toString())||"",r.shareMode=e.query.shareMode||l.value[0].value,r.statusFilter=!0,w())});const b=(d,I)=>{r.pageNumber=d,r.pageSize=I,r.statusFilter=!0,w()},S=O(!1),z=()=>{S.value=!0},i=()=>{S.value=!1};t({openModal:z,closeModal:i});const o=f,p={route:e,router:q,t:k,optionKeys:h,folder_share_mode_options:l,folder_data:u,pageParams:r,getData:w,onPaginationChange:b,modal_open:S,openModal:z,closeModal:i,emit:o,handleSwitchToTestTemplate:()=>{o("switchToTestTemplate")},handleOpenFolder:d=>{o("openFolder",d)},Input:G};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),he={class:"modal-container"},Te={class:"modal-title-container"},be={class:"content"},Se={class:"content-item"},we={class:"title-container"},ye={class:"main-title"},xe={class:"content-item-functions"},ke={class:"content-item-navigators"},ze={class:"navigator-container"},Ce={class:"filter-container"},Me={style:{width:"300px",padding:"0px"}},qe={class:"folder-container"},Ie=["onClick"],Ae={class:"folder-name"},Oe={key:1,class:"w-100 m-2 d-flex justify-content-center"},Ne={class:"pagination-container"};function Le(v,t,f,e,q,k){const h=c("RouterLink"),l=c("a-col"),u=c("a-row"),r=c("a-select-option"),w=c("a-select"),b=c("a-empty"),S=c("a-pagination"),z=c("a-modal");return _(),P(z,{centered:"",width:"100%","wrap-class-name":"medium-modal large",open:e.modal_open,onCancel:e.closeModal},{footer:n(()=>t[9]||(t[9]=[])),default:n(()=>[a("div",he,[a("div",Te,[s(u,{class:"w-100 d-flex align-items-center"},{default:n(()=>[s(l,{span:1},{default:n(()=>[s(h,{onClick:e.closeModal,to:{name:""}},{default:n(()=>t[3]||(t[3]=[a("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[3]})]),_:1}),s(l,{class:"main-title",span:23},{default:n(()=>t[4]||(t[4]=[a("span",null,"Choose from folder test",-1)])),_:1,__:[4]})]),_:1})]),a("div",be,[a("div",Se,[a("div",we,[a("div",ye,[a("span",null,m(v.$t("folder_index.title")),1),t[5]||(t[5]=M()),t[6]||(t[6]=a("br",null,null,-1)),a("span",null,m(v.$t("folder_index.sub_title")),1)])]),a("div",xe,[a("div",ke,[a("div",ze,[s(h,{class:"navigator-item navigator-active",to:{name:""}},{default:n(()=>[M(m(v.$t("folder_index.navigators.folder")),1)]),_:1}),s(h,{class:"navigator-item",to:{name:""},onClick:e.handleSwitchToTestTemplate},{default:n(()=>[M(m(v.$t("folder_index.navigators.test_template")),1)]),_:1})])]),a("div",Ce,[s(w,{class:"me-3",value:e.pageParams.shareMode,"onUpdate:value":t[0]||(t[0]=i=>e.pageParams.shareMode=i),style:{width:"200px"},onChange:e.getData},{default:n(()=>[(_(!0),g(N,null,L(e.folder_share_mode_options,i=>(_(),P(r,{value:i.value},{default:n(()=>[M(m(i.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),a("div",Me,[s(e.Input,{onInput:e.getData,modelValue:e.pageParams.folderName,"onUpdate:modelValue":t[1]||(t[1]=i=>e.pageParams.folderName=i),placeholder:e.t("class_index.other.search_class_placeholder")},{icon:n(()=>t[7]||(t[7]=[a("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),a("div",qe,[e.folder_data.length>0?(_(!0),g(N,{key:0},L(e.folder_data,i=>(_(),g("div",{class:"folder",onClick:o=>e.handleOpenFolder(i)},[t[8]||(t[8]=a("div",{class:"folder-icon"},[a("div",{class:"folder-top"}),a("div",{class:"folder-body"})],-1)),a("div",Ae,m(i.name),1)],8,Ie))),256)):(_(),g("div",Oe,[s(b,null,{description:n(()=>[a("span",null,m(v.$t("folder_index.other.no_data_matches")),1)]),_:1})]))]),a("div",Ne,[s(S,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":t[2]||(t[2]=i=>e.pageParams.pageNumber=i),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(i,o)=>`${o[0]}-${o[1]} of ${i} ${e.t("folder_index.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("folder_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])])]),_:1},8,["open"])}const la=V(ve,[["render",Le],["__scopeId","data-v-e4fbf0b7"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/ChooseFolderModal.vue"]]),Pe=U({__name:"ChooseFolderTestTemplateModal",props:{folder:{type:[Object,null],required:!0}},emits:["openTestTemplate","backToFolderModal"],setup(v,{expose:t,emit:f}){var x;const e=B(),{t:q}=j(),k=v,h=O([]),l=Y({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,testTemplateName:((x=e.query.testTemplateName)==null?void 0:x.toString())||"",totalCount:0,statusFilter:!1}),u=async()=>{var C,p;try{if(!((C=k.folder)!=null&&C.folderTestId))return;let T=await ae.GetAllTestTemplateByLimit((p=k.folder)==null?void 0:p.folderTestId,l);if(T.data.success){let d=T.data.data;h.value=d.items,l.pageNumber=d.pageNumber,l.pageSize=d.pageSize,l.totalCount=d.totalCount}}catch(T){console.log("ERROR: GETALLBYLIMIT testtemplate: "+T)}};W(()=>{var C;Object.keys(e.query).length===0&&(l.pageNumber=e.query.pageNumber||1,l.pageSize=e.query.pageSize||10,l.testTemplateName=((C=e.query.testTemplateName)==null?void 0:C.toString())||"",l.statusFilter=!0,u())});const r=(C,p)=>{l.pageNumber=C,l.pageSize=p,l.statusFilter=!0,u()},w=f,b=O(!1),S=()=>{b.value=!0},z=()=>{b.value=!1,w("backToFolderModal")},i=C=>{w("openTestTemplate",C)};t({openModal:S,closeModal:z});const o={route:e,t:q,props:k,test_template_data:h,pageParams:l,getData:u,onPaginationChange:r,emit:w,modal_open:b,openModal:S,closeModal:z,handleOpenTestTemplate:i,Input:G};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),Ee={class:"modal-container"},Fe={class:"modal-title-container"},Re={class:"content"},Qe={class:"content-item"},De={class:"title-container"},Ue={class:"main-title"},je={class:"content-item-functions"},Ve={class:"filter-container"},Ge={style:{width:"300px",padding:"0px"}},He={key:0,class:"quiz-item-container"},Be=["onClick"],Ye={class:"quiz-item-title"},Ke={class:"quiz-item-info quiz-info-detail"},$e={class:"quiz-item-questions"},Xe={class:"quiz-item-created-by"},Je={class:"exam-item-actions"},We={key:1,class:"w-100 d-flex justify-content-center"},Ze={class:"pagination-container"};function et(v,t,f,e,q,k){const h=c("RouterLink"),l=c("a-col"),u=c("a-row"),r=c("a-button"),w=c("a-empty"),b=c("a-pagination"),S=c("a-modal");return _(),P(S,{centered:"",width:"100%","wrap-class-name":"medium-modal large",open:e.modal_open,onCancel:e.closeModal},{footer:n(()=>t[10]||(t[10]=[])),default:n(()=>{var z;return[a("div",Ee,[a("div",Fe,[s(u,{class:"w-100 d-flex align-items-center"},{default:n(()=>[s(l,{span:1},{default:n(()=>[s(h,{onClick:e.closeModal,to:{name:""}},{default:n(()=>t[2]||(t[2]=[a("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[2]})]),_:1}),s(l,{class:"main-title",span:23},{default:n(()=>t[3]||(t[3]=[a("span",null,"Choose from folder test",-1)])),_:1,__:[3]})]),_:1})]),a("div",Re,[a("div",Qe,[a("div",De,[a("div",Ue,[a("span",null,"Folder test: "+m((z=f.folder)==null?void 0:z.name),1),t[4]||(t[4]=M()),t[5]||(t[5]=a("br",null,null,-1)),a("span",null,m(v.$t("folder_index.sub_title")),1)])]),a("div",je,[a("div",Ve,[a("div",Ge,[s(e.Input,{onInput:e.getData,modelValue:e.pageParams.testTemplateName,"onUpdate:modelValue":t[0]||(t[0]=i=>e.pageParams.testTemplateName=i),placeholder:e.t("class_index.other.search_class_placeholder")},{icon:n(()=>t[6]||(t[6]=[a("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),e.test_template_data.length>0?(_(),g("div",He,[(_(!0),g(N,null,L(e.test_template_data,i=>(_(),g("div",{class:"quiz-item",onClick:o=>e.handleOpenTestTemplate(i.testTemplateId)},[t[8]||(t[8]=a("i",{class:"bx bx-book-open quiz-item-icon"},null,-1)),a("div",null,[a("div",Ye,m(i.name),1),a("div",Ke,[a("div",$e,[t[7]||(t[7]=a("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),M(" "+m(i.numberOfQuestion)+" "+m(v.$t("dashboards.list_items.quiz.questions")),1)]),a("div",Xe,m(v.$t("class_question_set.other.created_by"))+" "+m(i.createdBy),1)])]),a("div",Je,[s(r,{type:"primary",class:"me-3 main-color-btn",onClick:o=>e.handleOpenTestTemplate(i.testTemplateId)},{default:n(()=>[M(m(v.$t("class_question_set.buttons.view")),1)]),_:2},1032,["onClick"])])],8,Be))),256))])):(_(),g("div",We,[s(w,null,{description:n(()=>t[9]||(t[9]=[a("span",null," No data matches. ",-1)])),_:1})])),a("div",Ze,[s(b,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":t[1]||(t[1]=i=>e.pageParams.pageNumber=i),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(i,o)=>`${o[0]}-${o[1]} of ${i} ${e.t("folder_index.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("folder_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])])]}),_:1},8,["open"])}const ia=V(Pe,[["render",et],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/ChooseFolderTestTemplateModal.vue"]]),tt=U({__name:"ChooseTestTemplateModal",emits:["switchToFolder","openTestTemplate"],setup(v,{expose:t,emit:f}){var T;const e=B(),q=te(),{t:k}=j(),h=Object.values(H),l=J(()=>h.map(d=>({label:k(`folder_index.select_option.${d}`),value:d!==H.ALL?d:""}))),u=O([]),r=Y({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,name:((T=e.query.name)==null?void 0:T.toString())||"",shareMode:e.query.shareMode||l.value[0].value,totalCount:0,statusFilter:!1}),w=async()=>{try{let d=await oe.GetAllByLimit(r);if(d.data.success){let I=d.data.data;u.value=I.items,r.pageNumber=I.pageNumber,r.pageSize=I.pageSize,r.totalCount=I.totalCount}}catch(d){console.log("ERROR: GETALLBYLIMIT testtemplate: "+d)}};W(()=>{var d;Object.keys(e.query).length===0&&(r.pageNumber=e.query.pageNumber||1,r.pageSize=e.query.pageSize||10,r.name=((d=e.query.name)==null?void 0:d.toString())||"",r.shareMode=e.query.shareMode||l.value[0].value,r.statusFilter=!0,w())});const b=(d,I)=>{r.pageNumber=d,r.pageSize=I,r.statusFilter=!0,w()},S=O(!1),z=()=>{S.value=!0},i=()=>{S.value=!1};t({openModal:z,closeModal:i});const o=f,p={route:e,router:q,t:k,optionKeys:h,share_mode_options:l,test_template_data:u,pageParams:r,getData:w,onPaginationChange:b,modal_open:S,openModal:z,closeModal:i,emit:o,handleSwitchToFolder:()=>{o("switchToFolder")},handleOpenTestTemplate:d=>{o("openTestTemplate",d)},Input:G};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),at={class:"modal-container"},ot={class:"modal-title-container"},nt={class:"content"},st={class:"content-item"},lt={class:"title-container"},it={class:"main-title"},rt={class:"content-item-functions"},dt={class:"content-item-navigators"},ct={class:"navigator-container"},mt={class:"filter-container"},ut={style:{width:"300px",padding:"0px"}},_t={key:0,class:"quiz-item-container"},pt={class:"quiz-item"},ft={class:"quiz-item-title"},gt={class:"quiz-item-info quiz-info-detail"},vt={class:"quiz-item-questions"},ht={class:"quiz-item-created-by"},Tt={class:"exam-item-actions"},bt={key:1,class:"w-100 d-flex justify-content-center"},St={class:"pagination-container"};function wt(v,t,f,e,q,k){const h=c("RouterLink"),l=c("a-col"),u=c("a-row"),r=c("a-select-option"),w=c("a-select"),b=c("a-button"),S=c("a-empty"),z=c("a-pagination"),i=c("a-modal");return _(),P(i,{centered:"",width:"100%","wrap-class-name":"medium-modal large",open:e.modal_open,onCancel:e.closeModal},{footer:n(()=>t[11]||(t[11]=[])),default:n(()=>[a("div",at,[a("div",ot,[s(u,{class:"w-100 d-flex align-items-center"},{default:n(()=>[s(l,{span:1},{default:n(()=>[s(h,{onClick:e.closeModal,to:{name:""}},{default:n(()=>t[3]||(t[3]=[a("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[3]})]),_:1}),s(l,{class:"main-title",span:23},{default:n(()=>t[4]||(t[4]=[a("span",null,"Choose from folder test",-1)])),_:1,__:[4]})]),_:1})]),a("div",nt,[a("div",st,[a("div",lt,[a("div",it,[a("span",null,m(v.$t("folder_index.title")),1),t[5]||(t[5]=M()),t[6]||(t[6]=a("br",null,null,-1)),a("span",null,m(v.$t("folder_index.sub_title")),1)])]),a("div",rt,[a("div",dt,[a("div",ct,[s(h,{class:"navigator-item",to:{name:""},onClick:e.handleSwitchToFolder},{default:n(()=>[M(m(v.$t("folder_index.navigators.folder")),1)]),_:1}),s(h,{class:"navigator-item navigator-active",to:{name:""}},{default:n(()=>[M(m(v.$t("folder_index.navigators.test_template")),1)]),_:1})])]),a("div",mt,[s(w,{class:"me-3",value:e.pageParams.shareMode,"onUpdate:value":t[0]||(t[0]=o=>e.pageParams.shareMode=o),style:{width:"200px"},onChange:e.getData},{default:n(()=>[(_(!0),g(N,null,L(e.share_mode_options,o=>(_(),P(r,{value:o.value},{default:n(()=>[M(m(o.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),a("div",ut,[s(e.Input,{onInput:e.getData,modelValue:e.pageParams.name,"onUpdate:modelValue":t[1]||(t[1]=o=>e.pageParams.name=o),placeholder:e.t("class_index.other.search_class_placeholder")},{icon:n(()=>t[7]||(t[7]=[a("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),e.test_template_data.length>0?(_(),g("div",_t,[(_(!0),g(N,null,L(e.test_template_data,o=>(_(),g("div",pt,[t[9]||(t[9]=a("i",{class:"bx bx-book-open quiz-item-icon"},null,-1)),a("div",null,[a("div",ft,m(o.name),1),a("div",gt,[a("div",vt,[t[8]||(t[8]=a("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),M(" "+m(o.numberOfQuestion)+" "+m(v.$t("dashboards.list_items.quiz.questions")),1)]),a("div",ht,m(v.$t("class_question_set.other.created_by"))+" "+m(o.createdBy),1)])]),a("div",Tt,[s(b,{type:"primary",class:"me-3 main-color-btn",onClick:x=>e.handleOpenTestTemplate(o.testTemplateId)},{default:n(()=>[M(m(v.$t("class_question_set.buttons.view")),1)]),_:2},1032,["onClick"])])]))),256))])):(_(),g("div",bt,[s(S,null,{description:n(()=>t[10]||(t[10]=[a("span",null," No data matches. ",-1)])),_:1})])),a("div",St,[s(z,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":t[2]||(t[2]=o=>e.pageParams.pageNumber=o),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(o,x)=>`${x[0]}-${x[1]} of ${o} ${e.t("folder_index.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("folder_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])])]),_:1},8,["open"])}const ra=V(tt,[["render",wt],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/ChooseTestTemplateModal.vue"]]),yt=U({__name:"ChooseQuestionModal",props:{testTemplateId:{type:String,required:!0},folder:{type:[Object,null],required:!0}},emits:["import","backToFolderTestTemplateModal","backToTestTemplateModal"],setup(v,{expose:t,emit:f}){const e=B(),{t:q}=j(),k=v,h=O(),l=O(),u=async()=>{try{if(!k.testTemplateId)return;let y=await oe.GetById(k.testTemplateId||"");if(y.data.success){let A=y.data.data;h.value=A,l.value=A.questions}}catch(y){console.log("ERROR: GETBYID testtemplate: "+y)}},r={HTML:"HTML",PLAIN_TEXT:"PlainText"},w=Object.values(ee).map(y=>({label:q(`create_QS.type.${y}`),value:y})),b=O([...w.map(y=>y.value)]),S=O(""),z=()=>{var R,Q;i.checkedList=[];let y=(R=h.value)==null?void 0:R.questions;const A=S.value.trim().toLowerCase();y=(Q=h.value)==null?void 0:Q.questions.filter(Z=>{const ne=!A||Z.questionText.toLowerCase().includes(A),se=!b.value.length||b.value.includes(Z.type);return ne&&se}),l.value=y},i=Y({checkAll:!1,indeterminate:!1,checkedList:[]}),o=y=>{Object.assign(i,{checkedList:y.target.checked?l.value:[],indeterminate:!1})};X(()=>i.checkedList,y=>{var A;i.indeterminate=!!y.length&&y.length<l.value.length,i.checkAll=y.length===((A=l.value)==null?void 0:A.length)});const x=(y,A)=>{$(A).toggleClass("bx-chevron-up bx-chevron-down");const Q=$(`#question-item-answer-${y}`);Q&&$(Q).slideToggle()},C=f,p=O(!1),T=async()=>{i.checkAll=!1,i.checkedList=[],i.indeterminate=!1,p.value=!0,await u()},d=()=>{p.value=!1,k.folder!==null?C("backToFolderTestTemplateModal",k.folder):C("backToTestTemplateModal")};t({openModal:T,closeModal:d});const F={route:e,t:q,props:k,test_template_data:h,question_data:l,getData:u,QUESTION_FORMAT:r,questionTypeOptions:w,selectedQuestionTypes:b,searchValue:S,onFilter:z,importModalState:i,onCheckAll:o,toggleDisplayAnswer:x,emit:C,modal_open:p,openModal:T,closeModal:d,handleModalImport:()=>{re.confirm({title:"Are your sure? ",content:"Import: "+i.checkedList.length+"?",okText:"Confirm",onOk:()=>{var A;const y=(A=l.value)==null?void 0:A.filter(R=>i.checkedList.includes(R));C("import",y),p.value=!1}})},get QUESTION_TYPE(){return ee},Input:G};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}}),xt={class:"modal-container"},kt={class:"modal-title-container"},zt={class:"modal-content-item"},Ct={class:"content-item-section preview-section"},Mt={class:"section-content"},qt={class:"section-content-header"},It={class:"header-item"},At={class:"d-flex flex-fill align-items-center justify-content-end"},Ot={style:{width:"250px"}},Nt={class:"preview-question-container"},Lt={class:"preview-question-item"},Pt={class:"question-item-content"},Et=["innerHTML"],Ft={key:1,class:"question-text"},Rt=["id"],Qt={key:0,class:"multiple-choice-answer"},Dt={key:0,class:"text-success"},Ut={class:"pair-answer"},jt={class:"pair-answer-item"},Vt={class:"pair-answer-item"},Gt={key:2,class:"ordering-answer"},Ht={class:"ordering-answer-item"},Bt={class:"ordering-answer-item"},Yt={class:"ordering-answer-item"},Kt={class:"short-text-answer"},$t={class:"question-item-toogle-btn"},Xt=["onClick"];function Jt(v,t,f,e,q,k){const h=c("RouterLink"),l=c("a-col"),u=c("a-row"),r=c("a-checkbox"),w=c("a-select-option"),b=c("a-select"),S=c("a-checkbox-group"),z=c("a-button"),i=c("a-modal");return _(),P(i,{centered:"",width:"100%","wrap-class-name":"medium-modal large",open:e.modal_open,onCancel:e.closeModal},{footer:n(()=>[s(z,{class:"main-color-btn",size:"large",key:"submit",type:"primary",onClick:e.handleModalImport},{default:n(()=>t[12]||(t[12]=[M(" Import ")])),_:1,__:[12]})]),default:n(()=>[a("div",xt,[a("div",kt,[s(u,{class:"w-100 d-flex align-items-center"},{default:n(()=>[s(l,{span:1},{default:n(()=>[s(h,{onClick:e.closeModal,to:{name:""}},{default:n(()=>t[4]||(t[4]=[a("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[4]})]),_:1}),s(l,{class:"main-title",span:23},{default:n(()=>[a("span",null,m(v.$t("create_QS.title")),1),t[5]||(t[5]=M()),t[6]||(t[6]=a("br",null,null,-1)),a("span",null,m(v.$t("create_QS.sub_title")),1)]),_:1,__:[5,6]})]),_:1})]),a("div",zt,[a("div",Ct,[a("div",Mt,[a("div",qt,[s(r,{class:de(["header-item",e.importModalState.checkAll?"check-all":""]),onClick:e.onCheckAll,checked:e.importModalState.checkAll,"onUpdate:checked":t[0]||(t[0]=o=>e.importModalState.checkAll=o),indeterminate:e.importModalState.indeterminate},{default:n(()=>t[7]||(t[7]=[M(" Check all ")])),_:1,__:[7]},8,["class","checked","indeterminate"]),a("div",It," Selected: "+m(e.importModalState.checkedList.length),1),a("div",At,[s(b,{size:"large",class:"me-3",mode:"multiple",value:e.selectedQuestionTypes,"onUpdate:value":t[1]||(t[1]=o=>e.selectedQuestionTypes=o),placeholder:"Filter question types",style:{width:"fit-content","min-width":"300px"},onChange:e.onFilter},{default:n(()=>[(_(!0),g(N,null,L(e.questionTypeOptions,o=>(_(),P(w,{value:o.value},{default:n(()=>[M(m(o.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),a("div",Ot,[s(e.Input,{onInput:e.onFilter,modelValue:e.searchValue,"onUpdate:modelValue":t[2]||(t[2]=o=>e.searchValue=o),placeholder:e.t("class_index.other.search_class_placeholder")},{icon:n(()=>t[8]||(t[8]=[a("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),s(S,{value:e.importModalState.checkedList,"onUpdate:value":t[3]||(t[3]=o=>e.importModalState.checkedList=o)},{default:n(()=>[a("div",Nt,[(_(!0),g(N,null,L(e.question_data,(o,x)=>{var C,p;return _(),g("div",Lt,[s(r,{value:o},null,8,["value"]),a("div",Pt,[o.textFormat===e.QUESTION_FORMAT.HTML?(_(),g("div",{key:0,class:"question-html",innerHTML:o.questionText},null,8,Et)):(_(),g("div",Ft,m(o.questionText),1)),a("div",{class:"question-item-answer",id:`question-item-answer-${x}`},[o.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(_(),g("div",Qt,[a("ul",null,[(_(!0),g(N,null,L(o.questionData.multipleChoice,T=>(_(),g("li",null,[M(m(T.text)+" ",1),T.isAnswer?(_(),g("span",Dt," ("+m(T.isAnswer)+") ",1)):D("v-if",!0)]))),256))])])):D("v-if",!0),o.type===e.QUESTION_TYPE.MATCHING?(_(!0),g(N,{key:1},L((C=o.questionData.matching)==null?void 0:C.matches,T=>{var d,I,F,y;return _(),g("div",Ut,[a("span",jt,m((I=(d=o.questionData.matching)==null?void 0:d.leftItems.find(A=>A.id===T.leftId))==null?void 0:I.text),1),t[9]||(t[9]=a("i",{class:"bx bx-right-arrow-alt"},null,-1)),a("span",Vt,m((y=(F=o.questionData.matching)==null?void 0:F.rightItems.find(A=>A.id===T.rightId))==null?void 0:y.text),1)])}),256)):D("v-if",!0),o.type===e.QUESTION_TYPE.ORDERING?(_(),g("div",Gt,[a("div",Ht,[(_(!0),g(N,null,L(o.questionData.ordering,T=>(_(),g("div",null,m(T.text),1))),256))]),t[10]||(t[10]=a("i",{class:"bx bx-right-arrow-alt"},null,-1)),a("div",Bt,[(_(!0),g(N,null,L((p=o.questionData.ordering)==null?void 0:p.sort((T,d)=>T.correctOrder-d.correctOrder),(T,d)=>(_(),g("div",Yt,[a("span",null,"#"+m(T.correctOrder),1),M(" - "+m(T.text),1)]))),256))])])):D("v-if",!0),o.type===e.QUESTION_TYPE.SHORT_TEXT?(_(),g(N,{key:3},[t[11]||(t[11]=a("span",null,"Answer:",-1)),a("div",Kt,m(o.questionData.shortText),1)],64)):D("v-if",!0)],8,Rt)]),a("div",$t,[a("i",{class:"bx bx-chevron-up",onClick:T=>e.toggleDisplayAnswer(x,T.currentTarget)},null,8,Xt)])])}),256))])]),_:1},8,["value"])])])])])]),_:1},8,["open"])}const da=V(yt,[["render",Jt],["__scopeId","data-v-3653897f"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/ChooseQuestionModal.vue"]]);export{da as C,sa as S,K as T,me as a,ra as b,ia as c,la as d};
