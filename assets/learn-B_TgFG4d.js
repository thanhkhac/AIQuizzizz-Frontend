var ct=Object.defineProperty;var ut=(i,n,p)=>n in i?ct(i,n,{enumerable:!0,configurable:!0,writable:!0,value:p}):i[n]=p;var oe=(i,n,p)=>ut(i,typeof n!="symbol"?n+"":n,p);import{c,I as dt,J as he,d as mt,u as _t,q as vt,l as gt,g as ht,i as _,B as Pe,j as ft,s as pt,S as bt,k as se,G as wt,T as yt,_ as St,r as k,a as r,o as l,b as t,E as J,w as m,f,t as a,F as T,e as w,p as y,D as O}from"./index-LsQ9jhpY.js";import{A as ae}from"./ApiQuestionSet-C6iwwMx4.js";import{Q as q}from"./questionTypes-CS3lcRlq.js";import{T as Ct,l as Qt}from"./vue-draggable-plus-DJeBk1ur.js";import{V as It}from"./Validator-CWeiTIFe.js";import{D as xt}from"./index-Cykr_51r.js";import{H as Tt}from"./HolderOutlined-HUNdn8vC.js";/* empty css                                                                 */var kt={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112c17.7 0 32 14.3 32 32v736c0 17.7-14.3 32-32 32H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32zM639.98 338.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-square",theme:"filled"};function Ue(i){for(var n=1;n<arguments.length;n++){var p=arguments[n]!=null?Object(arguments[n]):{},e=Object.keys(p);typeof Object.getOwnPropertySymbols=="function"&&(e=e.concat(Object.getOwnPropertySymbols(p).filter(function(P){return Object.getOwnPropertyDescriptor(p,P).enumerable}))),e.forEach(function(P){At(i,P,p[P])})}return i}function At(i,n,p){return n in i?Object.defineProperty(i,n,{value:p,enumerable:!0,configurable:!0,writable:!0}):i[n]=p,i}var Me=function(n,p){var e=Ue({},n,p.attrs);return c(dt,Ue({},e,{icon:kt}),null)};Me.displayName="CloseSquareFilled";Me.inheritAttrs=!1;const qt={HTML:"Html",PLAIN_TEXT:"PlainText"},ze=[{id:"q1",quote:"Keep pushing. You're almost there!"},{id:"q2",quote:"Stay focused. You've got this!"},{id:"q3",quote:"One step at a time. Keep going!"},{id:"q4",quote:"You're doing great. Don't stop now!"},{id:"q5",quote:"Every effort counts. Keep it up!"},{id:"q6",quote:"Strong mind. Strong progress."},{id:"q7",quote:"Momentum is yours. Own it!"},{id:"q8",quote:"Eyes forward. Energy up!"},{id:"q9",quote:"You're closer than you think."},{id:"q10",quote:"Rise up. Power through!"}],Mt="/assets/trophy-BqY0IuVX.png",fe={GET_ALL_BY_QUESTION_ID:"Comment/Question/{questionId}",CREATE:"Comment/Question/{questionId}",REPLY:"Comment/{commentId}/Reply",DELETE:"Comment/{commentId}"};class Et{constructor(){oe(this,"GetAllByQuestionId",async n=>{const p=fe.GET_ALL_BY_QUESTION_ID.replace("{questionId}",n.questionId);return await he.get(p,{params:{pageNumber:n.pageNumber,pageSize:n.pageSize}})});oe(this,"Create",async n=>{const p=fe.CREATE.replace("{questionId}",n.questionId);return await he.post(p,n)});oe(this,"Reply",async n=>{const p=fe.REPLY.replace("{commentId}",n.commentId);return await he.post(p,n)});oe(this,"Delete",async n=>{const p=fe.DELETE.replace("{commentId}",n);return await he.delete(p)})}}const le=new Et,Ot=mt({__name:"learn",setup(i,{expose:n}){n();const p=new URL("/assets/confetti-bjvcnoca.lottie",import.meta.url).href,{t:e}=_t(),P=vt(),j=gt(),W=ht(),C=_({title:"",description:"",completedQuestionCount:0,totalQuestionCount:0,questions:[]}),L=_(P.params.id),H=_(!1),Z=_(!0),X=async()=>{if(H.value=!0,!It.isValidGuid(L.value.toString())){j.push({name:"404"});return}try{let s=await ae.GetDetailById(L.value.toString()),d=await ae.LearnQuestions(L.value.toString(),7);if(!s.data.success||!d.data.success){j.push({name:"404"});return}if(C.value=d.data.data,C.value.completedQuestionCount===C.value.totalQuestionCount){De();return}C.value.title=s.data.data.name,C.value.description=s.data.data.description,D.value=[...C.value.questions],v.value=D.value[0],D.value.shift()}catch(s){Object.keys(s.response.data.errors).includes(bt.PLAN_REQUIRE_PLAN)&&(Z.value=!1,j.back())}finally{H.value=!1}},pe=_(C.value.completedQuestionCount),I=_([]),A=_(new Set),D=_([]),R=_(!1),v=_({}),U=_(""),z=_(!1),o=_(!1),S=_([]),V=Pe(()=>{var s;return(s=v.value.questionData.multipleChoice)==null?void 0:s.some(d=>d.text.length>=100)}),x=_([]),b=_([]),M=_([]),Y=_(""),E=_({result:!1,resultText:e("learn_QS.result.wrong")}),re=Pe(()=>Math.floor(C.value.completedQuestionCount/C.value.totalQuestionCount*100)),F=()=>{var u;let s=(u=v.value.questionData.multipleChoice)==null?void 0:u.filter(g=>g.isAnswer).map(g=>g.id||[]).sort(),d=S.value.sort();return S.value.length!==(s==null?void 0:s.length)?!1:d.every((g,h)=>g===s[h])},Ve=s=>{var h;const d=C.value.questions.findIndex(Q=>Q.id===v.value.id);let u=(h=C.value.questions[d].questionData.multipleChoice)==null?void 0:h.filter(Q=>Q.isAnswer).map(Q=>Q.id||[]),g=S.value;return u!=null&&u.includes(s.id)?!0:!(g!=null&&g.includes(s.id)&&!s.isAnswer)},be=()=>{var u;let s=((u=v.value.questionData.ordering)==null?void 0:u.map(g=>g.correctOrder).sort())||[];return M.value.map(g=>g.correctOrder).every((g,h)=>g===s[h])},we=()=>{let s=v.value.questionData.matching.matches,d=x.value.map(h=>h.id),u=b.value.map(h=>h.id);return d.map((h,Q)=>({leftId:h,rightId:u[Q]})).every(h=>s.some(Q=>Q.leftId===h.leftId&&Q.rightId===h.rightId))},Ye=s=>{var Q,G;const d=v.value.questionData.matching;if(!d)return!1;let u=d.leftItems.some(N=>N.id===s),g=d.matches.find(N=>u?N.leftId===s:N.rightId===s);const h=u?x.value.findIndex(N=>N.id===s):b.value.findIndex(N=>N.id===s);return h===-1||!g?!1:u?((Q=b.value[h])==null?void 0:Q.id)===g.rightId:((G=x.value[h])==null?void 0:G.id)===g.leftId},ye=s=>s.trim().toLowerCase().normalize("NFKC").replace(/[\u2019\u2018\u201B\u0060]/g,"'").replace(/\s+/g," "),Se=()=>ye(Y.value)===ye(v.value.questionData.shortText),Fe=_(null),Ce=_(!1),ee=()=>{Ce.value=!Ce.value},Qe=_(!1),Be=W.getUserInfo(),te=_([]),ie=_(""),ne=_(null),ce=_(!1),K=ft({pageNumber:1,pageSize:10,questionId:""}),B=_(!1),Ie=_(1),ue=async()=>{B.value=!0;const s=await le.GetAllByQuestionId(K);s.data.success&&(te.value=s.data.data.items.filter(d=>!d.parentId),Ie.value=s.data.data.totalPages),B.value=!1},Ge=async()=>{try{B.value=!0;let s;if(ce.value&&ne.value?s=await le.Reply({commentId:ne.value.id,content:ie.value}):s=await le.Create({questionId:v.value.id,content:ie.value}),s.data.success){se.success(e("message.added_successfully")),await ue();return}se.error(e("message.added_failed"))}catch(s){console.log(s)}finally{B.value=!1}},je=async s=>{},Xe=async s=>{if((await le.Delete(s)).data.success){se.success(e("message.deleted_successfully")),await ue();return}se.error(e("message.deleted_failed")),Ee()},Ke=s=>{ce.value=!0,ne.value=s},Ee=()=>{ie.value="",ce.value=!1,ne.value=null},de=_([]),Je=s=>{de.value[s]=!de.value[s],$(`#reply-items-${s}`).slideToggle()},We=async()=>{K.pageNumber<Ie.value&&(K.pageNumber+=1),B.value=!0;const s=await le.GetAllByQuestionId(K);if(s.data.success){const d=s.data.data.items.filter(u=>!u.parentId);te.value=[...te.value,...d]}B.value=!1},Ze=async()=>{Qe.value=!0,K.questionId=v.value.id,await ue()},$e=()=>{Qe.value=!1},xe=()=>{ae.LearnHistory(L.value.toString(),[{questionId:v.value.id,isCorrect:!0}])},et=()=>{switch(ee(),z.value=!0,v.value.type){case q.MULTIPLE_CHOICE:{E.value={result:F(),resultText:F()?e("learn_QS.result.correct"):e("learn_QS.result.wrong")};break}case q.ORDERING:{E.value={result:be(),resultText:be()?e("learn_QS.result.correct"):e("learn_QS.result.wrong")};break}case q.MATCHING:{E.value={result:we(),resultText:we()?e("learn_QS.result.correct"):e("learn_QS.result.wrong")};break}case q.SHORT_TEXT:{E.value={result:Se(),resultText:Se()?e("learn_QS.result.correct"):e("learn_QS.result.wrong")};break}}E.value.result===!1&&!R.value?A.value.add(v.value):E.value.result&&R.value?(A.value.delete(v.value),I.value.push(v.value),C.value.completedQuestionCount+=1,xe()):E.value.result===!1?A.value.add(v.value):(I.value.push(v.value),C.value.completedQuestionCount+=1,xe()),ve()},tt=s=>{var d;switch(ee(),z.value=!0,o.value=!0,E.value={result:!1,resultText:e("learn_QS.result.skipped")},A.value.add(v.value),v.value.type){case q.MULTIPLE_CHOICE:{S.value=(d=v.value.questionData.multipleChoice)==null?void 0:d.filter(u=>u.isAnswer).map(u=>u.id);break}case q.MATCHING:{const u=v.value.questionData.matching,g=(u==null?void 0:u.matches)??[],h=(u==null?void 0:u.leftItems)??[],Q=(u==null?void 0:u.rightItems)??[],G=g.map(Ae=>h.find(qe=>qe.id==Ae.leftId)),N=g.map(Ae=>Q.find(qe=>qe.id==Ae.rightId));x.value=G,b.value=N;break}case q.ORDERING:{M.value=M.value.sort((u,g)=>u.correctOrder-g.correctOrder);break}case q.SHORT_TEXT:{Y.value=v.value.questionData.shortText;break}}ve()},me=()=>{var s;switch(v.value.type){case q.MULTIPLE_CHOICE:{U.value=e("learn_QS.instructions.multiple_choice",{number:(s=v.value.questionData.multipleChoice)==null?void 0:s.filter(d=>d.isAnswer).length}),S.value=[];break}case q.ORDERING:{U.value=e("learn_QS.instructions.matching"),M.value=v.value.questionData.ordering;break}case q.MATCHING:{U.value=e("learn_QS.instructions.ordering"),x.value=v.value.questionData.matching.leftItems,b.value=v.value.questionData.matching.rightItems;break}case q.SHORT_TEXT:{U.value=e("learn_QS.instructions.short_text"),Y.value="";break}}},nt=()=>{ge(),ve(),!(D.value.length<=0)&&(v.value=D.value.shift(),z.value=!1,o.value=!1,me(),ee())},_e=_(!1),Oe=_(""),Le=()=>{Oe.value=e(`learn_QS.final_modal.quotes.${ze[Math.floor(Math.random()*ze.length)].id}`),setTimeout(()=>{_e.value=!0},1e3)},ot=()=>{_e.value=!1},ve=async()=>{if(!(D.value.length>0)){if(A.value.size>0&&!R.value)R.value=!0,D.value=Array.from(A.value);else if(A.value.size===0&&!R.value||A.value.size>0&&R.value){const s=C.value.questions.map(d=>({questionId:d.id,isCorrect:I.value.some(u=>u.id===d.id)}));await ae.LearnHistory(L.value.toString(),s),Le();return}}},st=(s,d)=>{$(d).toggleClass("bx-chevron-down bx-chevron-up");const g=$(`#question-item-answer-${s}`);g&&$(g).slideToggle()},at=async()=>{await X(),R.value=!1,o.value=!1,z.value=!1,U.value="",_e.value=!1,A.value=new Set,I.value=[],ee(),me()},Te=_(!1),De=()=>{Te.value=!0,Ne()},Re=_(),ke=_(!1),Ne=()=>{var s,d;ke.value=!0,(d=(s=Re.value)==null?void 0:s.getDotLottieInstance())==null||d.play(),setTimeout(()=>{ke.value=!1},5e3)},lt=async()=>{(await ae.resetLearnHistory(L.value.toString())).data.success&&(se.success(e("learn_QS.msg.learn_mode_reset")),Te.value=!1,await X())},rt={scroll:!0,scrollSensitivity:100,scrollSpeed:100,scrollTarget:document.scrollingElement};function ge(){wt(()=>{requestAnimationFrame(()=>{const s=document.querySelectorAll(".matching-option-container.left .answer-option-matching"),d=document.querySelectorAll(".matching-option-container.right .answer-option-matching"),u=Math.min(s.length,d.length);for(let g=0;g<u;g++){const h=s[g],Q=d[g];if(!h||!Q)continue;h.style.height="auto",Q.style.height="auto";const G=Math.max(h.offsetHeight,Q.offsetHeight);h.style.height=`${G}px`,Q.style.height=`${G}px`}})})}const it=()=>{sessionStorage.setItem("setting_key","Subscription"),j.push({name:"User_Settings"})};pt(async()=>{await X(),me(),ge(),window.addEventListener("resize",ge),de.value=te.value.map(()=>!1)});const He={animationPath:p,t:e,route:P,router:j,authStore:W,quiz:C,questionSetId:L,loading:H,isAllowed:Z,getQuizData:X,totalCompleted:pe,completed:I,incorrect:A,currentSession:D,isCurrentSessionReLearn:R,currentQuestion:v,currentQuestionInstruction:U,currentQuestionIsSubmitted:z,currentQuestionIsSkipped:o,userAnswerMultipleChoice:S,isOptionExceed:V,userAnswerMatchingLeft:x,userAnswerMatchingRight:b,userAnswerOrdering:M,userAnswerShortText:Y,currentQuestionResult:E,completionPercentage:re,checkMultipleChoice:F,checkMultipleChoiceAnswerCorrect:Ve,checkOrdering:be,checkMatching:we,checkMatchingAnswerCorrect:Ye,cleanShortTextAnswer:ye,checkShortText:Se,explainModal:Fe,explainModalOpen:Ce,toggleExplainModal:ee,commentModalOpen:Qe,user_info:Be,currentQuestionComments:te,commentValue:ie,chosenComment:ne,isReplying:ce,commentPageParams:K,commentLoading:B,commentTotalPage:Ie,getCommentData:ue,onAddComment:Ge,onEditComment:je,onDeleteComment:Xe,onTriggerReply:Ke,onCancelReplying:Ee,repliesOpen:de,onToggleReplyContainer:Je,onLoadMoreComment:We,onOpenCommentModal:Ze,onCloseCommentModal:$e,sendCorrectQuestionHistory:xe,onSubmitAnswer:et,onSkipQuestion:tt,resetUserAnswer:me,onNextQuestion:nt,finalModalOpen:_e,finalModalQuote:Oe,openFinalModal:Le,closeFinalModal:ot,triggerFinalModal:ve,toggleDisplayAnswer:st,onContinuesLearn:at,completeModalOpen:Te,openCompleteModal:De,animationRef:Re,isAnimationDisplaying:ke,triggerAnimation:Ne,onResetLearnHistory:lt,dragOptions:rt,syncMatchingHeights:ge,onRedirectToSubcription:it,get QUESTION_FORMAT(){return qt},get QUESTION_TYPE(){return q},TextArea:Ct,get VueDraggable(){return Qt},get HolderOutlined(){return Tt},get CloseSquareFilled(){return Me},get dayjs(){return yt},get DotLottieVue(){return xt},get trophy_png(){return Mt}};return Object.defineProperty(He,"__isScriptSetup",{enumerable:!1,value:!0}),He}}),Lt={class:"page-container"},Dt={class:"title-container"},Rt={key:1,class:"progress-bar-container"},Nt={class:"progress-info"},Ht={class:"progress-info-number"},Pt={class:"progress-info-percentage"},Ut={class:"content"},zt={class:"content-item"},Vt={class:"section question-section"},Yt=["innerHTML"],Ft={class:"section answer-section"},Bt={key:0,class:"relearn-ins"},Gt={class:"d-flex align-items-center"},jt={class:"answer-section-ins"},Xt={class:"answer-option-content"},Kt={key:0,class:"bx bx-check answer-icon"},Jt={key:1,class:"bx bx-x answer-icon"},Wt={key:2,class:"answer-option-container matching"},Zt={class:"matching-option-container left"},$t={class:"d-flex align-items-center"},en={class:"answer-option-order"},tn={class:"answer-option-content"},nn={class:"matching-option-container right"},on={class:"d-flex align-items-center"},sn={class:"answer-option-content"},an={class:"answer-option-order"},ln={key:3,class:"answer-option-container ordering"},rn={class:"answer-option-order"},cn={class:"answer-option-content"},un={key:4,class:"answer-option-container"},dn={class:"w-100 d-flex align-items-center"},mn={key:0,class:"bx bx-check answer-icon"},_n={key:1,class:"bx bx-x answer-icon"},vn={key:0,class:"short-text-correct-answer"},gn={class:"learn-question-footer"},hn={class:"d-flex"},fn=["innerHTML"],pn={class:"comment-section"},bn={class:"comment-container"},wn={class:"comment-main-content"},yn={class:"w-100 d-flex flex-column"},Sn={class:"comment-content-info"},Cn={key:0,class:"comment-actions"},Qn={class:"comment-content"},In={class:"comment-reply"},xn=["onClick"],Tn=["onClick"],kn=["id"],An={class:"comment-item"},qn={class:"comment-main-content"},Mn={class:"w-100 d-flex flex-column"},En={class:"comment-content-info"},On={key:0,class:"comment-actions"},Ln={class:"comment-content"},Dn={key:1,class:"w-100 h-100 d-flex justify-content-center align-items-center"},Rn={key:0},Nn={key:1},Hn={class:"comment-form-footer"},Pn={class:"title-container"},Un={class:"content-item modal-final-container"},zn={class:"final-modal-quote"},Vn={class:"progress-bar-container final"},Yn={class:"progress-info"},Fn={class:"progress-info-percentage"},Bn={class:"progress-info"},Gn={class:"progress-info-percentage"},jn={class:"progress-info-percentage"},Xn={class:"content-item modal-final-container"},Kn={class:"preview-question-title"},Jn={class:"preview-question-container"},Wn={class:"preview-question-item"},Zn={class:"question-item-content"},$n=["innerHTML"],eo={key:1,class:"question-text"},to=["id"],no={key:0,class:"multiple-choice-answer"},oo={key:0,class:"text-success"},so={class:"pair-answer"},ao={class:"pair-answer-item"},lo={class:"pair-answer-item"},ro={key:2,class:"ordering-answer"},io={class:"ordering-answer-item"},co={class:"ordering-answer-item"},uo={class:"ordering-answer-item"},mo={class:"short-text-answer"},_o={class:"question-item-toogle-btn"},vo=["onClick"],go={class:"content-item final-modal-footer"},ho={class:"modal-complete-container"},fo={class:"content-item modal-complete"},po=["src"],bo={class:"modal-complete-content-container"},wo={class:"modal-complete-content"},yo={class:"modal-complete-content sub-content"},So={class:"modal-complete-buttons-container"},Co={key:1,class:"page-container"},Qo={class:"w-100 h-100 d-flex align-items-center justify-content-center"},Io={class:"d-flex justify-content-center"};function xo(i,n,p,e,P,j){const W=k("RouterLink"),C=k("a-col"),L=k("a-row"),H=k("a-skeleton"),Z=k("a-progress"),X=k("a-checkbox"),pe=k("a-checkbox-group"),I=k("a-button"),A=k("a-popconfirm"),D=k("a-empty"),R=k("a-form"),v=k("a-drawer"),U=k("a-divider"),z=k("a-result");return e.isAllowed?(l(),r(T,{key:0},[t("div",Lt,[t("div",Dt,[c(L,{class:"w-100 d-flex align-items-center"},{default:m(()=>[c(C,{span:1},{default:m(()=>[c(W,{to:{name:"User_Library"}},{default:m(()=>n[8]||(n[8]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[8]})]),_:1}),c(C,{class:"main-title",span:23},{default:m(()=>[t("span",null,a(e.quiz.title),1),n[9]||(n[9]=f()),n[10]||(n[10]=t("br",null,null,-1)),t("span",null,a(e.quiz.description),1)]),_:1,__:[9,10]})]),_:1})]),e.loading?(l(),J(H,{key:0,"activeactive:loading":"loading"})):(l(),r("div",Rt,[t("div",Nt,[t("div",Ht,a(i.$t("learn_QS.other.progress_count",{current:e.quiz.completedQuestionCount+1,total:e.quiz.totalQuestionCount})),1),t("div",Pt,[t("span",null,a(e.completionPercentage),1),f(" % "+a(i.$t("learn_QS.other.completed")),1)])]),c(Z,{"show-info":!1,"stroke-color":"#7C3AED",status:"active",percent:e.completionPercentage},null,8,["percent"])])),t("div",Ut,[t("div",zt,[e.loading?(l(),r(T,{key:0},[c(H,{active:"",loading:e.loading},null,8,["loading"]),c(H,{active:"",loading:e.loading},null,8,["loading"]),c(H,{active:"",loading:e.loading},null,8,["loading"])],64)):(l(),r(T,{key:1},[t("div",Vt,[t("div",{class:y(["learn-question"]),innerHTML:e.currentQuestion.questionText},null,8,Yt),w(` <div
                                :class="[
                                    'learn-question',
                                    currentQuestion.textFormat === QUESTION_FORMAT.HTML
                                        ? 'd-none'
                                        : '',
                                ]"
                            >
                                {{ currentQuestion.questionText }}
                            </div> `),t("div",Ft,[e.isCurrentSessionReLearn?(l(),r("div",Bt,a(i.$t("learn_QS.instructions.re_learn_ins")),1)):w("v-if",!0),t("div",Gt,[t("div",jt,a(e.currentQuestionInstruction),1),t("div",{class:y(["ms-3 learn-question-result",e.currentQuestionIsSubmitted?"":"d-none",e.currentQuestionIsSubmitted?e.currentQuestionResult.result?"result-correct":"result-incorrect":"",e.currentQuestionIsSkipped?"result-skipped":""])},a(e.currentQuestionResult.resultText),3)]),e.currentQuestion.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(l(),J(pe,{key:1,value:e.userAnswerMultipleChoice,"onUpdate:value":n[0]||(n[0]=o=>e.userAnswerMultipleChoice=o),class:y(["answer-option-container multiplechoice",e.isOptionExceed?"column":""])},{default:m(()=>[(l(!0),r(T,null,O(e.currentQuestion.questionData.multipleChoice,o=>(l(),J(X,{value:o.id,"onUpdate:value":S=>o.id=S,disabled:e.currentQuestionIsSubmitted,class:y(["answer-option answer-option-multiplechoice",e.currentQuestionIsSubmitted&&e.checkMultipleChoiceAnswerCorrect(o)&&o.isAnswer?"answer-correct":"",e.currentQuestionIsSubmitted&&!e.checkMultipleChoiceAnswerCorrect(o)&&!o.isAnswer?"answer-incorrect":""])},{default:m(()=>[t("div",Xt,a(o.text),1),e.currentQuestionIsSubmitted&&e.checkMultipleChoiceAnswerCorrect(o)&&o.isAnswer?(l(),r("i",Kt)):w("v-if",!0),e.currentQuestionIsSubmitted&&!e.checkMultipleChoiceAnswerCorrect(o)&&!o.isAnswer?(l(),r("i",Jt)):w("v-if",!0)]),_:2},1032,["value","onUpdate:value","disabled","class"]))),256))]),_:1},8,["value","class"])):w("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.MATCHING?(l(),r("div",Wt,[t("div",Zt,[c(e.VueDraggable,{disabled:e.currentQuestionIsSubmitted,modelValue:e.userAnswerMatchingLeft,"onUpdate:modelValue":n[1]||(n[1]=o=>e.userAnswerMatchingLeft=o),options:e.dragOptions,onEnd:e.syncMatchingHeights},{default:m(()=>[(l(!0),r(T,null,O(e.userAnswerMatchingLeft,(o,S)=>(l(),r("div",$t,[t("div",{class:y(["answer-option answer-option-matching",e.currentQuestionIsSubmitted?e.checkMatchingAnswerCorrect(o.id)?"answer-correct":"answer-incorrect":""])},[t("div",en,[c(e.HolderOutlined)]),t("div",tn,a(o.text),1)],2),t("i",{class:y(["bx bxs-label matching-icon",e.currentQuestionIsSubmitted?e.checkMatchingAnswerCorrect(o.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2)]))),256))]),_:1},8,["disabled","modelValue"])]),t("div",nn,[c(e.VueDraggable,{disabled:e.currentQuestionIsSubmitted,modelValue:e.userAnswerMatchingRight,"onUpdate:modelValue":n[2]||(n[2]=o=>e.userAnswerMatchingRight=o),options:e.dragOptions,onEnd:e.syncMatchingHeights},{default:m(()=>[(l(!0),r(T,null,O(e.userAnswerMatchingRight,(o,S)=>(l(),r("div",on,[t("i",{class:y(["bx bxs-label matching-icon",e.currentQuestionIsSubmitted?e.checkMatchingAnswerCorrect(o.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2),t("div",{class:y(["answer-option answer-option-matching",e.currentQuestionIsSubmitted?e.checkMatchingAnswerCorrect(o.id)?"answer-correct":"answer-incorrect":""])},[t("div",sn,a(o.text),1),t("div",an,[c(e.HolderOutlined)])],2)]))),256))]),_:1},8,["disabled","modelValue"])])])):w("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.ORDERING?(l(),r("div",ln,[c(e.VueDraggable,{disabled:e.currentQuestionIsSubmitted,modelValue:e.userAnswerOrdering,"onUpdate:modelValue":n[3]||(n[3]=o=>e.userAnswerOrdering=o),options:e.dragOptions},{default:m(()=>[(l(!0),r(T,null,O(e.userAnswerOrdering,(o,S)=>(l(),r("div",{class:y(["answer-option answer-option-ordering",e.currentQuestionIsSubmitted?S===o.correctOrder?"answer-correct":"answer-incorrect":""])},[t("div",rn,[c(e.HolderOutlined),f(" "+a(S+1),1)]),t("div",cn,a(o.text),1),t("div",{class:y(["answer-option-order answer-icon",e.currentQuestionIsSubmitted?"":"d-none"])},[n[11]||(n[11]=t("i",{class:"bx bx-hash answer-icon"},null,-1)),f(" "+a(o.correctOrder),1)],2)],2))),256))]),_:1},8,["disabled","modelValue"])])):w("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.SHORT_TEXT?(l(),r("div",un,[t("div",{layout:"vertical",class:y(["answer-short-text",e.currentQuestionIsSubmitted?e.checkShortText()?"answer-correct":"answer-incorrect":""])},[t("div",dn,[c(e.TextArea,{readonly:e.currentQuestionIsSubmitted,placeholder:"Enter your answer...",modelValue:e.userAnswerShortText,"onUpdate:modelValue":n[4]||(n[4]=o=>e.userAnswerShortText=o)},null,8,["readonly","modelValue"]),e.currentQuestionIsSubmitted&&e.checkShortText()?(l(),r("i",mn)):w("v-if",!0),e.currentQuestionIsSubmitted&&!e.checkShortText()?(l(),r("i",_n)):w("v-if",!0)]),e.currentQuestionIsSubmitted&&!e.checkShortText()?(l(),r("div",vn,[f(a(i.$t("learn_QS.instructions.short_text_answer"))+" ",1),t("span",null,a(e.currentQuestion.questionData.shortText),1)])):w("v-if",!0)],2)])):w("v-if",!0)])]),t("div",gn,[t("div",{class:y(["main-color-btn-ghost",e.currentQuestionIsSubmitted?"main-color-btn-ghost-disabled":""]),onClick:n[5]||(n[5]=o=>e.onSkipQuestion(o))},a(i.$t("learn_QS.buttons.dont_know")),3),t("div",hn,[t("div",{class:y(["main-color-btn-ghost me-3",e.currentQuestionIsSubmitted?"":"d-none"]),onClick:e.onOpenCommentModal},[n[12]||(n[12]=t("i",{class:"bx bx-conversation me-2"},null,-1)),f(" "+a(i.$t("learn_QS.buttons.comment")),1)],2),t("div",{class:y(["main-color-btn-ghost me-3",e.currentQuestionIsSubmitted?"":"d-none"]),onClick:e.toggleExplainModal},[n[13]||(n[13]=t("i",{class:"bx bx-bulb me-2"},null,-1)),f(" "+a(i.$t("learn_QS.buttons.explaination")),1)],2),c(I,{class:y(["main-color-btn",e.currentQuestionIsSubmitted?"main-color-btn-disabled":""]),type:"primary",size:"large",onClick:e.onSubmitAnswer},{default:m(()=>[f(a(i.$t("learn_QS.buttons.submit")),1)]),_:1},8,["class"])])])],64))]),t("div",{ref:"explainModal",class:y(["explain-modal explain-modal-up",{show:e.explainModalOpen}])},[t("div",{class:"learn-question-explain",innerHTML:e.currentQuestion.explainText},null,8,fn),c(I,{class:y(["main-color-btn close-modal-btn"]),type:"primary",size:"large",onClick:e.toggleExplainModal},{default:m(()=>n[14]||(n[14]=[t("i",{class:"bx bx-chevrons-down"},null,-1)])),_:1,__:[14]}),c(I,{class:y(["main-color-btn",e.currentSession.length<=0?"main-color-btn-disabled":""]),type:"primary",size:"large",onClick:e.onNextQuestion},{default:m(()=>[f(a(i.$t("learn_QS.buttons.next_question"))+" ",1),n[15]||(n[15]=t("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[15]},8,["class"])],2),c(v,{width:500,title:"Comment section",placement:"right",open:e.commentModalOpen,onClose:e.onCloseCommentModal},{default:m(()=>[t("div",pn,[t("div",bn,[e.currentQuestionComments.length>0?(l(),r(T,{key:0},[(l(!0),r(T,null,O(e.currentQuestionComments,(o,S)=>{var V;return l(),r("div",{class:y(["comment-item",((V=e.chosenComment)==null?void 0:V.id)===o.id?"comment-item-chosen":""])},[t("div",wn,[n[19]||(n[19]=t("i",{class:"bx bx-user-circle comment-user-img"},null,-1)),t("div",yn,[t("div",Sn,[f(a(o.createBy.fullName)+" ",1),t("span",null,a(e.dayjs(o.createdAt).format("DD/MM/YYYY HH:mm")),1),o.createBy.userId===e.user_info.id?(l(),r("div",Cn,[w(` <i
                                                        class="me-3 bx bx-edit"
                                                        @click="onEditComment(comment.id)"
                                                    ></i> `),c(A,{class:"pop-confirm-delete",title:i.$t("create_QS.quiz.confirm"),onConfirm:x=>e.onDeleteComment(o.id)},{default:m(()=>[...n[16]||(n[16]=[t("i",{class:"text-danger bx bx-trash-alt"},null,-1)])]),_:2},1032,["title","onConfirm"])])):w("v-if",!0)]),t("div",Qn,a(o.content),1),t("div",In,[t("div",{class:"comment-reply-btn",onClick:x=>e.onTriggerReply(o)}," Reply ",8,xn),t("div",{class:"comment-children-open-btn",onClick:x=>e.onToggleReplyContainer(S)},a(e.repliesOpen[S]?"Close":"View")+" ("+a(o.childComments.length)+") replies ",9,Tn)]),t("div",{id:"reply-items-"+S,class:"child-comment-container",style:{display:"none"}},[(l(!0),r(T,null,O(o.childComments,(x,b)=>(l(),r("div",An,[t("div",qn,[n[18]||(n[18]=t("i",{class:"bx bx-user-circle comment-user-img"},null,-1)),t("div",Mn,[t("div",En,[f(a(x.createBy.fullName)+" ",1),t("span",null,a(e.dayjs(x.createdAt).format("DD/MM/YYYY HH:mm")),1),x.createBy.userId===e.user_info.id?(l(),r("div",On,[w(` <i
                                                                        class="me-3 bx bx-edit"
                                                                        @click="
                                                                            onEditComment(
                                                                                childComment.id,
                                                                            )
                                                                        "
                                                                    ></i> `),c(A,{class:"pop-confirm-delete",title:i.$t("create_QS.quiz.confirm"),onConfirm:M=>e.onDeleteComment(x.id)},{default:m(()=>[...n[17]||(n[17]=[t("i",{class:"text-danger bx bx-trash-alt"},null,-1)])]),_:2},1032,["title","onConfirm"])])):w("v-if",!0)]),t("div",Ln,a(x.content),1)])])]))),256))],8,kn)])])],2)}),256)),e.commentLoading?(l(),J(H,{key:0,loading:e.commentLoading},null,8,["loading"])):w("v-if",!0),e.commentPageParams.pageNumber<e.commentTotalPage?(l(),J(I,{key:1,type:"primary",class:"main-color-btn",onClick:e.onLoadMoreComment,loading:e.commentLoading},{default:m(()=>n[20]||(n[20]=[f(" Load more ")])),_:1,__:[20]},8,["loading"])):w("v-if",!0)],64)):(l(),r("div",Dn,[c(D,null,{description:m(()=>n[21]||(n[21]=[t("span",null,"No one has commented yet.",-1)])),_:1})]))]),c(R,{layout:"vertical",class:"comment-form"},{default:m(()=>{var o;return[e.isReplying?(l(),r("label",Rn," Replying to @"+a((o=e.chosenComment)==null?void 0:o.createBy.fullName),1)):(l(),r("label",Nn,"Your comment")),c(e.TextArea,{value:e.commentValue,"onUpdate:value":n[6]||(n[6]=S=>e.commentValue=S),placeholder:"Enter comment","max-length":500},null,8,["value"]),t("div",Hn,[c(I,{type:"primary",shape:"round",class:y(["me-3 main-color-btn-ghost",e.isReplying?"":"main-color-btn-ghost-disabled"]),onClick:e.onCancelReplying},{default:m(()=>[f(a(i.$t("learn_QS.buttons.cancel")),1)]),_:1},8,["class"]),c(I,{loading:e.commentLoading,type:"primary",shape:"round",class:y(["main-color-btn",e.commentValue?"":"main-color-btn-disabled"]),onClick:e.onAddComment},{default:m(()=>[f(a(i.$t("learn_QS.buttons.send_comment")),1)]),_:1},8,["loading","class"])])]}),_:1})])]),_:1},8,["open"])])]),c(v,{open:e.finalModalOpen,placement:"top",height:"100vh",closable:!1,onClose:e.closeFinalModal,"body-style":{padding:0,height:"100%"}},{title:m(()=>[t("div",Pn,[c(L,{class:"w-100 d-flex align-items-center"},{default:m(()=>[c(C,{span:1},{default:m(()=>[c(W,{to:{name:"User_Library"}},{default:m(()=>n[22]||(n[22]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[22]})]),_:1}),c(C,{class:"main-title",span:23},{default:m(()=>[t("span",null,a(e.quiz.title),1),n[23]||(n[23]=f()),n[24]||(n[24]=t("br",null,null,-1))]),_:1,__:[23,24]})]),_:1})])]),default:m(()=>[t("div",Un,[t("div",zn,a(e.finalModalQuote),1)]),t("div",Vn,[t("div",Yn,[t("div",Fn,[f(a(i.$t("learn_QS.other.total_set_progress"))+" ",1),t("span",null,a(e.completionPercentage)+"%",1)])]),c(Z,{"show-info":!1,"stroke-color":"#7C3AED",status:"active",percent:e.completionPercentage},null,8,["percent"]),t("div",Bn,[t("div",Gn,[f(a(i.$t("learn_QS.other.completed"))+": ",1),t("span",null,a(e.quiz.completedQuestionCount),1)]),t("div",jn,[f(a(i.$t("learn_QS.other.total_question"))+" ",1),t("span",null,a(e.quiz.totalQuestionCount),1)])])]),t("div",Xn,[c(U,{style:{"background-color":"var(--content-item-border-color)"}}),t("div",Kn,a(i.$t("learn_QS.other.preview_modal_title")),1),t("div",Jn,[(l(!0),r(T,null,O(e.completed,(o,S)=>{var V,x;return l(),r("div",Wn,[t("div",Zn,[o.textFormat===e.QUESTION_FORMAT.HTML?(l(),r("div",{key:0,class:"question-html",innerHTML:o.questionText},null,8,$n)):(l(),r("div",eo,a(o.questionText),1)),t("div",{class:"question-item-answer",id:`question-item-answer-${S}`},[o.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(l(),r("div",no,[t("ul",null,[(l(!0),r(T,null,O(o.questionData.multipleChoice,b=>(l(),r("li",null,[f(a(b.text)+" ",1),b.isAnswer?(l(),r("span",oo," ("+a(b.isAnswer)+") ",1)):w("v-if",!0)]))),256))])])):w("v-if",!0),o.type===e.QUESTION_TYPE.MATCHING?(l(!0),r(T,{key:1},O((V=o.questionData.matching)==null?void 0:V.matches,b=>{var M,Y,E,re;return l(),r("div",so,[t("span",ao,a((Y=(M=o.questionData.matching)==null?void 0:M.leftItems.find(F=>F.id===b.leftId))==null?void 0:Y.text),1),n[25]||(n[25]=t("i",{class:"bx bx-right-arrow-alt"},null,-1)),t("span",lo,a((re=(E=o.questionData.matching)==null?void 0:E.rightItems.find(F=>F.id===b.rightId))==null?void 0:re.text),1)])}),256)):w("v-if",!0),o.type===e.QUESTION_TYPE.ORDERING?(l(),r("div",ro,[t("div",io,[(l(!0),r(T,null,O(o.questionData.ordering,b=>(l(),r("div",null,a(b.text),1))),256))]),n[26]||(n[26]=t("i",{class:"bx bx-right-arrow-alt"},null,-1)),t("div",co,[(l(!0),r(T,null,O((x=o.questionData.ordering)==null?void 0:x.sort((b,M)=>b.correctOrder-M.correctOrder),(b,M)=>(l(),r("div",uo,[t("span",null,"#"+a(b.correctOrder),1),f(" - "+a(b.text),1)]))),256))])])):w("v-if",!0),o.type===e.QUESTION_TYPE.SHORT_TEXT?(l(),r(T,{key:3},[n[27]||(n[27]=t("span",null,"Answer:",-1)),t("div",mo,a(o.questionData.shortText),1)],64)):w("v-if",!0)],8,to)]),t("div",_o,[t("i",{class:"bx bx-chevron-up",onClick:b=>e.toggleDisplayAnswer(S,b.currentTarget)},null,8,vo)])])}),256))]),t("div",go,[t("div",null,a(i.$t("learn_QS.other.preview_modal_continues_ins")),1),c(I,{class:y(["main-color-btn"]),type:"primary",size:"large",shape:"round",onClick:e.onContinuesLearn},{default:m(()=>[f(a(i.$t("learn_QS.buttons.continue")),1)]),_:1})])])]),_:1},8,["open"]),c(v,{open:e.completeModalOpen,placement:"top",height:"100vh",closable:!1,onClose:e.closeFinalModal,"body-style":{padding:0,height:"100%"}},{default:m(()=>[e.isAnimationDisplaying?(l(),J(e.DotLottieVue,{key:0,autoplay:e.isAnimationDisplaying,ref:"animationRef",class:y(["animation-container"]),onComplete:n[7]||(n[7]=o=>e.isAnimationDisplaying=!1),src:e.animationPath},null,8,["autoplay","src"])):w("v-if",!0),t("div",ho,[t("div",fo,[t("img",{class:"modal-complete-img",src:e.trophy_png,alt:""},null,8,po),t("div",bo,[t("div",wo,a(i.$t("learn_QS.other.complete_modal_congratulation")),1),t("div",yo,a(i.$t("learn_QS.other.complete_modal_ins")),1)]),t("div",So,[c(I,{type:"primary",class:"main-color-btn ghost-btn",size:"large"},{default:m(()=>[f(a(i.$t("learn_QS.buttons.back_to_home")),1)]),_:1}),c(I,{type:"primary",class:"main-color-btn",size:"large"},{default:m(()=>[f(a(i.$t("learn_QS.buttons.take_a_test")),1)]),_:1}),c(I,{type:"primary",class:"main-color-btn",size:"large",onClick:e.onResetLearnHistory},{default:m(()=>[f(a(i.$t("learn_QS.buttons.reset_learn_mode")),1)]),_:1})])])])]),_:1},8,["open"])],64)):(l(),r("div",Co,[t("div",Qo,[c(z,{status:"error",title:e.t("now_allowed.main_msg"),"sub-title":e.t("now_allowed.errorMessage")},{icon:m(()=>[c(e.CloseSquareFilled)]),extra:m(()=>[t("div",Io,[c(I,{key:"console",type:"primary",class:"me-3 main-color-btn"},{default:m(()=>[f(a(i.$t("now_allowed.libraryNavigator")),1)]),_:1}),c(I,{onClick:e.onRedirectToSubcription,key:"buy",type:"ghost",class:"main-color-btn-ghost"},{default:m(()=>[f(a(i.$t("now_allowed.subscriptionNavigator")),1)]),_:1})])]),_:1},8,["title","sub-title"])])]))}const Ro=St(Ot,[["render",xo],["__scopeId","data-v-5fe31f19"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/question_sets/learn.vue"]]);export{Ro as default};
