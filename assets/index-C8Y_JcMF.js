var j=Object.defineProperty;var G=(i,a,_)=>a in i?j(i,a,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[a]=_;var I=(i,a,_)=>G(i,typeof a!="symbol"?a+"":a,_);import{N as R,d as Y,q as H,l as K,h as Q,u as W,H as J,i as z,j as k,K as X,s as Z,k as T,_ as $,r as d,a as N,o as g,b as o,c as n,g as v,t as c,w as s,F as A,B,C as ee}from"./index-C4kWnLRR.js";import{I as ae}from"./Input-DeK_4m_9.js";const D={GET_ALL_BY_LIMIT:"Folder",CREATE:"Folder"};class te{constructor(){I(this,"GetAllByLimit",async a=>await R.get(`${D.GET_ALL_BY_LIMIT}`,{params:{pageNumber:a.pageNumber||1,pageSize:a.pageSize||10,folderName:a.folderName||"",shareMode:a.shareMode||""}}));I(this,"Create",async a=>await R.post(`${D.CREATE}`,a))}}const O=new te,P={ALL:"All",OWNER:"Owner",EDITABLE:"Editable",VIEW_ONLY:"ViewOnly"},oe=Y({__name:"index",emits:["updateSidebar"],setup(i,{expose:a,emit:_}){var q;a();const e=H(),b=K(),E=Q(),{t:h}=W(),p=_,F=Object.values(P),y=J(()=>F.map(l=>({label:h(`folder_index.select_option.${l}`),value:l!==P.ALL?l:""}))),S=z([]),t=k({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,folderName:((q=e.query.folderName)==null?void 0:q.toString())||"",shareMode:e.query.shareMode||y.value[0].value,totalCount:0,statusFilter:!1}),m=async()=>{try{let l=await O.GetAllByLimit(t);if(l.data.success){let u=l.data.data;S.value=u.items,t.pageNumber=u.pageNumber,t.pageSize=u.pageSize,t.totalCount=u.totalCount,t.statusFilter&&(t.pageNumber>u.totalPages&&t.totalCount>0?(t.pageNumber=1,b.push({name:"User_Folder",query:{pageNumber:1,pageSize:t.pageSize,name:t.folderName,shareMode:t.shareMode}})):b.push({name:"User_Folder",query:{pageNumber:t.pageNumber,pageSize:t.pageSize,name:t.folderName,shareMode:t.shareMode}}),t.statusFilter=!t.statusFilter)}}catch(l){console.log("ERROR: GETALLBYLIMIT folder: "+l)}};X(()=>{var l;Object.keys(e.query).length===0&&(t.pageNumber=e.query.pageNumber||1,t.pageSize=e.query.pageSize||10,t.folderName=((l=e.query.folderName)==null?void 0:l.toString())||"",t.shareMode=e.query.shareMode||y.value[0].value,t.statusFilter=!0,m())});const w=(l,u)=>{t.pageNumber=l,t.pageSize=u,t.statusFilter=!0,m()},L={folderName:[{required:!0,message:"This field is required.",trigger:"change"},{max:100,message:"Limit 100.",trigger:"change"}]},x=z(!1),C=z(),r=k({folderName:""}),f=z(!1),U=async()=>{f.value=!0;try{if(await C.value.validate(),!(await O.Create(r)).data.success){T.error("Create folder failed");return}x.value=!1,T.success("Create folder successfully."),await m()}catch(l){console.log(l)}finally{f.value=!1}},V=l=>{b.push({name:"User_Folder_Detail",params:{id:l}})};Z(async()=>{p("updateSidebar","folder"),await m()});const M={route:e,router:b,authStore:E,t:h,emit:p,optionKeys:F,folder_share_mode_options:y,folder_data:S,pageParams:t,getData:m,onPaginationChange:w,rules:L,modal_create_open:x,createFolderFormRef:C,createFolderFormState:r,isCreateLoading:f,onCreateFolder:U,onRedirectToFolderDetail:V,Input:ae};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}}),re={class:"page-container"},le={class:"title-container"},ne={class:"main-title"},se={class:"title-button-container"},ie={class:"content"},de={class:"content-item"},ce={class:"content-item-functions"},me={class:"content-item-navigators"},_e={class:"navigator-container"},ue={class:"filter-container"},pe={style:{width:"300px",padding:"0px"}},fe={class:"folder-container"},ge={class:"folder"},ve={class:"folder-name"},be={key:1,class:"w-100 m-2 d-flex justify-content-center"},he={class:"pagination-container"},ye={class:"modal-container"},Ne={class:"modal-title-container"};function Fe(i,a,_,e,b,E){const h=d("a-button"),p=d("RouterLink"),F=d("a-select-option"),y=d("a-select"),S=d("a-empty"),t=d("a-pagination"),m=d("a-col"),w=d("a-row"),L=d("a-form-item"),x=d("a-form"),C=d("a-modal");return g(),N(A,null,[o("div",re,[o("div",le,[o("div",ne,[o("span",null,c(i.$t("folder_index.title")),1),a[7]||(a[7]=v()),a[8]||(a[8]=o("br",null,null,-1)),o("span",null,c(i.$t("folder_index.sub_title")),1)]),o("div",se,[n(h,{type:"primary",class:"ms-3 main-color-btn",size:"large",onClick:a[0]||(a[0]=r=>e.modal_create_open=!0)},{default:s(()=>[v(c(i.$t("folder_index.buttons.create_folder"))+" ",1),a[9]||(a[9]=o("i",{class:"bx bx-plus"},null,-1))]),_:1,__:[9]})])]),o("div",ie,[o("div",de,[o("div",ce,[o("div",me,[o("div",_e,[n(p,{class:"navigator-item navigator-active",to:{name:""}},{default:s(()=>[v(c(i.$t("folder_index.navigators.folder")),1)]),_:1}),n(p,{class:"navigator-item",to:{name:""}},{default:s(()=>[v(c(i.$t("folder_index.navigators.test_template")),1)]),_:1})])]),o("div",ue,[n(y,{class:"me-3",value:e.pageParams.shareMode,"onUpdate:value":a[1]||(a[1]=r=>e.pageParams.shareMode=r),style:{width:"200px"},onChange:e.getData},{default:s(()=>[(g(!0),N(A,null,B(e.folder_share_mode_options,r=>(g(),ee(F,{value:r.value},{default:s(()=>[v(c(r.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),o("div",pe,[n(e.Input,{onInput:e.getData,modelValue:e.pageParams.folderName,"onUpdate:modelValue":a[2]||(a[2]=r=>e.pageParams.folderName=r),placeholder:e.t("class_index.other.search_class_placeholder")},{icon:s(()=>a[10]||(a[10]=[o("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),o("div",fe,[e.folder_data.length>0?(g(!0),N(A,{key:0},B(e.folder_data,r=>(g(),N("div",ge,[a[11]||(a[11]=o("div",{class:"folder-icon"},[o("div",{class:"folder-top"}),o("div",{class:"folder-body"})],-1)),o("div",ve,c(r.name),1)]))),256)):(g(),N("div",be,[n(S,null,{description:s(()=>[o("span",null,c(i.$t("folder_index.other.no_data_matches")),1)]),_:1})]))]),o("div",he,[n(t,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":a[3]||(a[3]=r=>e.pageParams.pageNumber=r),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(r,f)=>`${f[0]}-${f[1]} of ${r} ${e.t("folder_index.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("folder_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])]),n(C,{centered:"","wrap-class-name":"medium-modal",open:e.modal_create_open,onCancel:a[6]||(a[6]=r=>e.modal_create_open=!1)},{footer:s(()=>[n(h,{loading:e.isCreateLoading,class:"main-color-btn",key:"submit",type:"primary",onClick:e.onCreateFolder},{default:s(()=>[v(c(e.t("folder_index.buttons.create")),1)]),_:1},8,["loading"])]),default:s(()=>[o("div",ye,[o("div",Ne,[n(w,{class:"w-100 d-flex align-items-center"},{default:s(()=>[n(m,{span:4},{default:s(()=>[n(p,{onClick:a[4]||(a[4]=r=>e.modal_create_open=!1),to:{name:""}},{default:s(()=>a[12]||(a[12]=[o("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[12]})]),_:1}),n(m,{class:"main-title",span:20},{default:s(()=>[o("span",null,c(e.t("folder_index.modal.create_title")),1)]),_:1})]),_:1})]),n(x,{ref:"createFolderFormRef",layout:"vertical",rules:e.rules,model:e.createFolderFormState},{default:s(()=>[n(L,{label:e.t("folder_index.modal.create_folder_name_label"),name:"folderName"},{default:s(()=>[n(e.Input,{value:e.createFolderFormState.folderName,"onUpdate:value":a[5]||(a[5]=r=>e.createFolderFormState.folderName=r),placeholder:e.t("folder_index.modal.create_folder_name_placeholder"),"is-required":!0,"max-length":100},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1},8,["open"])],64)}const ze=$(oe,[["render",Fe],["__scopeId","data-v-e2bbfdc4"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/folder/index.vue"]]);export{ze as default};
