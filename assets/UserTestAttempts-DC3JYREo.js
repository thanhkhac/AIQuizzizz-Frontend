import{d as M,q as E,l as N,u as Y,i as I,S as y,_ as z,r as o,C as w,o as i,w as a,b as s,a as m,t as c,c as T,e as u,f as A,F as U}from"./index-75kEPr5A.js";import{A as j,T as D}from"./ApiTest-BeRKtV4T.js";import"./lodash-DCqUkyqI.js";const q=M({__name:"UserTestAttempts",props:{testId:{type:String,required:!0},userId:{type:[String,null],required:!0},testName:{type:String,required:!0},studentName:{type:[String,null],required:!0},passingScore:{type:[Number,null],required:!0}},setup(v,{expose:d}){const g=E(),e=N(),{t:n}=Y(),S=v,_=I(!1),p=async()=>{_.value=!0,await b()},k=()=>{_.value=!1};d({openModal:p,closeModal:k});const x=I([]),f=I(!1),b=async()=>{try{f.value=!0;let t=await j.GetUserExamHistory(S.testId,S.userId);if(t.data.success){let r=t.data.data;x.value=r.items}}catch(t){console.log("ERROR: GETALLEXAMBYLIMIT user exam result: "+t)}finally{f.value=!1}},h=[{title:n("user_attempts_modal.columns.no"),key:"no",customRender:t=>t.index+1},{title:n("user_attempts_modal.columns.start"),dataIndex:"timeStart",key:"timeStart",sorter:(t,r)=>y(t.timeStart).unix()-y(r.timeStart).unix()},{title:n("user_attempts_modal.columns.submit"),dataIndex:"timeSubmit",key:"timeSubmit",sorter:(t,r)=>y(t.timeSubmit).unix()-y(r.timeSubmit).unix()},{title:n("user_attempts_modal.columns.student_score"),dataIndex:"score",key:"score",sorter:(t,r)=>t.score-r.score},{title:n("user_attempts_modal.columns.result"),dataIndex:"status",key:"status"},{title:n("user_attempts_modal.columns.action"),dataIndex:"action",key:"action"}],l={route:g,router:e,t:n,props:S,modal_open:_,openModal:p,closeModal:k,attemptData:x,loading:f,getData:b,columns:h,getTagColor:t=>{switch(t){case D.PASSED:return"#22C55E";case D.FAILED:return"#cd201f"}},onRedirectToReview:t=>{e.push({name:"User_Test_Review",params:{id:t}})},get dayjs(){return y}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),L={class:"modal-container"},B={class:"modal-title-container"},F={class:"content"},H={class:"content-item"},V={class:"content-item-title"},G={key:0,class:"text-nowrap"},O={key:1,class:"text-nowrap"},P={key:1,class:"w-110 d-flex justify-content-center"};function Q(v,d,g,e,n,S){const _=o("RouterLink"),p=o("a-col"),k=o("a-row"),x=o("a-tag"),f=o("a-button"),b=o("a-table"),h=o("a-config-provider"),R=o("a-empty"),C=o("a-modal");return i(),w(C,{centered:"",width:"100%","wrap-class-name":"medium-modal large",open:e.modal_open,onCancel:e.closeModal},{footer:a(()=>d[1]||(d[1]=[])),default:a(()=>[s("div",L,[s("div",B,[m(k,{class:"w-100 d-flex align-items-center"},{default:a(()=>[m(p,{span:1},{default:a(()=>[m(_,{onClick:e.closeModal,to:{name:""}},{default:a(()=>d[0]||(d[0]=[s("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[0]})]),_:1}),m(p,{class:"main-title",span:23},{default:a(()=>[s("span",null,c(g.testName),1)]),_:1})]),_:1})]),s("div",F,[s("div",H,[s("div",V,[s("div",null,[s("span",null,c(g.studentName),1)])]),e.attemptData.length>0?(i(),w(h,{key:0,locale:{Table:{cancelSort:"",triggerAsc:"",triggerDesc:""}}},{default:a(()=>[m(b,{columns:e.columns,"data-source":e.attemptData,"row-key":"studentId",pagination:!1},{bodyCell:a(({column:l,record:t})=>[l.key==="timeStart"?(i(),T("div",G,c(e.dayjs(t.timeStart).format("DD/MM/YYYY HH:mm:ss")),1)):u("v-if",!0),l.key==="timeSubmit"?(i(),T("div",O,c(e.dayjs(t.timeSubmit).format("DD/MM/YYYY HH:mm:ss")),1)):u("v-if",!0),u(` <template v-if="column.key === 'passingScore' && passingScore">
                                    <div class="text-nowrap">{{ passingScore }}%</div>
                                </template> `),l.key==="status"?(i(),w(x,{key:2,color:e.getTagColor(t.status)},{default:a(()=>[A(c(t.status),1)]),_:2},1032,["color"])):u("v-if",!0),l.key==="action"?(i(),T(U,{key:3},[t.canReview?(i(),w(f,{key:0,type:"ghost",class:"main-color-btn-ghost",onClick:r=>e.onRedirectToReview(t.attemptId)},{default:a(()=>[A(c(v.$t("user_attempts_modal.buttons.review")),1)]),_:2},1032,["onClick"])):u("v-if",!0)],64)):u("v-if",!0)]),_:1},8,["data-source"])]),_:1})):(i(),T("div",P,[m(R,null,{description:a(()=>[s("span",null,c(v.$t("class_index.other.no_data_matches")),1)]),_:1})]))])])])]),_:1},8,["open"])}const W=z(q,[["render",Q],["__scopeId","data-v-84e7c737"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/UserTestAttempts.vue"]]);export{W as U};
