import{d as Q,q as K,l as W,g as Y,u as X,i as _,B as Z,j as P,C as $,s as ee,k as N,_ as ae,r as c,a as f,o as p,b as t,c as o,e as se,f as v,t as r,w as i,F as q,D as O,E as te}from"./index-BeJw_uqm.js";import{A as L}from"./ApiClass-H0WOumOR.js";import{I as le}from"./Input-lf_t6EsR.js";/* empty css                                                              */const V={ALL:"All",TEACHER:"Teacher",STUDENT:"Student",OWNER:"Owner"},oe=Q({__name:"index",emits:["updateSidebar"],setup(b,{expose:a,emit:E}){var B;a();const e=K(),x=W(),I=Y(),{t:d}=X(),k=E,R=_(I.getUserInfo()),C=Object.values(V),h=Z(()=>C.map(n=>({label:d(`class_index.select_option.${n}`),value:n!==V.ALL?n:""}))),l=P({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,name:((B=e.query.name)==null?void 0:B.toString())||"",shareMode:e.query.shareMode||h.value[0].value,totalCount:0,statusFilter:!1}),S=_([]),u=_(!1),m=async()=>{try{u.value=!0;let n=await L.GetAllByLimit(l);if(n.data.success){let g=n.data.data;S.value=g.items,l.pageNumber=g.pageNumber,l.pageSize=g.pageSize,l.totalCount=g.totalCount,l.statusFilter&&(l.pageNumber>g.totalPages&&l.totalCount>0?(l.pageNumber=1,x.push({name:"User_Class",query:{pageNumber:1,pageSize:l.pageSize,name:l.name,shareMode:l.shareMode}})):x.push({name:"User_Class",query:{pageNumber:l.pageNumber,pageSize:l.pageSize,name:l.name,shareMode:l.shareMode}}),l.statusFilter=!l.statusFilter)}}catch(n){console.log("ERROR: GETALLBYLIMIT class: "+n)}finally{u.value=!1}};$(()=>Object.keys(e.query).length,()=>{var n;l.pageNumber=e.query.pageNumber||1,l.pageSize=e.query.pageSize||10,l.name=((n=e.query.name)==null?void 0:n.toString())||"",l.shareMode=e.query.shareMode||h.value[0].value,l.statusFilter=!0,m()});const F=(n,g)=>{l.pageNumber=n,l.pageSize=g,l.statusFilter=!0,m()},j={code:[{required:!0,message:"This field is required.",trigger:"change"}],name:[{required:!0,message:"This field is required.",trigger:"change"},{max:100,message:"Limit 100.",trigger:"change"}],topic:[{max:100,message:"Limit 100",trigger:"change"}]},w=_(!1),s=_(),y=P({code:""}),A=_(!1),J=async()=>{A.value=!0;try{if(await s.value.validate(),!(await L.JoinClass(y)).data.success){N.error(d("message.join_class_failed"));return}w.value=!1,N.success(d("message.join_class_successfully")),await m()}catch(n){console.log(n)}finally{A.value=!1}},T=_(!1),U=_(),z=P({name:"",topic:""}),M=_(!1),G=async()=>{M.value=!0;try{await U.value.validate();let n;if(z.topic&&(n=await L.Create({name:z.name,topic:z.topic})),n=await L.Create({name:z.name}),!n.data.success){N.error("Create class failed");return}T.value=!1,N.success("Create class successfully."),await m()}catch(n){console.log(n)}finally{M.value=!1}},H=n=>{x.push({name:"User_Class_Exam",params:{id:n}})};ee(async()=>{k("updateSidebar","class"),await m()});const D={route:e,router:x,authStore:I,t:d,emit:k,user:R,optionKeys:C,class_credit_options:h,pageParams:l,class_data:S,loading:u,getData:m,onPaginationChange:F,rules:j,modal_join_class_open:w,joinClassFormRef:s,joinClassFormState:y,isJoinLoading:A,onJoinClass:J,modal_create_class_open:T,createClassFormRef:U,createClassFormState:z,isCreateLoading:M,onCreateClass:G,onRedirectToClassDetail:H,Input:le};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}}),ne={class:"page-container"},ie={class:"title-container"},re={class:"main-title"},ce={class:"title-button-container"},de={class:"content"},me={class:"content-item"},_e={class:"content-item-functions"},ue={class:"filter-container"},pe={style:{width:"300px",padding:"0px"}},ge={key:1,class:"class-container"},fe=["onClick"],ve={class:"class-item-name"},be={class:"class-item-topic"},Ce={class:"class-item-owner"},ye={key:1,class:"w-100 m-2 d-flex justify-content-center"},xe={class:"pagination-container"},he={class:"modal-container"},Se={class:"modal-title-container"},we={class:"modal-container"},ze={class:"modal-title-container"};function ke(b,a,E,e,x,I){const d=c("a-button"),k=c("a-select-option"),R=c("a-select"),C=c("a-skeleton"),h=c("a-empty"),l=c("a-pagination"),S=c("RouterLink"),u=c("a-col"),m=c("a-row"),F=c("a-form"),j=c("a-modal"),w=c("a-form-item");return p(),f(q,null,[t("div",ne,[t("div",ie,[t("div",re,[t("span",null,r(b.$t("class_index.title")),1),a[12]||(a[12]=v()),a[13]||(a[13]=t("br",null,null,-1)),t("span",null,r(b.$t("class_index.sub_title")),1)]),t("div",ce,[o(d,{type:"primary",class:"main-color-btn",size:"large",onClick:a[0]||(a[0]=s=>e.modal_join_class_open=!0)},{default:i(()=>[v(r(b.$t("class_index.buttons.join_class"))+" ",1),a[14]||(a[14]=t("i",{class:"bx bx-log-in"},null,-1))]),_:1,__:[14]}),o(d,{type:"primary",class:"ms-3 main-color-btn",size:"large",onClick:a[1]||(a[1]=s=>e.modal_create_class_open=!0)},{default:i(()=>[v(r(b.$t("class_index.buttons.create_class"))+" ",1),a[15]||(a[15]=t("i",{class:"bx bx-plus"},null,-1))]),_:1,__:[15]})])]),t("div",de,[t("div",me,[t("div",_e,[t("div",ue,[o(R,{class:"me-3",value:e.pageParams.shareMode,"onUpdate:value":a[2]||(a[2]=s=>e.pageParams.shareMode=s),style:{width:"200px"},onChange:e.getData},{default:i(()=>[(p(!0),f(q,null,O(e.class_credit_options,s=>(p(),te(k,{value:s.value},{default:i(()=>[v(r(s.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),t("div",pe,[o(e.Input,{onInput:e.getData,modelValue:e.pageParams.name,"onUpdate:modelValue":a[3]||(a[3]=s=>e.pageParams.name=s),placeholder:e.t("class_index.other.search_class_placeholder")},{icon:i(()=>a[16]||(a[16]=[t("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),e.loading?(p(),f(q,{key:0},[o(C,{active:"",loading:e.loading},null,8,["loading"]),o(C,{active:"",loading:e.loading},null,8,["loading"]),o(C,{active:"",loading:e.loading},null,8,["loading"])],64)):(p(),f("div",ge,[e.class_data.length>0?(p(!0),f(q,{key:0},O(e.class_data,s=>(p(),f("div",{class:"class-item",onClick:y=>e.onRedirectToClassDetail(s.classId)},[t("div",ve,r(s.name),1),t("div",be,r(s.topic),1),t("div",Ce,[a[17]||(a[17]=t("i",{class:"bx bxs-user"},null,-1)),v(" "+r(s.owner),1)])],8,fe))),256)):(p(),f("div",ye,[o(h,null,{description:i(()=>[t("span",null,r(b.$t("class_index.other.no_data_matches")),1)]),_:1})]))])),t("div",xe,[o(l,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":a[4]||(a[4]=s=>e.pageParams.pageNumber=s),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(s,y)=>`${y[0]}-${y[1]} of ${s} ${e.t("class_index.other.items")}`,"show-size-changer":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("class_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])]),o(j,{centered:"","wrap-class-name":"medium-modal",open:e.modal_join_class_open,onCancel:a[7]||(a[7]=s=>e.modal_join_class_open=!1)},{footer:i(()=>[o(d,{loading:e.isJoinLoading,class:"main-color-btn",key:"submit",type:"primary",onClick:e.onJoinClass},{default:i(()=>[v(r(e.t("class_index.buttons.join")),1)]),_:1},8,["loading"])]),default:i(()=>[t("div",he,[t("div",Se,[o(m,{class:"w-100 d-flex align-items-center"},{default:i(()=>[o(u,{span:4},{default:i(()=>[o(S,{onClick:a[5]||(a[5]=s=>e.modal_join_class_open=!1),to:{name:""}},{default:i(()=>a[18]||(a[18]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[18]})]),_:1}),o(u,{class:"main-title",span:20},{default:i(()=>[t("span",null,r(e.t("class_index.modal.join_title")),1)]),_:1})]),_:1})]),o(F,{ref:"joinClassFormRef",model:e.joinClassFormState,layout:"vertical",rules:e.rules},{default:i(()=>[o(e.Input,{label:e.t("class_index.modal.join_class_code_label"),name:"code",value:e.joinClassFormState.code,"onUpdate:value":a[6]||(a[6]=s=>e.joinClassFormState.code=s),placeholder:e.t("class_index.modal.join_class_code_placeholder"),"is-required":!0},null,8,["label","value","placeholder"])]),_:1},8,["model"])])]),_:1},8,["open"]),se(" create modal "),o(j,{centered:"","wrap-class-name":"medium-modal",open:e.modal_create_class_open,onCancel:a[11]||(a[11]=s=>e.modal_create_class_open=!1)},{footer:i(()=>[o(d,{loading:e.isCreateLoading,class:"main-color-btn",key:"submit",type:"primary",onClick:e.onCreateClass},{default:i(()=>[v(r(e.t("class_index.buttons.create")),1)]),_:1},8,["loading"])]),default:i(()=>[t("div",we,[t("div",ze,[o(m,{class:"w-100 d-flex align-items-center"},{default:i(()=>[o(u,{span:4},{default:i(()=>[o(S,{onClick:a[8]||(a[8]=s=>e.modal_create_class_open=!1),to:{name:""}},{default:i(()=>a[19]||(a[19]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[19]})]),_:1}),o(u,{class:"main-title",span:20},{default:i(()=>[t("span",null,r(e.t("class_index.modal.create_title")),1)]),_:1})]),_:1})]),o(F,{ref:"createClassFormRef",layout:"vertical",rules:e.rules,model:e.createClassFormState},{default:i(()=>[o(w,null,{default:i(()=>[o(e.Input,{label:e.t("class_index.modal.create_class_name_label"),name:"name",value:e.createClassFormState.name,"onUpdate:value":a[9]||(a[9]=s=>e.createClassFormState.name=s),placeholder:e.t("class_index.modal.create_class_name_placeholder"),"is-required":!0,"max-length":100},null,8,["label","value","placeholder"])]),_:1}),o(w,null,{default:i(()=>[o(e.Input,{label:e.t("class_index.modal.create_class_topic_label"),name:"topic",value:e.createClassFormState.topic,"onUpdate:value":a[10]||(a[10]=s=>e.createClassFormState.topic=s),placeholder:e.t("class_index.modal.create_class_topic_placeholder"),"max-length":100},null,8,["label","value","placeholder"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["open"])],64)}const Le=ae(oe,[["render",ke],["__scopeId","data-v-958f51f8"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/class/index.vue"]]);export{Le as default};
