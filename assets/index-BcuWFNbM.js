import{A as k}from"./ApiClass-Ja1Aotqb.js";import{_ as Z,r as c,a as y,o as b,b as t,c as o,f as $,g,t as i,w as n,F as I,B as O,C as ee,q as B,l as J,h as V,u as H,i as m,H as G,j as N,K,s as Q,k as S}from"./index-C4kWnLRR.js";import{I as ae}from"./Input-DeK_4m_9.js";const M={ALL:"All",TEACHER:"Teacher",STUDENT:"Student",OWNER:"Owner"},se={__name:"index",emits:["updateSidebar"],setup(f,{expose:a,emit:P}){a();const e=B(),C=J(),q=V(),{t:u}=H(),w=P,A=m(q.getUserInfo()),z=Object.values(M),h=G(()=>z.map(r=>({label:u(`class_index.select_option.${r}`),value:r!==M.ALL?r:""}))),l=N({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,name:e.query.name||"",shareMode:e.query.shareMode||h.value[0].value,totalCount:0,statusFilter:!1}),_=m([]),d=async()=>{try{let r=await k.GetAllByLimit(l);if(r.data.success){let p=r.data.data;_.value=p.items,l.pageNumber=p.pageNumber,l.pageSize=p.pageSize,l.totalCount=p.totalCount,l.statusFilter&&(l.pageNumber>p.totalPages&&l.totalCount>0?(l.pageNumber=1,C.push({name:"User_Class",query:{pageNumber:1,pageSize:l.pageSize,name:l.name,shareMode:l.shareMode}})):C.push({name:"User_Class",query:{pageNumber:l.pageNumber,pageSize:l.pageSize,name:l.name,shareMode:l.shareMode}}),l.statusFilter=!l.statusFilter)}}catch(r){console.log("ERROR: GETALLBYLIMIT class: "+r)}};K(()=>{Object.keys(e.query).length===0&&(l.pageNumber=e.query.pageNumber||1,l.pageSize=e.query.pageSize||10,l.name=e.query.name||"",l.shareMode=e.query.shareMode||h.value[0].value,l.statusFilter=!0,d())});const x=(r,p)=>{l.pageNumber=r,l.pageSize=p,l.statusFilter=!0,d()},F={code:[{required:!0,message:"This field is required.",trigger:"change"}],name:[{required:!0,message:"This field is required.",trigger:"change"},{max:100,message:"Limit 100.",trigger:"change"}],topic:[{max:100,message:"Limit 100",trigger:"change"}]},j=m(!1),s=m(),v=N({code:""}),L=m(!1),W=async()=>{L.value=!0;try{if(await s.value.validate(),!(await k.JoinClass(v)).data.success){S.error("Join class failed");return}S.success("Join class successfully."),await d()}catch(r){console.log(r)}finally{L.value=!1}},E=m(!1),U=m(),T=N({name:"",topic:""}),R=m(!1),Y=async()=>{R.value=!0;try{if(await U.value.validate(),!(await k.Create(T)).data.success){S.error("Create class failed");return}E.value=!1,S.success("Create class successfully."),await d()}catch(r){console.log(r)}finally{R.value=!1}},X=r=>{C.push({name:"User_Class_Exam",params:{id:r}})};Q(async()=>{w("updateSidebar","class"),await d()});const D={route:e,router:C,authStore:q,t:u,emit:w,user:A,optionKeys:z,class_credit_options:h,pageParams:l,class_data:_,getData:d,onPaginationChange:x,rules:F,modal_join_class_open:j,joinClassFormRef:s,joinClassFormState:v,isJoinLoading:L,onJoinClass:W,modal_create_class_open:E,createClassFormRef:U,createClassFormState:T,isCreateLoading:R,onCreateClass:Y,onRedirectToClassDetail:X,get ApiClass(){return k},get CLASS_SHARE_MODE(){return M},ref:m,onMounted:Q,reactive:N,computed:G,onUpdated:K,get useI18n(){return H},get useAuthStore(){return V},get useRoute(){return B},get useRouter(){return J},Input:ae,get message(){return S}};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}},te={class:"page-container"},le={class:"title-container"},oe={class:"main-title"},ne={class:"title-button-container"},re={class:"content"},ie={class:"content-item"},ce={class:"content-item-functions"},de={class:"filter-container"},me={style:{width:"300px",padding:"0px"}},ue={class:"class-container"},_e=["onClick"],pe={class:"class-item-name"},ge={class:"class-item-topic"},fe={class:"class-item-owner"},ve={key:1,class:"w-100 m-2 d-flex justify-content-center"},be={class:"pagination-container"},Ce={class:"modal-container"},he={class:"modal-title-container"},xe={class:"modal-container"},ye={class:"modal-title-container"};function Se(f,a,P,e,C,q){const u=c("a-button"),w=c("a-select-option"),A=c("a-select"),z=c("a-empty"),h=c("a-pagination"),l=c("RouterLink"),_=c("a-col"),d=c("a-row"),x=c("a-form-item"),F=c("a-form"),j=c("a-modal");return b(),y(I,null,[t("div",te,[t("div",le,[t("div",oe,[t("span",null,i(f.$t("class_index.title")),1),a[12]||(a[12]=g()),a[13]||(a[13]=t("br",null,null,-1)),t("span",null,i(f.$t("class_index.sub_title")),1)]),t("div",ne,[o(u,{type:"primary",class:"main-color-btn",size:"large",onClick:a[0]||(a[0]=s=>e.modal_join_class_open=!0)},{default:n(()=>[g(i(f.$t("class_index.buttons.join_class"))+" ",1),a[14]||(a[14]=t("i",{class:"bx bx-log-in"},null,-1))]),_:1,__:[14]}),o(u,{type:"primary",class:"ms-3 main-color-btn",size:"large",onClick:a[1]||(a[1]=s=>e.modal_create_class_open=!0)},{default:n(()=>[g(i(f.$t("class_index.buttons.create_class"))+" ",1),a[15]||(a[15]=t("i",{class:"bx bx-plus"},null,-1))]),_:1,__:[15]})])]),t("div",re,[t("div",ie,[t("div",ce,[t("div",de,[o(A,{class:"me-3",value:e.pageParams.shareMode,"onUpdate:value":a[2]||(a[2]=s=>e.pageParams.shareMode=s),style:{width:"200px"},onChange:e.getData},{default:n(()=>[(b(!0),y(I,null,O(e.class_credit_options,s=>(b(),ee(w,{value:s.value},{default:n(()=>[g(i(s.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),t("div",me,[o(e.Input,{onInput:e.getData,modelValue:e.pageParams.name,"onUpdate:modelValue":a[3]||(a[3]=s=>e.pageParams.name=s),placeholder:e.t("class_index.other.search_class_placeholder")},{icon:n(()=>a[16]||(a[16]=[t("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),t("div",ue,[e.class_data.length>0?(b(!0),y(I,{key:0},O(e.class_data,s=>(b(),y("div",{class:"class-item",onClick:v=>e.onRedirectToClassDetail(s.classId)},[t("div",pe,i(s.name),1),t("div",ge,i(s.topic),1),t("div",fe,[a[17]||(a[17]=t("i",{class:"bx bxs-user"},null,-1)),g(" "+i(s.owner),1)])],8,_e))),256)):(b(),y("div",ve,[o(z,null,{description:n(()=>[t("span",null,i(f.$t("class_index.other.no_data_matches")),1)]),_:1})]))]),t("div",be,[o(h,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":a[4]||(a[4]=s=>e.pageParams.pageNumber=s),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(s,v)=>`${v[0]}-${v[1]} of ${s} ${e.t("class_index.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("class_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])]),o(j,{centered:"","wrap-class-name":"medium-modal",open:e.modal_join_class_open,onCancel:a[7]||(a[7]=s=>e.modal_join_class_open=!1)},{footer:n(()=>[o(u,{loading:e.isJoinLoading,class:"main-color-btn",key:"submit",type:"primary",onClick:e.onJoinClass},{default:n(()=>[g(i(e.t("class_index.buttons.join")),1)]),_:1},8,["loading"])]),default:n(()=>[t("div",Ce,[t("div",he,[o(d,{class:"w-100 d-flex align-items-center"},{default:n(()=>[o(_,{span:4},{default:n(()=>[o(l,{onClick:a[5]||(a[5]=s=>e.modal_join_class_open=!1),to:{name:""}},{default:n(()=>a[18]||(a[18]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[18]})]),_:1}),o(_,{class:"main-title",span:20},{default:n(()=>[t("span",null,i(e.t("class_index.modal.join_title")),1)]),_:1})]),_:1})]),o(F,{ref:"joinClassFormRef",model:e.joinClassFormState,layout:"vertical",rules:e.rules},{default:n(()=>[o(x,{label:e.t("class_index.modal.join_class_code_label"),name:"code"},{default:n(()=>[o(e.Input,{value:e.joinClassFormState.code,"onUpdate:value":a[6]||(a[6]=s=>e.joinClassFormState.code=s),placeholder:e.t("class_index.modal.join_class_code_placeholder"),"is-required":!0},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1},8,["open"]),$(" create modal "),o(j,{centered:"","wrap-class-name":"medium-modal",open:e.modal_create_class_open,onCancel:a[11]||(a[11]=s=>e.modal_create_class_open=!1)},{footer:n(()=>[o(u,{loading:e.isCreateLoading,class:"main-color-btn",key:"submit",type:"primary",onClick:e.onCreateClass},{default:n(()=>[g(i(e.t("class_index.buttons.create")),1)]),_:1},8,["loading"])]),default:n(()=>[t("div",xe,[t("div",ye,[o(d,{class:"w-100 d-flex align-items-center"},{default:n(()=>[o(_,{span:4},{default:n(()=>[o(l,{onClick:a[8]||(a[8]=s=>e.modal_create_class_open=!1),to:{name:""}},{default:n(()=>a[19]||(a[19]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[19]})]),_:1}),o(_,{class:"main-title",span:20},{default:n(()=>[t("span",null,i(e.t("class_index.modal.create_title")),1)]),_:1})]),_:1})]),o(F,{ref:"createClassFormRef",layout:"vertical",rules:e.rules,model:e.createClassFormState},{default:n(()=>[o(x,{label:e.t("class_index.modal.create_class_name_label"),name:"name"},{default:n(()=>[o(e.Input,{value:e.createClassFormState.name,"onUpdate:value":a[9]||(a[9]=s=>e.createClassFormState.name=s),placeholder:e.t("class_index.modal.create_class_name_placeholder"),"is-required":!0,"max-length":100},null,8,["value","placeholder"])]),_:1},8,["label"]),o(x,{label:e.t("class_index.modal.create_class_topic_label"),name:"topic"},{default:n(()=>[o(e.Input,{value:e.createClassFormState.topic,"onUpdate:value":a[10]||(a[10]=s=>e.createClassFormState.topic=s),placeholder:e.t("class_index.modal.create_class_topic_placeholder"),"max-length":100},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1},8,["open"])],64)}const je=Z(se,[["render",Se],["__scopeId","data-v-958f51f8"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/class/index.vue"]]);export{je as default};
