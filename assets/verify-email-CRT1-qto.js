import{d as O,k as q,m as B,i as z,h as g,l as I,A as E,_ as L,r,a as A,b as i,c as t,g as p,t as s,w as n,F as M,o as N,n as F}from"./index-DRXsinxR.js";import{M as U}from"./MailOutlined-D7zPn7yJ.js";import{L as Q}from"./LockOutlined-CMGJFBrS.js";const T=O({__name:"verify-email",setup(l,{expose:a}){a();const y=q(),{t:e}=B(),C=sessionStorage.getItem("email"),S=z({email:C,verificationCode:""}),u=z({email:sessionStorage.getItem("email")}),m={email:[{required:!0,message:"Vui lòng không để trống mục này.",trigger:"change"},{pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Vui lòng nhập đúng định dạng email",trigger:"change"}],verificationCode:[{required:!0,message:"Vui lòng không để trống mục này.",trigger:"change"}]},R=g(),v={span:24},h={span:24},k=g(!1),b=g(!1),d=g(!1),o=g(!1),c=(f,_,V)=>{I[f]({message:_,description:V})},w={router:y,t:e,sessionEmail:C,formState:S,resentFormState:u,rules:m,formRef:R,labelCol:v,wrapperCol:h,modal_open:k,modal_is_success:b,send_button_loading:d,verify_button_loading:o,showNotification:c,onRequestEmailVerification:async()=>{try{d.value=!0;var f=await E.RequestEmailVerification({email:u.email});if(f.data.success){c("success","Send email result","Success"),sessionStorage.setItem("email",u.email?u.email:""),b.value=!0;return}c("error","Send email result","ERROR")}catch(_){console.log(_)}finally{d.value=!1}},onFinish:async()=>{try{o.value=!0;var f=await E.VerifyEmail(S);if(!f.data.success){c("error","Send email result","ERROR");return}c("success","Send email result","Success. Redirecting...")}catch(_){console.log(_)}finally{o.value=!1}setTimeout(()=>{y.push({name:"login"})},3e3)},get LockOutlined(){return Q},get MailOutlined(){return U}};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),j={class:"authentication-item"},D={class:"authentication-item-title"},P={class:"authentication-item-navigator"};function G(l,a,y,e,C,S){const u=r("a-input"),m=r("a-form-item"),R=r("a-input-password"),v=r("a-button"),h=r("a-form"),k=r("RouterLink"),b=r("a-result"),d=r("a-modal");return N(),A(M,null,[i("div",j,[i("div",D,[i("span",null,s(l.$t("auth.greetings.verify_email")),1),a[5]||(a[5]=p()),a[6]||(a[6]=i("br",null,null,-1)),i("span",null,s(l.$t("auth.instructions.verify_email",{email:e.sessionEmail})),1)]),t(h,{class:"authentication-item-form",ref:"formRef",model:e.formState,labelCol:e.labelCol,wrapperCol:e.wrapperCol,rules:e.rules},{default:n(()=>[t(m,{label:"",name:"email"},{default:n(()=>[i("label",null,s(l.$t("auth.inputs.email")),1),t(u,{size:"large",value:e.formState.email,"onUpdate:value":a[0]||(a[0]=o=>e.formState.email=o),placeholder:l.$t("auth.inputs.email")},{addonBefore:n(()=>[t(e.MailOutlined)]),_:1},8,["value","placeholder"])]),_:1}),t(m,{label:"",name:"verificationCode"},{default:n(()=>[i("label",null,s(l.$t("auth.inputs.code")),1),t(R,{size:"large",value:e.formState.verificationCode,"onUpdate:value":a[1]||(a[1]=o=>e.formState.verificationCode=o),placeholder:l.$t("auth.inputs.code")},{addonBefore:n(()=>[t(e.LockOutlined)]),_:1},8,["value","placeholder"])]),_:1}),t(m,null,{default:n(()=>[t(v,{loading:e.verify_button_loading,onClick:e.onFinish,size:"large",type:"primary",style:{"background-color":"#9823f5",width:"100%"}},{default:n(()=>[p(s(l.$t("auth.buttons.signUp")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),i("div",P,[p(s(l.$t("auth.navigators.resend_email"))+" ",1),t(k,{to:{name:""},onClick:a[2]||(a[2]=o=>e.modal_open=!0)},{default:n(()=>[p(s(l.$t("auth.buttons.resend")),1)]),_:1})])]),t(d,{visible:e.modal_open,title:"",onCancel:a[4]||(a[4]=o=>e.modal_open=!1),centered:""},{footer:n(()=>a[7]||(a[7]=[])),default:n(()=>[t(h,{class:F(["authentication-item-form",e.modal_is_success?"d-none":""]),ref:"formRef",model:e.resentFormState,labelCol:e.labelCol,wrapperCol:e.wrapperCol,rules:e.rules},{default:n(()=>[t(m,{label:"",name:"email"},{default:n(()=>[i("label",null,s(l.$t("auth.inputs.email")),1),t(u,{size:"large",value:e.resentFormState.email,"onUpdate:value":a[3]||(a[3]=o=>e.resentFormState.email=o),placeholder:l.$t("auth.inputs.email")},{addonBefore:n(()=>[t(e.MailOutlined)]),_:1},8,["value","placeholder"])]),_:1}),t(m,null,{default:n(()=>[t(v,{loading:e.send_button_loading,onClick:e.onRequestEmailVerification,size:"large",type:"primary",style:{"background-color":"#9823f5",width:"100%"}},{default:n(()=>[p(s(l.$t("auth.buttons.send")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["class","model"]),t(b,{class:F([e.modal_is_success?"":"d-none"]),status:"success",title:"Email sent successfully!","sub-title":l.$t("auth.instructions.verify_email",{email:e.resentFormState.email})},null,8,["class","sub-title"])]),_:1},8,["visible"])],64)}const Y=L(T,[["render",G],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/public/verify-email.vue"]]);export{Y as default};
