import{z as it,d as ot,q as rt,l as at,u as lt,i as I,B as Z,j as ct,T as de,s as ut,S as dt,M as ht,G as mt,_ as ft,r as H,a as y,o as p,c as _,E as he,e as B,b as s,p as C,w as x,f as U,t as f,F as ee,D as re}from"./index-DpsX2GFI.js";import{A as Re}from"./ApiQuestionSet-BFHE0-5K.js";import{H as gt,Q as vt}from"./questionTextFormat-C4xBDw4R.js";import{Q as q}from"./questionTypes-CS3lcRlq.js";import{D as _t}from"./index-BXMbnSEL.js";import{T as pt,l as bt}from"./vue-draggable-plus-VN-_ajwE.js";import{H as Ee}from"./highcharts-RHyXvOFE.js";import{V as yt}from"./Validator-CWeiTIFe.js";/* empty css                                                                 */class xt{shuffleArray(r,Q=5){let e=[],R=0;do{e=r.slice();for(let h=e.length-1;h>0;h--){const u=Math.floor(Math.random()*(h+1));[e[h],e[u]]=[e[u],e[h]]}if(R++,r.length<=1)break}while(e.every((h,u)=>h===r[u])&&R<Q);return e}shuffleQuestionOptions(r){const Q=JSON.parse(JSON.stringify(r));return Q.type===q.MATCHING&&Q.questionData.matching&&(Q.questionData.matching.rightItems=this.shuffleArray(Q.questionData.matching.rightItems)),Q.type===q.ORDERING&&Q.questionData.ordering&&(Q.questionData.ordering=this.shuffleArray(Q.questionData.ordering.sort((e,R)=>e.correctOrder-R.correctOrder))),Q}}const St=new xt;var me={exports:{}},wt=me.exports,De;function Tt(){return De||(De=1,function(k,r){(function(Q,e){k.exports=e()})(wt,function(){var Q,e,R=1e3,h=6e4,u=36e5,D=864e5,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,P=31536e6,A=2628e6,J=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,K={years:P,months:A,days:D,hours:u,minutes:h,seconds:R,milliseconds:1,weeks:6048e5},Y=function(g){return g instanceof W},F=function(g,c,i){return new W(g,i,c.$l)},V=function(g){return e.p(g)+"s"},X=function(g){return g<0},L=function(g){return X(g)?Math.ceil(g):Math.floor(g)},b=function(g){return Math.abs(g)},G=function(g,c){return g?X(g)?{negative:!0,format:""+b(g)+c}:{negative:!1,format:""+g+c}:{negative:!1,format:""}},W=function(){function g(i,w,M){var T=this;if(this.$d={},this.$l=M,i===void 0&&(this.$ms=0,this.parseFromMilliseconds()),w)return F(i*K[V(w)],this);if(typeof i=="number")return this.$ms=i,this.parseFromMilliseconds(),this;if(typeof i=="object")return Object.keys(i).forEach(function(z){T.$d[V(z)]=i[z]}),this.calMilliseconds(),this;if(typeof i=="string"){var O=i.match(J);if(O){var E=O.slice(2).map(function(z){return z!=null?Number(z):0});return this.$d.years=E[0],this.$d.months=E[1],this.$d.weeks=E[2],this.$d.days=E[3],this.$d.hours=E[4],this.$d.minutes=E[5],this.$d.seconds=E[6],this.calMilliseconds(),this}}return this}var c=g.prototype;return c.calMilliseconds=function(){var i=this;this.$ms=Object.keys(this.$d).reduce(function(w,M){return w+(i.$d[M]||0)*K[M]},0)},c.parseFromMilliseconds=function(){var i=this.$ms;this.$d.years=L(i/P),i%=P,this.$d.months=L(i/A),i%=A,this.$d.days=L(i/D),i%=D,this.$d.hours=L(i/u),i%=u,this.$d.minutes=L(i/h),i%=h,this.$d.seconds=L(i/R),i%=R,this.$d.milliseconds=i},c.toISOString=function(){var i=G(this.$d.years,"Y"),w=G(this.$d.months,"M"),M=+this.$d.days||0;this.$d.weeks&&(M+=7*this.$d.weeks);var T=G(M,"D"),O=G(this.$d.hours,"H"),E=G(this.$d.minutes,"M"),z=this.$d.seconds||0;this.$d.milliseconds&&(z+=this.$d.milliseconds/1e3,z=Math.round(1e3*z)/1e3);var se=G(z,"S"),ae=i.negative||w.negative||T.negative||O.negative||E.negative||se.negative,ue=O.format||E.format||se.format?"T":"",ie=(ae?"-":"")+"P"+i.format+w.format+T.format+ue+O.format+E.format+se.format;return ie==="P"||ie==="-P"?"P0D":ie},c.toJSON=function(){return this.toISOString()},c.format=function(i){var w=i||"YYYY-MM-DDTHH:mm:ss",M={Y:this.$d.years,YY:e.s(this.$d.years,2,"0"),YYYY:e.s(this.$d.years,4,"0"),M:this.$d.months,MM:e.s(this.$d.months,2,"0"),D:this.$d.days,DD:e.s(this.$d.days,2,"0"),H:this.$d.hours,HH:e.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:e.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:e.s(this.$d.seconds,2,"0"),SSS:e.s(this.$d.milliseconds,3,"0")};return w.replace(d,function(T,O){return O||String(M[T])})},c.as=function(i){return this.$ms/K[V(i)]},c.get=function(i){var w=this.$ms,M=V(i);return M==="milliseconds"?w%=1e3:w=M==="weeks"?L(w/K[M]):this.$d[M],w||0},c.add=function(i,w,M){var T;return T=w?i*K[V(w)]:Y(i)?i.$ms:F(i,this).$ms,F(this.$ms+T*(M?-1:1),this)},c.subtract=function(i,w){return this.add(i,w,!0)},c.locale=function(i){var w=this.clone();return w.$l=i,w},c.clone=function(){return F(this.$ms,this)},c.humanize=function(i){return Q().add(this.$ms,"ms").locale(this.$l).fromNow(!i)},c.valueOf=function(){return this.asMilliseconds()},c.milliseconds=function(){return this.get("milliseconds")},c.asMilliseconds=function(){return this.as("milliseconds")},c.seconds=function(){return this.get("seconds")},c.asSeconds=function(){return this.as("seconds")},c.minutes=function(){return this.get("minutes")},c.asMinutes=function(){return this.as("minutes")},c.hours=function(){return this.get("hours")},c.asHours=function(){return this.as("hours")},c.days=function(){return this.get("days")},c.asDays=function(){return this.as("days")},c.weeks=function(){return this.get("weeks")},c.asWeeks=function(){return this.as("weeks")},c.months=function(){return this.get("months")},c.asMonths=function(){return this.as("months")},c.years=function(){return this.get("years")},c.asYears=function(){return this.as("years")},g}(),l=function(g,c,i){return g.add(c.years()*i,"y").add(c.months()*i,"M").add(c.days()*i,"d").add(c.hours()*i,"h").add(c.minutes()*i,"m").add(c.seconds()*i,"s").add(c.milliseconds()*i,"ms")};return function(g,c,i){Q=i,e=i().$utils(),i.duration=function(T,O){var E=i.locale();return F(T,{$l:E},O)},i.isDuration=Y;var w=c.prototype.add,M=c.prototype.subtract;c.prototype.add=function(T,O){return Y(T)?l(this,T,1):w.bind(this)(T,O)},c.prototype.subtract=function(T,O){return Y(T)?l(this,T,-1):M.bind(this)(T,O)}}})}(me)),me.exports}var kt=Tt();const qt=it(kt),Ct=ot({__name:"test",setup(k,{expose:r}){r();const Q=new URL("/assets/confetti-bjvcnoca.lottie",import.meta.url).href,e=rt(),R=at(),{t:h}=lt(),u=I({title:"",description:"",totalQuestionCount:0,questions:[]}),D=Z(()=>b.value.filter(t=>t.result===!1)),d=I({}),P=I(""),A=I(!1),J=I(!1),K=Z(()=>{var t;return(t=d.value.questionData.multipleChoice)==null?void 0:t.some(n=>n.text.length>=100)}),Y=I([]),F=I([]),V=I([]),X=I([]),L=I(""),b=I([]),G=()=>{b.value=[],J.value=!1,ne(0),ce(),xe()},W=I(!1),l=()=>{W.value=!0;let t=sessionStorage.getItem("test_settings");t&&(i.numberOfQuestion=JSON.parse(t).numberOfQuestion,i.questionTypes=JSON.parse(t).questionTypes)},g=()=>{W.value=!1},c=I(),i=ct({numberOfQuestion:5,questionTypes:[q.MULTIPLE_CHOICE,q.MATCHING,q.ORDERING,q.SHORT_TEXT]}),w=(t,n)=>{if(n)i.questionTypes.includes(t)||i.questionTypes.push(t);else{const o=i.questionTypes.indexOf(t);o!==-1&&i.questionTypes.splice(o,1)}},M=async()=>{G(),await z(),sessionStorage.setItem("test_settings",JSON.stringify(i)),g()},T=I(e.params.id.toString()),O=I(!1),E=I(!0),z=async()=>{if(!yt.isValidGuid(T.value.toString())){R.push({name:"404"});return}try{O.value=!0;let t=await Re.GetDetailById(T.value.toString());u.value.title=t.data.data.name,u.value.description=t.data.data.description,u.value.totalQuestionCount=t.data.data.questionCount;let n=await Re.TestQuestions(T.value.toString(),i.numberOfQuestion,i.questionTypes.join(","));if(!t.data.success||!n.data.success){R.push({name:"404"});return}u.value.questions=n.data.data.map(o=>St.shuffleQuestionOptions(o)),ne(0)}catch(t){Object.keys(t.response.data.errors).includes(dt.PLAN_REQUIRE_PLAN)&&(E.value=!1,R.back())}finally{O.value=!1}},se=I(),ae=I(!1),ue=()=>{var t,n;ae.value=!0,(n=(t=se.value)==null?void 0:t.getDotLottieInstance())==null||n.play(),setTimeout(()=>{ae.value=!1},5e3)},ie=(t,n)=>{var S;const o=u.value.questions.findIndex(v=>v.id===t);if(o===-1)return!1;let m=(S=u.value.questions[o].questionData.multipleChoice)==null?void 0:S.filter(v=>v.isAnswer).map(v=>v.id||[]).sort(),a=n.sort();return n.length!==(m==null?void 0:m.length)?!1:a.every((v,N)=>v===m[N])},Le=t=>{var S;const n=u.value.questions.findIndex(v=>v.id===d.value.id);let o=(S=u.value.questions[n].questionData.multipleChoice)==null?void 0:S.filter(v=>v.isAnswer).map(v=>v.id||[]);const m=b.value.findIndex(v=>v.questionId===d.value.id);let a=b.value[m].multipleChoices;return o!=null&&o.includes(t.id)?!0:!(a!=null&&a.includes(t.id)&&!t.isAnswer)},Te=(t,n)=>{var S;const o=u.value.questions.findIndex(v=>v.id===t);if(o===-1)return!1;let m=((S=u.value.questions[o].questionData.ordering)==null?void 0:S.map(v=>v.correctOrder).sort())||[];return n.map(v=>v.correctOrder).every((v,N)=>v===m[N])},ke=(t,n,o)=>{const m=u.value.questions.findIndex(j=>j.id===t);if(m===-1)return!1;let a=u.value.questions[m].questionData.matching.matches,S=n.map(j=>j.id),v=o.map(j=>j.id);return S.map((j,oe)=>({leftId:j,rightId:v[oe]})).every(j=>a.some(oe=>oe.leftId===j.leftId&&oe.rightId===j.rightId))},Ne=t=>{var S,v;const n=d.value.questionData.matching;if(!n)return!1;let o=n.leftItems.some(N=>N.id===t),m=n.matches.find(N=>o?N.leftId===t:N.rightId===t);const a=o?F.value.findIndex(N=>N.id===t):V.value.findIndex(N=>N.id===t);return a===-1||!m?!1:o?((S=V.value[a])==null?void 0:S.id)===m.rightId:((v=F.value[a])==null?void 0:v.id)===m.leftId},le=t=>t.trim().toLowerCase().normalize("NFKC").replace(/[\u2019\u2018\u201B\u0060]/g,"'").replace(/\s+/g," "),qe=(t,n)=>{const o=u.value.questions.findIndex(m=>m.id===t);return o===-1?!1:le(n)===le(u.value.questions[o].questionData.shortText)},Ce=()=>{var o,m;const t=(o=b.value.find(a=>a.questionId===d.value.id))==null?void 0:o.shortText;if(!t)return!1;const n=(m=u.value.questions.find(a=>a.id===d.value.id))==null?void 0:m.questionData.shortText;return le(t)===le(n)},He=Z(()=>{var t;if(d.value.type===q.SHORT_TEXT&&J.value&&!Ce())return(t=u.value.questions.find(n=>n.id===d.value.id))==null?void 0:t.questionData.shortText}),Ue=I(null),fe=I(!1),Pe=()=>{fe.value=!fe.value},te=(t,n)=>{t===-1?b.value.push(n):b.value[t]=n},Fe=()=>{if(J.value)return;const t=b.value.findIndex(m=>m.questionId===d.value.id),n=A.value,o=A.value?h("learn_QS.result.skipped"):"";switch(d.value.type){case q.MULTIPLE_CHOICE:{Y.value.length>0?te(t,{questionId:d.value.id,type:d.value.type,isSkipped:n,result:!1,resultText:o,multipleChoices:[...Y.value],matchingLeft:null,matchingRight:null,ordering:null,shortText:""}):t!==-1&&b.value.splice(t,1);break}case q.MATCHING:{te(t,{questionId:d.value.id,type:d.value.type,isSkipped:n,result:!1,resultText:o,multipleChoices:null,matchingLeft:[...F.value],matchingRight:[...V.value],ordering:null,shortText:""});break}case q.ORDERING:{te(t,{questionId:d.value.id,type:d.value.type,isSkipped:n,result:!1,resultText:o,multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:[...X.value],shortText:""});break}case q.SHORT_TEXT:{L.value.trim()?te(t,{questionId:d.value.id,type:d.value.type,isSkipped:n,result:!1,resultText:o,multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:null,shortText:L.value.trim()}):t!==-1&&b.value.splice(t,1);break}}},ge=(t,n)=>{var o,m;switch(t.type){case q.MULTIPLE_CHOICE:return{...n,multipleChoices:((o=t.questionData.multipleChoice)==null?void 0:o.filter(a=>a.isAnswer).map(a=>a.id))??[]};case q.MATCHING:{const a=t.questionData.matching,S=(a==null?void 0:a.matches)??[],v=(a==null?void 0:a.leftItems)??[],N=(a==null?void 0:a.rightItems)??[],j=S.map(Se=>v.find(we=>we.id==Se.leftId)),oe=S.map(Se=>N.find(we=>we.id==Se.rightId));return{...n,matchingLeft:j,matchingRight:oe}}case q.ORDERING:return{...n,ordering:((m=t.questionData.ordering)==null?void 0:m.slice().sort((a,S)=>a.correctOrder-S.correctOrder))??[]};case q.SHORT_TEXT:return{...n,shortText:t.questionData.shortText??""};default:return n}},Ie=()=>{u.value.questions.forEach(t=>{const n={questionId:t.id,type:t.type,isSkipped:!0,result:!1,resultText:h("learn_QS.result.skipped"),multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:null,shortText:""};let o=b.value.findIndex(m=>m.questionId===t.id);o===-1&&(b.value.push(ge(t,n)),o=b.value.length-1),b.value[o].isSkipped&&te(o,{...b.value[o],...ge(t,{})})})},Ve=()=>{Qe(),b.value.length<u.value.questions.length?ht.confirm({title:`You missed ${u.value.questions.length-b.value.length} questions.`,content:"Are you certain about this decision?",okText:h("sidebar.buttons.ok"),cancelText:h("sidebar.buttons.cancel"),centered:!0,onOk:()=>{J.value=!0,Ie(),ve()}}):(J.value=!0,ve())},ve=()=>{const t=u.value.questions.findIndex(n=>n.id===d.value.id);ne(t),b.value.filter(n=>n.isSkipped===!1).forEach(n=>{let o;switch(n.type){case q.MULTIPLE_CHOICE:{o=ie(n.questionId,n.multipleChoices),n.result=o,n.resultText=h(o?"learn_QS.result.correct":"learn_QS.result.wrong");break}case q.MATCHING:{o=ke(n.questionId,n.matchingLeft,n.matchingRight),n.result=o,n.resultText=h(o?"learn_QS.result.correct":"learn_QS.result.wrong");break}case q.ORDERING:{o=Te(n.questionId,n.ordering),n.result=o,n.resultText=h(o?"learn_QS.result.correct":"learn_QS.result.wrong");break}case q.SHORT_TEXT:{o=qe(n.questionId,n.shortText),n.result=o,n.resultText=h(o?"learn_QS.result.correct":"learn_QS.result.wrong");break}}}),Me(),D.value.length===0&&ue()},ze=()=>{A.value=!0;const t=b.value.findIndex(n=>n.questionId===d.value.id);te(t,{questionId:d.value.id,type:d.value.type,isSkipped:!0,result:!1,resultText:"Skipped",multipleChoices:Y.value,matchingLeft:F.value,matchingRight:V.value,ordering:X.value,shortText:L.value})},ne=t=>{var o,m;ce(),A.value=!1,d.value=u.value.questions[t];const n=b.value.find(a=>a.questionId===d.value.id);switch(d.value.type){case q.MULTIPLE_CHOICE:{P.value=h("learn_QS.instructions.multiple_choice",{number:(o=d.value.questionData.multipleChoice)==null?void 0:o.filter(a=>a.isAnswer).length}),Y.value=n?n==null?void 0:n.multipleChoices:[];break}case q.ORDERING:{P.value=h("learn_QS.instructions.ordering"),X.value=n?n==null?void 0:n.ordering:((m=d.value.questionData.ordering)==null?void 0:m.map(a=>a))||[];break}case q.MATCHING:{P.value=h("learn_QS.instructions.matching"),F.value=n?n==null?void 0:n.matchingLeft:d.value.questionData.matching.leftItems.map(a=>a)||[],V.value=n?n==null?void 0:n.matchingRight:d.value.questionData.matching.rightItems.map(a=>a)||{};break}case q.SHORT_TEXT:{P.value=h("learn_QS.instructions.short_text"),L.value=n?n==null?void 0:n.shortText:"";break}}},Ye=()=>{A.value=!1;const t=u.value.questions.findIndex(n=>n.id===d.value.id);t<u.value.questions.length-1&&ne(t+1)},Ge=()=>{A.value=!1;const t=u.value.questions.findIndex(n=>n.id===d.value.id);t>0&&ne(t-1)},je=t=>Array.from(b.value).some(n=>n.questionId===t),Be=t=>{var n;return(n=b.value.find(o=>o.questionId===t&&!o.isSkipped))==null?void 0:n.result},Je=Z(()=>b.value.some(t=>t.questionId===d.value.id&&t.isSkipped)),Xe=Z(()=>{const t=b.value.find(n=>n.questionId===d.value.id);return{result:t==null?void 0:t.result,resultText:t==null?void 0:t.resultText}}),Ke=Z(()=>{const t=u.value.questions.findIndex(n=>n.id===d.value.id);return t!==-1&&t<u.value.questions.length-1}),We=Z(()=>{const t=u.value.questions.findIndex(n=>n.id===d.value.id);return t!==-1&&t>0}),Ze=Z(()=>u.value.questions.findIndex(t=>t.id===d.value.id)),_e=()=>Math.floor((u.value.questions.length-D.value.length)/u.value.questions.length*100),Ae=()=>Math.floor(D.value.length/u.value.questions.length*100),pe=()=>{const t=$(".content-item-test-result");t&&$(t).slideToggle()},Me=()=>{pe(),Ee.setOptions({lang:{decimalPoint:".",thousandsSep:","}}),Ee.chart("result_chart_container",{chart:{type:"pie",custom:{},events:{render:function(){const t=this,n=t.series[0];let o=t.options.chart.custom.label;o||(o=t.options.chart.custom.label=t.renderer.label(`<strong>${_e()}%</strong>`,0,0).css({color:"var(--text-color)",textAnchor:"middle"}).add());const m=n.center[0]+t.plotLeft,a=n.center[1]+t.plotTop-o.attr("height")/2;o.attr({x:m,y:a}),o.css({fontSize:`${n.center[2]/8}px`})}}},credits:{enabled:!1},plotOptions:{pie:{borderWidth:0,borderRadius:3}},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.0f}%</b>"},series:[{type:"pie",name:"Result",colorByPoint:!0,innerSize:"75%",dataLabels:{enabled:!1},data:[{name:h("practice_test.other.correct"),y:_e(),color:"var(--correct-answer-color)"},{name:h("practice_test.other.incorrect"),y:Ae(),color:"var(--incorrect-answer-color)"}]}]})};de.extend(qt);const be=I(),ye=I(""),xe=()=>{be.value=de()},Qe=()=>{const n=de().diff(be.value),o=Math.floor(n/1e3);if(o<60)ye.value=`${h("practice_test.other.your_time")} ${o} ${h(o===1?"practice_test.other.second":"practice_test.other.second_plural")}`;else{const m=de.duration(n),a=m.hours(),S=m.minutes();let v=h("practice_test.other.your_time");a>0&&(v+=`${a} ${a>1?h("practice_test.other.hour"):h("practice_test.other.hour_plural")} `),S>0&&(v+=`${S} ${S>1?h("practice_test.other.minute"):h("practice_test.other.minute_plural")}`),ye.value=v.trim()}},$e={scroll:!0,scrollSensitivity:100,scrollSpeed:100,scrollTarget:document.scrollingElement};function ce(){mt(()=>{requestAnimationFrame(()=>{const t=document.querySelectorAll(".matching-option-container.left .answer-option-matching"),n=document.querySelectorAll(".matching-option-container.right .answer-option-matching"),o=Math.min(t.length,n.length);for(let m=0;m<o;m++){const a=t[m],S=n[m];if(!a||!S)continue;a.style.height="auto",S.style.height="auto";const v=Math.max(a.offsetHeight,S.offsetHeight);a.style.height=`${v}px`,S.style.height=`${v}px`}})})}const et=()=>{window.location.reload()},tt=()=>{R.push({name:"User_QuestionSet_Learn",params:{id:T.value}})},nt=()=>{const t=D.value.map(n=>n.questionId);u.value.questions=u.value.questions.filter(n=>t.includes(n.id)),G(),pe()},st=()=>{sessionStorage.setItem("setting_key","Subscription"),R.push({name:"User_Settings"})};ut(async()=>{let t=sessionStorage.getItem("test_settings");t&&(i.numberOfQuestion=JSON.parse(t).numberOfQuestion,i.questionTypes=JSON.parse(t).questionTypes),await z(),l(),ne(0),ce(),window.addEventListener("resize",ce),console.log(d.value),xe()});const Oe={animationPath:Q,route:e,router:R,t:h,quiz:u,incorrect:D,currentQuestion:d,currentQuestionInstruction:P,currentQuestionIsSkipped:A,isSubmitted:J,isOptionExceed:K,userAnswerMultipleChoice:Y,userAnswerMatchingLeft:F,userAnswerMatchingRight:V,userAnswerOrdering:X,userAnswerShortText:L,userAnswer:b,reset:G,setting_modal_open:W,openSettingModal:l,closeSettingModal:g,settingFormRef:c,settingFormState:i,toggleQuestionType:w,onCreateNewTest:M,questionSetId:T,loading:O,isAllowed:E,getQuizData:z,animationRef:se,isAnimationDisplaying:ae,triggerAnimation:ue,checkMultipleChoice:ie,checkMultipleChoiceAnswerCorrect:Le,checkOrdering:Te,checkMatching:ke,checkMatchingAnswerCorrect:Ne,cleanShortTextAnswer:le,checkShortText:qe,checkShortextCorrect:Ce,getShortTextCorrectAnswer:He,explainModal:Ue,explainModalOpen:fe,toggleExplainModal:Pe,updateUserAnswer:te,onUserAnswerChange:Fe,refactorLeftOverUserAnswer:ge,handleSkippedQuestion:Ie,onSubmitAnswer:Ve,getUserAnswerResult:ve,onSkipQuestion:ze,onLoadCurrentQuestion:ne,onNextQuestion:Ye,onPreviousQuestion:Ge,userAnswerContainQuestion:je,getUserAnswerResultById:Be,userAnswerCurrentQuestionSkipped:Je,userAnswerCurrentQuestionResult:Xe,hasNextQuestion:Ke,hasPreviousQuestion:We,currentQuestionIndex:Ze,getCorrectPercentage:_e,getInCorrectPercentage:Ae,toggleResult:pe,generateChart:Me,startTime:be,timerResult:ye,timerStart:xe,timerEnd:Qe,dragOptions:$e,syncMatchingHeights:ce,onNewTest:et,onRedirectToLearn:tt,onRetest:nt,onRedirectToSubcription:st,get QUESTION_FORMAT(){return vt},get QUESTION_TYPE(){return q},get DotLottieVue(){return _t},TextArea:pt,get VueDraggable(){return bt},get HolderOutlined(){return gt}};return Object.defineProperty(Oe,"__isScriptSetup",{enumerable:!1,value:!0}),Oe}}),It={key:0,class:"page-container"},At={class:"title-container title-container-header"},Mt={class:"content content-test d-flex flex-column"},Qt={class:"d-flex"},Ot={class:"content-item question-navigators"},Rt={class:"question-navigator-title"},Et={key:1,class:"question-navigator-container"},Dt=["onClick"],Lt={class:"content-item content-item-test-result"},Nt={class:"result-container"},Ht={class:"result-section"},Ut={class:"result-section-title"},Pt={class:"result-section-statistic"},Ft={class:"result-text-container"},Vt={class:"result-text correct"},zt={class:"result-text incorrect"},Yt={class:"result-section result-section-buttons"},Gt={class:"result-section-title"},jt={class:"result-button-title"},Bt={class:"result-button-content"},Jt={class:"result-button-title"},Xt={class:"result-button-content"},Kt={class:"result-button-title"},Wt={class:"result-button-content"},Zt={class:"content-item"},$t={key:1,class:"section question-section"},en={class:"question-info-index"},tn=["innerHTML"],nn={class:"section answer-section"},sn={class:"d-flex align-items-center"},on={class:"answer-section-ins"},rn={class:"answer-option-content"},an={key:0,class:"bx bx-check answer-icon"},ln={key:1,class:"bx bx-x answer-icon"},cn={key:1,class:"answer-option-container matching"},un={class:"matching-option-container left"},dn={class:"d-flex align-items-center"},hn={class:"answer-option-order"},mn={class:"answer-option-content"},fn={class:"matching-option-container right"},gn={class:"d-flex align-items-center"},vn={class:"answer-option-content"},_n={class:"answer-option-order"},pn={key:2,class:"answer-option-container ordering"},bn={class:"answer-option-order"},yn={class:"answer-option-content"},xn={key:3,class:"answer-option-container"},Sn={class:"w-100 d-flex align-items-center"},wn={key:0,class:"bx bx-check answer-icon"},Tn={key:1,class:"bx bx-x answer-icon"},kn={key:0,class:"short-text-correct-answer"},qn={class:"learn-question-footer"},Cn={class:"d-flex"},In=["innerHTML"],An={key:1,class:"page-container"},Mn={class:"w-100 h-100 d-flex align-items-center justify-content-center"},Qn={class:"d-flex justify-content-center"},On={class:"title-container"},Rn={class:"setting-form-item"},En={class:"setting-form-item setting-form-switch"};function Dn(k,r,Q,e,R,h){const u=H("RouterLink"),D=H("a-col"),d=H("a-row"),P=H("a-skeleton"),A=H("a-button"),J=H("a-checkbox"),K=H("a-checkbox-group"),Y=H("CloseSquareFilled"),F=H("a-result"),V=H("a-input-number"),X=H("a-form-item"),L=H("a-divider"),b=H("a-switch"),G=H("a-form"),W=H("a-modal");return p(),y(ee,null,[e.isAllowed?(p(),y("div",It,[e.isAnimationDisplaying?(p(),he(e.DotLottieVue,{key:0,autoplay:e.isAnimationDisplaying,ref:"animationRef",class:C(["animation-container"]),onComplete:r[0]||(r[0]=l=>e.isAnimationDisplaying=!1),src:e.animationPath},null,8,["autoplay","src"])):B("v-if",!0),s("div",At,[_(d,{class:"w-100 d-flex align-items-center"},{default:x(()=>[_(D,{span:1},{default:x(()=>[_(u,{to:{name:"User_Library"}},{default:x(()=>r[10]||(r[10]=[s("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[10]})]),_:1}),_(D,{class:"main-title",span:22},{default:x(()=>[s("span",null,f(e.quiz.title),1),r[11]||(r[11]=U()),r[12]||(r[12]=s("br",null,null,-1)),s("span",null,f(e.quiz.description),1)]),_:1,__:[11,12]}),_(D,{span:1},{default:x(()=>[s("i",{class:"bx bx-cog test-setting-btn",onClick:e.openSettingModal})]),_:1})]),_:1})]),s("div",Mt,[s("div",Qt,[s("div",Ot,[s("div",Rt,f(e.t("practice_test.other.question_list")),1),e.loading?(p(),he(P,{key:0,active:"",loading:e.loading},null,8,["loading"])):(p(),y("div",Et,[(p(!0),y(ee,null,re(e.quiz.questions,(l,g)=>(p(),y("div",{class:C(["question-navigation-item-outer",e.currentQuestion.id===l.id?"current-question":""])},[s("div",{class:C(["question-navigator-item",e.userAnswerContainQuestion(l.id)?"completed-question":"",e.isSubmitted?e.getUserAnswerResultById(l.id)?"correct":"incorrect":""]),onClick:c=>e.onLoadCurrentQuestion(g)},[s("span",null,f(g+1),1)],10,Dt)],2))),256))])),_(A,{type:"primary",class:C(["main-color-btn",e.isSubmitted?"main-color-btn-disabled":""]),onClick:e.onSubmitAnswer},{default:x(()=>[U(f(k.$t("learn_QS.buttons.submit")),1)]),_:1},8,["class"])]),s("div",Lt,[s("div",Nt,[s("div",Ht,[s("div",Ut,f(e.timerResult),1),s("div",Pt,[r[13]||(r[13]=s("div",{id:"result_chart_container"},null,-1)),s("div",Ft,[s("div",Vt,[U(f(k.$t("practice_test.other.correct"))+" ",1),s("span",null,f(e.quiz.questions.length-e.incorrect.length),1)]),s("div",zt,[U(f(k.$t("practice_test.other.incorrect"))+" ",1),s("span",null,f(e.incorrect.length),1)])])])]),s("div",Yt,[s("div",Gt,f(k.$t("practice_test.final_modal.button_title")),1),s("div",{class:"result-button",onClick:e.onNewTest},[r[14]||(r[14]=s("i",{class:"bx bxs-news"},null,-1)),s("div",null,[s("div",jt,f(k.$t("practice_test.final_modal.buttons.new_test")),1),s("div",Bt,f(k.$t("practice_test.final_modal.buttons_ins.new_test")),1)])]),e.getInCorrectPercentage()>=100?(p(),y("div",{key:0,class:"result-button",onClick:e.onRedirectToLearn},[r[15]||(r[15]=s("i",{class:"bx bx-analyse"},null,-1)),s("div",null,[s("div",Jt,f(k.$t("practice_test.final_modal.buttons.practice")),1),s("div",Xt,f(k.$t("practice_test.final_modal.buttons_ins.practice")),1)])])):B("v-if",!0),e.getInCorrectPercentage()<100?(p(),y("div",{key:1,class:"result-button",onClick:e.onRetest},[r[16]||(r[16]=s("i",{class:"bx bx-reset"},null,-1)),s("div",null,[s("div",Kt,f(k.$t("practice_test.final_modal.buttons.re_test")),1),s("div",Wt,f(k.$t("practice_test.final_modal.buttons_ins.re_test")),1)])])):B("v-if",!0)])])])]),s("div",Zt,[e.loading?(p(),y(ee,{key:0},[_(P,{active:"",loading:e.loading},null,8,["loading"]),_(P,{active:"",loading:e.loading},null,8,["loading"]),_(P,{active:"",loading:e.loading},null,8,["loading"])],64)):(p(),y("div",$t,[s("div",en,f(k.$t("create_QS.question.question"))+" "+f(e.currentQuestionIndex+1),1),s("div",{class:C(["learn-question",e.currentQuestion.textFormat===e.QUESTION_FORMAT.HTML?"":"d-none"]),innerHTML:e.currentQuestion.questionText},null,10,tn),s("div",{class:C(["learn-question",e.currentQuestion.textFormat===e.QUESTION_FORMAT.HTML?"d-none":""])},f(e.currentQuestion.questionText),3),s("div",nn,[s("div",sn,[s("div",on,f(e.currentQuestionInstruction),1),s("div",{class:C(["ms-3 learn-question-result",e.isSubmitted?e.userAnswerCurrentQuestionResult.result?"result-correct":"result-incorrect":"",e.userAnswerCurrentQuestionSkipped?"result-skipped":""])},f(e.userAnswerCurrentQuestionResult.resultText),3)]),e.currentQuestion.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(p(),he(K,{key:0,onChange:e.onUserAnswerChange,value:e.userAnswerMultipleChoice,"onUpdate:value":r[1]||(r[1]=l=>e.userAnswerMultipleChoice=l),class:C(["answer-option-container multiplechoice",e.isOptionExceed?"column":""])},{default:x(()=>[(p(!0),y(ee,null,re(e.currentQuestion.questionData.multipleChoice,(l,g)=>(p(),he(J,{value:l.id,"onUpdate:value":c=>l.id=c,disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,class:C(["answer-option answer-option-multiplechoice",e.isSubmitted&&e.checkMultipleChoiceAnswerCorrect(l)&&l.isAnswer?"answer-correct":"",e.isSubmitted&&!e.checkMultipleChoiceAnswerCorrect(l)&&!l.isAnswer?"answer-incorrect":""])},{default:x(()=>[s("div",rn,f(l.text),1),e.isSubmitted&&e.checkMultipleChoiceAnswerCorrect(l)&&l.isAnswer?(p(),y("i",an)):B("v-if",!0),e.isSubmitted&&!e.checkMultipleChoiceAnswerCorrect(l)&&!l.isAnswer?(p(),y("i",ln)):B("v-if",!0)]),_:2},1032,["value","onUpdate:value","disabled","class"]))),256))]),_:1},8,["value","class"])):B("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.MATCHING?(p(),y("div",cn,[s("div",un,[_(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerMatchingLeft,"onUpdate:modelValue":r[2]||(r[2]=l=>e.userAnswerMatchingLeft=l),options:e.dragOptions,onMove:e.syncMatchingHeights,onEnd:r[3]||(r[3]=()=>{e.syncMatchingHeights(),e.onUserAnswerChange()})},{default:x(()=>[(p(!0),y(ee,null,re(e.userAnswerMatchingLeft,(l,g)=>(p(),y("div",dn,[s("div",{class:C(["answer-option answer-option-matching",e.isSubmitted?e.checkMatchingAnswerCorrect(l.id)?"answer-correct":"answer-incorrect":""])},[s("div",hn,[_(e.HolderOutlined)]),s("div",mn,f(l.text),1)],2),s("i",{class:C(["bx bxs-label matching-icon",e.isSubmitted?e.checkMatchingAnswerCorrect(l.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2)]))),256))]),_:1},8,["disabled","modelValue"])]),s("div",fn,[_(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerMatchingRight,"onUpdate:modelValue":r[4]||(r[4]=l=>e.userAnswerMatchingRight=l),options:e.dragOptions,onMove:e.syncMatchingHeights,onEnd:r[5]||(r[5]=()=>{e.syncMatchingHeights(),e.onUserAnswerChange()})},{default:x(()=>[(p(!0),y(ee,null,re(e.userAnswerMatchingRight,(l,g)=>(p(),y("div",gn,[s("i",{class:C(["bx bxs-label matching-icon",e.isSubmitted?e.checkMatchingAnswerCorrect(l.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2),s("div",{class:C(["answer-option answer-option-matching",e.isSubmitted?e.checkMatchingAnswerCorrect(l.id)?"answer-correct":"answer-incorrect":""])},[s("div",vn,f(l.text),1),s("div",_n,[_(e.HolderOutlined)])],2)]))),256))]),_:1},8,["disabled","modelValue"])])])):B("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.ORDERING?(p(),y("div",pn,[_(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerOrdering,"onUpdate:modelValue":r[6]||(r[6]=l=>e.userAnswerOrdering=l),options:e.dragOptions,onEnd:e.onUserAnswerChange},{default:x(()=>[(p(!0),y(ee,null,re(e.userAnswerOrdering,(l,g)=>(p(),y("div",{class:C(["answer-option answer-option-ordering",e.isSubmitted?g===l.correctOrder?"answer-correct":"answer-incorrect":""])},[s("div",bn,[_(e.HolderOutlined),U(" "+f(g+1),1)]),s("div",yn,f(l.text),1),s("div",{class:C(["answer-option-order answer-icon",e.isSubmitted?"":"d-none"])},[r[17]||(r[17]=s("i",{class:"bx bx-hash answer-icon"},null,-1)),U(" "+f(l.correctOrder+1),1)],2)],2))),256))]),_:1},8,["disabled","modelValue"])])):B("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.SHORT_TEXT?(p(),y("div",xn,[s("div",{class:C(["answer-short-text",e.isSubmitted?e.checkShortextCorrect()?"answer-correct":"answer-incorrect":""])},[s("div",Sn,[_(e.TextArea,{readonly:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,placeholder:"Enter your answer...",modelValue:e.userAnswerShortText,"onUpdate:modelValue":r[7]||(r[7]=l=>e.userAnswerShortText=l),onChange:e.onUserAnswerChange},null,8,["readonly","modelValue"]),e.isSubmitted&&e.checkShortextCorrect()?(p(),y("i",wn)):B("v-if",!0),e.isSubmitted&&!e.checkShortextCorrect()?(p(),y("i",Tn)):B("v-if",!0)]),e.isSubmitted&&!e.checkShortextCorrect()?(p(),y("div",kn,[r[18]||(r[18]=U(" Correct answer: ")),s("span",null,f(e.getShortTextCorrectAnswer),1)])):B("v-if",!0)],2)])):B("v-if",!0)]),s("div",qn,[_(A,{class:C(["main-color-btn",e.hasPreviousQuestion?"":"main-color-btn-disabled"]),type:"primary",size:"large",onClick:e.onPreviousQuestion},{default:x(()=>[r[19]||(r[19]=s("i",{class:"bx bx-chevron-left"},null,-1)),U(" "+f(k.$t("practice_test.buttons.previous")),1)]),_:1,__:[19]},8,["class"]),e.isSubmitted?(p(),y("div",{key:1,class:C(["main-color-btn-ghost me-3"]),onClick:e.toggleExplainModal},[r[20]||(r[20]=s("i",{class:"bx bx-bulb me-2"},null,-1)),U(" "+f(k.$t("learn_QS.buttons.explaination")),1)])):(p(),y("div",{key:0,class:C(["main-color-btn-ghost",e.userAnswerCurrentQuestionSkipped||e.isSubmitted?"main-color-btn-ghost-disabled":""]),onClick:r[8]||(r[8]=l=>e.onSkipQuestion())},f(k.$t("learn_QS.buttons.dont_know")),3)),s("div",Cn,[_(A,{class:C(["main-color-btn",e.hasNextQuestion?"":"main-color-btn-disabled"]),type:"primary",size:"large",onClick:e.onNextQuestion},{default:x(()=>[U(f(k.$t("learn_QS.buttons.next_question"))+" ",1),r[21]||(r[21]=s("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[21]},8,["class"])])])]))]),s("div",{ref:"explainModal",class:C(["explain-modal explain-modal-up",{show:e.explainModalOpen}])},[s("div",{class:"learn-question-explain",innerHTML:e.currentQuestion.explainText},null,8,In),_(A,{class:C(["main-color-btn close-modal-btn"]),type:"primary",size:"large",onClick:e.toggleExplainModal},{default:x(()=>r[22]||(r[22]=[s("i",{class:"bx bx-chevrons-down"},null,-1)])),_:1,__:[22]}),_(A,{class:C(["main-color-btn",e.hasNextQuestion?"":"main-color-btn-disabled"]),type:"primary",size:"large",onClick:e.onNextQuestion},{default:x(()=>[U(f(k.$t("learn_QS.buttons.next_question"))+" ",1),r[23]||(r[23]=s("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[23]},8,["class"])],2)])])):(p(),y("div",An,[s("div",Mn,[_(F,{status:"error",title:e.t("now_allowed.main_msg"),"sub-title":e.t("now_allowed.errorMessage")},{icon:x(()=>[_(Y)]),extra:x(()=>[s("div",Qn,[_(A,{key:"console",type:"primary",class:"me-3 main-color-btn"},{default:x(()=>[U(f(k.$t("now_allowed.libraryNavigator")),1)]),_:1}),_(A,{onClick:e.onRedirectToSubcription,key:"buy",type:"ghost",class:"main-color-btn-ghost"},{default:x(()=>[U(f(k.$t("now_allowed.subscriptionNavigator")),1)]),_:1})])]),_:1},8,["title","sub-title"])])])),_(W,{centered:"","wrap-class-name":"medium-modal",open:e.setting_modal_open,onCancel:e.closeSettingModal},{footer:x(()=>[_(A,{type:"primary",class:"main-color-btn",size:"large",shape:"round",onClick:e.onCreateNewTest},{default:x(()=>[U(f(e.t("practice_test.setting_modal.create_new_test")),1)]),_:1})]),default:x(()=>[s("div",On,[_(d,{class:"w-100 d-flex align-items-center justify-content-between"},{default:x(()=>[_(D,{span:1},{default:x(()=>[s("div",{onClick:e.closeSettingModal},r[24]||(r[24]=[s("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)]))]),_:1}),_(D,{class:"main-title",span:20},{default:x(()=>[s("span",null,f(k.$t("practice_test.setting_modal.title")),1),r[25]||(r[25]=U()),r[26]||(r[26]=s("br",null,null,-1))]),_:1,__:[25,26]})]),_:1})]),_(G,{class:"setting-form"},{default:x(()=>[_(X,null,{default:x(()=>[s("div",Rn,[s("div",null,f(k.$t("practice_test.setting_modal.max_question",{length:e.quiz.totalQuestionCount})),1),_(V,{size:"large",id:"inputNumber",value:e.settingFormState.numberOfQuestion,"onUpdate:value":r[9]||(r[9]=l=>e.settingFormState.numberOfQuestion=l),min:5,max:e.quiz.totalQuestionCount,precision:0},null,8,["value","max"])])]),_:1}),_(L,{style:{"background-color":"var(--form-item-border-color)"}}),_(X,null,{default:x(()=>[(p(!0),y(ee,null,re(e.QUESTION_TYPE,l=>(p(),y("div",En,[s("div",null,f(e.t(`create_QS.type.${l}`)),1),_(b,{disabled:e.settingFormState.questionTypes.length<=1&&e.settingFormState.questionTypes.includes(l),checked:e.settingFormState.questionTypes.includes(l),onChange:g=>e.toggleQuestionType(l,g)},null,8,["disabled","checked","onChange"])]))),256))]),_:1})]),_:1})]),_:1},8,["open"])],64)}const Gn=ft(Ct,[["render",Dn],["__scopeId","data-v-4662dd21"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/question_sets/test.vue"]]);export{Gn as default};
