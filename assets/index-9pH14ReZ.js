import{A as q}from"./ApiClass-CgFhTsnn.js";import{_ as Z,r as i,a as S,o as f,b as s,c as n,f as $,g as p,t as v,w as l,F as j,B as J,C as ee,q as O,l as B,h as V,u as H,i as d,H as G,j as k,K,s as Q,k as x}from"./index-GMohsbg5.js";import{I as ae}from"./Input-Dxl2nhUC.js";const M={ALL:"All",TEACHER:"Teacher",STUDENT:"Student",OWNER:"Owner"},te={__name:"index",emits:["updateSidebar"],setup(N,{expose:a,emit:P}){a();const e=O(),C=B(),A=V(),{t:u}=H(),w=P,I=d(A.getUserInfo()),h=Object.values(M),b=G(()=>h.map(r=>({label:u(`class_index.select_option.${r}`),value:r!==M.ALL?r:""}))),o=k({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,name:e.query.name||"",shareMode:e.query.shareMode||b.value[0].value,totalCount:0,statusFilter:!1}),m=d([]),c=async()=>{try{let r=await q.GetAllByLimit(o);if(r.data.success){let _=r.data.data;m.value=_.items,o.pageNumber=_.pageNumber,o.pageSize=_.pageSize,o.totalCount=_.totalCount,o.statusFilter&&(o.pageNumber>_.totalPages&&o.totalCount>0?(o.pageNumber=1,C.push({name:"User_Class",query:{pageNumber:1,pageSize:o.pageSize,name:o.name,shareMode:o.shareMode}})):C.push({name:"User_Class",query:{pageNumber:o.pageNumber,pageSize:o.pageSize,name:o.name,shareMode:o.shareMode}}),o.statusFilter=!o.statusFilter)}}catch(r){console.log("ERROR: GETALLBYLIMIT class: "+r)}};K(()=>{Object.keys(e.query).length===0&&(o.pageNumber=e.query.pageNumber||1,o.pageSize=e.query.pageSize||10,o.name=e.query.name||"",o.shareMode=e.query.shareMode||b.value[0].value,o.statusFilter=!0,c())});const y=(r,_)=>{o.pageNumber=r,o.pageSize=_,o.statusFilter=!0,c()},z={code:[{required:!0,message:"This field is required.",trigger:"change"}],name:[{required:!0,message:"This field is required.",trigger:"change"},{max:100,message:"Limit 100.",trigger:"change"}],topic:[{max:100,message:"Limit 100",trigger:"change"}]},F=d(!1),t=d(),g=k({code:""}),L=d(!1),W=async()=>{L.value=!0;try{if(await t.value.validate(),!(await q.JoinClass(g)).data.success){x.error("Join class failed");return}x.success("Join class successfully."),await c()}catch(r){console.log(r)}finally{L.value=!1}},E=d(!1),T=d(),U=k({name:"",topic:""}),R=d(!1),Y=async()=>{R.value=!0;try{if(await T.value.validate(),!(await q.Create(U)).data.success){x.error("Create class failed");return}x.success("Create class successfully."),await c()}catch(r){console.log(r)}finally{R.value=!1,E.value=!1}},X=r=>{C.push({name:"User_Class_Exam",params:{id:r}})};Q(async()=>{w("updateSidebar","class"),await c()});const D={route:e,router:C,authStore:A,t:u,emit:w,user:I,optionKeys:h,class_credit_options:b,pageParams:o,class_data:m,getData:c,onPaginationChange:y,rules:z,modal_join_class_open:F,joinClassFormRef:t,joinClassFormState:g,isJoinLoading:L,onJoinClass:W,modal_create_class_open:E,createClassFormRef:T,createClassFormState:U,isCreateLoading:R,onCreateClass:Y,onRedirectToClassDetail:X,get ApiClass(){return q},get CLASS_SHARE_MODE(){return M},ref:d,onMounted:Q,reactive:k,computed:G,onUpdated:K,get useI18n(){return H},get useAuthStore(){return V},get useRoute(){return O},get useRouter(){return B},Input:ae,get message(){return x}};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}},se={class:"page-container"},oe={class:"title-container"},ne={class:"title-button-container"},le={class:"content"},re={class:"content-item"},ie={class:"content-item-functions"},ce={class:"filter-container"},de={style:{width:"300px",padding:"0px"}},ue={class:"class-container"},me=["onClick"],_e={class:"class-item-name"},pe={class:"class-item-topic"},ge={class:"class-item-owner"},fe={key:1,class:"w-100 m-2 d-flex justify-content-center"},ve={class:"pagination-container"},Ce={class:"modal-container"},be={class:"modal-title-container"},ye={class:"modal-container"},Se={class:"modal-title-container"};function xe(N,a,P,e,C,A){const u=i("a-button"),w=i("a-select-option"),I=i("a-select"),h=i("a-empty"),b=i("a-pagination"),o=i("RouterLink"),m=i("a-col"),c=i("a-row"),y=i("a-form-item"),z=i("a-form"),F=i("a-modal");return f(),S(j,null,[s("div",se,[s("div",oe,[s("div",null,[s("span",null,v(N.$t("question_sets_index.title")),1),a[12]||(a[12]=p()),a[13]||(a[13]=s("br",null,null,-1)),s("span",null,v(N.$t("question_sets_index.sub_title")),1)]),s("div",ne,[n(u,{type:"primary",class:"main-color-btn",size:"large",onClick:a[0]||(a[0]=t=>e.modal_join_class_open=!0)},{default:l(()=>a[14]||(a[14]=[p(" Join class "),s("i",{class:"bx bx-log-in"},null,-1)])),_:1,__:[14]}),n(u,{type:"primary",class:"ms-3 main-color-btn",size:"large",onClick:a[1]||(a[1]=t=>e.modal_create_class_open=!0)},{default:l(()=>a[15]||(a[15]=[p(" Create class "),s("i",{class:"bx bx-plus"},null,-1)])),_:1,__:[15]})])]),s("div",le,[s("div",re,[s("div",ie,[s("div",ce,[n(I,{class:"me-3",value:e.pageParams.shareMode,"onUpdate:value":a[2]||(a[2]=t=>e.pageParams.shareMode=t),style:{width:"200px"},onChange:e.getData},{default:l(()=>[(f(!0),S(j,null,J(e.class_credit_options,t=>(f(),ee(w,{value:t.value},{default:l(()=>[p(v(t.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),s("div",de,[n(e.Input,{onInput:e.getData,modelValue:e.pageParams.name,"onUpdate:modelValue":a[3]||(a[3]=t=>e.pageParams.name=t),placeholder:e.t("question_sets_index.search_placeholder")},{icon:l(()=>a[16]||(a[16]=[s("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),s("div",ue,[e.class_data.length>0?(f(!0),S(j,{key:0},J(e.class_data,t=>(f(),S("div",{class:"class-item",onClick:g=>e.onRedirectToClassDetail(t.classId)},[s("div",_e,v(t.name),1),s("div",pe,v(t.topic),1),s("div",ge,[a[17]||(a[17]=s("i",{class:"bx bxs-user"},null,-1)),p(" "+v(t.owner),1)])],8,me))),256)):(f(),S("div",fe,[n(h,null,{description:l(()=>a[18]||(a[18]=[s("span",null," No data matches. ",-1)])),_:1})]))]),s("div",ve,[n(b,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":a[4]||(a[4]=t=>e.pageParams.pageNumber=t),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(t,g)=>`${g[0]}-${g[1]} of ${t} items`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination"},null,8,["current","total","pageSize","show-total"])])])])]),n(F,{centered:"","wrap-class-name":"medium-modal",open:e.modal_join_class_open,onCancel:a[7]||(a[7]=t=>e.modal_join_class_open=!1)},{footer:l(()=>[n(u,{loading:e.isJoinLoading,class:"main-color-btn",key:"submit",type:"primary",onClick:e.onJoinClass},{default:l(()=>a[21]||(a[21]=[p(" Join ")])),_:1,__:[21]},8,["loading"])]),default:l(()=>[s("div",Ce,[s("div",be,[n(c,{class:"w-100 d-flex align-items-center"},{default:l(()=>[n(m,{span:4},{default:l(()=>[n(o,{onClick:a[5]||(a[5]=t=>e.modal_join_class_open=!1),to:{name:""}},{default:l(()=>a[19]||(a[19]=[s("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[19]})]),_:1}),n(m,{class:"main-title",span:20},{default:l(()=>a[20]||(a[20]=[s("span",null,"Join class",-1)])),_:1,__:[20]})]),_:1})]),n(z,{ref:"joinClassFormRef",model:e.joinClassFormState,layout:"vertical",rules:e.rules},{default:l(()=>[n(y,{label:"Class code",name:"code"},{default:l(()=>[n(e.Input,{value:e.joinClassFormState.code,"onUpdate:value":a[6]||(a[6]=t=>e.joinClassFormState.code=t),placeholder:"Invitaion code","is-required":!0},null,8,["value"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["open"]),$(" create modal "),n(F,{centered:"","wrap-class-name":"medium-modal",open:e.modal_create_class_open,onCancel:a[11]||(a[11]=t=>e.modal_create_class_open=!1)},{footer:l(()=>[n(u,{loading:e.isCreateLoading,class:"main-color-btn",key:"submit",type:"primary",onClick:e.onCreateClass},{default:l(()=>a[24]||(a[24]=[p(" Create ")])),_:1,__:[24]},8,["loading"])]),default:l(()=>[s("div",ye,[s("div",Se,[n(c,{class:"w-100 d-flex align-items-center"},{default:l(()=>[n(m,{span:4},{default:l(()=>[n(o,{onClick:a[8]||(a[8]=t=>e.modal_create_class_open=!1),to:{name:""}},{default:l(()=>a[22]||(a[22]=[s("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[22]})]),_:1}),n(m,{class:"main-title",span:20},{default:l(()=>a[23]||(a[23]=[s("span",null,"Create new class",-1)])),_:1,__:[23]})]),_:1})]),n(z,{ref:"createClassFormRef",layout:"vertical",rules:e.rules,model:e.createClassFormState},{default:l(()=>[n(y,{label:"Class name",name:"name"},{default:l(()=>[n(e.Input,{value:e.createClassFormState.name,"onUpdate:value":a[9]||(a[9]=t=>e.createClassFormState.name=t),placeholder:"Class name","is-required":!0,"max-length":100},null,8,["value"])]),_:1}),n(y,{label:"Topic",name:"topic"},{default:l(()=>[n(e.Input,{value:e.createClassFormState.topic,"onUpdate:value":a[10]||(a[10]=t=>e.createClassFormState.topic=t),placeholder:"Subject, topic, description,...","max-length":100},null,8,["value"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["open"])],64)}const Fe=Z(te,[["render",xe],["__scopeId","data-v-958f51f8"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/class/index.vue"]]);export{Fe as default};
