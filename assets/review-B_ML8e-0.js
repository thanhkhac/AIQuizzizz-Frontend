import{d as L,q as R,l as B,u as G,i as N,s as X,T as J,_ as K,r as U,a as i,o,b as t,c,F as h,w as f,t as l,f as M,D as y,e as j,p as E}from"./index-DpsX2GFI.js";import{T as F,A as W}from"./ApiTest-DjFXgMvd.js";import{Q as Z}from"./questionTypes-CS3lcRlq.js";import{V as tt}from"./Validator-CWeiTIFe.js";const et=L({__name:"review",emits:["updateSidebar"],setup(P,{expose:e,emit:Q}){e();const n=R(),S=B(),{t:z}=G(),g=N(!1),w=N({attemptId:"",name:"",studentName:"NguyenTanDuc",timeStart:"",timeEnd:"",score:0,status:"",questions:[]}),D=(r,u)=>{$(u).toggleClass("bx-chevron-up bx-chevron-down");const d=$(`#question-item-answer-${r}`);d&&$(d).slideToggle()},Y=(r,u)=>{if(!u)return[];const s=p.value.find(_=>_.id===r);return s?s.questionData.multipleChoice.filter(_=>u.includes(_.id)).map(_=>({id:_.id,text:_.text,isCorrect:_.isAnswer}))??[]:[]},a=r=>{var s;return r?(s=r.matches)==null?void 0:s.map(d=>{var _,v;return{leftItem:(_=r.leftItems.find(I=>I.id===d.leftId))==null?void 0:_.text,rightItem:(v=r.rightItems.find(I=>I.id===d.rightId))==null?void 0:v.text}}):void 0},A=(r,u)=>{if(!u)return[];const s=p.value.find(m=>m.id===r);if(!s)return[];const d=s.questionData.matching.matches,_=s.questionData.matching.leftItems,v=s.questionData.matching.rightItems;return u.map(m=>{var H,V;return{leftId:m.leftId,rightId:m.rightId,leftItem:(H=_.find(b=>b.id===m.leftId))==null?void 0:H.text,rightItem:(V=v.find(b=>b.id===m.rightId))==null?void 0:V.text,isCorrect:d.some(b=>b.leftId===m.leftId&&b.rightId===m.rightId)}})??[]},q=(r,u)=>{if(!u)return[];const s=p.value.find(v=>v.id===r);if(!s)return[];const d=s.questionData.ordering;return u.map(v=>{var I;return{itemId:v.itemId,order:v.order,text:(I=d.find(m=>m.id===v.itemId))==null?void 0:I.text,isCorrect:d.some(m=>m.id===v.itemId&&m.correctOrder===v.order)}})??[]},O=r=>{switch(r){case F.PASSED:return"#22C55E";case F.FAILED:return"#cd201f";default:return"#F59E0B"}},T=N(n.params.id),p=N([]),x=async()=>{try{if(g.value=!0,!tt.isValidGuid(T.value)){S.push({name:"404"});return}const r=await W.GetAttemptReview(T.value);r.data.success&&(w.value=r.data.data)}catch(r){console.error("Error fetching review data:",r),r.response&&!r.response.data.success&&S.push({name:"404"})}finally{g.value=!1}},k=Q;X(async()=>{k("updateSidebar","class"),await x(),p.value=w.value.questions});const C={route:n,router:S,t:z,loading:g,reviewData:w,toggleDisplayAnswer:D,getUserAnswerMultipleChoice:Y,getMatchingOption:a,getUserAnswerMatching:A,getUserAnswerOrdering:q,getTagColor:O,attemptId:T,questionData:p,getData:x,emit:k,get QUESTION_TYPE(){return Z},get dayjs(){return J}};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}}),st={class:"page-container"},nt={class:"content-item"},it={key:0},ot={class:"d-flex justify-content-between"},rt={class:"d-flex justify-content-between"},at={class:"d-flex justify-content-between"},lt={class:"d-flex justify-content-between"},dt={class:"d-flex justify-content-between"},ct={class:"content-item"},ut={class:"content-item-title"},_t={key:0},mt={key:1,class:"preview-question-container"},vt={class:"preview-question-item"},gt={class:"d-flex align-items-center"},ft={class:"question-index"},wt={class:"question-item-content"},pt={class:"d-flex align-items-center"},ht=["innerHTML"],It=["id"],yt={key:0,class:"question-data"},Dt={class:"question-data-option"},Tt={class:"question-data-option user-answer"},bt={key:0},At={key:1,class:"result-skipped"},xt={key:1,class:"question-data"},kt={class:"question-data-option"},Ct={class:"pair-answer"},Et={class:"pair-answer-item"},St={class:"pair-answer-item"},qt={class:"question-data-option user-answer"},Ot={class:"pair-answer-item"},Nt={class:"pair-answer-item"},Ut={key:1,class:"result-skipped"},Mt={key:2,class:"question-data"},jt={class:"question-data-option"},Yt={class:"ordering-answer"},Pt={class:"ordering-answer-item"},Qt={class:"ordering-answer-item"},zt={class:"result-correct"},Ht={class:"question-data-option"},Vt={key:0,class:"ordering-answer"},Ft={class:"ordering-answer-item"},Lt={key:1,class:"result-skipped"},Rt={key:3,class:"question-data"},Bt={class:"question-data-option"},Gt={class:"short-text-answer"},Xt={class:"question-data-option"},Jt={key:0,class:"short-text-answer"},Kt={key:1,class:"result-skipped"},Wt={class:"question-item-toogle-btn"},Zt=["onClick"];function $t(P,e,Q,n,S,z){const g=U("a-skeleton"),w=U("a-col"),D=U("a-row"),Y=U("a-tag");return o(),i("div",st,[t("div",nt,[e[5]||(e[5]=t("div",{class:"content-item-title"},[t("span",null,"Attempt info")],-1)),n.loading?(o(),i("div",it,[c(g,{loading:n.loading,active:""},null,8,["loading"]),c(g,{loading:n.loading,active:""},null,8,["loading"])])):(o(),i(h,{key:1},[c(D,{class:"mb-2 d-flex align-items-center justify-content-between"},{default:f(()=>[c(w,{span:12,class:"test-info-item"},{default:f(()=>[t("div",ot,[e[0]||(e[0]=t("span",null," Student name:",-1)),t("span",null,l(n.reviewData.studentName),1)])]),_:1})]),_:1}),c(D,{class:"mb-2 d-flex align-items-center justify-content-between"},{default:f(()=>[c(w,{span:12,class:"test-info-item"},{default:f(()=>[t("div",rt,[e[1]||(e[1]=t("span",null," StartTime:",-1)),t("span",null,l(n.dayjs(n.reviewData.timeStart).format("DD/MM/YYYY HH:mm:ss A")),1)]),t("div",at,[e[2]||(e[2]=t("span",null," EndTime:",-1)),t("span",null,l(n.dayjs(n.reviewData.timeEnd).format("DD/MM/YYYY HH:mm:ss A")),1)])]),_:1})]),_:1}),c(D,{class:"mb-2 d-flex align-items-center justify-content-between"},{default:f(()=>[c(w,{span:12,class:"test-info-item"},{default:f(()=>[t("div",lt,[e[3]||(e[3]=t("span",null,"Score:",-1)),t("span",null,l(n.reviewData.score),1)])]),_:1})]),_:1}),c(D,{class:"mb-2 d-flex align-items-center justify-content-between"},{default:f(()=>[c(w,{span:12,class:"test-info-item"},{default:f(()=>[t("div",dt,[e[4]||(e[4]=t("span",null,"Status:",-1)),c(Y,{color:n.getTagColor(n.reviewData.status)},{default:f(()=>[M(l(n.reviewData.status),1)]),_:1},8,["color"])])]),_:1})]),_:1})],64))]),t("div",ct,[t("div",ut,[t("div",null,[t("span",null,l(P.$t("detail_QS.other.questions",{number:n.questionData.length})),1)])]),n.loading?(o(),i("div",_t,[c(g,{loading:n.loading,active:""},null,8,["loading"]),c(g,{loading:n.loading,active:""},null,8,["loading"]),c(g,{loading:n.loading,active:""},null,8,["loading"]),c(g,{loading:n.loading,active:""},null,8,["loading"]),c(g,{loading:n.loading,active:""},null,8,["loading"])])):(o(),i("div",mt,[(o(!0),i(h,null,y(n.questionData,(a,A)=>{var q,O,T,p,x,k,C,r,u;return o(),i("div",vt,[t("div",gt,[t("div",ft,l(A+1),1)]),t("div",wt,[t("div",pt,[t("div",{class:"question-text",innerHTML:a.questionText},null,8,ht)]),t("div",{class:"question-item-answer",id:`question-item-answer-${A}`},[a.type===n.QUESTION_TYPE.MULTIPLE_CHOICE?(o(),i("div",yt,[t("div",Dt,[e[6]||(e[6]=t("div",null,"Options:",-1)),t("ul",null,[(o(!0),i(h,null,y(a.questionData.multipleChoice,s=>(o(),i("li",{class:E([s.isAnswer?"result-correct":""])},l(s.text),3))),256))])]),t("div",Tt,[e[7]||(e[7]=t("div",null,"User answer:",-1)),(q=a.userAnswerDataDto)!=null&&q.multipleChoice?(o(),i("ul",bt,[(o(!0),i(h,null,y(n.getUserAnswerMultipleChoice(a.id,(O=a.userAnswerDataDto)==null?void 0:O.multipleChoice),s=>(o(),i("li",{class:E([s.isCorrect?"result-correct":"result-incorrect"])},l(s.text),3))),256))])):(o(),i("div",At,"No answer"))])])):j("v-if",!0),a.type===n.QUESTION_TYPE.MATCHING?(o(),i("div",xt,[t("div",kt,[e[9]||(e[9]=t("div",null,"Options:",-1)),(o(!0),i(h,null,y(n.getMatchingOption(a.questionData.matching),s=>(o(),i("div",Ct,[t("span",Et,l(s.leftItem),1),e[8]||(e[8]=t("i",{class:"bx bx-right-arrow-alt"},null,-1)),t("span",St,l(s.rightItem),1)]))),256))]),t("div",qt,[e[11]||(e[11]=t("div",null,"User answer:",-1)),(T=a.userAnswerDataDto)!=null&&T.matching?(o(!0),i(h,{key:0},y(n.getUserAnswerMatching(a.id,(p=a.userAnswerDataDto)==null?void 0:p.matching),s=>(o(),i("div",{class:E(["pair-answer",s.isCorrect?"":"pair-answer-incorrect"])},[t("span",Ot,l(s.leftItem),1),e[10]||(e[10]=t("i",{class:"bx bx-right-arrow-alt"},null,-1)),t("span",Nt,l(s.rightItem),1)],2))),256)):(o(),i("div",Ut,"No answer"))])])):j("v-if",!0),a.type===n.QUESTION_TYPE.ORDERING?(o(),i("div",Mt,[t("div",jt,[e[12]||(e[12]=t("div",null,"Options:",-1)),t("div",Yt,[t("div",Pt,[(o(!0),i(h,null,y((x=a.questionData.ordering)==null?void 0:x.sort((s,d)=>s.correctOrder-d.correctOrder),(s,d)=>(o(),i("div",Qt,[t("span",zt,"#"+l(d+1),1),M(" - "+l(s.text),1)]))),256))])])]),t("div",Ht,[e[13]||(e[13]=t("div",null,"User answer:",-1)),(k=a.userAnswerDataDto)!=null&&k.ordering?(o(),i("div",Vt,[t("div",Ft,[(o(!0),i(h,null,y(n.getUserAnswerOrdering(a.id,(C=a.userAnswerDataDto)==null?void 0:C.ordering),(s,d)=>(o(),i("div",{class:E(["ordering-answer-item",s.isCorrect?"result-correct":"result-incorrect"])},[t("span",null,"#"+l(d+1),1),M(" - "+l(s.text),1)],2))),256))])])):(o(),i("div",Lt,"No answer"))])])):j("v-if",!0),a.type===n.QUESTION_TYPE.SHORT_TEXT?(o(),i("div",Rt,[t("div",Bt,[e[14]||(e[14]=t("div",null,"Option:",-1)),t("div",Gt,l(a.questionData.shortText),1)]),t("div",Xt,[e[15]||(e[15]=t("div",null,"User answer:",-1)),(r=a.questionDataDto)!=null&&r.shortText?(o(),i("div",Jt,l((u=a.userAnswerDataDto)==null?void 0:u.shortText),1)):(o(),i("div",Kt,"No answer"))])])):j("v-if",!0)],8,It),t("div",null,[e[16]||(e[16]=M(" Score: ")),t("span",{class:E([a.score>0?"result-correct":"result-incorrect"])},l(a.score),3)])]),t("div",Wt,[t("i",{class:"bx bx-chevron-up",onClick:s=>n.toggleDisplayAnswer(A,s.currentTarget)},null,8,Zt)])])}),256))]))])])}const ie=K(et,[["render",$t],["__scopeId","data-v-acd3c1f2"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/test/review.vue"]]);export{ie as default};
