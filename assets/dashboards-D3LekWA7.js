import{d as U,u as V,l as F,g as Y,i as _,j as y,s as j,_ as X,r as h,a as l,o as r,b as t,c as d,w as p,f as b,t as e,e as k,p as $,F as g,D as I}from"./index-DpsX2GFI.js";import{A}from"./ApiQuestionSet-BFHE0-5K.js";import{Q as x}from"./questionSetSortCate-BudA85fH.js";import{I as H}from"./Input-izxMw_Rl.js";const J=U({__name:"dashboards",emits:["updateSidebar"],setup(i,{expose:a,emit:Q}){a();const s=Q,{t:T}=V(),f=F(),z=Y(),C=z.getUserInfo(),q=(n,u)=>Math.floor(u/n*100),c=_([]),m=y({pageNumber:1,pageSize:10,name:"",tagIds:[],sortBy:x.RATING}),o=async()=>{const n=await A.GetPublicByLimit(m);n.data.success&&(c.value=n.data.data.items,R.value=n.data.data.items)},v=_(null),R=_([]);function w(n){var u;!m.name||!((u=v.value)!=null&&u.contains(n.target))?c.value=[]:c.value=[...R.value]}const P=_([]),L=y({pageNumber:1,pageSize:5}),D=async()=>{try{let n=await A.GetRecentByLimit(L);if(n.data.success){let u=n.data.data;P.value=u.items}}catch(n){console.log("ERROR: GETALLEXAMBYLIMIT class exam: "+n)}},B=_([]),N=y({pageNumber:1,pageSize:10,sortBy:x.RATING}),S=_(!1),E=async()=>{try{S.value=!0;let n=await A.GetPublicByLimit(N);if(n.data.success){let u=n.data.data;B.value=u.items}}catch(n){console.log("ERROR: GETALLEXAMBYLIMIT search qs: "+n)}finally{S.value=!1}},M=n=>{f.push({name:"User_QuestionSet_Detail",params:{id:n}})},O=()=>{f.push({name:"User_QuestionSet_Create"})};j(async()=>{document.addEventListener("click",w),s("updateSidebar","dashboard"),await D(),await E()});const G={emit:s,t:T,router:f,authStore:z,user:C,getPercentageComplete:q,search_data:c,searchPageParams:m,getSearchData:o,searchResultRef:v,lastSearchResult:R,handleMouseClickOutside:w,quiz_data:P,pageParams:L,getData:D,public_quiz_data:B,publicPageParams:N,loading:S,getPublicQuizData:E,onRedirectToDetail:M,onRedirectToCreate:O,Input:H};return Object.defineProperty(G,"__isScriptSetup",{enumerable:!1,value:!0}),G}}),K={class:"page-container"},W={class:"title-container"},Z={class:"content"},tt={class:"search-bar",ref:"searchResultRef"},et={key:0,class:$(["search-result-container"])},st={class:"search-result"},at=["onClick"],ot={class:"result-item-title"},nt={class:"result-item-description"},it={class:"result-item-noq"},lt={class:"content-item"},rt={class:"content-item-title"},dt={"e-else":"",class:"quiz-container"},ct=["onClick"],ut={class:"quiz-item-title"},_t={class:"quiz-item-info"},mt={class:"quiz-item-progress"},vt={class:"add-button-context"},ht={class:"content-item"},pt={class:"content-item-title"},bt={class:"popular-quiz-container"},gt=["onClick"],ft={class:"p-quiz-item-info"},zt={class:"p-quiz-item-title"},qt={class:"p-quiz-item-rating"},Ct={class:"p-quiz-item-question-count"},Rt={class:"p-quiz-item-question-rate"},St={class:"p-quiz-item-credit"};function yt(i,a,Q,s,T,f){const z=h("a-col"),C=h("a-row"),q=h("RouterLink"),c=h("a-skeleton"),m=h("a-progress");return r(),l("div",K,[t("div",W,[d(C,{class:"w-100"},{default:p(()=>[d(z,{class:"main-title",span:20},{default:p(()=>[t("span",null,e(i.$t("dashboards.title")),1),a[1]||(a[1]=b()),a[2]||(a[2]=t("br",null,null,-1)),t("span",null,e(i.$t("dashboards.sub_title",{username:s.user.fullName})),1)]),_:1,__:[1,2]})]),_:1})]),t("div",Z,[t("div",tt,[d(s.Input,{onInput:s.getSearchData,modelValue:s.searchPageParams.name,"onUpdate:modelValue":a[0]||(a[0]=o=>s.searchPageParams.name=o),placeholder:s.t("class_question_set.other.search_placeholder")},{icon:p(()=>a[3]||(a[3]=[t("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"]),s.search_data.length>0?(r(),l("div",et,[t("div",st,[(r(!0),l(g,null,I(s.search_data,o=>(r(),l("div",{class:"search-result-item",onClick:v=>s.onRedirectToDetail(o.id)},[t("div",ot,e(o.name)+" ("+e(o.ratingAverage)+"⭐️) ",1),t("div",nt,[t("span",it,e(o.totalQuestionCount)+" "+e(i.$t("dashboards.list_items.quiz.questions")),1),b(" "+e(i.$t("detail_QS.other.created_by",{username:o.createBy})),1)])],8,at))),256))])])):k("v-if",!0)],512),t("div",lt,[t("div",rt,[t("div",null,[t("span",null,e(i.$t("dashboards.sections.quiz.title")),1),t("span",null,e(i.$t("dashboards.sections.quiz.sub_title")),1)]),d(q,{to:{name:"User_Library"},class:"content-item-navigator"},{default:p(()=>[t("span",null,e(i.$t("dashboards.buttons.viewAll")),1),a[4]||(a[4]=t("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[4]})]),s.loading?(r(),l(g,{key:0},[d(c,{active:"",loading:s.loading},null,8,["loading"]),d(c,{active:"",loading:s.loading},null,8,["loading"])],64)):k("v-if",!0),t("div",dt,[(r(!0),l(g,null,I(s.quiz_data,o=>(r(),l("div",{class:"quiz-item",onClick:v=>s.onRedirectToDetail(o.id)},[t("div",ut,[b(e(o.name)+" ",1),a[5]||(a[5]=t("i",{class:"bx bx-chevron-right"},null,-1))]),t("div",_t,[a[6]||(a[6]=t("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),b(" "+e(o.totalQuestionCount)+" "+e(i.$t("dashboards.list_items.quiz.questions")),1)]),t("div",mt,[t("div",null,e(i.$t("dashboards.list_items.quiz.learningProgress")),1),d(m,{"stroke-color":"var(--main-color)",percent:s.getPercentageComplete(o.totalQuestionCount,o.completedQuestionCount),status:"active"},null,8,["percent"])])],8,ct))),256)),t("div",{class:"quiz-item add-button",onClick:s.onRedirectToCreate},[a[7]||(a[7]=t("i",{class:"bx bx-plus add-button-icon"},null,-1)),t("div",vt,[t("span",null,e(i.$t("dashboards.buttons.createNewQuiz")),1),t("span",null,e(i.$t("dashboards.buttons.add_button_ins")),1)])])])]),t("div",ht,[t("div",pt,[t("div",null,[t("span",null,e(i.$t("dashboards.sections.schedule.title")),1),t("span",null,e(i.$t("dashboards.sections.schedule.sub_title")),1)]),d(q,{to:{name:"User_QuestionSet_Search"},class:"content-item-navigator"},{default:p(()=>[t("span",null,e(i.$t("dashboards.buttons.viewAll")),1),a[8]||(a[8]=t("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[8]})]),t("div",bt,[s.loading?(r(),l(g,{key:0},[d(c,{active:"",loading:s.loading},null,8,["loading"]),d(c,{active:"",loading:s.loading},null,8,["loading"])],64)):(r(!0),l(g,{key:1},I(s.public_quiz_data,o=>(r(),l("div",{class:"popular-quiz-item",onClick:v=>s.onRedirectToDetail(o.id)},[t("div",ft,[t("div",zt,e(o.name),1),k(' <div class="p-quiz-item-description">{{ quiz.description }}</div> ')]),t("div",qt,[t("div",Ct,e(o.totalQuestionCount)+" "+e(i.$t("dashboards.list_items.quiz.questions")),1),t("div",Rt,e(o.ratingAverage)+"⭐️ ("+e(o.ratingCount)+" "+e(i.$t("detail_QS.other.reviews"))+") ",1)]),t("div",St,[t("span",null,[a[9]||(a[9]=t("i",{class:"bx bx-user"},null,-1)),b(" "+e(o.createBy),1)])])],8,gt))),256))])])])])}const Tt=X(J,[["render",yt],["__scopeId","data-v-4aacc9ef"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/dashboards.vue"]]);export{Tt as default};
