import{d as D,q as F,l as M,u as Q,i as q,H as R,j as U,K as j,s as B,G as V,_ as G,r as d,a as x,o as g,b as t,c as l,w as r,t as m,g as u,F as E,B as P,C as Y}from"./index-BJp-CaMM.js";import{A as h}from"./ApiClass-Fjsuabv9.js";import{I as Z}from"./Input-CrntbuNA.js";const A={ALL:"All",UPCOMING:"Upcoming",ACTIVE:"Active",COMPLETED:"Completed"},H=D({__name:"exam",emits:["updateSidebar"],setup(b,{expose:e,emit:L}){var k;e();const a=F(),v=M(),{t:T}=Q(),c=L,_=q(a.params.id||""),C=q({classId:"",name:"",topic:""}),z=Object.values(A),y=R(()=>z.map(s=>({label:T(`class_exam.select_option.${s}`),value:s!==A.ALL?s:""}))),n=U({pageNumber:a.query.pageNumber||1,pageSize:a.query.pageSize||10,testName:((k=a.query.testName)==null?void 0:k.toString())||"",status:a.query.status||y.value[0].value,totalCount:0,statusFilter:!1}),p=q([]),w=[{testId:"123123123",name:"Assignment 1",numberOfQuestions:25,timeLimit:30,relativeTime:800,numberOfCompletion:30,status:"active",date:"2025-07-13T20:00:00.000Z"},{testId:"234234234",name:"Quiz 1",numberOfQuestions:10,timeLimit:15,relativeTime:240,numberOfCompletion:10,status:"upcoming",date:"2025-07-07T20:00:00.000Z"},{testId:"345345345",name:"Midterm Exam",numberOfQuestions:40,timeLimit:60,relativeTime:26,numberOfCompletion:25,status:"completed",date:"2025-07-16T10:00:00.000Z"},{testId:"456456456",name:"Final Exam",numberOfQuestions:50,timeLimit:90,relativeTime:24,numberOfCompletion:0,status:"upcoming",date:"2025-07-16T12:00:00.000Z"},{testId:"567567567",name:"Assignment 2",numberOfQuestions:20,timeLimit:25,relativeTime:500,numberOfCompletion:15,status:"active",date:"2025-06-26T04:00:00.000Z"},{testId:"678678678",name:"Pop Quiz",numberOfQuestions:5,timeLimit:50,relativeTime:9e3,numberOfCompletion:5,status:"completed",date:"2024-12-29T12:00:00.000Z"}],N=async()=>{try{_.value||v.push({name:"404"});let s=await h.GetById(_.value.toString());s.data.success||v.push({name:"404"}),C.value=s.data.data}catch(s){console.log("ERROR: GETBYID class: "+s)}},f=async()=>{try{let s=await h.GetAllExamByLimit(_.value.toString(),n);if(s.data.success){let o=s.data.data;p.value=o.items,n.pageNumber=o.pageNumber,n.pageSize=o.pageSize,n.totalCount=o.totalCount,n.statusFilter&&(n.pageNumber>o.totalPages&&n.totalCount>0?(n.pageNumber=1,v.push({name:"User_Class_Exam",params:{id:_.value},query:{pageNumber:1,pageSize:n.pageSize,testName:n.testName,status:n.status}})):v.push({name:"User_Class_Exam",params:{id:_.value},query:{pageNumber:n.pageNumber,pageSize:n.pageSize,testName:n.testName,status:n.status}}),n.statusFilter=!n.statusFilter)}}catch(s){console.log("ERROR: GETALLEXAMBYLIMIT class exam: "+s)}};j(()=>{var s;Object.keys(a.query).length===0&&(n.pageNumber=a.query.pageNumber||1,n.pageSize=a.query.pageSize||10,n.testName=((s=a.query.testName)==null?void 0:s.toString())||"",n.status=a.query.status||y.value[0].value,n.statusFilter=!0,f())});const I=(s,o)=>{n.pageNumber=s,n.pageSize=o,n.statusFilter=!0,f()},i=s=>{if(s<24)return`${s} hour${s!==1?"s":""} ago`;if(s<24*7){const o=Math.floor(s/24);return`${o} day${o!==1?"s":""} ago`}else if(s<24*30){const o=Math.floor(s/168);return`${o} week${o!==1?"s":""} ago`}else if(s<24*365){const o=Math.floor(s/720);return`${o} month${o!==1?"s":""} ago`}else{const o=Math.floor(s/8760);return`${o} year${o!==1?"s":""} ago`}},S=s=>{switch(s.toLowerCase()){case"completed":return"#3b82f6";case"active":return"#22C55E";case"upcoming":return"#f59e0b"}};B(async()=>{c("updateSidebar","class"),await N(),await f()});const O={route:a,router:v,t:T,emit:c,classId:_,classData:C,optionKeys:z,exam_status_options:y,pageParams:n,exam_data:p,exam_data_sample:w,getClassData:N,getData:f,onPaginationChange:I,getFormattedRelativeTime:i,getTagColor:S,get dayjs(){return V},Input:Z};return Object.defineProperty(O,"__isScriptSetup",{enumerable:!1,value:!0}),O}}),K={class:"page-container"},X={class:"title-container"},$={class:"breadcrumb-container"},J={class:"title-breadcrumb-item"},W={class:"title-breadcrumb-item"},ee={class:"breadcrumb-item-topic"},te={class:"content"},ae={class:"content-item"},se={class:"content-item-title"},ne={class:"content-item-functions"},ie={class:"content-item-navigators"},oe={class:"navigator-container"},le={style:{width:"300px",padding:"0px"}},re={class:"pagination-container"},me={key:0,class:"exam-item-container"},ue={class:"exam-item"},de={class:"exam-item-title"},ce={class:"exam-item-info exam-item-date"},_e={class:"exam-item-info exam-info-detail"},pe={class:"exam-item-questions"},ge={class:"exam-item-time"},be={class:"exam-item-assigned completion"},ve={class:"exam-item-assigned"},fe={class:"exam-item-actions"},xe={class:"d-flex align-items-center"},ye={key:1,class:"w-100 d-flex justify-content-center"};function Ce(b,e,L,a,v,T){const c=d("RouterLink"),_=d("a-button"),C=d("a-select-option"),z=d("a-select"),y=d("a-pagination"),n=d("a-tag"),p=d("a-menu-item"),w=d("a-menu-divider"),N=d("a-menu"),f=d("a-dropdown"),I=d("a-empty");return g(),x("div",K,[t("div",X,[t("div",$,[t("ul",null,[t("li",J,[l(c,{to:{name:"User_Class"}},{default:r(()=>e[3]||(e[3]=[t("span",null," Class ",-1)])),_:1,__:[3]}),e[4]||(e[4]=t("i",{class:"bx bx-chevron-right"},null,-1))]),t("li",W,[l(c,{to:{name:""},class:"breadcrumb-item-class"},{default:r(()=>[t("span",null,m(a.classData.name),1),t("span",ee,m(a.classData.topic),1)]),_:1})])])])]),t("div",te,[t("div",ae,[t("div",se,[e[6]||(e[6]=t("div",null,[t("span",null,"Exam"),t("span",null,"View and manage exams in your class")],-1)),l(_,{class:"main-color-btn",type:"primary",size:"large"},{default:r(()=>e[5]||(e[5]=[t("i",{class:"me-2 bx bx-list-plus"},null,-1),u(" Assign test ")])),_:1,__:[5]})]),t("div",ne,[t("div",ie,[t("div",oe,[l(c,{class:"navigator-item navigator-active",to:{name:""}},{default:r(()=>e[7]||(e[7]=[u(" Exam ")])),_:1,__:[7]}),l(c,{class:"navigator-item",to:{name:"User_Class_Quiz"}},{default:r(()=>e[8]||(e[8]=[u(" Quiz ")])),_:1,__:[8]}),l(c,{class:"navigator-item",to:{name:"User_Class_Student"}},{default:r(()=>e[9]||(e[9]=[u(" Student ")])),_:1,__:[9]})])]),l(z,{value:a.pageParams.status,"onUpdate:value":e[0]||(e[0]=i=>a.pageParams.status=i),style:{width:"200px"},onChange:a.getData},{default:r(()=>[(g(!0),x(E,null,P(a.exam_status_options,i=>(g(),Y(C,{value:i.value},{default:r(()=>[u(m(i.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),t("div",le,[l(a.Input,{onInput:a.getData,modelValue:a.pageParams.testName,"onUpdate:modelValue":e[1]||(e[1]=i=>a.pageParams.testName=i),placeholder:a.t("question_sets_index.search_placeholder")},{icon:r(()=>e[10]||(e[10]=[t("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])]),t("div",re,[l(y,{onChange:a.onPaginationChange,current:a.pageParams.pageNumber,"onUpdate:current":e[2]||(e[2]=i=>a.pageParams.pageNumber=i),total:a.pageParams.totalCount,pageSize:a.pageParams.pageSize,"show-total":(i,S)=>`${S[0]}-${S[1]} of ${i} items`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination"},null,8,["current","total","pageSize","show-total"])]),a.exam_data.length>0?(g(),x("div",me,[(g(!0),x(E,null,P(a.exam_data,i=>(g(),x("div",ue,[e[19]||(e[19]=t("i",{class:"bx bx-book-open exam-item-icon"},null,-1)),t("div",null,[t("div",de,[u(m(i.name)+" ",1),l(n,{color:a.getTagColor(i.status)},{default:r(()=>[u(m(i.status),1)]),_:2},1032,["color"])]),t("div",ce,[t("div",null,[e[11]||(e[11]=t("i",{class:"bx bx-calendar"},null,-1)),u(" "+m(a.dayjs(i.date).format("DD/MM/YYYY HH:mm A")),1)])]),t("div",_e,[t("div",pe,[e[12]||(e[12]=t("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),u(" "+m(i.numberOfQuestions)+" "+m(b.$t("dashboards.list_items.quiz.questions")),1)]),t("div",ge,[e[13]||(e[13]=t("i",{class:"bx bx-time-five"},null,-1)),u(" "+m(i.timeLimit)+" min ",1)]),t("span",be,m(i.numberOfCompletion)+" completions ",1),t("span",ve," Assigned "+m(a.getFormattedRelativeTime(i.relativeTime)),1)])]),t("div",fe,[l(f,{trigger:["click"]},{overlay:r(()=>[l(N,{class:"drop-down-container"},{default:r(()=>[l(p,{key:"0"},{default:r(()=>[e[14]||(e[14]=t("i",{class:"bx bx-info-circle"},null,-1)),u(" "+m(b.$t("question_sets_index.buttons.detail")),1)]),_:1,__:[14]}),l(p,{key:"1"},{default:r(()=>[e[15]||(e[15]=t("i",{class:"bx bx-edit"},null,-1)),u(" "+m(b.$t("question_sets_index.buttons.edit")),1)]),_:1,__:[15]}),l(p,{key:"2"},{default:r(()=>[e[16]||(e[16]=t("i",{class:"bx bx-copy"},null,-1)),u(" "+m(b.$t("question_sets_index.buttons.dublicate")),1)]),_:1,__:[16]}),l(w,{style:{"background-color":"#ddd"}}),l(p,{key:"3"},{default:r(()=>[t("span",xe,[e[17]||(e[17]=t("i",{class:"bx bx-trash-alt"},null,-1)),u(" "+m(b.$t("question_sets_index.buttons.delete")),1)])]),_:1})]),_:1})]),default:r(()=>[e[18]||(e[18]=t("i",{class:"bx bx-dots-vertical-rounded ant-dropdown-link"},null,-1))]),_:1,__:[18]})])]))),256))])):(g(),x("div",ye,[l(I,null,{description:r(()=>e[20]||(e[20]=[t("span",null," No data matches. ",-1)])),_:1})]))])])])}const Te=G(H,[["render",Ce],["__scopeId","data-v-1afc52c6"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/class/exam.vue"]]);export{Te as default};
