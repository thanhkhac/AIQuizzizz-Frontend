import{d as F,q as U,l as A,u as O,B as Y,i as S,j,O as Q,s as G,k as w,Q as H,_ as K,r as _,a as g,o as m,b as a,c as d,f,t as r,w as u,F as C,D as P,E as J,e as W}from"./index-BhCEM7Qr.js";import{A as D}from"./ApiTestTemplate-GdvjRZpe.js";import{F as L}from"./folderShareMode-BudLQ2R2.js";import{I as X}from"./Input-pAeduOdR.js";import{S as Z}from"./ShareModal-sacErCxr.js";import{V as $}from"./visibility-PZlBDoOn.js";import"./ApiQuestionSet-DcHTXIEH.js";import"./ApiFolder-BZCwdVbU.js";const ee=F({__name:"index",emits:["updateSidebar"],setup(l,{expose:n,emit:M}){var N;n();const e=U(),c=A(),{t:q}=O(),I=M,v=Object.values(L),h=Y(()=>v.map(s=>({label:q(`folder_index.select_option.${s}`),value:s!==L.ALL?s:""}))),b=S([]),t=j({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,name:((N=e.query.name)==null?void 0:N.toString())||"",shareMode:e.query.shareMode||h.value[0].value,totalCount:0,statusFilter:!1}),p=async()=>{try{let s=await D.GetAllByLimit(t);if(s.data.success){let i=s.data.data;b.value=i.items,t.pageNumber=i.pageNumber,t.pageSize=i.pageSize,t.totalCount=i.totalCount,t.statusFilter&&(t.pageNumber>i.totalPages&&t.totalCount>0?(t.pageNumber=1,c.push({name:"User_TestTemplate",query:{pageNumber:1,pageSize:t.pageSize,name:t.name,shareMode:t.shareMode}})):c.push({name:"User_TestTemplate",query:{pageNumber:t.pageNumber,pageSize:t.pageSize,name:t.name,shareMode:t.shareMode}}),t.statusFilter=!t.statusFilter)}}catch(s){console.log("ERROR: GETALLBYLIMIT testtemplate: "+s)}};Q(()=>{var s;Object.keys(e.query).length===0&&(t.pageNumber=e.query.pageNumber||1,t.pageSize=e.query.pageSize||10,t.name=((s=e.query.name)==null?void 0:s.toString())||"",t.shareMode=e.query.shareMode||h.value[0].value,t.statusFilter=!0,p())});const o=(s,i)=>{t.pageNumber=s,t.pageSize=i,t.statusFilter=!0,p()},T=()=>{c.push({name:"User_TestTemplate_Create"})},V=async s=>{if(await x(s),!y.value.canEdit){w.warning("You don't have permission to perform this function!");return}c.push({name:"User_TestTemplate_Detail",params:{id:s}})},B=async s=>{if(await x(s),!y.value.canEdit){w.warning("You don't have permission to perform this function!");return}c.push({name:"User_TestTemplate_Update",params:{id:s}})},y=S({canEdit:!1,canDelete:!1}),x=async s=>{const i=await D.GetPermissions(s);i.data.success&&(y.value=i.data.data)},R=S(null),E=async s=>{var i;if(z.value=s,await x(z.value.testTemplateId),!y.value.canEdit){w.warning("You don't have permission to perform this function!");return}await H(),(i=R.value)==null||i.openModal()},z=S({testTemplateId:"",name:"",createdBy:"",numberOfQuestion:0,dateCreated:0});G(async()=>{I("updateSidebar","folder"),await p(),z.value=b.value[0]});const k={route:e,router:c,t:q,emit:I,optionKeys:v,share_mode_options:h,test_template_data:b,pageParams:t,getData:p,onPaginationChange:o,onRefirectToCreate:T,onRefirectToDetail:V,onRefirectToUpdate:B,permission:y,getPermission:x,shareModalRef:R,onOpenShareModal:E,chosenTemplate:z,Input:X,ShareModal:Z,get VISIBILITY(){return $}};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),te={class:"page-container"},ae={class:"title-container"},se={class:"main-title"},ne={class:"title-button-container"},oe={class:"content"},ie={class:"content-item"},re={class:"content-item-functions"},le={class:"content-item-navigators"},de={class:"navigator-container"},ce={class:"filter-container"},me={style:{width:"300px",padding:"0px"}},ue={key:0,class:"quiz-item-container"},pe=["onClick"],_e={class:"quiz-item-title"},ge={class:"quiz-item-info quiz-info-detail"},fe={class:"quiz-item-questions"},ve={class:"quiz-item-created-by"},he={key:1,class:"w-100 d-flex justify-content-center"},be={class:"pagination-container"};function Te(l,n,M,e,c,q){const I=_("a-button"),v=_("RouterLink"),h=_("a-select-option"),b=_("a-select"),t=_("a-empty"),p=_("a-pagination");return m(),g(C,null,[a("div",te,[a("div",ae,[a("div",se,[a("span",null,r(l.$t("folder_index.title")),1),n[3]||(n[3]=f()),n[4]||(n[4]=a("br",null,null,-1)),a("span",null,r(l.$t("folder_index.sub_title")),1)]),a("div",ne,[d(I,{type:"primary",class:"ms-3 main-color-btn",size:"large",onClick:e.onRefirectToCreate},{default:u(()=>n[5]||(n[5]=[f(" Create new template "),a("i",{class:"bx bx-plus"},null,-1)])),_:1,__:[5]})])]),a("div",oe,[a("div",ie,[a("div",re,[a("div",le,[a("div",de,[d(v,{class:"navigator-item",to:{name:"User_Folder"}},{default:u(()=>[f(r(l.$t("folder_index.navigators.folder")),1)]),_:1}),d(v,{class:"navigator-item navigator-active",to:{name:""}},{default:u(()=>[f(r(l.$t("folder_index.navigators.test_template")),1)]),_:1})])]),a("div",ce,[d(b,{class:"me-3",value:e.pageParams.shareMode,"onUpdate:value":n[0]||(n[0]=o=>e.pageParams.shareMode=o),style:{width:"200px"},onChange:e.getData},{default:u(()=>[(m(!0),g(C,null,P(e.share_mode_options,o=>(m(),J(h,{value:o.value},{default:u(()=>[f(r(o.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),a("div",me,[d(e.Input,{onInput:e.getData,modelValue:e.pageParams.name,"onUpdate:modelValue":n[1]||(n[1]=o=>e.pageParams.name=o),placeholder:e.t("class_index.other.search_class_placeholder")},{icon:u(()=>n[6]||(n[6]=[a("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),e.test_template_data.length>0?(m(),g("div",ue,[(m(!0),g(C,null,P(e.test_template_data,o=>(m(),g("div",{class:"quiz-item",onClick:T=>e.onRefirectToDetail(o.testTemplateId)},[n[8]||(n[8]=a("i",{class:"bx bx-book-open quiz-item-icon"},null,-1)),a("div",null,[a("div",_e,r(o.name),1),a("div",ge,[a("div",fe,[n[7]||(n[7]=a("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),f(" "+r(o.numberOfQuestion)+" "+r(l.$t("dashboards.list_items.quiz.questions")),1)]),a("div",ve,r(l.$t("class_question_set.other.created_by"))+" "+r(o.createdBy),1)])]),W(` <div class="exam-item-actions">
                            <i class="bx bx-share-alt" @click="onOpenShareModal(template)"></i>
                            <i
                                class="bx bx-detail"
                                @click="onRefirectToDetail(template.testTemplateId)"
                            ></i>
                            <i
                                class="bx bx-edit"
                                @click="onRefirectToUpdate(template.testTemplateId)"
                            ></i>
                            <i
                                class="text-danger bx bx-trash-alt"
                                @click="onDelete(template.testTemplateId)"
                            ></i>
                        </div> `)],8,pe))),256))])):(m(),g("div",he,[d(t,null,{description:u(()=>[a("span",null,r(l.$t("class_index.other.no_data_matches")),1)]),_:1})])),a("div",be,[d(p,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":n[2]||(n[2]=o=>e.pageParams.pageNumber=o),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(o,T)=>`${T[0]}-${T[1]} of ${o} ${e.t("folder_index.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("folder_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])]),d(e.ShareModal,{ref:"shareModalRef",id:e.chosenTemplate.testTemplateId,name:e.chosenTemplate.name,mode:"template",options:[e.VISIBILITY.PRIVATE],visibility:e.VISIBILITY.PRIVATE},null,8,["id","name","options","visibility"])],64)}const Me=K(ee,[["render",Te],["__scopeId","data-v-3b3a6f2e"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/test_template/index.vue"]]);export{Me as default};
