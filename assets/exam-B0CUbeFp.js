import{c as m,I as j,d as V,q as $,l as B,u as G,i as T,C as H,j as Y,P as Q,s as X,M as J,k as W,O as Z,_ as K,r as b,a as h,o as f,b as t,w as d,f as p,t as l,F as P,E as w,G as ee}from"./index-CNC2148x.js";import{A as k}from"./ApiClass-BckaWWMn.js";import{A as te}from"./ApiTest-etmH5VkP.js";import{I as ae}from"./Input-B6AzPJuz.js";var se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"};function E(i){for(var a=1;a<arguments.length;a++){var u=arguments[a]!=null?Object(arguments[a]):{},e=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(e=e.concat(Object.getOwnPropertySymbols(u).filter(function(c){return Object.getOwnPropertyDescriptor(u,c).enumerable}))),e.forEach(function(c){ne(i,c,u[c])})}return i}function ne(i,a,u){return a in i?Object.defineProperty(i,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[a]=u,i}var O=function(a,u){var e=E({},a,u.attrs);return m(j,E({},e,{icon:se}),null)};O.displayName="FileDoneOutlined";O.inheritAttrs=!1;const y={ALL:"All",UPCOMING:"Upcoming",ACTIVE:"Active",COMPLETED:"Completed"},oe=V({__name:"exam",emits:["updateSidebar"],setup(i,{expose:a,emit:u}){var D;a();const e=$(),c=B(),{t:N}=G(),v=u,g=T(e.params.id||""),C=T({classId:"",name:"",topic:""}),z=Object.values(y),x=H(()=>z.map(s=>({label:N(`class_exam.select_option.${s}`),value:s!==y.ALL?s:""}))),n=Y({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,testName:((D=e.query.testName)==null?void 0:D.toString())||"",status:e.query.status||x.value[0].value,totalCount:0,statusFilter:!1}),S=T([]),o=async()=>{try{g.value||c.push({name:"404"});let s=await k.GetById(g.value.toString());s.data.success||c.push({name:"404"}),C.value=s.data.data}catch(s){console.log("ERROR: GETBYID class: "+s)}},_=async()=>{try{let s=await k.GetAllExamByLimit(g.value.toString(),n);if(s.data.success){let r=s.data.data;S.value=r.items,n.pageNumber=r.pageNumber,n.pageSize=r.pageSize,n.totalCount=r.totalCount,n.statusFilter&&(n.pageNumber>r.totalPages&&n.totalCount>0?(n.pageNumber=1,c.push({name:"User_Class_Exam",params:{id:g.value},query:{pageNumber:1,pageSize:n.pageSize,testName:n.testName,status:n.status}})):c.push({name:"User_Class_Exam",params:{id:g.value},query:{pageNumber:n.pageNumber,pageSize:n.pageSize,testName:n.testName,status:n.status}}),n.statusFilter=!n.statusFilter)}}catch(s){console.log("ERROR: GETALLEXAMBYLIMIT class exam: "+s)}};Q(()=>{var s;Object.keys(e.query).length===0&&(n.pageNumber=e.query.pageNumber||1,n.pageSize=e.query.pageSize||10,n.testName=((s=e.query.testName)==null?void 0:s.toString())||"",n.status=e.query.status||x.value[0].value,n.statusFilter=!0,_())});const M=(s,r)=>{n.pageNumber=s,n.pageSize=r,n.statusFilter=!0,_()},U=s=>{if(s<24)return`${s} hour${s!==1?"s":""} ago`;if(s<24*7){const r=Math.floor(s/24);return`${r} day${r!==1?"s":""} ago`}else if(s<24*30){const r=Math.floor(s/168);return`${r} week${r!==1?"s":""} ago`}else if(s<24*365){const r=Math.floor(s/720);return`${r} month${r!==1?"s":""} ago`}else{const r=Math.floor(s/8760);return`${r} year${r!==1?"s":""} ago`}},q=s=>{switch(s){case y.COMPLETED:return"#3b82f6";case y.ACTIVE:return"#22C55E";case y.UPCOMING:return"#f59e0b"}},F=()=>{c.push({name:"User_Test_Create",params:{id:g.value}})},R=s=>{c.push({name:"User_Test_Update",params:{id:s}})},A=s=>{J.confirm({title:"Are you sure to delete this test from class?",content:"This action is inreversible, every related data will be erased forever. Please double check before delete!",okText:"Confirm",onOk:async()=>{(await te.Delete(s)).data.success&&(W.success("Delete test successfully."),_())}})},L=s=>{c.push({name:"User_Test_Attempt"})};X(async()=>{v("updateSidebar","class"),await o(),await _()});const I={route:e,router:c,t:N,emit:v,classId:g,classData:C,optionKeys:z,exam_status_options:x,pageParams:n,exam_data:S,getClassData:o,getData:_,onPaginationChange:M,getFormattedRelativeTime:U,getTagColor:q,onRedirectToCreate:F,onRedirectToUpdate:R,onDeleteTest:A,onRedirectToAttempt:L,get dayjs(){return Z},Input:ae,get FileDoneOutlined(){return O}};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}}),ie={class:"page-container"},le={class:"title-container"},re={class:"breadcrumb-container"},ce={class:"title-breadcrumb-item"},me={class:"title-breadcrumb-item"},ue={class:"breadcrumb-item-topic"},de={class:"content"},pe={class:"content-item"},_e={class:"content-item-title"},ge={class:"content-item-functions"},ve={class:"content-item-navigators"},be={class:"navigator-container"},fe={style:{width:"300px",padding:"0px"}},he={class:"pagination-container"},xe={key:0,class:"exam-item-container"},ye={class:"exam-item"},Ce={class:"exam-item-title"},ze={class:"exam-item-info exam-item-date"},Se={class:"exam-item-info exam-info-detail"},Ne={class:"exam-item-questions"},Te={class:"exam-item-time"},Oe={class:"exam-item-assigned completion"},Ie={class:"exam-item-assigned"},De={class:"exam-item-actions"},Pe=["onClick"],we=["onClick"],ke={key:1,class:"w-100 d-flex justify-content-center"};function Ee(i,a,u,e,c,N){const v=b("RouterLink"),g=b("a-button"),C=b("a-select-option"),z=b("a-select"),x=b("a-pagination"),n=b("a-tag"),S=b("a-empty");return f(),h("div",ie,[t("div",le,[t("div",re,[t("ul",null,[t("li",ce,[m(v,{to:{name:"User_Class"}},{default:d(()=>[t("span",null,l(i.$t("class_index.title")),1),a[3]||(a[3]=p()),a[4]||(a[4]=t("br",null,null,-1))]),_:1,__:[3,4]}),a[5]||(a[5]=t("i",{class:"bx bx-chevron-right"},null,-1))]),t("li",me,[m(v,{to:{name:""},class:"breadcrumb-item-class"},{default:d(()=>[t("span",null,l(e.classData.name),1),t("span",ue,l(e.classData.topic),1)]),_:1})])])])]),t("div",de,[t("div",pe,[t("div",_e,[t("div",null,[t("span",null,l(i.$t("class_index.title")),1),t("span",null,l(i.$t("class_exam.sub_title")),1)]),m(g,{type:"primary",class:"main-color-btn",onClick:e.onRedirectToCreate},{default:d(()=>[a[6]||(a[6]=t("i",{class:"me-2 bx bx-list-plus"},null,-1)),p(" "+l(i.$t("class_exam.buttons.assign_test")),1)]),_:1,__:[6]})]),t("div",ge,[t("div",ve,[t("div",be,[m(v,{class:"navigator-item navigator-active",to:{name:""}},{default:d(()=>[p(l(i.$t("class_index.navigators.exam")),1)]),_:1}),m(v,{class:"navigator-item",to:{name:"User_Class_Quiz"}},{default:d(()=>[p(l(i.$t("class_index.navigators.quiz")),1)]),_:1}),m(v,{class:"navigator-item",to:{name:"User_Class_Student"}},{default:d(()=>[p(l(i.$t("class_index.navigators.member")),1)]),_:1})])]),m(z,{value:e.pageParams.status,"onUpdate:value":a[0]||(a[0]=o=>e.pageParams.status=o),style:{width:"200px"},onChange:e.getData},{default:d(()=>[(f(!0),h(P,null,w(e.exam_status_options,o=>(f(),ee(C,{value:o.value},{default:d(()=>[p(l(o.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),t("div",fe,[m(e.Input,{onInput:e.getData,modelValue:e.pageParams.testName,"onUpdate:modelValue":a[1]||(a[1]=o=>e.pageParams.testName=o),placeholder:e.t("class_exam.other.search_placeholder")},{icon:d(()=>a[7]||(a[7]=[t("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])]),t("div",he,[m(x,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":a[2]||(a[2]=o=>e.pageParams.pageNumber=o),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(o,_)=>`${_[0]}-${_[1]} of ${o} ${e.t("class_exam.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("class_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])]),e.exam_data.length>0?(f(),h("div",xe,[(f(!0),h(P,null,w(e.exam_data,o=>(f(),h("div",ye,[a[11]||(a[11]=t("i",{class:"bx bx-book-open exam-item-icon"},null,-1)),t("div",null,[t("div",Ce,[p(l(o.name)+" ",1),m(n,{color:e.getTagColor(o.status)},{default:d(()=>[p(l(i.$t(`class_exam.select_option.${o.status}`)),1)]),_:2},1032,["color"])]),t("div",ze,[t("div",null,[a[8]||(a[8]=t("i",{class:"bx bx-calendar"},null,-1)),p(" "+l(e.dayjs(o.timeStart).format("DD/MM/YYYY HH:mm A")),1)])]),t("div",Se,[t("div",Ne,[a[9]||(a[9]=t("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),p(" "+l(o.numberOfQuestions)+" "+l(i.$t("dashboards.list_items.quiz.questions")),1)]),t("div",Te,[a[10]||(a[10]=t("i",{class:"bx bx-time-five"},null,-1)),p(" "+l(o.timeLimit)+" "+l(i.$t("class_exam.other.min")),1)]),t("span",Oe,l(o.numberOfCompletion)+" "+l(i.$t("class_exam.other.completions")),1),t("span",Ie,l(i.$t("class_exam.other.assigned"))+" "+l(e.getFormattedRelativeTime(o.relativeTime)),1)])]),t("div",De,[m(g,{type:"primary",class:"main-color-btn",onClick:_=>e.onRedirectToAttempt(o.testId)},{default:d(()=>[p(l(i.$t("class_exam.buttons.attempt")),1)]),_:2},1032,["onClick"]),t("i",{class:"bx bx-edit",onClick:_=>e.onRedirectToUpdate(o.testId)},null,8,Pe),t("i",null,[m(e.FileDoneOutlined)]),t("i",{class:"text-danger bx bx-trash-alt",onClick:_=>e.onDeleteTest(o.testId)},null,8,we)])]))),256))])):(f(),h("div",ke,[m(S,null,{description:d(()=>[t("span",null,l(i.$t("class_index.other.no_data_matches")),1)]),_:1})]))])])])}const Re=K(oe,[["render",Ee],["__scopeId","data-v-1afc52c6"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/class/exam.vue"]]);export{Re as default};
