var ct=Object.defineProperty;var ut=(v,n,T)=>n in v?ct(v,n,{enumerable:!0,configurable:!0,writable:!0,value:T}):v[n]=T;var se=(v,n,T)=>ut(v,typeof n!="symbol"?n+"":n,T);import{J as ve,d as dt,u as mt,q as _t,l as vt,g as gt,i as _,B as He,j as ht,s as ft,S as pt,k as ae,G as bt,T as wt,_ as yt,r as A,a as l,o as i,b as t,c,e as f,E as X,w as g,f as p,t as a,F as I,p as w,D as R}from"./index-Cnq_Nl0p.js";import{A as ie}from"./ApiQuestionSet-ycCGT-br.js";import{Q as M}from"./questionTypes-CS3lcRlq.js";import{T as Ct,l as St}from"./vue-draggable-plus-Cx2J11jB.js";import{V as Qt}from"./Validator-CWeiTIFe.js";import{D as It}from"./index-DXAs6BB5.js";import{H as Tt}from"./HolderOutlined-BAKcErxD.js";/* empty css                                                                 */const xt={HTML:"Html",PLAIN_TEXT:"PlainText"},Ue=[{id:"q1",quote:"Keep pushing. You're almost there!"},{id:"q2",quote:"Stay focused. You've got this!"},{id:"q3",quote:"One step at a time. Keep going!"},{id:"q4",quote:"You're doing great. Don't stop now!"},{id:"q5",quote:"Every effort counts. Keep it up!"},{id:"q6",quote:"Strong mind. Strong progress."},{id:"q7",quote:"Momentum is yours. Own it!"},{id:"q8",quote:"Eyes forward. Energy up!"},{id:"q9",quote:"You're closer than you think."},{id:"q10",quote:"Rise up. Power through!"}],kt="/assets/trophy-BqY0IuVX.png",ge={GET_ALL_BY_QUESTION_ID:"Comment/Question/{questionId}",CREATE:"Comment/Question/{questionId}",REPLY:"Comment/{commentId}/Reply",DELETE:"Comment/{commentId}"};class At{constructor(){se(this,"GetAllByQuestionId",async n=>{const T=ge.GET_ALL_BY_QUESTION_ID.replace("{questionId}",n.questionId);return await ve.get(T,{params:{pageNumber:n.pageNumber,pageSize:n.pageSize}})});se(this,"Create",async n=>{const T=ge.CREATE.replace("{questionId}",n.questionId);return await ve.post(T,n)});se(this,"Reply",async n=>{const T=ge.REPLY.replace("{commentId}",n.commentId);return await ve.post(T,n)});se(this,"Delete",async n=>{const T=ge.DELETE.replace("{commentId}",n);return await ve.delete(T)})}}const le=new At,Mt=dt({__name:"learn",setup(v,{expose:n}){n();const T=new URL("/assets/confetti-bjvcnoca.lottie",import.meta.url).href,{t:e}=mt(),he=_t(),P=vt(),K=gt(),y=_({title:"",description:"",completedQuestionCount:0,totalQuestionCount:0,questions:[]}),L=_(he.params.id),H=_(!1),J=_(!0),G=async()=>{if(H.value=!0,!Qt.isValidGuid(L.value.toString())){P.push({name:"404"});return}try{let s=await ie.GetDetailById(L.value.toString()),u=await ie.LearnQuestions(L.value.toString(),7);if(!s.data.success||!u.data.success){P.push({name:"404"});return}if(y.value=u.data.data,y.value.completedQuestionCount===y.value.totalQuestionCount){Le();return}y.value.title=s.data.data.name,y.value.description=s.data.data.description,D.value=[...y.value.questions],m.value=D.value[0],D.value.shift(),console.log(m.value)}catch(s){Object.keys(s.response.data.errors).includes(pt.PLAN_REQUIRE_PLAN)&&(J.value=!1,P.back())}finally{H.value=!1}},fe=_(y.value.completedQuestionCount),Q=_([]),q=_(new Set),D=_([]),U=_(!1),m=_({}),z=_(""),o=_(!1),C=_(!1),E=_([]),x=He(()=>{var s;return(s=m.value.questionData.multipleChoice)==null?void 0:s.some(u=>u.text.length>=100)}),b=_([]),k=_([]),V=_([]),Y=_(""),O=_({result:!1,resultText:e("learn_QS.result.wrong")}),W=He(()=>Math.floor(y.value.completedQuestionCount/y.value.totalQuestionCount*100)),pe=()=>{var r;let s=(r=m.value.questionData.multipleChoice)==null?void 0:r.filter(d=>d.isAnswer).map(d=>d.id||[]).sort(),u=E.value.sort();return E.value.length!==(s==null?void 0:s.length)?!1:u.every((d,h)=>d===s[h])},Pe=s=>{var h;const u=y.value.questions.findIndex(S=>S.id===m.value.id);let r=(h=y.value.questions[u].questionData.multipleChoice)==null?void 0:h.filter(S=>S.isAnswer).map(S=>S.id||[]),d=E.value;return r!=null&&r.includes(s.id)?!0:!(d!=null&&d.includes(s.id)&&!s.isAnswer)},be=()=>{var r;let s=((r=m.value.questionData.ordering)==null?void 0:r.map(d=>d.correctOrder).sort())||[];return V.value.map(d=>d.correctOrder).every((d,h)=>d===s[h])},we=()=>{let s=m.value.questionData.matching.matches,u=b.value.map(h=>h.id),r=k.value.map(h=>h.id);return u.map((h,S)=>({leftId:h,rightId:r[S]})).every(h=>s.some(S=>S.leftId===h.leftId&&S.rightId===h.rightId))},ze=s=>{var S,F;const u=m.value.questionData.matching;if(!u)return!1;let r=u.leftItems.some(N=>N.id===s),d=u.matches.find(N=>r?N.leftId===s:N.rightId===s);const h=r?b.value.findIndex(N=>N.id===s):k.value.findIndex(N=>N.id===s);return h===-1||!d?!1:r?((S=k.value[h])==null?void 0:S.id)===d.rightId:((F=b.value[h])==null?void 0:F.id)===d.leftId},ye=s=>s.trim().toLowerCase().normalize("NFKC").replace(/[\u2019\u2018\u201B\u0060]/g,"'").replace(/\s+/g," "),Ce=()=>ye(Y.value)===ye(m.value.questionData.shortText),Ve=_(null),Se=_(!1),Z=()=>{Se.value=!Se.value},Qe=_(!1),Ye=K.getUserInfo(),ee=_([]),re=_(""),te=_(null),ce=_(!1),j=ht({pageNumber:1,pageSize:10,questionId:""}),B=_(!1),Ie=_(1),ue=async()=>{B.value=!0;const s=await le.GetAllByQuestionId(j);s.data.success&&(ee.value=s.data.data.items.filter(u=>!u.parentId),Ie.value=s.data.data.totalPages),B.value=!1},Be=async()=>{try{B.value=!0;let s;if(ce.value&&te.value?s=await le.Reply({commentId:te.value.id,content:re.value}):s=await le.Create({questionId:m.value.id,content:re.value}),s.data.success){ae.success(e("message.added_successfully")),await ue();return}ae.error(e("message.added_failed"))}catch(s){console.log(s)}finally{B.value=!1}},Fe=async s=>{},Ge=async s=>{if((await le.Delete(s)).data.success){ae.success(e("message.deleted_successfully")),await ue();return}ae.error(e("message.deleted_failed")),qe()},je=s=>{ce.value=!0,te.value=s},qe=()=>{re.value="",ce.value=!1,te.value=null},de=_([]),Xe=s=>{de.value[s]=!de.value[s],$(`#reply-items-${s}`).slideToggle()},Ke=async()=>{j.pageNumber<Ie.value&&(j.pageNumber+=1),B.value=!0;const s=await le.GetAllByQuestionId(j);if(s.data.success){const u=s.data.data.items.filter(r=>!r.parentId);ee.value=[...ee.value,...u]}B.value=!1},Je=async()=>{Qe.value=!0,j.questionId=m.value.id,await ue()},We=()=>{Qe.value=!1},Te=()=>{ie.LearnHistory(L.value.toString(),[{questionId:m.value.id,isCorrect:!0}])},Ze=()=>{switch(Z(),o.value=!0,m.value.type){case M.MULTIPLE_CHOICE:{O.value={result:pe(),resultText:pe()?e("learn_QS.result.correct"):e("learn_QS.result.wrong")};break}case M.ORDERING:{O.value={result:be(),resultText:be()?e("learn_QS.result.correct"):e("learn_QS.result.wrong")};break}case M.MATCHING:{O.value={result:we(),resultText:we()?e("learn_QS.result.correct"):e("learn_QS.result.wrong")};break}case M.SHORT_TEXT:{O.value={result:Ce(),resultText:Ce()?e("learn_QS.result.correct"):e("learn_QS.result.wrong")};break}}O.value.result===!1&&!U.value?q.value.add(m.value):O.value.result&&U.value?(q.value.delete(m.value),Q.value.push(m.value),y.value.completedQuestionCount+=1,Te()):O.value.result===!1?q.value.add(m.value):(Q.value.push(m.value),y.value.completedQuestionCount+=1,Te()),_e()},$e=s=>{var u;switch(Z(),o.value=!0,C.value=!0,O.value={result:!1,resultText:e("learn_QS.result.skipped")},q.value.add(m.value),m.value.type){case M.MULTIPLE_CHOICE:{E.value=(u=m.value.questionData.multipleChoice)==null?void 0:u.filter(r=>r.isAnswer).map(r=>r.id);break}case M.MATCHING:{const r=m.value.questionData.matching,d=(r==null?void 0:r.matches)??[],h=(r==null?void 0:r.leftItems)??[],S=(r==null?void 0:r.rightItems)??[],F=d.map(Ae=>h.find(Me=>Me.id==Ae.leftId)),N=d.map(Ae=>S.find(Me=>Me.id==Ae.rightId));b.value=F,k.value=N;break}case M.ORDERING:{V.value=V.value.sort((r,d)=>r.correctOrder-d.correctOrder);break}case M.SHORT_TEXT:{Y.value=m.value.questionData.shortText;break}}_e()},ne=()=>{var s;switch(m.value.type){case M.MULTIPLE_CHOICE:{z.value=e("learn_QS.instructions.multiple_choice",{number:(s=m.value.questionData.multipleChoice)==null?void 0:s.filter(u=>u.isAnswer).length}),E.value=[];break}case M.ORDERING:{z.value=e("learn_QS.instructions.matching"),V.value=m.value.questionData.ordering;break}case M.MATCHING:{z.value=e("learn_QS.instructions.ordering"),b.value=m.value.questionData.matching.leftItems,k.value=m.value.questionData.matching.rightItems;break}case M.SHORT_TEXT:{z.value=e("learn_QS.instructions.short_text"),Y.value="";break}}},et=()=>{oe(),_e(),!(D.value.length<=0)&&(m.value=D.value.shift(),o.value=!1,C.value=!1,ne(),Z())},me=_(!1),Ee=_(""),Oe=()=>{Ee.value=e(`learn_QS.final_modal.quotes.${Ue[Math.floor(Math.random()*Ue.length)].id}`),setTimeout(()=>{me.value=!0},1e3)},tt=()=>{me.value=!1},_e=async()=>{if(D.value.length>0)return;const s=q.value.size>0;if(s&&!U.value){U.value=!0,D.value=Array.from(q.value);return}if(!s||U.value){if(s){const u=y.value.questions.filter(r=>q.value.has(r)).map(r=>({questionId:r.id,isCorrect:Q.value.some(d=>d.id===r.id)}));await ie.LearnHistory(L.value.toString(),u)}Oe()}},nt=(s,u)=>{$(u).toggleClass("bx-chevron-down bx-chevron-up");const d=$(`#question-item-answer-${s}`);d&&$(d).slideToggle()},ot=async()=>{await G(),U.value=!1,C.value=!1,o.value=!1,z.value="",me.value=!1,q.value=new Set,Q.value=[],Z(),ne()},xe=_(!1),Le=()=>{xe.value=!0,De()},Re=_(),ke=_(!1),De=()=>{var s,u;ke.value=!0,(u=(s=Re.value)==null?void 0:s.getDotLottieInstance())==null||u.play(),setTimeout(()=>{ke.value=!1},5e3)},st=async()=>{(await ie.resetLearnHistory(L.value.toString())).data.success&&(ae.success(e("learn_QS.msg.learn_mode_reset")),xe.value=!1,await G(),ne(),oe())},at={scroll:!0,scrollSensitivity:100,scrollSpeed:100,scrollTarget:document.scrollingElement};function oe(){bt(()=>{requestAnimationFrame(()=>{const s=document.querySelectorAll(".matching-option-container.left .answer-option-matching"),u=document.querySelectorAll(".matching-option-container.right .answer-option-matching"),r=Math.min(s.length,u.length);for(let d=0;d<r;d++){const h=s[d],S=u[d];if(!h||!S)continue;h.style.height="auto",S.style.height="auto";const F=Math.max(h.offsetHeight,S.offsetHeight);h.style.height=`${F}px`,S.style.height=`${F}px`}})})}const it=()=>{sessionStorage.setItem("setting_key","Subscription"),P.push({name:"User_Settings"})},lt=()=>{P.push({name:"User_QuestionSet_Test",params:{id:L.value}})},rt=()=>{P.push({name:"User_Library"})};ft(async()=>{await G(),ne(),oe(),window.addEventListener("resize",oe),de.value=ee.value.map(()=>!1)});const Ne={animationPath:T,t:e,route:he,router:P,authStore:K,quiz:y,questionSetId:L,loading:H,isAllowed:J,getQuizData:G,totalCompleted:fe,completed:Q,incorrect:q,currentSession:D,isCurrentSessionReLearn:U,currentQuestion:m,currentQuestionInstruction:z,currentQuestionIsSubmitted:o,currentQuestionIsSkipped:C,userAnswerMultipleChoice:E,isOptionExceed:x,userAnswerMatchingLeft:b,userAnswerMatchingRight:k,userAnswerOrdering:V,userAnswerShortText:Y,currentQuestionResult:O,completionPercentage:W,checkMultipleChoice:pe,checkMultipleChoiceAnswerCorrect:Pe,checkOrdering:be,checkMatching:we,checkMatchingAnswerCorrect:ze,cleanShortTextAnswer:ye,checkShortText:Ce,explainModal:Ve,explainModalOpen:Se,toggleExplainModal:Z,commentModalOpen:Qe,user_info:Ye,currentQuestionComments:ee,commentValue:re,chosenComment:te,isReplying:ce,commentPageParams:j,commentLoading:B,commentTotalPage:Ie,getCommentData:ue,onAddComment:Be,onEditComment:Fe,onDeleteComment:Ge,onTriggerReply:je,onCancelReplying:qe,repliesOpen:de,onToggleReplyContainer:Xe,onLoadMoreComment:Ke,onOpenCommentModal:Je,onCloseCommentModal:We,sendCorrectQuestionHistory:Te,onSubmitAnswer:Ze,onSkipQuestion:$e,resetUserAnswer:ne,onNextQuestion:et,finalModalOpen:me,finalModalQuote:Ee,openFinalModal:Oe,closeFinalModal:tt,triggerFinalModal:_e,toggleDisplayAnswer:nt,onContinuesLearn:ot,completeModalOpen:xe,openCompleteModal:Le,animationRef:Re,isAnimationDisplaying:ke,triggerAnimation:De,onResetLearnHistory:st,dragOptions:at,syncMatchingHeights:oe,onRedirectToSubcription:it,onRedirectToTest:lt,onRedirectToLibrary:rt,get QUESTION_FORMAT(){return xt},get QUESTION_TYPE(){return M},TextArea:Ct,get VueDraggable(){return St},get HolderOutlined(){return Tt},get dayjs(){return wt},get DotLottieVue(){return It},get trophy_png(){return kt}};return Object.defineProperty(Ne,"__isScriptSetup",{enumerable:!1,value:!0}),Ne}}),qt={class:"page-container"},Et={class:"title-container"},Ot={key:1,class:"progress-bar-container"},Lt={class:"progress-info"},Rt={class:"progress-info-number"},Dt={class:"progress-info-percentage"},Nt={class:"content"},Ht={class:"content-item"},Ut={class:"section question-section"},Pt=["innerHTML"],zt={class:"section answer-section"},Vt={key:0,class:"relearn-ins"},Yt={class:"d-flex align-items-center"},Bt={class:"answer-section-ins"},Ft={class:"answer-option-content"},Gt={key:0,class:"bx bx-check answer-icon"},jt={key:1,class:"bx bx-x answer-icon"},Xt={key:2,class:"answer-option-container matching"},Kt={class:"matching-option-container left"},Jt={class:"d-flex align-items-center"},Wt={class:"answer-option-order"},Zt={class:"answer-option-content"},$t={class:"matching-option-container right"},en={class:"d-flex align-items-center"},tn={class:"answer-option-content"},nn={class:"answer-option-order"},on={key:3,class:"answer-option-container ordering"},sn={class:"answer-option-order"},an={class:"answer-option-content"},ln={key:4,class:"answer-option-container"},rn={class:"w-100 d-flex align-items-center"},cn={key:0,class:"bx bx-check answer-icon"},un={key:1,class:"bx bx-x answer-icon"},dn={key:0,class:"short-text-correct-answer"},mn={class:"learn-question-footer"},_n={class:"d-flex"},vn=["innerHTML"],gn={class:"comment-section"},hn={class:"comment-container"},fn={class:"comment-main-content"},pn={class:"w-100 d-flex flex-column"},bn={class:"comment-content-info"},wn={key:0,class:"comment-actions"},yn={class:"comment-content"},Cn={class:"comment-reply"},Sn=["onClick"],Qn=["onClick"],In=["id"],Tn={class:"comment-item"},xn={class:"comment-main-content"},kn={class:"w-100 d-flex flex-column"},An={class:"comment-content-info"},Mn={key:0,class:"comment-actions"},qn={class:"comment-content"},En={key:1,class:"w-100 h-100 d-flex justify-content-center align-items-center"},On={key:0},Ln={key:1},Rn={class:"comment-form-footer"},Dn={class:"title-container"},Nn={class:"content-item modal-final-container"},Hn={class:"final-modal-quote"},Un={class:"progress-bar-container final"},Pn={class:"progress-info"},zn={class:"progress-info-percentage"},Vn={class:"progress-info"},Yn={class:"progress-info-percentage"},Bn={class:"progress-info-percentage"},Fn={class:"content-item modal-final-container"},Gn={class:"preview-question-title"},jn={class:"preview-question-container"},Xn={class:"preview-question-item"},Kn={class:"question-item-content"},Jn=["innerHTML"],Wn={key:1,class:"question-text"},Zn=["id"],$n={key:0,class:"multiple-choice-answer"},eo={key:0,class:"text-success"},to={class:"pair-answer"},no={class:"pair-answer-item"},oo={class:"pair-answer-item"},so={key:2,class:"ordering-answer"},ao={class:"ordering-answer-item"},io={class:"ordering-answer-item"},lo={class:"ordering-answer-item"},ro={class:"short-text-answer"},co={class:"question-item-toogle-btn"},uo=["onClick"],mo={class:"content-item final-modal-footer"},_o={class:"modal-complete-container"},vo={class:"content-item modal-complete"},go=["src"],ho={class:"modal-complete-content-container"},fo={class:"modal-complete-content"},po={class:"modal-complete-content sub-content"},bo={class:"modal-complete-buttons-container"};function wo(v,n,T,e,he,P){const K=A("RouterLink"),y=A("a-col"),L=A("a-row"),H=A("a-skeleton"),J=A("a-progress"),G=A("a-checkbox"),fe=A("a-checkbox-group"),Q=A("a-button"),q=A("a-popconfirm"),D=A("a-empty"),U=A("a-form"),m=A("a-drawer"),z=A("a-divider");return i(),l(I,null,[t("div",qt,[t("div",Et,[c(L,{class:"w-100 d-flex align-items-center"},{default:g(()=>[c(y,{span:1},{default:g(()=>[c(K,{to:{name:"User_Library"}},{default:g(()=>n[8]||(n[8]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[8]})]),_:1}),c(y,{class:"main-title",span:23},{default:g(()=>[t("span",null,a(e.quiz.title),1),n[9]||(n[9]=p()),n[10]||(n[10]=t("br",null,null,-1)),t("span",null,a(e.quiz.description),1)]),_:1,__:[9,10]})]),_:1})]),e.loading?(i(),X(H,{key:0,"activeactive:loading":"loading"})):(i(),l("div",Ot,[t("div",Lt,[t("div",Rt,a(v.$t("learn_QS.other.progress_count",{current:e.quiz.completedQuestionCount,total:e.quiz.totalQuestionCount})),1),t("div",Dt,[t("span",null,a(e.completionPercentage),1),p(" % "+a(v.$t("learn_QS.other.completed")),1)])]),c(J,{"show-info":!1,"stroke-color":"#7C3AED",status:"active",percent:e.completionPercentage},null,8,["percent"])])),t("div",Nt,[t("div",Ht,[e.loading?(i(),l(I,{key:0},[c(H,{active:"",loading:e.loading},null,8,["loading"]),c(H,{active:"",loading:e.loading},null,8,["loading"]),c(H,{active:"",loading:e.loading},null,8,["loading"])],64)):(i(),l(I,{key:1},[t("div",Ut,[t("div",{class:w(["learn-question"]),innerHTML:e.currentQuestion.questionText},null,8,Pt),f(` <div
                                :class="[
                                    'learn-question',
                                    currentQuestion.textFormat === QUESTION_FORMAT.HTML
                                        ? 'd-none'
                                        : '',
                                ]"
                            >
                                {{ currentQuestion.questionText }}
                            </div> `),t("div",zt,[e.isCurrentSessionReLearn?(i(),l("div",Vt,a(v.$t("learn_QS.instructions.re_learn_ins")),1)):f("v-if",!0),t("div",Yt,[t("div",Bt,a(e.currentQuestionInstruction),1),t("div",{class:w(["ms-3 learn-question-result",e.currentQuestionIsSubmitted?"":"d-none",e.currentQuestionIsSubmitted?e.currentQuestionResult.result?"result-correct":"result-incorrect":"",e.currentQuestionIsSkipped?"result-skipped":""])},a(e.currentQuestionResult.resultText),3)]),e.currentQuestion.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(i(),X(fe,{key:1,value:e.userAnswerMultipleChoice,"onUpdate:value":n[0]||(n[0]=o=>e.userAnswerMultipleChoice=o),class:w(["answer-option-container multiplechoice",e.isOptionExceed?"column":""])},{default:g(()=>[(i(!0),l(I,null,R(e.currentQuestion.questionData.multipleChoice,o=>(i(),X(G,{value:o.id,"onUpdate:value":C=>o.id=C,disabled:e.currentQuestionIsSubmitted,class:w(["answer-option answer-option-multiplechoice",e.currentQuestionIsSubmitted&&e.checkMultipleChoiceAnswerCorrect(o)&&o.isAnswer?"answer-correct":"",e.currentQuestionIsSubmitted&&!e.checkMultipleChoiceAnswerCorrect(o)&&!o.isAnswer?"answer-incorrect":""])},{default:g(()=>[t("div",Ft,a(o.text),1),e.currentQuestionIsSubmitted&&e.checkMultipleChoiceAnswerCorrect(o)&&o.isAnswer?(i(),l("i",Gt)):f("v-if",!0),e.currentQuestionIsSubmitted&&!e.checkMultipleChoiceAnswerCorrect(o)&&!o.isAnswer?(i(),l("i",jt)):f("v-if",!0)]),_:2},1032,["value","onUpdate:value","disabled","class"]))),256))]),_:1},8,["value","class"])):f("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.MATCHING?(i(),l("div",Xt,[t("div",Kt,[c(e.VueDraggable,{disabled:e.currentQuestionIsSubmitted,modelValue:e.userAnswerMatchingLeft,"onUpdate:modelValue":n[1]||(n[1]=o=>e.userAnswerMatchingLeft=o),options:e.dragOptions,onEnd:e.syncMatchingHeights},{default:g(()=>[(i(!0),l(I,null,R(e.userAnswerMatchingLeft,(o,C)=>(i(),l("div",Jt,[t("div",{class:w(["answer-option answer-option-matching",e.currentQuestionIsSubmitted?e.checkMatchingAnswerCorrect(o.id)?"answer-correct":"answer-incorrect":""])},[t("div",Wt,[c(e.HolderOutlined)]),t("div",Zt,a(o.text),1)],2),t("i",{class:w(["bx bxs-label matching-icon",e.currentQuestionIsSubmitted?e.checkMatchingAnswerCorrect(o.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2)]))),256))]),_:1},8,["disabled","modelValue"])]),t("div",$t,[c(e.VueDraggable,{disabled:e.currentQuestionIsSubmitted,modelValue:e.userAnswerMatchingRight,"onUpdate:modelValue":n[2]||(n[2]=o=>e.userAnswerMatchingRight=o),options:e.dragOptions,onEnd:e.syncMatchingHeights},{default:g(()=>[(i(!0),l(I,null,R(e.userAnswerMatchingRight,(o,C)=>(i(),l("div",en,[t("i",{class:w(["bx bxs-label matching-icon",e.currentQuestionIsSubmitted?e.checkMatchingAnswerCorrect(o.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2),t("div",{class:w(["answer-option answer-option-matching",e.currentQuestionIsSubmitted?e.checkMatchingAnswerCorrect(o.id)?"answer-correct":"answer-incorrect":""])},[t("div",tn,a(o.text),1),t("div",nn,[c(e.HolderOutlined)])],2)]))),256))]),_:1},8,["disabled","modelValue"])])])):f("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.ORDERING?(i(),l("div",on,[c(e.VueDraggable,{disabled:e.currentQuestionIsSubmitted,modelValue:e.userAnswerOrdering,"onUpdate:modelValue":n[3]||(n[3]=o=>e.userAnswerOrdering=o),options:e.dragOptions},{default:g(()=>[(i(!0),l(I,null,R(e.userAnswerOrdering,(o,C)=>(i(),l("div",{class:w(["answer-option answer-option-ordering",e.currentQuestionIsSubmitted?C===o.correctOrder?"answer-correct":"answer-incorrect":""])},[t("div",sn,[c(e.HolderOutlined),p(" "+a(C+1),1)]),t("div",an,a(o.text),1),t("div",{class:w(["answer-option-order answer-icon",e.currentQuestionIsSubmitted?"":"d-none"])},[n[11]||(n[11]=t("i",{class:"bx bx-hash answer-icon"},null,-1)),p(" "+a(o.correctOrder),1)],2)],2))),256))]),_:1},8,["disabled","modelValue"])])):f("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.SHORT_TEXT?(i(),l("div",ln,[t("div",{layout:"vertical",class:w(["answer-short-text",e.currentQuestionIsSubmitted?e.checkShortText()?"answer-correct":"answer-incorrect":""])},[t("div",rn,[c(e.TextArea,{readonly:e.currentQuestionIsSubmitted,placeholder:"Enter your answer...",modelValue:e.userAnswerShortText,"onUpdate:modelValue":n[4]||(n[4]=o=>e.userAnswerShortText=o)},null,8,["readonly","modelValue"]),e.currentQuestionIsSubmitted&&e.checkShortText()?(i(),l("i",cn)):f("v-if",!0),e.currentQuestionIsSubmitted&&!e.checkShortText()?(i(),l("i",un)):f("v-if",!0)]),e.currentQuestionIsSubmitted&&!e.checkShortText()?(i(),l("div",dn,[p(a(v.$t("learn_QS.instructions.short_text_answer"))+" ",1),t("span",null,a(e.currentQuestion.questionData.shortText),1)])):f("v-if",!0)],2)])):f("v-if",!0)])]),t("div",mn,[t("div",{class:w(["main-color-btn-ghost",e.currentQuestionIsSubmitted?"main-color-btn-ghost-disabled":""]),onClick:n[5]||(n[5]=o=>e.onSkipQuestion(o))},a(v.$t("learn_QS.buttons.dont_know")),3),t("div",_n,[t("div",{class:w(["main-color-btn-ghost me-3",e.currentQuestionIsSubmitted?"":"d-none"]),onClick:e.onOpenCommentModal},[n[12]||(n[12]=t("i",{class:"bx bx-conversation me-2"},null,-1)),p(" "+a(v.$t("learn_QS.buttons.comment")),1)],2),t("div",{class:w(["main-color-btn-ghost me-3",e.currentQuestionIsSubmitted?"":"d-none"]),onClick:e.toggleExplainModal},[n[13]||(n[13]=t("i",{class:"bx bx-bulb me-2"},null,-1)),p(" "+a(v.$t("learn_QS.buttons.explaination")),1)],2),c(Q,{class:w(["main-color-btn",e.currentQuestionIsSubmitted?"main-color-btn-disabled":""]),type:"primary",size:"large",onClick:e.onSubmitAnswer},{default:g(()=>[p(a(v.$t("learn_QS.buttons.submit")),1)]),_:1},8,["class"])])])],64))]),t("div",{ref:"explainModal",class:w(["explain-modal explain-modal-up",{show:e.explainModalOpen}])},[t("div",{class:"learn-question-explain",innerHTML:e.currentQuestion.explainText},null,8,vn),c(Q,{class:w(["main-color-btn close-modal-btn"]),type:"primary",size:"large",onClick:e.toggleExplainModal},{default:g(()=>n[14]||(n[14]=[t("i",{class:"bx bx-chevrons-down"},null,-1)])),_:1,__:[14]}),c(Q,{class:w(["main-color-btn",e.currentSession.length<=0?"main-color-btn-disabled":""]),type:"primary",size:"large",onClick:e.onNextQuestion},{default:g(()=>[p(a(v.$t("learn_QS.buttons.next_question"))+" ",1),n[15]||(n[15]=t("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[15]},8,["class"])],2),c(m,{width:500,title:"Comment section",placement:"right",open:e.commentModalOpen,onClose:e.onCloseCommentModal},{default:g(()=>[t("div",gn,[t("div",hn,[e.currentQuestionComments.length>0?(i(),l(I,{key:0},[(i(!0),l(I,null,R(e.currentQuestionComments,(o,C)=>{var E;return i(),l("div",{class:w(["comment-item",((E=e.chosenComment)==null?void 0:E.id)===o.id?"comment-item-chosen":""])},[t("div",fn,[n[19]||(n[19]=t("i",{class:"bx bx-user-circle comment-user-img"},null,-1)),t("div",pn,[t("div",bn,[p(a(o.createBy.fullName)+" ",1),t("span",null,a(e.dayjs(o.createdAt).format("DD/MM/YYYY HH:mm")),1),o.createBy.userId===e.user_info.id?(i(),l("div",wn,[f(` <i
                                                        class="me-3 bx bx-edit"
                                                        @click="onEditComment(comment.id)"
                                                    ></i> `),c(q,{class:"pop-confirm-delete",title:v.$t("create_QS.quiz.confirm"),onConfirm:x=>e.onDeleteComment(o.id)},{default:g(()=>[...n[16]||(n[16]=[t("i",{class:"text-danger bx bx-trash-alt"},null,-1)])]),_:2},1032,["title","onConfirm"])])):f("v-if",!0)]),t("div",yn,a(o.content),1),t("div",Cn,[t("div",{class:"comment-reply-btn",onClick:x=>e.onTriggerReply(o)}," Reply ",8,Sn),t("div",{class:"comment-children-open-btn",onClick:x=>e.onToggleReplyContainer(C)},a(e.repliesOpen[C]?"Close":"View")+" ("+a(o.childComments.length)+") replies ",9,Qn)]),t("div",{id:"reply-items-"+C,class:"child-comment-container",style:{display:"none"}},[(i(!0),l(I,null,R(o.childComments,(x,b)=>(i(),l("div",Tn,[t("div",xn,[n[18]||(n[18]=t("i",{class:"bx bx-user-circle comment-user-img"},null,-1)),t("div",kn,[t("div",An,[p(a(x.createBy.fullName)+" ",1),t("span",null,a(e.dayjs(x.createdAt).format("DD/MM/YYYY HH:mm")),1),x.createBy.userId===e.user_info.id?(i(),l("div",Mn,[f(` <i
                                                                        class="me-3 bx bx-edit"
                                                                        @click="
                                                                            onEditComment(
                                                                                childComment.id,
                                                                            )
                                                                        "
                                                                    ></i> `),c(q,{class:"pop-confirm-delete",title:v.$t("create_QS.quiz.confirm"),onConfirm:k=>e.onDeleteComment(x.id)},{default:g(()=>[...n[17]||(n[17]=[t("i",{class:"text-danger bx bx-trash-alt"},null,-1)])]),_:2},1032,["title","onConfirm"])])):f("v-if",!0)]),t("div",qn,a(x.content),1)])])]))),256))],8,In)])])],2)}),256)),e.commentLoading?(i(),X(H,{key:0,loading:e.commentLoading},null,8,["loading"])):f("v-if",!0),e.commentPageParams.pageNumber<e.commentTotalPage?(i(),X(Q,{key:1,type:"primary",class:"main-color-btn",onClick:e.onLoadMoreComment,loading:e.commentLoading},{default:g(()=>n[20]||(n[20]=[p(" Load more ")])),_:1,__:[20]},8,["loading"])):f("v-if",!0)],64)):(i(),l("div",En,[c(D,null,{description:g(()=>n[21]||(n[21]=[t("span",null,"No one has commented yet.",-1)])),_:1})]))]),c(U,{layout:"vertical",class:"comment-form"},{default:g(()=>{var o;return[e.isReplying?(i(),l("label",On," Replying to @"+a((o=e.chosenComment)==null?void 0:o.createBy.fullName),1)):(i(),l("label",Ln,"Your comment")),c(e.TextArea,{value:e.commentValue,"onUpdate:value":n[6]||(n[6]=C=>e.commentValue=C),placeholder:"Enter comment","max-length":500},null,8,["value"]),t("div",Rn,[c(Q,{type:"primary",shape:"round",class:w(["me-3 main-color-btn-ghost",e.isReplying?"":"main-color-btn-ghost-disabled"]),onClick:e.onCancelReplying},{default:g(()=>[p(a(v.$t("learn_QS.buttons.cancel")),1)]),_:1},8,["class"]),c(Q,{loading:e.commentLoading,type:"primary",shape:"round",class:w(["main-color-btn",e.commentValue?"":"main-color-btn-disabled"]),onClick:e.onAddComment},{default:g(()=>[p(a(v.$t("learn_QS.buttons.send_comment")),1)]),_:1},8,["loading","class"])])]}),_:1})])]),_:1},8,["open"])])]),c(m,{open:e.finalModalOpen,placement:"top",height:"100vh",closable:!1,onClose:e.closeFinalModal,"body-style":{padding:0,height:"100%"}},{title:g(()=>[t("div",Dn,[c(L,{class:"w-100 d-flex align-items-center"},{default:g(()=>[c(y,{span:1},{default:g(()=>[c(K,{to:{name:"User_Library"}},{default:g(()=>n[22]||(n[22]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[22]})]),_:1}),c(y,{class:"main-title",span:23},{default:g(()=>[t("span",null,a(e.quiz.title),1),n[23]||(n[23]=p()),n[24]||(n[24]=t("br",null,null,-1))]),_:1,__:[23,24]})]),_:1})])]),default:g(()=>[t("div",Nn,[t("div",Hn,a(e.finalModalQuote),1)]),t("div",Un,[t("div",Pn,[t("div",zn,[p(a(v.$t("learn_QS.other.total_set_progress"))+" ",1),t("span",null,a(e.completionPercentage)+"%",1)])]),c(J,{"show-info":!1,"stroke-color":"#7C3AED",status:"active",percent:e.completionPercentage},null,8,["percent"]),t("div",Vn,[t("div",Yn,[p(a(v.$t("learn_QS.other.completed"))+": ",1),t("span",null,a(e.quiz.completedQuestionCount),1)]),t("div",Bn,[p(a(v.$t("learn_QS.other.total_question"))+" ",1),t("span",null,a(e.quiz.totalQuestionCount),1)])])]),t("div",Fn,[c(z,{style:{"background-color":"var(--content-item-border-color)"}}),t("div",Gn,a(v.$t("learn_QS.other.preview_modal_title")),1),t("div",jn,[(i(!0),l(I,null,R(e.completed,(o,C)=>{var E,x;return i(),l("div",Xn,[t("div",Kn,[o.textFormat===e.QUESTION_FORMAT.HTML?(i(),l("div",{key:0,class:"question-html",innerHTML:o.questionText},null,8,Jn)):(i(),l("div",Wn,a(o.questionText),1)),t("div",{class:"question-item-answer",id:`question-item-answer-${C}`},[o.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(i(),l("div",$n,[t("ul",null,[(i(!0),l(I,null,R(o.questionData.multipleChoice,b=>(i(),l("li",null,[p(a(b.text)+" ",1),b.isAnswer?(i(),l("span",eo," ("+a(b.isAnswer)+") ",1)):f("v-if",!0)]))),256))])])):f("v-if",!0),o.type===e.QUESTION_TYPE.MATCHING?(i(!0),l(I,{key:1},R((E=o.questionData.matching)==null?void 0:E.matches,b=>{var k,V,Y,O;return i(),l("div",to,[t("span",no,a((V=(k=o.questionData.matching)==null?void 0:k.leftItems.find(W=>W.id===b.leftId))==null?void 0:V.text),1),n[25]||(n[25]=t("i",{class:"bx bx-right-arrow-alt"},null,-1)),t("span",oo,a((O=(Y=o.questionData.matching)==null?void 0:Y.rightItems.find(W=>W.id===b.rightId))==null?void 0:O.text),1)])}),256)):f("v-if",!0),o.type===e.QUESTION_TYPE.ORDERING?(i(),l("div",so,[t("div",ao,[(i(!0),l(I,null,R(o.questionData.ordering,b=>(i(),l("div",null,a(b.text),1))),256))]),n[26]||(n[26]=t("i",{class:"bx bx-right-arrow-alt"},null,-1)),t("div",io,[(i(!0),l(I,null,R((x=o.questionData.ordering)==null?void 0:x.sort((b,k)=>b.correctOrder-k.correctOrder),(b,k)=>(i(),l("div",lo,[t("span",null,"#"+a(b.correctOrder),1),p(" - "+a(b.text),1)]))),256))])])):f("v-if",!0),o.type===e.QUESTION_TYPE.SHORT_TEXT?(i(),l(I,{key:3},[n[27]||(n[27]=t("span",null,"Answer:",-1)),t("div",ro,a(o.questionData.shortText),1)],64)):f("v-if",!0)],8,Zn)]),t("div",co,[t("i",{class:"bx bx-chevron-up",onClick:b=>e.toggleDisplayAnswer(C,b.currentTarget)},null,8,uo)])])}),256))]),t("div",mo,[t("div",null,a(v.$t("learn_QS.other.preview_modal_continues_ins")),1),c(Q,{class:w(["main-color-btn"]),type:"primary",size:"large",shape:"round",onClick:e.onContinuesLearn},{default:g(()=>[p(a(v.$t("learn_QS.buttons.continue")),1)]),_:1})])])]),_:1},8,["open"]),c(m,{open:e.completeModalOpen,placement:"top",height:"100vh",closable:!1,onClose:e.closeFinalModal,"body-style":{padding:0,height:"100%"}},{default:g(()=>[e.isAnimationDisplaying?(i(),X(e.DotLottieVue,{key:0,autoplay:e.isAnimationDisplaying,ref:"animationRef",class:w(["animation-container"]),onComplete:n[7]||(n[7]=o=>e.isAnimationDisplaying=!1),src:e.animationPath},null,8,["autoplay","src"])):f("v-if",!0),t("div",_o,[t("div",vo,[t("img",{class:"modal-complete-img",src:e.trophy_png,alt:""},null,8,go),t("div",ho,[t("div",fo,a(v.$t("learn_QS.other.complete_modal_congratulation")),1),t("div",po,a(v.$t("learn_QS.other.complete_modal_ins")),1)]),t("div",bo,[c(Q,{type:"primary",class:"main-color-btn ghost-btn",size:"large",onClick:e.onRedirectToLibrary},{default:g(()=>[p(a(v.$t("learn_QS.buttons.back_to_home")),1)]),_:1}),c(Q,{type:"primary",class:"main-color-btn",size:"large",onClick:e.onRedirectToTest},{default:g(()=>[p(a(v.$t("learn_QS.buttons.take_a_test")),1)]),_:1}),c(Q,{type:"primary",class:"main-color-btn",size:"large",onClick:e.onResetLearnHistory},{default:g(()=>[p(a(v.$t("learn_QS.buttons.reset_learn_mode")),1)]),_:1})])])])]),_:1},8,["open"]),f(` <template v-else>
        <div class="page-container">
            <div class="w-100 h-100 d-flex align-items-center justify-content-center">
                <a-result
                    status="error"
                    :title="t('now_allowed.main_msg')"
                    :sub-title="t('now_allowed.errorMessage')"
                >
                    <template #icon>
                        <CloseSquareFilled />
                    </template>
                    <template #extra>
                        <div class="d-flex justify-content-center">
                            <a-button key="console" type="primary" class="me-3 main-color-btn">
                                {{ $t("now_allowed.libraryNavigator") }}
                            </a-button>
                            <a-button
                                @click="onRedirectToSubcription"
                                key="buy"
                                type="ghost"
                                class="main-color-btn-ghost"
                            >
                                {{ $t("now_allowed.subscriptionNavigator") }}
                            </a-button>
                        </div>
                    </template></a-result
                >
            </div>
        </div>
    </template> `)],64)}const Mo=yt(Mt,[["render",wo],["__scopeId","data-v-5fe31f19"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/question_sets/learn.vue"]]);export{Mo as default};
