import{d as E,q as j,l as O,g as V,u as G,B as Q,i as S,j as P,C as H,s as K,k as R,_ as Y,r as i,a as y,o as g,b as o,c as n,f as v,t as d,w as s,F as k,D as A,E as J}from"./index-BQVBa0zY.js";import{A as D}from"./ApiFolder-B6aT5S2O.js";import{F as T}from"./folderShareMode-BudLQ2R2.js";import{I as W}from"./Input-DQE8nT6C.js";const X=E({__name:"index",emits:["updateSidebar"],setup(m,{expose:a,emit:q}){var M;a();const e=j(),b=O(),I=V(),{t:u}=G(),f=q,F=Object.values(T),h=Q(()=>F.map(l=>({label:u(`folder_index.select_option.${l}`),value:l!==T.ALL?l:""}))),N=S([]),t=P({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,folderName:((M=e.query.folderName)==null?void 0:M.toString())||"",shareMode:e.query.shareMode||h.value[0].value,totalCount:0,statusFilter:!1}),c=async()=>{try{let l=await D.GetAllByLimit(t);if(l.data.success){let _=l.data.data;N.value=_.items,t.pageNumber=_.pageNumber,t.pageSize=_.pageSize,t.totalCount=_.totalCount,t.statusFilter&&(t.pageNumber>_.totalPages&&t.totalCount>0?(t.pageNumber=1,b.push({name:"User_Folder",query:{pageNumber:1,pageSize:t.pageSize,folderName:t.folderName,shareMode:t.shareMode}})):b.push({name:"User_Folder",query:{pageNumber:t.pageNumber,pageSize:t.pageSize,folderName:t.folderName,shareMode:t.shareMode}}),t.statusFilter=!t.statusFilter)}}catch(l){console.log("ERROR: GETALLBYLIMIT folder: "+l)}};H(()=>Object.keys(e.query).length,()=>{var l;t.pageNumber=e.query.pageNumber||1,t.pageSize=e.query.pageSize||10,t.folderName=((l=e.query.folderName)==null?void 0:l.toString())||"",t.shareMode=e.query.shareMode||h.value[0].value,t.statusFilter=!0,c()});const z=(l,_)=>{t.pageNumber=l,t.pageSize=_,t.statusFilter=!0,c()},C={folderName:[{required:!0,message:"This field is required.",trigger:"change"},{max:100,message:"Limit 100.",trigger:"change"}]},x=S(!1),r=S(),p=P({folderName:""}),w=S(!1),U=async()=>{w.value=!0;try{if(await r.value.validate(),!(await D.Create(p)).data.success){R.error(u("message.created_failed"));return}R.success(u("message.created_successfully")),x.value=!1,await c()}catch(l){console.log(l)}finally{w.value=!1}},B=l=>{b.push({name:"User_Folder_Detail",params:{id:l}})};K(async()=>{f("updateSidebar","folder"),await c()});const L={route:e,router:b,authStore:I,t:u,emit:f,optionKeys:F,folder_share_mode_options:h,folder_data:N,pageParams:t,getData:c,onPaginationChange:z,rules:C,modal_create_open:x,createFolderFormRef:r,createFolderFormState:p,isCreateLoading:w,onCreateFolder:U,onRedirectToFolderDetail:B,Input:W};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}}),Z={class:"page-container"},$={class:"title-container"},ee={class:"main-title"},ae={class:"title-button-container"},te={class:"content"},oe={class:"content-item"},re={class:"content-item-functions"},le={class:"content-item-navigators"},ne={class:"navigator-container"},se={class:"filter-container"},ie={style:{width:"300px",padding:"0px"}},de={class:"folder-container"},ce=["onClick"],me={class:"folder-name"},ue={key:1,class:"w-100 m-2 d-flex justify-content-center"},_e={class:"pagination-container"},fe={class:"modal-container"},pe={class:"modal-title-container"};function ge(m,a,q,e,b,I){const u=i("a-button"),f=i("RouterLink"),F=i("a-select-option"),h=i("a-select"),N=i("a-empty"),t=i("a-pagination"),c=i("a-col"),z=i("a-row"),C=i("a-form"),x=i("a-modal");return g(),y(k,null,[o("div",Z,[o("div",$,[o("div",ee,[o("span",null,d(m.$t("folder_index.title")),1),a[7]||(a[7]=v()),a[8]||(a[8]=o("br",null,null,-1)),o("span",null,d(m.$t("folder_index.sub_title")),1)]),o("div",ae,[n(u,{type:"primary",class:"ms-3 main-color-btn",size:"large",onClick:a[0]||(a[0]=r=>e.modal_create_open=!0)},{default:s(()=>[v(d(m.$t("folder_index.buttons.create_folder"))+" ",1),a[9]||(a[9]=o("i",{class:"bx bx-plus"},null,-1))]),_:1,__:[9]})])]),o("div",te,[o("div",oe,[o("div",re,[o("div",le,[o("div",ne,[n(f,{class:"navigator-item navigator-active",to:{name:""}},{default:s(()=>[v(d(m.$t("folder_index.navigators.folder")),1)]),_:1}),n(f,{class:"navigator-item",to:{name:"User_TestTemplate"}},{default:s(()=>[v(d(m.$t("folder_index.navigators.test_template")),1)]),_:1})])]),o("div",se,[n(h,{class:"me-3",value:e.pageParams.shareMode,"onUpdate:value":a[1]||(a[1]=r=>e.pageParams.shareMode=r),style:{width:"200px"},onChange:e.getData},{default:s(()=>[(g(!0),y(k,null,A(e.folder_share_mode_options,r=>(g(),J(F,{value:r.value},{default:s(()=>[v(d(r.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),o("div",ie,[n(e.Input,{onInput:e.getData,modelValue:e.pageParams.folderName,"onUpdate:modelValue":a[2]||(a[2]=r=>e.pageParams.folderName=r),placeholder:e.t("class_index.other.search_class_placeholder")},{icon:s(()=>a[10]||(a[10]=[o("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),o("div",de,[e.folder_data.length>0?(g(!0),y(k,{key:0},A(e.folder_data,r=>(g(),y("div",{class:"folder",onClick:p=>e.onRedirectToFolderDetail(r.folderTestId)},[a[11]||(a[11]=o("div",{class:"folder-icon"},[o("div",{class:"folder-top"}),o("div",{class:"folder-body"})],-1)),o("div",me,d(r.name),1)],8,ce))),256)):(g(),y("div",ue,[n(N,null,{description:s(()=>[o("span",null,d(m.$t("folder_index.other.no_data_matches")),1)]),_:1})]))]),o("div",_e,[n(t,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":a[3]||(a[3]=r=>e.pageParams.pageNumber=r),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(r,p)=>`${p[0]}-${p[1]} of ${r} ${e.t("folder_index.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("folder_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])]),n(x,{centered:"","wrap-class-name":"medium-modal",open:e.modal_create_open,onCancel:a[6]||(a[6]=r=>e.modal_create_open=!1)},{footer:s(()=>[n(u,{loading:e.isCreateLoading,class:"main-color-btn",key:"submit",type:"primary",onClick:e.onCreateFolder},{default:s(()=>[v(d(e.t("folder_index.buttons.create")),1)]),_:1},8,["loading"])]),default:s(()=>[o("div",fe,[o("div",pe,[n(z,{class:"w-100 d-flex align-items-center"},{default:s(()=>[n(c,{span:4},{default:s(()=>[n(f,{onClick:a[4]||(a[4]=r=>e.modal_create_open=!1),to:{name:""}},{default:s(()=>a[12]||(a[12]=[o("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[12]})]),_:1}),n(c,{class:"main-title",span:20},{default:s(()=>[o("span",null,d(e.t("folder_index.modal.create_title")),1)]),_:1})]),_:1})]),n(C,{ref:"createFolderFormRef",layout:"vertical",rules:e.rules,model:e.createFolderFormState},{default:s(()=>[n(e.Input,{label:e.t("folder_index.modal.create_folder_name_label"),name:"folderName",value:e.createFolderFormState.folderName,"onUpdate:value":a[5]||(a[5]=r=>e.createFolderFormState.folderName=r),placeholder:e.t("folder_index.modal.create_folder_name_placeholder"),"is-required":!0,"max-length":100},null,8,["label","value","placeholder"])]),_:1},8,["model"])])]),_:1},8,["open"])],64)}const Fe=Y(X,[["render",ge],["__scopeId","data-v-e2bbfdc4"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/folder/index.vue"]]);export{Fe as default};
