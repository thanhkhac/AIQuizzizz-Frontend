import{z as Le,b5 as st,d as it,q as ot,l as rt,u as at,i as I,B as Z,j as lt,P as de,s as ut,W as ct,M as dt,Q as ht,_ as mt,r as F,a as y,o as v,b as s,c as _,E as he,e as B,p as k,w as T,f as Y,t as f,F as ee,D as oe}from"./index-BhCEM7Qr.js";import{A as Re}from"./ApiQuestionSet-DcHTXIEH.js";import{H as ft,Q as gt}from"./questionTextFormat-DLIVSkPI.js";import{Q as q}from"./questionTypes-CS3lcRlq.js";import{D as vt}from"./index-BGGE1EvL.js";import{T as _t}from"./TextArea-WM5cwCwM.js";import{l as pt}from"./vue-draggable-plus-CRg8kvXS.js";import{V as bt}from"./Validator-CWeiTIFe.js";/* empty css                                                                 */var xt=st();const Ee=Le(xt);class yt{shuffleArray(r,M=5){let e=[],D=0;do{e=r.slice();for(let h=e.length-1;h>0;h--){const c=Math.floor(Math.random()*(h+1));[e[h],e[c]]=[e[c],e[h]]}if(D++,r.length<=1)break}while(e.every((h,c)=>h===r[c])&&D<M);return e}shuffleQuestionOptions(r){const M=JSON.parse(JSON.stringify(r));return M.type===q.MATCHING&&M.questionData.matching&&(M.questionData.matching.rightItems=this.shuffleArray(M.questionData.matching.rightItems)),M.type===q.ORDERING&&M.questionData.ordering&&(M.questionData.ordering=this.shuffleArray(M.questionData.ordering.sort((e,D)=>e.correctOrder-D.correctOrder))),M}}const St=new yt;var me={exports:{}},wt=me.exports,De;function Tt(){return De||(De=1,function(C,r){(function(M,e){C.exports=e()})(wt,function(){var M,e,D=1e3,h=6e4,c=36e5,L=864e5,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,P=31536e6,Q=2628e6,J=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,X={years:P,months:Q,days:L,hours:c,minutes:h,seconds:D,milliseconds:1,weeks:6048e5},G=function(b){return b instanceof R},N=function(b,u,i){return new R(b,i,u.$l)},V=function(b){return e.p(b)+"s"},W=function(b){return b<0},H=function(b){return W(b)?Math.ceil(b):Math.floor(b)},p=function(b){return Math.abs(b)},a=function(b,u){return b?W(b)?{negative:!0,format:""+p(b)+u}:{negative:!1,format:""+b+u}:{negative:!1,format:""}},R=function(){function b(i,S,A){var w=this;if(this.$d={},this.$l=A,i===void 0&&(this.$ms=0,this.parseFromMilliseconds()),S)return N(i*X[V(S)],this);if(typeof i=="number")return this.$ms=i,this.parseFromMilliseconds(),this;if(typeof i=="object")return Object.keys(i).forEach(function(z){w.$d[V(z)]=i[z]}),this.calMilliseconds(),this;if(typeof i=="string"){var O=i.match(J);if(O){var E=O.slice(2).map(function(z){return z!=null?Number(z):0});return this.$d.years=E[0],this.$d.months=E[1],this.$d.weeks=E[2],this.$d.days=E[3],this.$d.hours=E[4],this.$d.minutes=E[5],this.$d.seconds=E[6],this.calMilliseconds(),this}}return this}var u=b.prototype;return u.calMilliseconds=function(){var i=this;this.$ms=Object.keys(this.$d).reduce(function(S,A){return S+(i.$d[A]||0)*X[A]},0)},u.parseFromMilliseconds=function(){var i=this.$ms;this.$d.years=H(i/P),i%=P,this.$d.months=H(i/Q),i%=Q,this.$d.days=H(i/L),i%=L,this.$d.hours=H(i/c),i%=c,this.$d.minutes=H(i/h),i%=h,this.$d.seconds=H(i/D),i%=D,this.$d.milliseconds=i},u.toISOString=function(){var i=a(this.$d.years,"Y"),S=a(this.$d.months,"M"),A=+this.$d.days||0;this.$d.weeks&&(A+=7*this.$d.weeks);var w=a(A,"D"),O=a(this.$d.hours,"H"),E=a(this.$d.minutes,"M"),z=this.$d.seconds||0;this.$d.milliseconds&&(z+=this.$d.milliseconds/1e3,z=Math.round(1e3*z)/1e3);var te=a(z,"S"),ue=i.negative||S.negative||w.negative||O.negative||E.negative||te.negative,ce=O.format||E.format||te.format?"T":"",re=(ue?"-":"")+"P"+i.format+S.format+w.format+ce+O.format+E.format+te.format;return re==="P"||re==="-P"?"P0D":re},u.toJSON=function(){return this.toISOString()},u.format=function(i){var S=i||"YYYY-MM-DDTHH:mm:ss",A={Y:this.$d.years,YY:e.s(this.$d.years,2,"0"),YYYY:e.s(this.$d.years,4,"0"),M:this.$d.months,MM:e.s(this.$d.months,2,"0"),D:this.$d.days,DD:e.s(this.$d.days,2,"0"),H:this.$d.hours,HH:e.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:e.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:e.s(this.$d.seconds,2,"0"),SSS:e.s(this.$d.milliseconds,3,"0")};return S.replace(d,function(w,O){return O||String(A[w])})},u.as=function(i){return this.$ms/X[V(i)]},u.get=function(i){var S=this.$ms,A=V(i);return A==="milliseconds"?S%=1e3:S=A==="weeks"?H(S/X[A]):this.$d[A],S||0},u.add=function(i,S,A){var w;return w=S?i*X[V(S)]:G(i)?i.$ms:N(i,this).$ms,N(this.$ms+w*(A?-1:1),this)},u.subtract=function(i,S){return this.add(i,S,!0)},u.locale=function(i){var S=this.clone();return S.$l=i,S},u.clone=function(){return N(this.$ms,this)},u.humanize=function(i){return M().add(this.$ms,"ms").locale(this.$l).fromNow(!i)},u.valueOf=function(){return this.asMilliseconds()},u.milliseconds=function(){return this.get("milliseconds")},u.asMilliseconds=function(){return this.as("milliseconds")},u.seconds=function(){return this.get("seconds")},u.asSeconds=function(){return this.as("seconds")},u.minutes=function(){return this.get("minutes")},u.asMinutes=function(){return this.as("minutes")},u.hours=function(){return this.get("hours")},u.asHours=function(){return this.as("hours")},u.days=function(){return this.get("days")},u.asDays=function(){return this.as("days")},u.weeks=function(){return this.get("weeks")},u.asWeeks=function(){return this.as("weeks")},u.months=function(){return this.get("months")},u.asMonths=function(){return this.as("months")},u.years=function(){return this.get("years")},u.asYears=function(){return this.as("years")},b}(),K=function(b,u,i){return b.add(u.years()*i,"y").add(u.months()*i,"M").add(u.days()*i,"d").add(u.hours()*i,"h").add(u.minutes()*i,"m").add(u.seconds()*i,"s").add(u.milliseconds()*i,"ms")};return function(b,u,i){M=i,e=i().$utils(),i.duration=function(w,O){var E=i.locale();return N(w,{$l:E},O)},i.isDuration=G;var S=u.prototype.add,A=u.prototype.subtract;u.prototype.add=function(w,O){return G(w)?K(this,w,1):S.bind(this)(w,O)},u.prototype.subtract=function(w,O){return G(w)?K(this,w,-1):A.bind(this)(w,O)}}})}(me)),me.exports}var qt=Tt();const kt=Le(qt),Ct=it({__name:"test",setup(C,{expose:r}){r();const M=new URL("/assets/confetti-bjvcnoca.lottie",import.meta.url).href,e=ot(),D=rt(),{t:h}=at(),c=I({title:"",description:"",totalQuestionCount:0,questions:[]}),L=Z(()=>p.value.filter(t=>t.result===!1)),d=I({}),P=I(""),Q=I(!1),J=I(!1),X=Z(()=>{var t;return(t=d.value.questionData.multipleChoice)==null?void 0:t.some(n=>n.text.length>=100)}),G=I([]),N=I([]),V=I([]),W=I([]),H=I(""),p=I([]),a=()=>{p.value=[],J.value=!1,se(0),le(),ye()},R=I(!1),K=()=>{R.value=!0;let t=sessionStorage.getItem("test_settings");t&&(i.numberOfQuestion=JSON.parse(t).numberOfQuestion,i.questionTypes=JSON.parse(t).questionTypes)},b=()=>{R.value=!1},u=I(),i=lt({numberOfQuestion:5,questionTypes:[q.MULTIPLE_CHOICE,q.MATCHING,q.ORDERING,q.SHORT_TEXT]}),S=(t,n)=>{if(n)i.questionTypes.includes(t)||i.questionTypes.push(t);else{const o=i.questionTypes.indexOf(t);o!==-1&&i.questionTypes.splice(o,1)}},A=async()=>{a(),await E(),sessionStorage.setItem("test_settings",JSON.stringify(i)),b()},w=I(e.params.id.toString()),O=I(!1),E=async()=>{if(!bt.isValidGuid(w.value.toString())){D.push({name:"404"});return}try{O.value=!0;let t=await Re.GetDetailById(w.value.toString());c.value.title=t.data.data.name,c.value.description=t.data.data.description,c.value.totalQuestionCount=t.data.data.questionCount;let n=await Re.TestQuestions(w.value.toString(),i.numberOfQuestion,i.questionTypes.join(","));if(!t.data.success||!n.data.success){D.push({name:"404"});return}c.value.questions=n.data.data.map(o=>St.shuffleQuestionOptions(o)),se(0)}catch(t){Object.keys(t.response.data.errors).includes(ct.PLAN_REQUIRE_PLAN)&&D.push({name:"not-allowed"})}finally{O.value=!1}},z=I(),te=I(!1),ue=()=>{var t,n;te.value=!0,(n=(t=z.value)==null?void 0:t.getDotLottieInstance())==null||n.play(),setTimeout(()=>{te.value=!1},5e3)},ce=(t,n)=>{var x;const o=c.value.questions.findIndex(g=>g.id===t);if(o===-1)return!1;let m=(x=c.value.questions[o].questionData.multipleChoice)==null?void 0:x.filter(g=>g.isAnswer).map(g=>g.id||[]).sort(),l=n.sort();return n.length!==(m==null?void 0:m.length)?!1:l.every((g,U)=>g===m[U])},re=t=>{var x;const n=c.value.questions.findIndex(g=>g.id===d.value.id);let o=(x=c.value.questions[n].questionData.multipleChoice)==null?void 0:x.filter(g=>g.isAnswer).map(g=>g.id||[]);const m=p.value.findIndex(g=>g.questionId===d.value.id);let l=p.value[m].multipleChoices;return o!=null&&o.includes(t.id)?!0:!(l!=null&&l.includes(t.id)&&!t.isAnswer)},Te=(t,n)=>{var x;const o=c.value.questions.findIndex(g=>g.id===t);if(o===-1)return!1;let m=((x=c.value.questions[o].questionData.ordering)==null?void 0:x.map(g=>g.correctOrder).sort())||[];return n.map(g=>g.correctOrder).every((g,U)=>g===m[U])},qe=(t,n,o)=>{const m=c.value.questions.findIndex(j=>j.id===t);if(m===-1)return!1;let l=c.value.questions[m].questionData.matching.matches,x=n.map(j=>j.id),g=o.map(j=>j.id);return x.map((j,ie)=>({leftId:j,rightId:g[ie]})).every(j=>l.some(ie=>ie.leftId===j.leftId&&ie.rightId===j.rightId))},Ne=t=>{var x,g;const n=d.value.questionData.matching;if(!n)return!1;let o=n.leftItems.some(U=>U.id===t),m=n.matches.find(U=>o?U.leftId===t:U.rightId===t);const l=o?N.value.findIndex(U=>U.id===t):V.value.findIndex(U=>U.id===t);return l===-1||!m?!1:o?((x=V.value[l])==null?void 0:x.id)===m.rightId:((g=N.value[l])==null?void 0:g.id)===m.leftId},ae=t=>t.trim().toLowerCase().normalize("NFKC").replace(/[\u2019\u2018\u201B\u0060]/g,"'").replace(/\s+/g," "),ke=(t,n)=>{const o=c.value.questions.findIndex(m=>m.id===t);return o===-1?!1:ae(n)===ae(c.value.questions[o].questionData.shortText)},Ce=()=>{var o,m;const t=(o=p.value.find(l=>l.questionId===d.value.id))==null?void 0:o.shortText;if(!t)return!1;const n=(m=c.value.questions.find(l=>l.id===d.value.id))==null?void 0:m.questionData.shortText;return ae(t)===ae(n)},He=Z(()=>{var t;if(d.value.type===q.SHORT_TEXT&&J.value&&!Ce())return(t=c.value.questions.find(n=>n.id===d.value.id))==null?void 0:t.questionData.shortText}),Ue=I(null),fe=I(!1),Pe=()=>{fe.value=!fe.value},ne=(t,n)=>{t===-1?p.value.push(n):p.value[t]=n},Ve=()=>{if(J.value)return;const t=p.value.findIndex(m=>m.questionId===d.value.id),n=Q.value,o=Q.value?h("learn_QS.result.skipped"):"";switch(d.value.type){case q.MULTIPLE_CHOICE:{G.value.length>0?ne(t,{questionId:d.value.id,type:d.value.type,isSkipped:n,result:!1,resultText:o,multipleChoices:[...G.value],matchingLeft:null,matchingRight:null,ordering:null,shortText:""}):t!==-1&&p.value.splice(t,1);break}case q.MATCHING:{ne(t,{questionId:d.value.id,type:d.value.type,isSkipped:n,result:!1,resultText:o,multipleChoices:null,matchingLeft:[...N.value],matchingRight:[...V.value],ordering:null,shortText:""});break}case q.ORDERING:{ne(t,{questionId:d.value.id,type:d.value.type,isSkipped:n,result:!1,resultText:o,multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:[...W.value],shortText:""});break}case q.SHORT_TEXT:{H.value.trim()?ne(t,{questionId:d.value.id,type:d.value.type,isSkipped:n,result:!1,resultText:o,multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:null,shortText:H.value.trim()}):t!==-1&&p.value.splice(t,1);break}}},ge=(t,n)=>{var o,m;switch(t.type){case q.MULTIPLE_CHOICE:return{...n,multipleChoices:((o=t.questionData.multipleChoice)==null?void 0:o.filter(l=>l.isAnswer).map(l=>l.id))??[]};case q.MATCHING:{const l=t.questionData.matching,x=(l==null?void 0:l.matches)??[],g=(l==null?void 0:l.leftItems)??[],U=(l==null?void 0:l.rightItems)??[],j=x.map(Se=>g.find(we=>we.id==Se.leftId)),ie=x.map(Se=>U.find(we=>we.id==Se.rightId));return{...n,matchingLeft:j,matchingRight:ie}}case q.ORDERING:return{...n,ordering:((m=t.questionData.ordering)==null?void 0:m.slice().sort((l,x)=>l.correctOrder-x.correctOrder))??[]};case q.SHORT_TEXT:return{...n,shortText:t.questionData.shortText??""};default:return n}},Ie=()=>{c.value.questions.forEach(t=>{const n={questionId:t.id,type:t.type,isSkipped:!0,result:!1,resultText:h("learn_QS.result.skipped"),multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:null,shortText:""};let o=p.value.findIndex(m=>m.questionId===t.id);o===-1&&(p.value.push(ge(t,n)),o=p.value.length-1),p.value[o].isSkipped&&ne(o,{...p.value[o],...ge(t,{})})})},ze=()=>{Qe(),p.value.length<c.value.questions.length?dt.confirm({title:`You missed ${c.value.questions.length-p.value.length} questions.`,content:"Are you certain about this decision?",okText:h("sidebar.buttons.ok"),cancelText:h("sidebar.buttons.cancel"),centered:!0,onOk:()=>{J.value=!0,Ie(),ve()}}):(J.value=!0,ve())},ve=()=>{const t=c.value.questions.findIndex(n=>n.id===d.value.id);se(t),p.value.filter(n=>n.isSkipped===!1).forEach(n=>{let o;switch(n.type){case q.MULTIPLE_CHOICE:{o=ce(n.questionId,n.multipleChoices),n.result=o,n.resultText=h(o?"learn_QS.result.correct":"learn_QS.result.wrong");break}case q.MATCHING:{o=qe(n.questionId,n.matchingLeft,n.matchingRight),n.result=o,n.resultText=h(o?"learn_QS.result.correct":"learn_QS.result.wrong");break}case q.ORDERING:{o=Te(n.questionId,n.ordering),n.result=o,n.resultText=h(o?"learn_QS.result.correct":"learn_QS.result.wrong");break}case q.SHORT_TEXT:{o=ke(n.questionId,n.shortText),n.result=o,n.resultText=h(o?"learn_QS.result.correct":"learn_QS.result.wrong");break}}}),Me(),L.value.length===0&&ue()},Fe=()=>{Q.value=!0;const t=p.value.findIndex(n=>n.questionId===d.value.id);ne(t,{questionId:d.value.id,type:d.value.type,isSkipped:!0,result:!1,resultText:"Skipped",multipleChoices:G.value,matchingLeft:N.value,matchingRight:V.value,ordering:W.value,shortText:H.value})},se=t=>{var o,m;le(),Q.value=!1,d.value=c.value.questions[t];const n=p.value.find(l=>l.questionId===d.value.id);switch(d.value.type){case q.MULTIPLE_CHOICE:{P.value=h("learn_QS.instructions.multiple_choice",{number:(o=d.value.questionData.multipleChoice)==null?void 0:o.filter(l=>l.isAnswer).length}),G.value=n?n==null?void 0:n.multipleChoices:[];break}case q.ORDERING:{P.value=h("learn_QS.instructions.ordering"),W.value=n?n==null?void 0:n.ordering:((m=d.value.questionData.ordering)==null?void 0:m.map(l=>l))||[];break}case q.MATCHING:{P.value=h("learn_QS.instructions.matching"),N.value=n?n==null?void 0:n.matchingLeft:d.value.questionData.matching.leftItems.map(l=>l)||[],V.value=n?n==null?void 0:n.matchingRight:d.value.questionData.matching.rightItems.map(l=>l)||{};break}case q.SHORT_TEXT:{P.value=h("learn_QS.instructions.short_text"),H.value=n?n==null?void 0:n.shortText:"";break}}},Ye=()=>{Q.value=!1;const t=c.value.questions.findIndex(n=>n.id===d.value.id);t<c.value.questions.length-1&&se(t+1)},Ge=()=>{Q.value=!1;const t=c.value.questions.findIndex(n=>n.id===d.value.id);t>0&&se(t-1)},je=t=>Array.from(p.value).some(n=>n.questionId===t),Be=t=>{var n;return(n=p.value.find(o=>o.questionId===t&&!o.isSkipped))==null?void 0:n.result},Je=Z(()=>p.value.some(t=>t.questionId===d.value.id&&t.isSkipped)),Xe=Z(()=>{const t=p.value.find(n=>n.questionId===d.value.id);return{result:t==null?void 0:t.result,resultText:t==null?void 0:t.resultText}}),We=Z(()=>{const t=c.value.questions.findIndex(n=>n.id===d.value.id);return t!==-1&&t<c.value.questions.length-1}),Ke=Z(()=>{const t=c.value.questions.findIndex(n=>n.id===d.value.id);return t!==-1&&t>0}),Ze=Z(()=>c.value.questions.findIndex(t=>t.id===d.value.id)),_e=()=>Math.floor((c.value.questions.length-L.value.length)/c.value.questions.length*100),Ae=()=>Math.floor(L.value.length/c.value.questions.length*100),pe=()=>{const t=$(".content-item-test-result");t&&$(t).slideToggle()},Me=()=>{pe(),Ee.setOptions({lang:{decimalPoint:".",thousandsSep:","}}),Ee.chart("result_chart_container",{chart:{type:"pie",custom:{},events:{render:function(){const t=this,n=t.series[0];let o=t.options.chart.custom.label;o||(o=t.options.chart.custom.label=t.renderer.label(`<strong>${_e()}%</strong>`,0,0).css({color:"var(--text-color)",textAnchor:"middle"}).add());const m=n.center[0]+t.plotLeft,l=n.center[1]+t.plotTop-o.attr("height")/2;o.attr({x:m,y:l}),o.css({fontSize:`${n.center[2]/8}px`})}}},credits:{enabled:!1},plotOptions:{pie:{borderWidth:0,borderRadius:3}},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.0f}%</b>"},series:[{type:"pie",name:"Result",colorByPoint:!0,innerSize:"75%",dataLabels:{enabled:!1},data:[{name:h("practice_test.other.correct"),y:_e(),color:"var(--correct-answer-color)"},{name:h("practice_test.other.incorrect"),y:Ae(),color:"var(--incorrect-answer-color)"}]}]})};de.extend(kt);const be=I(),xe=I(""),ye=()=>{be.value=de()},Qe=()=>{const n=de().diff(be.value),o=Math.floor(n/1e3);if(o<60)xe.value=`${h("practice_test.other.your_time")} ${o} ${h(o===1?"practice_test.other.second":"practice_test.other.second_plural")}`;else{const m=de.duration(n),l=m.hours(),x=m.minutes();let g=h("practice_test.other.your_time");l>0&&(g+=`${l} ${l>1?h("practice_test.other.hour"):h("practice_test.other.hour_plural")} `),x>0&&(g+=`${x} ${x>1?h("practice_test.other.minute"):h("practice_test.other.minute_plural")}`),xe.value=g.trim()}},$e={scroll:!0,scrollSensitivity:100,scrollSpeed:100,scrollTarget:document.scrollingElement};function le(){ht(()=>{requestAnimationFrame(()=>{const t=document.querySelectorAll(".matching-option-container.left .answer-option-matching"),n=document.querySelectorAll(".matching-option-container.right .answer-option-matching"),o=Math.min(t.length,n.length);for(let m=0;m<o;m++){const l=t[m],x=n[m];if(!l||!x)continue;l.style.height="auto",x.style.height="auto";const g=Math.max(l.offsetHeight,x.offsetHeight);l.style.height=`${g}px`,x.style.height=`${g}px`}})})}const et=()=>{window.location.reload()},tt=()=>{D.push({name:"User_QuestionSet_Learn",params:{id:w.value}})},nt=()=>{const t=L.value.map(n=>n.questionId);c.value.questions=c.value.questions.filter(n=>t.includes(n.id)),a(),pe()};ut(async()=>{let t=sessionStorage.getItem("test_settings");t&&(i.numberOfQuestion=JSON.parse(t).numberOfQuestion,i.questionTypes=JSON.parse(t).questionTypes),await E(),K(),se(0),le(),window.addEventListener("resize",le),console.log(d.value),ye()});const Oe={animationPath:M,route:e,router:D,t:h,quiz:c,incorrect:L,currentQuestion:d,currentQuestionInstruction:P,currentQuestionIsSkipped:Q,isSubmitted:J,isOptionExceed:X,userAnswerMultipleChoice:G,userAnswerMatchingLeft:N,userAnswerMatchingRight:V,userAnswerOrdering:W,userAnswerShortText:H,userAnswer:p,reset:a,setting_modal_open:R,openSettingModal:K,closeSettingModal:b,settingFormRef:u,settingFormState:i,toggleQuestionType:S,onCreateNewTest:A,questionSetId:w,loading:O,getQuizData:E,animationRef:z,isAnimationDisplaying:te,triggerAnimation:ue,checkMultipleChoice:ce,checkMultipleChoiceAnswerCorrect:re,checkOrdering:Te,checkMatching:qe,checkMatchingAnswerCorrect:Ne,cleanShortTextAnswer:ae,checkShortText:ke,checkShortextCorrect:Ce,getShortTextCorrectAnswer:He,explainModal:Ue,explainModalOpen:fe,toggleExplainModal:Pe,updateUserAnswer:ne,onUserAnswerChange:Ve,refactorLeftOverUserAnswer:ge,handleSkippedQuestion:Ie,onSubmitAnswer:ze,getUserAnswerResult:ve,onSkipQuestion:Fe,onLoadCurrentQuestion:se,onNextQuestion:Ye,onPreviousQuestion:Ge,userAnswerContainQuestion:je,getUserAnswerResultById:Be,userAnswerCurrentQuestionSkipped:Je,userAnswerCurrentQuestionResult:Xe,hasNextQuestion:We,hasPreviousQuestion:Ke,currentQuestionIndex:Ze,getCorrectPercentage:_e,getInCorrectPercentage:Ae,toggleResult:pe,generateChart:Me,startTime:be,timerResult:xe,timerStart:ye,timerEnd:Qe,dragOptions:$e,syncMatchingHeights:le,onNewTest:et,onRedirectToLearn:tt,onRetest:nt,get QUESTION_FORMAT(){return gt},get QUESTION_TYPE(){return q},get DotLottieVue(){return vt},TextArea:_t,get VueDraggable(){return pt},get HolderOutlined(){return ft}};return Object.defineProperty(Oe,"__isScriptSetup",{enumerable:!1,value:!0}),Oe}}),It={class:"page-container"},At={class:"title-container title-container-header"},Mt={class:"content content-test d-flex flex-column"},Qt={class:"d-flex"},Ot={class:"content-item question-navigators"},Rt={class:"question-navigator-title"},Et={key:1,class:"question-navigator-container"},Dt=["onClick"],Lt={class:"content-item content-item-test-result"},Nt={class:"result-container"},Ht={class:"result-section"},Ut={class:"result-section-title"},Pt={class:"result-section-statistic"},Vt={class:"result-text-container"},zt={class:"result-text correct"},Ft={class:"result-text incorrect"},Yt={class:"result-section result-section-buttons"},Gt={class:"result-section-title"},jt={class:"result-button-title"},Bt={class:"result-button-content"},Jt={class:"result-button-title"},Xt={class:"result-button-content"},Wt={class:"result-button-title"},Kt={class:"result-button-content"},Zt={class:"content-item"},$t={key:1,class:"section question-section"},en={class:"question-info-index"},tn=["innerHTML"],nn={class:"section answer-section"},sn={class:"d-flex align-items-center"},on={class:"answer-section-ins"},rn={class:"answer-option-content"},an={key:0,class:"bx bx-check answer-icon"},ln={key:1,class:"bx bx-x answer-icon"},un={key:1,class:"answer-option-container matching"},cn={class:"matching-option-container left"},dn={class:"d-flex align-items-center"},hn={class:"answer-option-order"},mn={class:"answer-option-content"},fn={class:"matching-option-container right"},gn={class:"d-flex align-items-center"},vn={class:"answer-option-content"},_n={class:"answer-option-order"},pn={key:2,class:"answer-option-container ordering"},bn={class:"answer-option-order"},xn={class:"answer-option-content"},yn={key:3,class:"answer-option-container"},Sn={class:"w-100 d-flex align-items-center"},wn={key:0,class:"bx bx-check answer-icon"},Tn={key:1,class:"bx bx-x answer-icon"},qn={key:0,class:"short-text-correct-answer"},kn={class:"learn-question-footer"},Cn={class:"d-flex"},In=["innerHTML"],An={class:"title-container"},Mn={class:"setting-form-item"},Qn={class:"setting-form-item setting-form-switch"};function On(C,r,M,e,D,h){const c=F("RouterLink"),L=F("a-col"),d=F("a-row"),P=F("a-skeleton"),Q=F("a-button"),J=F("a-checkbox"),X=F("a-checkbox-group"),G=F("a-input-number"),N=F("a-form-item"),V=F("a-divider"),W=F("a-switch"),H=F("a-form"),p=F("a-modal");return v(),y(ee,null,[s("div",It,[e.isAnimationDisplaying?(v(),he(e.DotLottieVue,{key:0,autoplay:e.isAnimationDisplaying,ref:"animationRef",class:k(["animation-container"]),onComplete:r[0]||(r[0]=a=>e.isAnimationDisplaying=!1),src:e.animationPath},null,8,["autoplay","src"])):B("v-if",!0),s("div",At,[_(d,{class:"w-100 d-flex align-items-center"},{default:T(()=>[_(L,{span:1},{default:T(()=>[_(c,{to:{name:"User_Library"}},{default:T(()=>r[10]||(r[10]=[s("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[10]})]),_:1}),_(L,{class:"main-title",span:22},{default:T(()=>[s("span",null,f(e.quiz.title),1),r[11]||(r[11]=Y()),r[12]||(r[12]=s("br",null,null,-1)),s("span",null,f(e.quiz.description),1)]),_:1,__:[11,12]}),_(L,{span:1},{default:T(()=>[s("i",{class:"bx bx-cog test-setting-btn",onClick:e.openSettingModal})]),_:1})]),_:1})]),s("div",Mt,[s("div",Qt,[s("div",Ot,[s("div",Rt,f(e.t("practice_test.other.question_list")),1),e.loading?(v(),he(P,{key:0,loading:e.loading},null,8,["loading"])):(v(),y("div",Et,[(v(!0),y(ee,null,oe(e.quiz.questions,(a,R)=>(v(),y("div",{class:k(["question-navigation-item-outer",e.currentQuestion.id===a.id?"current-question":""])},[s("div",{class:k(["question-navigator-item",e.userAnswerContainQuestion(a.id)?"completed-question":"",e.isSubmitted?e.getUserAnswerResultById(a.id)?"correct":"incorrect":""]),onClick:K=>e.onLoadCurrentQuestion(R)},[s("span",null,f(R+1),1)],10,Dt)],2))),256))])),_(Q,{type:"primary",class:k(["main-color-btn",e.isSubmitted?"main-color-btn-disabled":""]),onClick:e.onSubmitAnswer},{default:T(()=>[Y(f(C.$t("learn_QS.buttons.submit")),1)]),_:1},8,["class"])]),s("div",Lt,[s("div",Nt,[s("div",Ht,[s("div",Ut,f(e.timerResult),1),s("div",Pt,[r[13]||(r[13]=s("div",{id:"result_chart_container"},null,-1)),s("div",Vt,[s("div",zt,[Y(f(C.$t("practice_test.other.correct"))+" ",1),s("span",null,f(e.quiz.questions.length-e.incorrect.length),1)]),s("div",Ft,[Y(f(C.$t("practice_test.other.incorrect"))+" ",1),s("span",null,f(e.incorrect.length),1)])])])]),s("div",Yt,[s("div",Gt,f(C.$t("practice_test.final_modal.button_title")),1),s("div",{class:"result-button",onClick:e.onNewTest},[r[14]||(r[14]=s("i",{class:"bx bxs-news"},null,-1)),s("div",null,[s("div",jt,f(C.$t("practice_test.final_modal.buttons.new_test")),1),s("div",Bt,f(C.$t("practice_test.final_modal.buttons_ins.new_test")),1)])]),e.getInCorrectPercentage()<=30?(v(),y("div",{key:0,class:"result-button",onClick:e.onRedirectToLearn},[r[15]||(r[15]=s("i",{class:"bx bx-analyse"},null,-1)),s("div",null,[s("div",Jt,f(C.$t("practice_test.final_modal.buttons.practice")),1),s("div",Xt,f(C.$t("practice_test.final_modal.buttons_ins.practice")),1)])])):B("v-if",!0),e.getInCorrectPercentage()>30?(v(),y("div",{key:1,class:"result-button",onClick:e.onRetest},[r[16]||(r[16]=s("i",{class:"bx bx-reset"},null,-1)),s("div",null,[s("div",Wt,f(C.$t("practice_test.final_modal.buttons.re_test")),1),s("div",Kt,f(C.$t("practice_test.final_modal.buttons_ins.re_test")),1)])])):B("v-if",!0)])])])]),s("div",Zt,[e.loading?(v(),y(ee,{key:0},[_(P,{loading:e.loading},null,8,["loading"]),_(P,{loading:e.loading},null,8,["loading"]),_(P,{loading:e.loading},null,8,["loading"])],64)):(v(),y("div",$t,[s("div",en,f(C.$t("create_QS.question.question"))+" "+f(e.currentQuestionIndex+1),1),s("div",{class:k(["learn-question",e.currentQuestion.textFormat===e.QUESTION_FORMAT.HTML?"":"d-none"]),innerHTML:e.currentQuestion.questionText},null,10,tn),s("div",{class:k(["learn-question",e.currentQuestion.textFormat===e.QUESTION_FORMAT.HTML?"d-none":""])},f(e.currentQuestion.questionText),3),s("div",nn,[s("div",sn,[s("div",on,f(e.currentQuestionInstruction),1),s("div",{class:k(["ms-3 learn-question-result",e.isSubmitted?e.userAnswerCurrentQuestionResult.result?"result-correct":"result-incorrect":"",e.userAnswerCurrentQuestionSkipped?"result-skipped":""])},f(e.userAnswerCurrentQuestionResult.resultText),3)]),e.currentQuestion.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(v(),he(X,{key:0,onChange:e.onUserAnswerChange,value:e.userAnswerMultipleChoice,"onUpdate:value":r[1]||(r[1]=a=>e.userAnswerMultipleChoice=a),class:k(["answer-option-container multiplechoice",e.isOptionExceed?"column":""])},{default:T(()=>[(v(!0),y(ee,null,oe(e.currentQuestion.questionData.multipleChoice,(a,R)=>(v(),he(J,{value:a.id,"onUpdate:value":K=>a.id=K,disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,class:k(["answer-option answer-option-multiplechoice",e.isSubmitted&&e.checkMultipleChoiceAnswerCorrect(a)&&a.isAnswer?"answer-correct":"",e.isSubmitted&&!e.checkMultipleChoiceAnswerCorrect(a)&&!a.isAnswer?"answer-incorrect":""])},{default:T(()=>[s("div",rn,f(a.text),1),e.isSubmitted&&e.checkMultipleChoiceAnswerCorrect(a)&&a.isAnswer?(v(),y("i",an)):B("v-if",!0),e.isSubmitted&&!e.checkMultipleChoiceAnswerCorrect(a)&&!a.isAnswer?(v(),y("i",ln)):B("v-if",!0)]),_:2},1032,["value","onUpdate:value","disabled","class"]))),256))]),_:1},8,["value","class"])):B("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.MATCHING?(v(),y("div",un,[s("div",cn,[_(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerMatchingLeft,"onUpdate:modelValue":r[2]||(r[2]=a=>e.userAnswerMatchingLeft=a),options:e.dragOptions,onMove:e.syncMatchingHeights,onEnd:r[3]||(r[3]=()=>{e.syncMatchingHeights(),e.onUserAnswerChange()})},{default:T(()=>[(v(!0),y(ee,null,oe(e.userAnswerMatchingLeft,(a,R)=>(v(),y("div",dn,[s("div",{class:k(["answer-option answer-option-matching",e.isSubmitted?e.checkMatchingAnswerCorrect(a.id)?"answer-correct":"answer-incorrect":""])},[s("div",hn,[_(e.HolderOutlined)]),s("div",mn,f(a.text),1)],2),s("i",{class:k(["bx bxs-label matching-icon",e.isSubmitted?e.checkMatchingAnswerCorrect(a.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2)]))),256))]),_:1},8,["disabled","modelValue"])]),s("div",fn,[_(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerMatchingRight,"onUpdate:modelValue":r[4]||(r[4]=a=>e.userAnswerMatchingRight=a),options:e.dragOptions,onMove:e.syncMatchingHeights,onEnd:r[5]||(r[5]=()=>{e.syncMatchingHeights(),e.onUserAnswerChange()})},{default:T(()=>[(v(!0),y(ee,null,oe(e.userAnswerMatchingRight,(a,R)=>(v(),y("div",gn,[s("i",{class:k(["bx bxs-label matching-icon",e.isSubmitted?e.checkMatchingAnswerCorrect(a.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2),s("div",{class:k(["answer-option answer-option-matching",e.isSubmitted?e.checkMatchingAnswerCorrect(a.id)?"answer-correct":"answer-incorrect":""])},[s("div",vn,f(a.text),1),s("div",_n,[_(e.HolderOutlined)])],2)]))),256))]),_:1},8,["disabled","modelValue"])])])):B("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.ORDERING?(v(),y("div",pn,[_(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerOrdering,"onUpdate:modelValue":r[6]||(r[6]=a=>e.userAnswerOrdering=a),options:e.dragOptions,onEnd:e.onUserAnswerChange},{default:T(()=>[(v(!0),y(ee,null,oe(e.userAnswerOrdering,(a,R)=>(v(),y("div",{class:k(["answer-option answer-option-ordering",e.isSubmitted?R===a.correctOrder?"answer-correct":"answer-incorrect":""])},[s("div",bn,[_(e.HolderOutlined),Y(" "+f(R+1),1)]),s("div",xn,f(a.text),1),s("div",{class:k(["answer-option-order answer-icon",e.isSubmitted?"":"d-none"])},[r[17]||(r[17]=s("i",{class:"bx bx-hash answer-icon"},null,-1)),Y(" "+f(a.correctOrder+1),1)],2)],2))),256))]),_:1},8,["disabled","modelValue"])])):B("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.SHORT_TEXT?(v(),y("div",yn,[s("div",{class:k(["answer-short-text",e.isSubmitted?e.checkShortextCorrect()?"answer-correct":"answer-incorrect":""])},[s("div",Sn,[_(e.TextArea,{readonly:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,placeholder:"Enter your answer...",modelValue:e.userAnswerShortText,"onUpdate:modelValue":r[7]||(r[7]=a=>e.userAnswerShortText=a),onChange:e.onUserAnswerChange},null,8,["readonly","modelValue"]),e.isSubmitted&&e.checkShortextCorrect()?(v(),y("i",wn)):B("v-if",!0),e.isSubmitted&&!e.checkShortextCorrect()?(v(),y("i",Tn)):B("v-if",!0)]),e.isSubmitted&&!e.checkShortextCorrect()?(v(),y("div",qn,[r[18]||(r[18]=Y(" Correct answer: ")),s("span",null,f(e.getShortTextCorrectAnswer),1)])):B("v-if",!0)],2)])):B("v-if",!0)]),s("div",kn,[_(Q,{class:k(["main-color-btn",e.hasPreviousQuestion?"":"main-color-btn-disabled"]),type:"primary",size:"large",onClick:e.onPreviousQuestion},{default:T(()=>[r[19]||(r[19]=s("i",{class:"bx bx-chevron-left"},null,-1)),Y(" "+f(C.$t("practice_test.buttons.previous")),1)]),_:1,__:[19]},8,["class"]),e.isSubmitted?(v(),y("div",{key:1,class:k(["main-color-btn-ghost me-3"]),onClick:e.toggleExplainModal},[r[20]||(r[20]=s("i",{class:"bx bx-bulb me-2"},null,-1)),Y(" "+f(C.$t("learn_QS.buttons.explaination")),1)])):(v(),y("div",{key:0,class:k(["main-color-btn-ghost",e.userAnswerCurrentQuestionSkipped||e.isSubmitted?"main-color-btn-ghost-disabled":""]),onClick:r[8]||(r[8]=a=>e.onSkipQuestion())},f(C.$t("learn_QS.buttons.dont_know")),3)),s("div",Cn,[_(Q,{class:k(["main-color-btn",e.hasNextQuestion?"":"main-color-btn-disabled"]),type:"primary",size:"large",onClick:e.onNextQuestion},{default:T(()=>[Y(f(C.$t("learn_QS.buttons.next_question"))+" ",1),r[21]||(r[21]=s("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[21]},8,["class"])])])]))]),s("div",{ref:"explainModal",class:k(["explain-modal explain-modal-up",{show:e.explainModalOpen}])},[s("div",{class:"learn-question-explain",innerHTML:e.currentQuestion.explainText},null,8,In),_(Q,{class:k(["main-color-btn close-modal-btn"]),type:"primary",size:"large",onClick:e.toggleExplainModal},{default:T(()=>r[22]||(r[22]=[s("i",{class:"bx bx-chevrons-down"},null,-1)])),_:1,__:[22]}),_(Q,{class:k(["main-color-btn",e.hasNextQuestion?"":"main-color-btn-disabled"]),type:"primary",size:"large",onClick:e.onNextQuestion},{default:T(()=>[Y(f(C.$t("learn_QS.buttons.next_question"))+" ",1),r[23]||(r[23]=s("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[23]},8,["class"])],2)])]),_(p,{centered:"","wrap-class-name":"medium-modal",open:e.setting_modal_open,onCancel:e.closeSettingModal},{footer:T(()=>[_(Q,{type:"primary",class:"main-color-btn",size:"large",shape:"round",onClick:e.onCreateNewTest},{default:T(()=>[Y(f(e.t("practice_test.setting_modal.create_new_test")),1)]),_:1})]),default:T(()=>[s("div",An,[_(d,{class:"w-100 d-flex align-items-center justify-content-between"},{default:T(()=>[_(L,{span:1},{default:T(()=>[s("div",{onClick:e.closeSettingModal},r[24]||(r[24]=[s("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)]))]),_:1}),_(L,{class:"main-title",span:20},{default:T(()=>[s("span",null,f(C.$t("practice_test.setting_modal.title")),1),r[25]||(r[25]=Y()),r[26]||(r[26]=s("br",null,null,-1))]),_:1,__:[25,26]})]),_:1})]),_(H,{class:"setting-form"},{default:T(()=>[_(N,null,{default:T(()=>[s("div",Mn,[s("div",null,f(C.$t("practice_test.setting_modal.max_question",{length:e.quiz.totalQuestionCount})),1),_(G,{size:"large",id:"inputNumber",value:e.settingFormState.numberOfQuestion,"onUpdate:value":r[9]||(r[9]=a=>e.settingFormState.numberOfQuestion=a),min:5,max:e.quiz.totalQuestionCount},null,8,["value","max"])])]),_:1}),_(V,{style:{"background-color":"var(--form-item-border-color)"}}),_(N,null,{default:T(()=>[(v(!0),y(ee,null,oe(e.QUESTION_TYPE,a=>(v(),y("div",Qn,[s("div",null,f(e.t(`create_QS.type.${a}`)),1),_(W,{disabled:e.settingFormState.questionTypes.length<=1&&e.settingFormState.questionTypes.includes(a),checked:e.settingFormState.questionTypes.includes(a),onChange:R=>e.toggleQuestionType(a,R)},null,8,["disabled","checked","onChange"])]))),256))]),_:1})]),_:1})]),_:1},8,["open"])],64)}const zn=mt(Ct,[["render",On],["__scopeId","data-v-4662dd21"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/question_sets/test.vue"]]);export{zn as default};
