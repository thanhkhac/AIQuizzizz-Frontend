import{d as F,q as L,l as B,u as G,i as N,s as W,R as X,S as J,_ as K,r as U,c as i,o,b as t,a as c,F as h,w as f,t as l,f as j,B as y,e as M,p as C}from"./index-CW61C-sU.js";import{T as V,A as Z}from"./ApiTest-BOKsJ6Sl.js";import{Q as tt}from"./questionTypes-CS3lcRlq.js";import{V as et}from"./Validator-CWeiTIFe.js";const st=F({__name:"review",emits:["updateSidebar"],setup(P,{expose:e,emit:R}){e();const n=L(),A=B(),{t:H}=G(),g=N(!1),w=N({attemptId:"",name:"",studentName:"NguyenTanDuc",timeStart:"",timeEnd:"",score:0,status:"",questions:[]}),D=(r,u)=>{$(u).toggleClass("bx-chevron-up bx-chevron-down");const d=$(`#question-item-answer-${r}`);d&&$(d).slideToggle()},Y=(r,u)=>{if(!u)return[];const s=p.value.find(_=>_.id===r);return s?s.questionData.multipleChoice.filter(_=>u.includes(_.id)).map(_=>({id:_.id,text:_.text,isCorrect:_.isAnswer}))??[]:[]},a=r=>{var s;return r?(s=r.matches)==null?void 0:s.map(d=>{var _,v;return{leftItem:(_=r.leftItems.find(I=>I.id===d.leftId))==null?void 0:_.text,rightItem:(v=r.rightItems.find(I=>I.id===d.rightId))==null?void 0:v.text}}):void 0},x=(r,u)=>{if(!u)return[];const s=p.value.find(m=>m.id===r);if(!s)return[];const d=s.questionData.matching.matches,_=s.questionData.matching.leftItems,v=s.questionData.matching.rightItems;return u.map(m=>{var Q,z;return{leftId:m.leftId,rightId:m.rightId,leftItem:(Q=_.find(b=>b.id===m.leftId))==null?void 0:Q.text,rightItem:(z=v.find(b=>b.id===m.rightId))==null?void 0:z.text,isCorrect:d.some(b=>b.leftId===m.leftId&&b.rightId===m.rightId)}})??[]},O=(r,u)=>{if(!u)return[];const s=p.value.find(v=>v.id===r);if(!s)return[];const d=s.questionData.ordering;return u.map(v=>{var I;return{itemId:v.itemId,order:v.order,text:(I=d.find(m=>m.id===v.itemId))==null?void 0:I.text,isCorrect:d.some(m=>m.id===v.itemId&&m.correctOrder===v.order)}})??[]},q=r=>{switch(r){case V.PASSED:return"#22C55E";case V.FAILED:return"#cd201f";default:return"#F59E0B"}},T=N(n.params.id),p=N([]),E=async()=>{try{if(g.value=!0,!et.isValidGuid(T.value)){A.push({name:"404"});return}const r=await Z.GetAttemptReview(T.value);r.data.success&&(w.value=r.data.data)}catch(r){if(Object.keys(r.response.data.errors).includes(X.STUDENT_CAN_REVIEW_THIS_TEST)){A.push({name:"User_Class"});return}r.response&&!r.response.data.success&&A.push({name:"404"})}finally{g.value=!1}},S=R;W(async()=>{S("updateSidebar","class"),await E(),p.value=w.value.questions});const k={route:n,router:A,t:H,loading:g,reviewData:w,toggleDisplayAnswer:D,getUserAnswerMultipleChoice:Y,getMatchingOption:a,getUserAnswerMatching:x,getUserAnswerOrdering:O,getTagColor:q,attemptId:T,questionData:p,getData:E,emit:S,get QUESTION_TYPE(){return tt},get dayjs(){return J}};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),nt={class:"page-container"},it={class:"content-item"},ot={key:0},rt={class:"d-flex justify-content-between"},at={class:"d-flex justify-content-between"},lt={class:"d-flex justify-content-between"},dt={class:"d-flex justify-content-between"},ct={class:"d-flex justify-content-between"},ut={class:"content-item"},_t={class:"content-item-title"},mt={key:0},vt={key:1,class:"preview-question-container"},gt={class:"preview-question-item"},ft={class:"d-flex align-items-center"},wt={class:"question-index"},pt={class:"question-item-content"},ht={class:"d-flex align-items-center"},It=["innerHTML"],yt=["id"],Dt={key:0,class:"question-data"},Tt={class:"question-data-option"},bt={class:"question-data-option user-answer"},At={key:0},xt={key:1,class:"result-skipped"},Et={key:1,class:"question-data"},St={class:"question-data-option"},kt={class:"pair-answer"},Ct={class:"pair-answer-item"},Ot={class:"pair-answer-item"},qt={class:"question-data-option user-answer"},Nt={class:"pair-answer-item"},Ut={class:"pair-answer-item"},jt={key:1,class:"result-skipped"},Mt={key:2,class:"question-data"},Yt={class:"question-data-option"},Pt={class:"ordering-answer"},Rt={class:"ordering-answer-item"},Ht={class:"ordering-answer-item"},Qt={class:"result-correct"},zt={class:"question-data-option"},Vt={key:0,class:"ordering-answer"},Ft={class:"ordering-answer-item"},Lt={key:1,class:"result-skipped"},Bt={key:3,class:"question-data"},Gt={class:"question-data-option"},Wt={class:"short-text-answer"},Xt={class:"question-data-option"},Jt={key:0,class:"short-text-answer"},Kt={key:1,class:"result-skipped"},Zt={class:"question-item-toogle-btn"},$t=["onClick"];function te(P,e,R,n,A,H){const g=U("a-skeleton"),w=U("a-col"),D=U("a-row"),Y=U("a-tag");return o(),i("div",nt,[t("div",it,[e[5]||(e[5]=t("div",{class:"content-item-title"},[t("span",null,"Attempt info")],-1)),n.loading?(o(),i("div",ot,[c(g,{loading:n.loading,active:""},null,8,["loading"]),c(g,{loading:n.loading,active:""},null,8,["loading"])])):(o(),i(h,{key:1},[c(D,{class:"mb-2 d-flex align-items-center justify-content-between"},{default:f(()=>[c(w,{span:12,class:"test-info-item"},{default:f(()=>[t("div",rt,[e[0]||(e[0]=t("span",null," Student name:",-1)),t("span",null,l(n.reviewData.studentName),1)])]),_:1})]),_:1}),c(D,{class:"mb-2 d-flex align-items-center justify-content-between"},{default:f(()=>[c(w,{span:12,class:"test-info-item"},{default:f(()=>[t("div",at,[e[1]||(e[1]=t("span",null," StartTime:",-1)),t("span",null,l(n.dayjs(n.reviewData.timeStart).format("DD/MM/YYYY HH:mm:ss A")),1)]),t("div",lt,[e[2]||(e[2]=t("span",null," EndTime:",-1)),t("span",null,l(n.dayjs(n.reviewData.timeEnd).format("DD/MM/YYYY HH:mm:ss A")),1)])]),_:1})]),_:1}),c(D,{class:"mb-2 d-flex align-items-center justify-content-between"},{default:f(()=>[c(w,{span:12,class:"test-info-item"},{default:f(()=>[t("div",dt,[e[3]||(e[3]=t("span",null,"Score:",-1)),t("span",null,l(n.reviewData.score),1)])]),_:1})]),_:1}),c(D,{class:"mb-2 d-flex align-items-center justify-content-between"},{default:f(()=>[c(w,{span:12,class:"test-info-item"},{default:f(()=>[t("div",ct,[e[4]||(e[4]=t("span",null,"Status:",-1)),c(Y,{color:n.getTagColor(n.reviewData.status)},{default:f(()=>[j(l(n.reviewData.status),1)]),_:1},8,["color"])])]),_:1})]),_:1})],64))]),t("div",ut,[t("div",_t,[t("div",null,[t("span",null,l(P.$t("detail_QS.other.questions",{number:n.questionData.length})),1)])]),n.loading?(o(),i("div",mt,[c(g,{loading:n.loading,active:""},null,8,["loading"]),c(g,{loading:n.loading,active:""},null,8,["loading"]),c(g,{loading:n.loading,active:""},null,8,["loading"]),c(g,{loading:n.loading,active:""},null,8,["loading"]),c(g,{loading:n.loading,active:""},null,8,["loading"])])):(o(),i("div",vt,[(o(!0),i(h,null,y(n.questionData,(a,x)=>{var O,q,T,p,E,S,k,r,u;return o(),i("div",gt,[t("div",ft,[t("div",wt,l(x+1),1)]),t("div",pt,[t("div",ht,[t("div",{class:"question-text",innerHTML:a.questionText},null,8,It)]),t("div",{class:"question-item-answer",id:`question-item-answer-${x}`},[a.type===n.QUESTION_TYPE.MULTIPLE_CHOICE?(o(),i("div",Dt,[t("div",Tt,[e[6]||(e[6]=t("div",null,"Options:",-1)),t("ul",null,[(o(!0),i(h,null,y(a.questionData.multipleChoice,s=>(o(),i("li",{class:C([s.isAnswer?"result-correct":""])},l(s.text),3))),256))])]),t("div",bt,[e[7]||(e[7]=t("div",null,"User answer:",-1)),(O=a.userAnswerDataDto)!=null&&O.multipleChoice?(o(),i("ul",At,[(o(!0),i(h,null,y(n.getUserAnswerMultipleChoice(a.id,(q=a.userAnswerDataDto)==null?void 0:q.multipleChoice),s=>(o(),i("li",{class:C([s.isCorrect?"result-correct":"result-incorrect"])},l(s.text),3))),256))])):(o(),i("div",xt,"No answer"))])])):M("v-if",!0),a.type===n.QUESTION_TYPE.MATCHING?(o(),i("div",Et,[t("div",St,[e[9]||(e[9]=t("div",null,"Options:",-1)),(o(!0),i(h,null,y(n.getMatchingOption(a.questionData.matching),s=>(o(),i("div",kt,[t("span",Ct,l(s.leftItem),1),e[8]||(e[8]=t("i",{class:"bx bx-right-arrow-alt"},null,-1)),t("span",Ot,l(s.rightItem),1)]))),256))]),t("div",qt,[e[11]||(e[11]=t("div",null,"User answer:",-1)),(T=a.userAnswerDataDto)!=null&&T.matching?(o(!0),i(h,{key:0},y(n.getUserAnswerMatching(a.id,(p=a.userAnswerDataDto)==null?void 0:p.matching),s=>(o(),i("div",{class:C(["pair-answer",s.isCorrect?"":"pair-answer-incorrect"])},[t("span",Nt,l(s.leftItem),1),e[10]||(e[10]=t("i",{class:"bx bx-right-arrow-alt"},null,-1)),t("span",Ut,l(s.rightItem),1)],2))),256)):(o(),i("div",jt,"No answer"))])])):M("v-if",!0),a.type===n.QUESTION_TYPE.ORDERING?(o(),i("div",Mt,[t("div",Yt,[e[12]||(e[12]=t("div",null,"Options:",-1)),t("div",Pt,[t("div",Rt,[(o(!0),i(h,null,y((E=a.questionData.ordering)==null?void 0:E.sort((s,d)=>s.correctOrder-d.correctOrder),(s,d)=>(o(),i("div",Ht,[t("span",Qt,"#"+l(d+1),1),j(" - "+l(s.text),1)]))),256))])])]),t("div",zt,[e[13]||(e[13]=t("div",null,"User answer:",-1)),(S=a.userAnswerDataDto)!=null&&S.ordering?(o(),i("div",Vt,[t("div",Ft,[(o(!0),i(h,null,y(n.getUserAnswerOrdering(a.id,(k=a.userAnswerDataDto)==null?void 0:k.ordering),(s,d)=>(o(),i("div",{class:C(["ordering-answer-item",s.isCorrect?"result-correct":"result-incorrect"])},[t("span",null,"#"+l(d+1),1),j(" - "+l(s.text),1)],2))),256))])])):(o(),i("div",Lt,"No answer"))])])):M("v-if",!0),a.type===n.QUESTION_TYPE.SHORT_TEXT?(o(),i("div",Bt,[t("div",Gt,[e[14]||(e[14]=t("div",null,"Option:",-1)),t("div",Wt,l(a.questionData.shortText),1)]),t("div",Xt,[e[15]||(e[15]=t("div",null,"User answer:",-1)),(r=a.questionDataDto)!=null&&r.shortText?(o(),i("div",Jt,l((u=a.userAnswerDataDto)==null?void 0:u.shortText),1)):(o(),i("div",Kt,"No answer"))])])):M("v-if",!0)],8,yt),t("div",null,[e[16]||(e[16]=j(" Score: ")),t("span",{class:C([a.score>0?"result-correct":"result-incorrect"])},l(a.score),3)])]),t("div",Zt,[t("i",{class:"bx bx-chevron-up",onClick:s=>n.toggleDisplayAnswer(x,s.currentTarget)},null,8,$t)])])}),256))]))])])}const oe=K(st,[["render",te],["__scopeId","data-v-acd3c1f2"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/test/review.vue"]]);export{oe as default};
