import{d as V,T as R,u as G,i as O,B as W,C as Q,s as se,_ as B,r as d,E,o as c,w as n,b as t,c as o,t as l,a as v,F as N,D as P,f as C,q as K,j as X,l as le,M as ie,e as D,p as re}from"./index-BeJw_uqm.js";import{a as de,T as J}from"./testGradeQuestionMethod-B_BacNS6.js";import{I as H}from"./Input-lf_t6EsR.js";import{u as ce}from"./utc-CvzXw1nH.js";import{A as te}from"./ApiFolder-J1oP41NU.js";import{F as Y}from"./folderShareMode-BudLQ2R2.js";import{A as ae}from"./ApiTestTemplate-Cl_BcCFs.js";import{Q as ee}from"./questionTypes-CS3lcRlq.js";const me=V({__name:"SettingTestModal",props:{className:{type:String,required:!0},formState:{type:null,required:!0},formRef:{type:null,required:!0}},setup(h,{expose:a}){R.extend(ce);const{t:u}=G(),e=h,I=O(!1),x=()=>{I.value=!0,e.formState.startTime&&e.formState.endTime&&(r.value[0]=R(e.formState.startTime),r.value[1]=R(e.formState.endTime))},T=async()=>{e.formState.startTime=r.value[0].toISOString(),e.formState.endTime=r.value[1].toISOString();try{await i.value.validate()&&(I.value=!1)}catch{}};a({openTestSettingModal:x});const i=O(e.formRef),r=O([R().add(30,"minute"),R().add(1,"day")]),_=s=>{s&&(e.formState.startTime=s[0].toISOString(),e.formState.endTime=s[1].toISOString(),r.value[0]=s[0],r.value[1]=s[1])},z={range:[{validator(s,m){return r.value?r.value[1].diff(r.value[0],"minute")<e.formState.timeLimit?Promise.reject(u("message.invalid_time_range",{time_limit:e.formState.timeLimit})):r.value[0].isBefore(R())?Promise.reject(u("message.invalid_time_range",{time_limit:e.formState.timeLimit})):Promise.resolve():Promise.reject(u("message.required"))},trigger:"change"}],title:[{required:!0,message:u("message.required"),trigger:"change"},{validator:(s,m)=>(m==null?void 0:m.length)>100?Promise.reject(u("message.out_of_range",{max_length:100})):Promise.resolve(),trigger:"change"}],timeLimit:[{required:!0,message:u("message.required"),trigger:"change"}],passingScore:[{required:!0,message:u("message.required"),trigger:"change"}],numberOfShuffles:[{required:!0,message:u("message.required"),trigger:"change"}],maxAttempt:[{required:!0,message:u("message.required"),trigger:"change"}]},b=Object.values(de),y=W(()=>b.map(s=>({label:u(`setting_test_modal.final_score_options.${s}`),value:s}))),q=s=>{e.formState.gradeQuestionMethod=s?J.PARTIAL:J.ALL_OR_NOTHING};Q(()=>[e.formState.startTime,e.formState.endTime],([s,m])=>{s&&m&&(r.value[0]=R(s),r.value[1]=R(m))},{immediate:!0}),Q(()=>e.formState.timeLimit,async s=>{try{await i.value.validate()}catch{}}),se(async()=>{});const w={t:u,props:e,modal_open:I,openTestSettingModal:x,closeModal:T,formRef:i,range:r,onRangeChange:_,rules:z,optionAttemptKeys:b,select_attempt_options:y,onQuestionGradeMethodChange:q,get TEST_GRADE_QUESTION_METHOD(){return J},Input:H};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),_e={class:"modal-container"},ue={class:"modal-title-container"},pe={class:"content-item modal-test-setting"},fe={class:"content-item-title"},ge={class:"switch-content"},he={class:"switch-title"},ve={class:"switch-sub-title"},be={class:"switch-content"},Te={class:"switch-title"},ye={class:"switch-sub-title"},Se={class:"switch-content"},we={class:"switch-title"},ke={class:"switch-sub-title"};function xe(h,a,u,e,I,x){const T=d("RouterLink"),i=d("a-col"),r=d("a-row"),_=d("a-form-item"),z=d("a-range-picker"),b=d("a-input-number"),y=d("a-switch"),q=d("a-select-option"),w=d("a-select"),s=d("a-form"),m=d("a-button"),g=d("a-modal");return c(),E(g,{centered:"",width:"100%","wrap-class-name":"full-modal setting-modal",open:e.modal_open,onCancel:e.closeModal},{footer:n(()=>[o(m,{class:"main-color-btn-ghost",size:"large",key:"submit",type:"ghost",onClick:e.closeModal},{default:n(()=>[C(l(h.$t("sidebar.buttons.cancel")),1)]),_:1}),o(m,{class:"main-color-btn",size:"large",key:"submit",type:"primary",onClick:e.closeModal},{default:n(()=>[C(l(h.$t("assign_test.buttons.next")),1)]),_:1})]),default:n(()=>[t("div",_e,[t("div",ue,[o(r,{class:"w-100 d-flex align-items-center"},{default:n(()=>[o(i,{span:1},{default:n(()=>[o(T,{to:{name:"User_Class_Exam",params:{id:u.formState.classId}}},{default:n(()=>a[9]||(a[9]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[9]},8,["to"])]),_:1}),o(i,{class:"main-title",span:23},{default:n(()=>[t("span",null,l(e.t("setting_test_modal.other.back")),1)]),_:1})]),_:1})]),t("div",pe,[t("div",fe,[t("div",null,[t("span",null,l(e.t("setting_test_modal.title")),1),t("span",null,l(e.t("setting_test_modal.sub_title")),1)])]),o(s,{ref:"formRef",model:u.formState,rules:e.rules,class:"w-100",layout:"vertical"},{default:n(()=>[o(_,null,{default:n(()=>[o(e.Input,{class:"question-input-item",modelValue:u.formState.name,"onUpdate:modelValue":a[0]||(a[0]=p=>u.formState.name=p),isRequired:!0,placeholder:"Enter test title",label:e.t("setting_test_modal.form.title"),"max-length":100},null,8,["modelValue","label"])]),_:1}),o(r,{class:"form-item-row"},{default:n(()=>[o(i,{span:24},{default:n(()=>[o(_,{rules:e.rules.range,label:e.t("setting_test_modal.form.date"),class:"input-item",name:"range"},{default:n(()=>[o(z,{onChange:e.onRangeChange,size:"large","show-time":"",value:e.range,"onUpdate:value":a[1]||(a[1]=p=>e.range=p)},null,8,["value"])]),_:1},8,["rules","label"])]),_:1})]),_:1}),o(r,{class:"form-item-row"},{default:n(()=>[o(i,{span:10},{default:n(()=>[o(_,{label:e.t("setting_test_modal.form.number_of_attempt"),class:"input-item",name:"maxAttempt"},{default:n(()=>[o(b,{size:"large","addon-after":"time",value:u.formState.maxAttempt,"onUpdate:value":a[2]||(a[2]=p=>u.formState.maxAttempt=p),min:"1",max:"100",precision:0},{prefix:n(()=>a[10]||(a[10]=[t("i",{class:"bx bx-repost"},null,-1)])),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),o(i,{span:10},{default:n(()=>[o(_,{label:e.t("setting_test_modal.form.number_of_shuffle"),class:"input-item",name:"numberOfShuffles"},{default:n(()=>[o(b,{size:"large","addon-after":"times",value:u.formState.numberOfShuffles,"onUpdate:value":a[3]||(a[3]=p=>u.formState.numberOfShuffles=p),min:"1",max:"100",precision:0},{prefix:n(()=>a[11]||(a[11]=[t("i",{class:"bx bx-shuffle"},null,-1)])),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),o(r,{class:"form-item-row"},{default:n(()=>[o(i,{span:10},{default:n(()=>[o(_,{label:e.t("setting_test_modal.form.time_limit"),class:"input-item",name:"timeLimit"},{default:n(()=>[o(b,{size:"large","addon-after":"minutes",value:u.formState.timeLimit,"onUpdate:value":a[4]||(a[4]=p=>u.formState.timeLimit=p),min:"1",max:"120",precision:0},{prefix:n(()=>a[12]||(a[12]=[t("i",{class:"bx bx-time-five"},null,-1)])),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),o(i,{span:10},{default:n(()=>[o(_,{label:e.t("setting_test_modal.form.passing_score"),class:"input-item",name:"passingScore"},{default:n(()=>[o(b,{size:"large","addon-after":"%",value:u.formState.passingScore,"onUpdate:value":a[5]||(a[5]=p=>u.formState.passingScore=p),min:"1",max:"100",precision:0},{prefix:n(()=>a[13]||(a[13]=[t("i",{class:"bx bx-check-circle"},null,-1)])),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),o(r,{class:"form-item-row"},{default:n(()=>[o(i,{span:10,class:"input-item switch"},{default:n(()=>[t("div",ge,[t("div",he,l(e.t("setting_test_modal.form.show_correct_answer")),1),t("div",ve,l(e.t("setting_test_modal.form.show_correct_answer_ins")),1)]),o(y,{checked:u.formState.isShowCorrectAnswerInReview,"onUpdate:checked":a[6]||(a[6]=p=>u.formState.isShowCorrectAnswerInReview=p)},null,8,["checked"])]),_:1}),o(i,{span:10},{default:n(()=>[o(_,{label:e.t("setting_test_modal.form.final_score"),class:"input-item"},{default:n(()=>[o(w,{size:"large",value:u.formState.gradeAttemptMethod,"onUpdate:value":a[7]||(a[7]=p=>u.formState.gradeAttemptMethod=p)},{default:n(()=>[(c(!0),v(N,null,P(e.select_attempt_options,p=>(c(),E(q,{value:p.value},{default:n(()=>[C(l(p.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),o(r,{class:"form-item-row"},{default:n(()=>[o(i,{span:10,class:"input-item switch"},{default:n(()=>[t("div",be,[t("div",Te,l(e.t("setting_test_modal.form.partial_grade_method")),1),t("div",ye,l(e.t("setting_test_modal.form.partial_grade_method_ins")),1)]),o(y,{checked:u.formState.gradeQuestionMethod===e.TEST_GRADE_QUESTION_METHOD.PARTIAL,onChange:e.onQuestionGradeMethodChange},null,8,["checked"])]),_:1}),o(i,{span:10,class:"input-item switch"},{default:n(()=>[t("div",Se,[t("div",we,l(e.t("setting_test_modal.form.review_attempt")),1),t("div",ke,l(e.t("setting_test_modal.form.review_attempt_ins")),1)]),o(y,{checked:u.formState.isAllowReviewAfterSubmit,"onUpdate:checked":a[8]||(a[8]=p=>u.formState.isAllowReviewAfterSubmit=p)},null,8,["checked"])]),_:1})]),_:1})]),_:1},8,["model"])])])]),_:1},8,["open"])}const ba=B(me,[["render",xe],["__scopeId","data-v-34f39973"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/SettingTestModal.vue"]]),ze=V({__name:"ChooseFolderModal",emits:["switchToTestTemplate","openFolder"],setup(h,{expose:a,emit:u}){var M;const e=K(),{t:I}=G(),x=Object.values(Y),T=W(()=>x.map(S=>({label:I(`folder_index.select_option.${S}`),value:S!==Y.ALL?S:""}))),i=O([]),r=X({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,folderName:((M=e.query.folderName)==null?void 0:M.toString())||"",shareMode:e.query.shareMode||T.value[0].value,totalCount:0,statusFilter:!1}),_=O(!1),z=async()=>{try{_.value=!0;let S=await te.GetAllByLimit(r);if(S.data.success){let f=S.data.data;i.value=f.items,r.pageNumber=f.pageNumber,r.pageSize=f.pageSize,r.totalCount=f.totalCount}}catch(S){console.log("ERROR: GETALLBYLIMIT folder: "+S)}finally{_.value=!1}};Q(()=>Object.keys(e.query).length,()=>{var S;Object.keys(e.query).length===0&&(r.pageNumber=e.query.pageNumber||1,r.pageSize=e.query.pageSize||10,r.folderName=((S=e.query.folderName)==null?void 0:S.toString())||"",r.shareMode=e.query.shareMode||T.value[0].value,r.statusFilter=!0,z())});const b=(S,f)=>{r.pageNumber=S,r.pageSize=f,r.statusFilter=!0,z()},y=O(!1),q=async()=>{y.value=!0,await z()},w=()=>{y.value=!1};a({openModal:q,closeModal:w});const s=u,p={route:e,t:I,optionKeys:x,folder_share_mode_options:T,folder_data:i,pageParams:r,loading:_,getData:z,onPaginationChange:b,modal_open:y,openModal:q,closeModal:w,emit:s,handleSwitchToTestTemplate:()=>{s("switchToTestTemplate")},handleOpenFolder:S=>{s("openFolder",S)},Input:H};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),qe={class:"modal-container"},Me={class:"modal-title-container"},Ce={class:"content"},Ie={class:"content-item"},Oe={class:"title-container"},Ae={class:"main-title"},Le={class:"content-item-functions"},Ne={class:"content-item-navigators"},Pe={class:"navigator-container"},Fe={class:"filter-container"},Ee={style:{width:"300px",padding:"0px"}},Re={key:0,class:"folder-container"},De={key:1,class:"folder-container"},Qe=["onClick"],Ue={class:"folder-name"},je={key:1,class:"w-100 d-flex justify-content-center"},Ve={class:"pagination-container"};function Ge(h,a,u,e,I,x){const T=d("RouterLink"),i=d("a-col"),r=d("a-row"),_=d("a-select-option"),z=d("a-select"),b=d("a-skeleton"),y=d("a-empty"),q=d("a-pagination"),w=d("a-modal");return c(),E(w,{centered:"",width:"100%","wrap-class-name":"medium-modal large",open:e.modal_open,onCancel:e.closeModal},{footer:n(()=>a[8]||(a[8]=[])),default:n(()=>[t("div",qe,[t("div",Me,[o(r,{class:"w-100 d-flex align-items-center"},{default:n(()=>[o(i,{span:1},{default:n(()=>[o(T,{onClick:e.closeModal,to:{name:""}},{default:n(()=>a[3]||(a[3]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[3]})]),_:1}),o(i,{class:"main-title",span:23},{default:n(()=>[t("span",null,l(h.$t("create_test_modals.select_folder")),1)]),_:1})]),_:1})]),t("div",Ce,[t("div",Ie,[t("div",Oe,[t("div",Ae,[t("span",null,l(h.$t("folder_index.title")),1),a[4]||(a[4]=C()),a[5]||(a[5]=t("br",null,null,-1)),t("span",null,l(h.$t("folder_index.sub_title")),1)])]),t("div",Le,[t("div",Ne,[t("div",Pe,[o(T,{class:"navigator-item navigator-active",to:{name:""}},{default:n(()=>[C(l(h.$t("folder_index.navigators.folder")),1)]),_:1}),o(T,{class:"navigator-item",to:{name:""},onClick:e.handleSwitchToTestTemplate},{default:n(()=>[C(l(h.$t("folder_index.navigators.test_template")),1)]),_:1})])]),t("div",Fe,[o(z,{class:"me-3",value:e.pageParams.shareMode,"onUpdate:value":a[0]||(a[0]=s=>e.pageParams.shareMode=s),style:{width:"200px"},onChange:e.getData},{default:n(()=>[(c(!0),v(N,null,P(e.folder_share_mode_options,s=>(c(),E(_,{value:s.value},{default:n(()=>[C(l(s.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),t("div",Ee,[o(e.Input,{onInput:e.getData,modelValue:e.pageParams.folderName,"onUpdate:modelValue":a[1]||(a[1]=s=>e.pageParams.folderName=s),placeholder:e.t("class_index.other.search_class_placeholder")},{icon:n(()=>a[6]||(a[6]=[t("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),e.loading?(c(),v("div",Re,[o(b,{active:"",loading:e.loading},null,8,["loading"]),o(b,{active:"",loading:e.loading},null,8,["loading"])])):(c(),v("div",De,[e.folder_data.length>0?(c(!0),v(N,{key:0},P(e.folder_data,s=>(c(),v("div",{class:"folder",onClick:m=>e.handleOpenFolder(s)},[a[7]||(a[7]=t("div",{class:"folder-icon"},[t("div",{class:"folder-top"}),t("div",{class:"folder-body"})],-1)),t("div",Ue,l(s.name),1)],8,Qe))),256)):(c(),v("div",je,[o(y,null,{description:n(()=>[t("span",null,l(h.$t("class_index.other.no_data_matches")),1)]),_:1})]))])),t("div",Ve,[o(q,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":a[2]||(a[2]=s=>e.pageParams.pageNumber=s),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(s,m)=>`${m[0]}-${m[1]} of ${s} ${e.t("folder_index.other.items")}`,"show-size-changer":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("folder_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])])]),_:1},8,["open"])}const Ta=B(ze,[["render",Ge],["__scopeId","data-v-e4fbf0b7"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/ChooseFolderModal.vue"]]),Be=V({__name:"ChooseFolderTestTemplateModal",props:{folder:{type:[Object,null],required:!0}},emits:["openTestTemplate","backToFolderModal"],setup(h,{expose:a,emit:u}){var g;const e=K(),{t:I}=G(),x=h,T=O([]),i=X({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,testTemplateName:((g=e.query.testTemplateName)==null?void 0:g.toString())||"",totalCount:0,statusFilter:!1}),r=O(!1),_=async()=>{var p;try{if(!((p=x.folder)!=null&&p.folderTestId))return;r.value=!0;let M=await te.GetAllTestTemplateByLimit(x.folder.folderTestId,i);if(M.data.success){let S=M.data.data;T.value=S.testTemplates.items,i.pageNumber=S.testTemplates.pageNumber,i.pageSize=S.testTemplates.pageSize,i.totalCount=S.testTemplates.totalCount}}catch(M){console.log("ERROR: GETALLBYLIMIT testtemplate: "+M)}finally{r.value=!1}};Q(()=>Object.keys(e.query).length,()=>{var p;Object.keys(e.query).length===0&&(i.pageNumber=e.query.pageNumber||1,i.pageSize=e.query.pageSize||10,i.testTemplateName=((p=e.query.testTemplateName)==null?void 0:p.toString())||"",i.statusFilter=!0,_())});const z=(p,M)=>{i.pageNumber=p,i.pageSize=M,i.statusFilter=!0,_()},b=u,y=O(!1),q=async()=>{y.value=!0,await _()},w=()=>{y.value=!1,b("backToFolderModal")},s=p=>{w(),b("openTestTemplate",p,x.folder)};a({openModal:q,closeModal:w});const m={route:e,t:I,props:x,test_template_data:T,pageParams:i,loading:r,getData:_,onPaginationChange:z,emit:b,modal_open:y,openModal:q,closeModal:w,handleOpenTestTemplate:s,Input:H};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),He={class:"modal-container"},Ye={class:"modal-title-container"},Ke={class:"content"},Xe={class:"content-item"},Je={class:"title-container"},We={class:"main-title"},Ze={class:"content-item-functions"},$e={class:"filter-container"},et={style:{width:"300px",padding:"0px"}},tt={key:0,class:"quiz-item-container"},at={key:1,class:"quiz-item-container"},ot=["onClick"],nt={class:"quiz-item-title"},st={class:"quiz-item-info quiz-info-detail"},lt={class:"quiz-item-questions"},it={class:"quiz-item-created-by"},rt={class:"exam-item-actions"},dt={key:1,class:"w-100 d-flex justify-content-center"},ct={class:"pagination-container"};function mt(h,a,u,e,I,x){const T=d("RouterLink"),i=d("a-col"),r=d("a-row"),_=d("a-skeleton"),z=d("a-button"),b=d("a-empty"),y=d("a-pagination"),q=d("a-modal");return c(),E(q,{centered:"",width:"100%","wrap-class-name":"medium-modal large",open:e.modal_open,onCancel:e.closeModal},{footer:n(()=>a[7]||(a[7]=[])),default:n(()=>{var w;return[t("div",He,[t("div",Ye,[o(r,{class:"w-100 d-flex align-items-center"},{default:n(()=>[o(i,{span:1},{default:n(()=>[o(T,{onClick:e.closeModal,to:{name:""}},{default:n(()=>a[2]||(a[2]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[2]})]),_:1}),o(i,{class:"main-title",span:23},{default:n(()=>[t("span",null,l(h.$t("create_test_modals.select_template")),1)]),_:1})]),_:1})]),t("div",Ke,[t("div",Xe,[t("div",Je,[t("div",We,[t("span",null,l(h.$t("create_test_modals.folder",{name:(w=u.folder)==null?void 0:w.name})),1),a[3]||(a[3]=t("br",null,null,-1)),t("span",null,l(h.$t("folder_index.sub_title")),1)])]),t("div",Ze,[t("div",$e,[t("div",et,[o(e.Input,{onInput:e.getData,modelValue:e.pageParams.testTemplateName,"onUpdate:modelValue":a[0]||(a[0]=s=>e.pageParams.testTemplateName=s),placeholder:e.t("class_index.other.search_class_placeholder")},{icon:n(()=>a[4]||(a[4]=[t("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),e.loading?(c(),v("div",tt,[o(_,{active:"",loading:e.loading},null,8,["loading"]),o(_,{active:"",loading:e.loading},null,8,["loading"])])):(c(),v("div",at,[e.test_template_data.length>0?(c(!0),v(N,{key:0},P(e.test_template_data,s=>(c(),v("div",{class:"quiz-item",onClick:m=>e.handleOpenTestTemplate(s.testTemplateId)},[a[6]||(a[6]=t("i",{class:"bx bx-book-open quiz-item-icon"},null,-1)),t("div",null,[t("div",nt,l(s.name),1),t("div",st,[t("div",lt,[a[5]||(a[5]=t("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),C(" "+l(s.numberOfQuestion)+" "+l(h.$t("dashboards.list_items.quiz.questions")),1)]),t("div",it,l(h.$t("class_question_set.other.created_by"))+" "+l(s.createBy),1)])]),t("div",rt,[o(z,{type:"primary",class:"me-3 main-color-btn",onClick:m=>e.handleOpenTestTemplate(s.testTemplateId)},{default:n(()=>[C(l(h.$t("class_question_set.buttons.view")),1)]),_:2},1032,["onClick"])])],8,ot))),256)):(c(),v("div",dt,[o(b,null,{description:n(()=>[t("span",null,l(h.$t("class_index.other.no_data_matches")),1)]),_:1})]))])),t("div",ct,[o(y,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":a[1]||(a[1]=s=>e.pageParams.pageNumber=s),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(s,m)=>`${m[0]}-${m[1]} of ${s} ${e.t("folder_index.other.items")}`,"show-size-changer":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("folder_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])])]}),_:1},8,["open"])}const ya=B(Be,[["render",mt],["__scopeId","data-v-d59ae6d9"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/ChooseFolderTestTemplateModal.vue"]]),_t=V({__name:"ChooseTestTemplateModal",emits:["switchToFolder","openTestTemplate"],setup(h,{expose:a,emit:u}){var S;const e=K(),I=le(),{t:x}=G(),T=Object.values(Y),i=W(()=>T.map(f=>({label:x(`folder_index.select_option.${f}`),value:f!==Y.ALL?f:""}))),r=O([]),_=X({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,name:((S=e.query.name)==null?void 0:S.toString())||"",shareMode:e.query.shareMode||i.value[0].value,totalCount:0,statusFilter:!1}),z=O(!1),b=async()=>{try{z.value=!0;let f=await ae.GetAllByLimit(_);if(f.data.success){let L=f.data.data;r.value=L.items,_.pageNumber=L.pageNumber,_.pageSize=L.pageSize,_.totalCount=L.totalCount}}catch(f){console.log("ERROR: GETALLBYLIMIT testtemplate: "+f)}finally{z.value=!1}};Q(()=>Object.keys(e.query).length,()=>{var f;Object.keys(e.query).length===0&&(_.pageNumber=e.query.pageNumber||1,_.pageSize=e.query.pageSize||10,_.name=((f=e.query.name)==null?void 0:f.toString())||"",_.shareMode=e.query.shareMode||i.value[0].value,_.statusFilter=!0,b())});const y=(f,L)=>{_.pageNumber=f,_.pageSize=L,_.statusFilter=!0,b()},q=O(!1),w=async()=>{q.value=!0,await b()},s=()=>{q.value=!1};a({openModal:w,closeModal:s});const m=u,M={route:e,router:I,t:x,optionKeys:T,share_mode_options:i,test_template_data:r,pageParams:_,loading:z,getData:b,onPaginationChange:y,modal_open:q,openModal:w,closeModal:s,emit:m,handleSwitchToFolder:()=>{m("switchToFolder")},handleOpenTestTemplate:f=>{m("openTestTemplate",f,null)},Input:H};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}}),ut={class:"modal-container"},pt={class:"modal-title-container"},ft={class:"content"},gt={class:"content-item"},ht={class:"title-container"},vt={class:"main-title"},bt={class:"content-item-functions"},Tt={class:"content-item-navigators"},yt={class:"navigator-container"},St={class:"filter-container"},wt={style:{width:"300px",padding:"0px"}},kt={key:0,class:"quiz-item-container"},xt={key:1,class:"quiz-item-container"},zt={class:"quiz-item"},qt={class:"quiz-item-title"},Mt={class:"quiz-item-info quiz-info-detail"},Ct={class:"quiz-item-questions"},It={class:"quiz-item-created-by"},Ot={class:"exam-item-actions"},At={key:1,class:"w-100 d-flex justify-content-center"},Lt={class:"pagination-container"};function Nt(h,a,u,e,I,x){const T=d("RouterLink"),i=d("a-col"),r=d("a-row"),_=d("a-select-option"),z=d("a-select"),b=d("a-skeleton"),y=d("a-button"),q=d("a-empty"),w=d("a-pagination"),s=d("a-modal");return c(),E(s,{centered:"",width:"100%","wrap-class-name":"medium-modal large",open:e.modal_open,onCancel:e.closeModal},{footer:n(()=>a[10]||(a[10]=[])),default:n(()=>[t("div",ut,[t("div",pt,[o(r,{class:"w-100 d-flex align-items-center"},{default:n(()=>[o(i,{span:1},{default:n(()=>[o(T,{onClick:e.closeModal,to:{name:""}},{default:n(()=>a[3]||(a[3]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[3]})]),_:1}),o(i,{class:"main-title",span:23},{default:n(()=>[t("span",null,l(h.$t("create_test_modals.select_template")),1)]),_:1})]),_:1})]),t("div",ft,[t("div",gt,[t("div",ht,[t("div",vt,[t("span",null,l(h.$t("folder_index.title")),1),a[4]||(a[4]=C()),a[5]||(a[5]=t("br",null,null,-1)),t("span",null,l(h.$t("folder_index.sub_title")),1)])]),t("div",bt,[t("div",Tt,[t("div",yt,[o(T,{class:"navigator-item",to:{name:""},onClick:e.handleSwitchToFolder},{default:n(()=>[C(l(h.$t("folder_index.navigators.folder")),1)]),_:1}),o(T,{class:"navigator-item navigator-active",to:{name:""}},{default:n(()=>[C(l(h.$t("folder_index.navigators.test_template")),1)]),_:1})])]),t("div",St,[o(z,{class:"me-3",value:e.pageParams.shareMode,"onUpdate:value":a[0]||(a[0]=m=>e.pageParams.shareMode=m),style:{width:"200px"},onChange:e.getData},{default:n(()=>[(c(!0),v(N,null,P(e.share_mode_options,m=>(c(),E(_,{value:m.value},{default:n(()=>[C(l(m.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),t("div",wt,[o(e.Input,{onInput:e.getData,modelValue:e.pageParams.name,"onUpdate:modelValue":a[1]||(a[1]=m=>e.pageParams.name=m),placeholder:e.t("class_index.other.search_class_placeholder")},{icon:n(()=>a[6]||(a[6]=[t("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),e.loading?(c(),v("div",kt,[o(b,{active:"",loading:e.loading},null,8,["loading"]),o(b,{active:"",loading:e.loading},null,8,["loading"])])):(c(),v("div",xt,[e.test_template_data.length>0?(c(!0),v(N,{key:0},P(e.test_template_data,m=>(c(),v("div",zt,[a[8]||(a[8]=t("i",{class:"bx bx-book-open quiz-item-icon"},null,-1)),t("div",null,[t("div",qt,l(m.name),1),t("div",Mt,[t("div",Ct,[a[7]||(a[7]=t("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),C(" "+l(m.numberOfQuestion)+" "+l(h.$t("dashboards.list_items.quiz.questions")),1)]),t("div",It,l(h.$t("class_question_set.other.created_by"))+" "+l(m.createBy),1)])]),t("div",Ot,[o(y,{type:"primary",class:"me-3 main-color-btn",onClick:g=>e.handleOpenTestTemplate(m.testTemplateId)},{default:n(()=>[C(l(h.$t("class_question_set.buttons.view")),1)]),_:2},1032,["onClick"])])]))),256)):(c(),v("div",At,[o(q,null,{description:n(()=>a[9]||(a[9]=[t("span",null," No data matches. ",-1)])),_:1})]))])),t("div",Lt,[o(w,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":a[2]||(a[2]=m=>e.pageParams.pageNumber=m),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(m,g)=>`${g[0]}-${g[1]} of ${m} ${e.t("folder_index.other.items")}`,"show-size-changer":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("folder_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])])]),_:1},8,["open"])}const Sa=B(_t,[["render",Nt],["__scopeId","data-v-a6cf07df"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/ChooseTestTemplateModal.vue"]]),Pt=V({__name:"ChooseQuestionModal",props:{testTemplateId:{type:String,required:!0},folder:{type:[Object,null],required:!0}},emits:["import","backToFolderTestTemplateModal","backToTestTemplateModal"],setup(h,{expose:a,emit:u}){const e=K(),{t:I}=G(),x=h,T=O(),i=O([]),r=O(!1),_=async()=>{try{if(r.value=!0,!x.testTemplateId)return;let k=await ae.GetById(x.testTemplateId||"");if(k.data.success){let A=k.data.data;T.value=A,i.value=A.questions}}catch(k){console.log("ERROR: GETBYID testtemplate: "+k)}finally{r.value=!1}},z={HTML:"HTML",PLAIN_TEXT:"PlainText"},b=Object.values(ee).map(k=>({label:I(`create_QS.type.${k}`),value:k})),y=O([...b.map(k=>k.value)]),q=O(""),w=()=>{var F,j;s.checkedList=[];let k=(F=T.value)==null?void 0:F.questions;const A=q.value.trim().toLowerCase();k=(j=T.value)==null?void 0:j.questions.filter(Z=>{const oe=!A||Z.questionText.toLowerCase().includes(A),ne=!y.value.length||y.value.includes(Z.type);return oe&&ne}),i.value=k},s=X({checkAll:!1,indeterminate:!1,checkedList:[]}),m=k=>{Object.assign(s,{checkedList:k.target.checked?i.value:[],indeterminate:!1})};Q(()=>s.checkedList,k=>{var A;s.indeterminate=!!k.length&&k.length<i.value.length,s.checkAll=k.length===((A=i.value)==null?void 0:A.length)});const g=(k,A)=>{$(A).toggleClass("bx-chevron-up bx-chevron-down");const j=$(`#question-item-answer-${k}`);j&&$(j).slideToggle()},p=u,M=O(!1),S=async()=>{s.checkAll=!1,s.checkedList=[],s.indeterminate=!1,M.value=!0,await _()},f=()=>{M.value=!1,x.folder!==null?p("backToFolderTestTemplateModal",x.folder):p("backToTestTemplateModal")};a({openModal:S,closeModal:f});const U={route:e,t:I,props:x,test_template_data:T,question_data:i,loading:r,getData:_,QUESTION_FORMAT:z,questionTypeOptions:b,selectedQuestionTypes:y,searchValue:q,onFilter:w,importModalState:s,onCheckAll:m,toggleDisplayAnswer:g,emit:p,modal_open:M,openModal:S,closeModal:f,handleModalImport:()=>{ie.confirm({title:"Are your sure? ",content:"Import: "+s.checkedList.length+"?",okText:"Confirm",onOk:()=>{var A;const k=(A=i.value)==null?void 0:A.filter(F=>s.checkedList.includes(F));p("import",k),M.value=!1}})},get QUESTION_TYPE(){return ee},Input:H};return Object.defineProperty(U,"__isScriptSetup",{enumerable:!1,value:!0}),U}}),Ft={class:"modal-container"},Et={class:"modal-title-container"},Rt={class:"modal-content-item"},Dt={class:"content-item-section preview-section"},Qt={class:"section-content"},Ut={key:0,class:"section-content-header"},jt={class:"d-flex flex-fill align-items-center justify-content-end"},Vt={style:{width:"250px"}},Gt={key:0,class:"preview-question-container"},Bt={key:1,class:"preview-question-container"},Ht={class:"preview-question-item"},Yt={class:"question-item-content"},Kt=["innerHTML"],Xt={key:1,class:"question-text"},Jt=["id"],Wt={key:0,class:"multiple-choice-answer"},Zt={key:0,class:"text-success"},$t={class:"pair-answer"},ea={class:"pair-answer-item"},ta={class:"pair-answer-item"},aa={key:2,class:"ordering-answer"},oa={class:"ordering-answer-item"},na={class:"ordering-answer-item"},sa={class:"ordering-answer-item"},la={key:3,class:"short-text-answer"},ia={class:"question-item-toogle-btn"},ra=["onClick"],da={key:1,class:"w-100 d-flex justify-content-center"};function ca(h,a,u,e,I,x){const T=d("RouterLink"),i=d("a-col"),r=d("a-row"),_=d("a-checkbox"),z=d("a-select-option"),b=d("a-select"),y=d("a-skeleton"),q=d("a-empty"),w=d("a-checkbox-group"),s=d("a-button"),m=d("a-modal");return c(),E(m,{centered:"",width:"100%","wrap-class-name":"medium-modal large",open:e.modal_open,onCancel:e.closeModal},{footer:n(()=>[o(s,{class:"main-color-btn",size:"large",key:"submit",type:"primary",onClick:e.handleModalImport},{default:n(()=>[C(l(h.$t("import_qs_modal.buttons.import")),1)]),_:1})]),default:n(()=>[t("div",Ft,[t("div",Et,[o(r,{class:"w-100 d-flex align-items-center"},{default:n(()=>[o(i,{span:1},{default:n(()=>[o(T,{onClick:e.closeModal,to:{name:""}},{default:n(()=>a[4]||(a[4]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[4]})]),_:1}),o(i,{class:"main-title",span:22},{default:n(()=>[t("span",null,l(h.$t("create_test_modals.choose_question")),1)]),_:1})]),_:1})]),t("div",Rt,[t("div",Dt,[t("div",Qt,[e.question_data.length>0?(c(),v("div",Ut,[o(_,{class:re(["header-item",e.importModalState.checkAll?"check-all":""]),onClick:e.onCheckAll,checked:e.importModalState.checkAll,"onUpdate:checked":a[0]||(a[0]=g=>e.importModalState.checkAll=g),indeterminate:e.importModalState.indeterminate},{default:n(()=>[C(l(h.$t("share_modal.buttons.check_all",{number:e.importModalState.checkedList.length})),1)]),_:1},8,["class","checked","indeterminate"]),D(` <div class="header-item">
                                Selected:
                                {{ importModalState.checkedList.length }}
                            </div> `),t("div",jt,[o(b,{size:"large",class:"me-3",mode:"multiple",value:e.selectedQuestionTypes,"onUpdate:value":a[1]||(a[1]=g=>e.selectedQuestionTypes=g),placeholder:e.t("generate_qs_modal.form.question_types"),style:{width:"fit-content","min-width":"300px"},onChange:e.onFilter},{default:n(()=>[(c(!0),v(N,null,P(e.questionTypeOptions,g=>(c(),E(z,{value:g.value},{default:n(()=>[C(l(g.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value","placeholder"]),t("div",Vt,[o(e.Input,{onInput:e.onFilter,modelValue:e.searchValue,"onUpdate:modelValue":a[2]||(a[2]=g=>e.searchValue=g),placeholder:e.t("question_sets_index.search_placeholder")},{icon:n(()=>a[5]||(a[5]=[t("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])])):D("v-if",!0),o(w,{value:e.importModalState.checkedList,"onUpdate:value":a[3]||(a[3]=g=>e.importModalState.checkedList=g)},{default:n(()=>[e.loading?(c(),v("div",Gt,[o(y,{active:"",loading:e.loading},null,8,["loading"]),o(y,{active:"",loading:e.loading},null,8,["loading"]),o(y,{active:"",loading:e.loading},null,8,["loading"])])):(c(),v("div",Bt,[e.question_data.length>0?(c(!0),v(N,{key:0},P(e.question_data,(g,p)=>{var M,S;return c(),v("div",Ht,[o(_,{value:g},null,8,["value"]),t("div",Yt,[g.textFormat===e.QUESTION_FORMAT.HTML?(c(),v("div",{key:0,class:"question-html",innerHTML:g.questionText},null,8,Kt)):(c(),v("div",Xt,l(g.questionText),1)),t("div",{class:"question-item-answer",id:`question-item-answer-${p}`},[g.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(c(),v("div",Wt,[t("ul",null,[(c(!0),v(N,null,P(g.questionData.multipleChoice,f=>(c(),v("li",null,[C(l(f.text)+" ",1),f.isAnswer?(c(),v("span",Zt," ("+l(f.isAnswer)+") ",1)):D("v-if",!0)]))),256))])])):D("v-if",!0),g.type===e.QUESTION_TYPE.MATCHING?(c(!0),v(N,{key:1},P((M=g.questionData.matching)==null?void 0:M.matches,f=>{var L,U,k,A;return c(),v("div",$t,[t("span",ea,l((U=(L=g.questionData.matching)==null?void 0:L.leftItems.find(F=>F.id===f.leftId))==null?void 0:U.text),1),a[6]||(a[6]=t("i",{class:"bx bx-right-arrow-alt"},null,-1)),t("span",ta,l((A=(k=g.questionData.matching)==null?void 0:k.rightItems.find(F=>F.id===f.rightId))==null?void 0:A.text),1)])}),256)):D("v-if",!0),g.type===e.QUESTION_TYPE.ORDERING?(c(),v("div",aa,[t("div",oa,[(c(!0),v(N,null,P(g.questionData.ordering,f=>(c(),v("div",null,l(f.text),1))),256))]),a[7]||(a[7]=t("i",{class:"bx bx-right-arrow-alt"},null,-1)),t("div",na,[(c(!0),v(N,null,P((S=g.questionData.ordering)==null?void 0:S.sort((f,L)=>f.correctOrder-L.correctOrder),(f,L)=>(c(),v("div",sa,[t("span",null,"#"+l(f.correctOrder),1),C(" - "+l(f.text),1)]))),256))])])):D("v-if",!0),g.type===e.QUESTION_TYPE.SHORT_TEXT?(c(),v("div",la,l(g.questionData.shortText),1)):D("v-if",!0)],8,Jt)]),t("div",ia,[t("i",{class:"bx bx-chevron-up",onClick:f=>e.toggleDisplayAnswer(p,f.currentTarget)},null,8,ra)])])}),256)):(c(),v("div",da,[o(q,null,{description:n(()=>[t("span",null,l(h.$t("class_index.other.no_data_matches")),1)]),_:1})]))]))]),_:1},8,["value"])])])])])]),_:1},8,["open"])}const wa=B(Pt,[["render",ca],["__scopeId","data-v-3653897f"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/ChooseQuestionModal.vue"]]);export{wa as C,ba as S,Sa as a,ya as b,Ta as c};
