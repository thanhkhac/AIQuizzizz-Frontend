import{d as j,q as E,l as O,g as V,u as G,H,i as S,j as P,J as Q,s as J,k as R,_ as K,r as i,a as y,o as p,b as o,c as n,f as g,t as d,w as s,F as k,B as A,C as Y}from"./index-Dd8-myui.js";import{A as D}from"./ApiFolder-MKgG6ozZ.js";import{F as T}from"./folderShareMode-BudLQ2R2.js";import{I as W}from"./Input-BtmZP41X.js";const X=j({__name:"index",emits:["updateSidebar"],setup(m,{expose:a,emit:q}){var M;a();const e=E(),v=O(),I=V(),{t:b}=G(),_=q,F=Object.values(T),h=H(()=>F.map(l=>({label:b(`folder_index.select_option.${l}`),value:l!==T.ALL?l:""}))),N=S([]),t=P({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,folderName:((M=e.query.folderName)==null?void 0:M.toString())||"",shareMode:e.query.shareMode||h.value[0].value,totalCount:0,statusFilter:!1}),c=async()=>{try{let l=await D.GetAllByLimit(t);if(l.data.success){let u=l.data.data;N.value=u.items,t.pageNumber=u.pageNumber,t.pageSize=u.pageSize,t.totalCount=u.totalCount,t.statusFilter&&(t.pageNumber>u.totalPages&&t.totalCount>0?(t.pageNumber=1,v.push({name:"User_Folder",query:{pageNumber:1,pageSize:t.pageSize,folderName:t.folderName,shareMode:t.shareMode}})):v.push({name:"User_Folder",query:{pageNumber:t.pageNumber,pageSize:t.pageSize,folderName:t.folderName,shareMode:t.shareMode}}),t.statusFilter=!t.statusFilter)}}catch(l){console.log("ERROR: GETALLBYLIMIT folder: "+l)}};Q(()=>{var l;Object.keys(e.query).length===0&&(t.pageNumber=e.query.pageNumber||1,t.pageSize=e.query.pageSize||10,t.folderName=((l=e.query.folderName)==null?void 0:l.toString())||"",t.shareMode=e.query.shareMode||h.value[0].value,t.statusFilter=!0,c())});const C=(l,u)=>{t.pageNumber=l,t.pageSize=u,t.statusFilter=!0,c()},z={folderName:[{required:!0,message:"This field is required.",trigger:"change"},{max:100,message:"Limit 100.",trigger:"change"}]},x=S(!1),r=S(),f=P({folderName:""}),w=S(!1),U=async()=>{w.value=!0;try{if(await r.value.validate(),!(await D.Create(f)).data.success){R.error("Create folder failed");return}x.value=!1,R.success("Create folder successfully."),await c()}catch(l){console.log(l)}finally{w.value=!1}},B=l=>{v.push({name:"User_Folder_Detail",params:{id:l}})};J(async()=>{_("updateSidebar","folder"),await c()});const L={route:e,router:v,authStore:I,t:b,emit:_,optionKeys:F,folder_share_mode_options:h,folder_data:N,pageParams:t,getData:c,onPaginationChange:C,rules:z,modal_create_open:x,createFolderFormRef:r,createFolderFormState:f,isCreateLoading:w,onCreateFolder:U,onRedirectToFolderDetail:B,Input:W};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}}),Z={class:"page-container"},$={class:"title-container"},ee={class:"main-title"},ae={class:"title-button-container"},te={class:"content"},oe={class:"content-item"},re={class:"content-item-functions"},le={class:"content-item-navigators"},ne={class:"navigator-container"},se={class:"filter-container"},ie={style:{width:"300px",padding:"0px"}},de={class:"folder-container"},ce=["onClick"],me={class:"folder-name"},ue={key:1,class:"w-100 m-2 d-flex justify-content-center"},_e={class:"pagination-container"},fe={class:"modal-container"},pe={class:"modal-title-container"};function ge(m,a,q,e,v,I){const b=i("a-button"),_=i("RouterLink"),F=i("a-select-option"),h=i("a-select"),N=i("a-empty"),t=i("a-pagination"),c=i("a-col"),C=i("a-row"),z=i("a-form"),x=i("a-modal");return p(),y(k,null,[o("div",Z,[o("div",$,[o("div",ee,[o("span",null,d(m.$t("folder_index.title")),1),a[7]||(a[7]=g()),a[8]||(a[8]=o("br",null,null,-1)),o("span",null,d(m.$t("folder_index.sub_title")),1)]),o("div",ae,[n(b,{type:"primary",class:"ms-3 main-color-btn",size:"large",onClick:a[0]||(a[0]=r=>e.modal_create_open=!0)},{default:s(()=>[g(d(m.$t("folder_index.buttons.create_folder"))+" ",1),a[9]||(a[9]=o("i",{class:"bx bx-plus"},null,-1))]),_:1,__:[9]})])]),o("div",te,[o("div",oe,[o("div",re,[o("div",le,[o("div",ne,[n(_,{class:"navigator-item navigator-active",to:{name:""}},{default:s(()=>[g(d(m.$t("folder_index.navigators.folder")),1)]),_:1}),n(_,{class:"navigator-item",to:{name:"User_TestTemplate"}},{default:s(()=>[g(d(m.$t("folder_index.navigators.test_template")),1)]),_:1})])]),o("div",se,[n(h,{class:"me-3",value:e.pageParams.shareMode,"onUpdate:value":a[1]||(a[1]=r=>e.pageParams.shareMode=r),style:{width:"200px"},onChange:e.getData},{default:s(()=>[(p(!0),y(k,null,A(e.folder_share_mode_options,r=>(p(),Y(F,{value:r.value},{default:s(()=>[g(d(r.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),o("div",ie,[n(e.Input,{onInput:e.getData,modelValue:e.pageParams.folderName,"onUpdate:modelValue":a[2]||(a[2]=r=>e.pageParams.folderName=r),placeholder:e.t("class_index.other.search_class_placeholder")},{icon:s(()=>a[10]||(a[10]=[o("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),o("div",de,[e.folder_data.length>0?(p(!0),y(k,{key:0},A(e.folder_data,r=>(p(),y("div",{class:"folder",onClick:f=>e.onRedirectToFolderDetail(r.folderTestId)},[a[11]||(a[11]=o("div",{class:"folder-icon"},[o("div",{class:"folder-top"}),o("div",{class:"folder-body"})],-1)),o("div",me,d(r.name),1)],8,ce))),256)):(p(),y("div",ue,[n(N,null,{description:s(()=>[o("span",null,d(m.$t("folder_index.other.no_data_matches")),1)]),_:1})]))]),o("div",_e,[n(t,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":a[3]||(a[3]=r=>e.pageParams.pageNumber=r),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(r,f)=>`${f[0]}-${f[1]} of ${r} ${e.t("folder_index.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("folder_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])]),n(x,{centered:"","wrap-class-name":"medium-modal",open:e.modal_create_open,onCancel:a[6]||(a[6]=r=>e.modal_create_open=!1)},{footer:s(()=>[n(b,{loading:e.isCreateLoading,class:"main-color-btn",key:"submit",type:"primary",onClick:e.onCreateFolder},{default:s(()=>[g(d(e.t("folder_index.buttons.create")),1)]),_:1},8,["loading"])]),default:s(()=>[o("div",fe,[o("div",pe,[n(C,{class:"w-100 d-flex align-items-center"},{default:s(()=>[n(c,{span:4},{default:s(()=>[n(_,{onClick:a[4]||(a[4]=r=>e.modal_create_open=!1),to:{name:""}},{default:s(()=>a[12]||(a[12]=[o("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[12]})]),_:1}),n(c,{class:"main-title",span:20},{default:s(()=>[o("span",null,d(e.t("folder_index.modal.create_title")),1)]),_:1})]),_:1})]),n(z,{ref:"createFolderFormRef",layout:"vertical",rules:e.rules,model:e.createFolderFormState},{default:s(()=>[n(e.Input,{label:e.t("folder_index.modal.create_folder_name_label"),name:"folderName",value:e.createFolderFormState.folderName,"onUpdate:value":a[5]||(a[5]=r=>e.createFolderFormState.folderName=r),placeholder:e.t("folder_index.modal.create_folder_name_placeholder"),"is-required":!0,"max-length":100},null,8,["label","value","placeholder"])]),_:1},8,["model"])])]),_:1},8,["open"])],64)}const Fe=K(X,[["render",ge],["__scopeId","data-v-e2bbfdc4"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/folder/index.vue"]]);export{Fe as default};
