import{d as D,q as Q,l as R,u as $,i as q,H as M,j as U,K as j,s as B,G as A,_ as V,r as c,a as x,o as b,b as e,c as r,w as m,g as d,t as i,F as L,B as P,C as Y}from"./index-CBe-xg3B.js";import{A as E}from"./ApiClass-BnupEivQ.js";import{C as F}from"./classExamStatus-JROc68nE.js";import{I as Z}from"./Input-CA0GHANl.js";const G=D({__name:"exam",emits:["updateSidebar"],setup(u,{expose:t,emit:I}){var k;t();const a=Q(),v=R(),{t:N}=$(),_=I,p=q(a.params.id||""),C=q({classId:"",name:"",topic:""}),h=Object.values(F),y=M(()=>h.map(s=>({label:N(`class_exam.select_option.${s}`),value:s!==F.ALL?s:""}))),n=U({pageNumber:a.query.pageNumber||1,pageSize:a.query.pageSize||10,testName:((k=a.query.testName)==null?void 0:k.toString())||"",status:a.query.status||y.value[0].value,totalCount:0,statusFilter:!1}),g=q([]),w=[{testId:"123123123",name:"Assignment 1",numberOfQuestions:25,timeLimit:30,relativeTime:800,numberOfCompletion:30,status:"active",date:"2025-07-13T20:00:00.000Z"},{testId:"234234234",name:"Quiz 1",numberOfQuestions:10,timeLimit:15,relativeTime:240,numberOfCompletion:10,status:"upcoming",date:"2025-07-07T20:00:00.000Z"},{testId:"345345345",name:"Midterm Exam",numberOfQuestions:40,timeLimit:60,relativeTime:26,numberOfCompletion:25,status:"completed",date:"2025-07-16T10:00:00.000Z"},{testId:"456456456",name:"Final Exam",numberOfQuestions:50,timeLimit:90,relativeTime:24,numberOfCompletion:0,status:"upcoming",date:"2025-07-16T12:00:00.000Z"},{testId:"567567567",name:"Assignment 2",numberOfQuestions:20,timeLimit:25,relativeTime:500,numberOfCompletion:15,status:"active",date:"2025-06-26T04:00:00.000Z"},{testId:"678678678",name:"Pop Quiz",numberOfQuestions:5,timeLimit:50,relativeTime:9e3,numberOfCompletion:5,status:"completed",date:"2024-12-29T12:00:00.000Z"}],z=async()=>{try{p.value||v.push({name:"404"});let s=await E.GetById(p.value.toString());s.data.success||v.push({name:"404"}),C.value=s.data.data}catch(s){console.log("ERROR: GETBYID class: "+s)}},f=async()=>{try{let s=await E.GetAllExamByLimit(p.value.toString(),n);if(s.data.success){let l=s.data.data;g.value=l.items,n.pageNumber=l.pageNumber,n.pageSize=l.pageSize,n.totalCount=l.totalCount,n.statusFilter&&(n.pageNumber>l.totalPages&&n.totalCount>0?(n.pageNumber=1,v.push({name:"User_Class_Exam",params:{id:p.value},query:{pageNumber:1,pageSize:n.pageSize,testName:n.testName,status:n.status}})):v.push({name:"User_Class_Exam",params:{id:p.value},query:{pageNumber:n.pageNumber,pageSize:n.pageSize,testName:n.testName,status:n.status}}),n.statusFilter=!n.statusFilter)}}catch(s){console.log("ERROR: GETALLEXAMBYLIMIT class exam: "+s)}};j(()=>{var s;Object.keys(a.query).length===0&&(n.pageNumber=a.query.pageNumber||1,n.pageSize=a.query.pageSize||10,n.testName=((s=a.query.testName)==null?void 0:s.toString())||"",n.status=a.query.status||y.value[0].value,n.statusFilter=!0,f())});const T=(s,l)=>{n.pageNumber=s,n.pageSize=l,n.statusFilter=!0,f()},o=s=>{if(s<24)return`${s} hour${s!==1?"s":""} ago`;if(s<24*7){const l=Math.floor(s/24);return`${l} day${l!==1?"s":""} ago`}else if(s<24*30){const l=Math.floor(s/168);return`${l} week${l!==1?"s":""} ago`}else if(s<24*365){const l=Math.floor(s/720);return`${l} month${l!==1?"s":""} ago`}else{const l=Math.floor(s/8760);return`${l} year${l!==1?"s":""} ago`}},S=s=>{switch(s.toLowerCase()){case"completed":return"#3b82f6";case"active":return"#22C55E";case"upcoming":return"#f59e0b"}};B(async()=>{_("updateSidebar","class"),await z(),await f()});const O={route:a,router:v,t:N,emit:_,classId:p,classData:C,optionKeys:h,exam_status_options:y,pageParams:n,exam_data:g,exam_data_sample:w,getClassData:z,getData:f,onPaginationChange:T,getFormattedRelativeTime:o,getTagColor:S,get dayjs(){return A},Input:Z};return Object.defineProperty(O,"__isScriptSetup",{enumerable:!1,value:!0}),O}}),H={class:"page-container"},K={class:"title-container"},X={class:"breadcrumb-container"},J={class:"title-breadcrumb-item"},W={class:"title-breadcrumb-item"},ee={class:"breadcrumb-item-topic"},te={class:"content"},ae={class:"content-item"},se={class:"content-item-title"},ne={class:"content-item-functions"},ie={class:"content-item-navigators"},oe={class:"navigator-container"},le={style:{width:"300px",padding:"0px"}},re={class:"pagination-container"},me={key:0,class:"exam-item-container"},ue={class:"exam-item"},de={class:"exam-item-title"},ce={class:"exam-item-info exam-item-date"},_e={class:"exam-item-info exam-info-detail"},pe={class:"exam-item-questions"},ge={class:"exam-item-time"},be={class:"exam-item-assigned completion"},ve={class:"exam-item-assigned"},fe={class:"exam-item-actions"},xe={class:"d-flex align-items-center"},ye={key:1,class:"w-100 d-flex justify-content-center"};function Ce(u,t,I,a,v,N){const _=c("RouterLink"),p=c("a-button"),C=c("a-select-option"),h=c("a-select"),y=c("a-pagination"),n=c("a-tag"),g=c("a-menu-item"),w=c("a-menu-divider"),z=c("a-menu"),f=c("a-dropdown"),T=c("a-empty");return b(),x("div",H,[e("div",K,[e("div",X,[e("ul",null,[e("li",J,[r(_,{to:{name:"User_Class"}},{default:m(()=>[e("span",null,i(u.$t("class_index.title")),1),t[3]||(t[3]=d()),t[4]||(t[4]=e("br",null,null,-1))]),_:1,__:[3,4]}),t[5]||(t[5]=e("i",{class:"bx bx-chevron-right"},null,-1))]),e("li",W,[r(_,{to:{name:""},class:"breadcrumb-item-class"},{default:m(()=>[e("span",null,i(a.classData.name),1),e("span",ee,i(a.classData.topic),1)]),_:1})])])])]),e("div",te,[e("div",ae,[e("div",se,[e("div",null,[e("span",null,i(u.$t("class_index.title")),1),e("span",null,i(u.$t("class_exam.sub_title")),1)]),r(p,{class:"main-color-btn",type:"primary",size:"large"},{default:m(()=>[t[6]||(t[6]=e("i",{class:"me-2 bx bx-list-plus"},null,-1)),d(" "+i(u.$t("class_exam.buttons.assign_test")),1)]),_:1,__:[6]})]),e("div",ne,[e("div",ie,[e("div",oe,[r(_,{class:"navigator-item navigator-active",to:{name:""}},{default:m(()=>[d(i(u.$t("class_index.navigators.exam")),1)]),_:1}),r(_,{class:"navigator-item",to:{name:"User_Class_Quiz"}},{default:m(()=>[d(i(u.$t("class_index.navigators.quiz")),1)]),_:1}),r(_,{class:"navigator-item",to:{name:"User_Class_Student"}},{default:m(()=>[d(i(u.$t("class_index.navigators.member")),1)]),_:1})])]),r(h,{value:a.pageParams.status,"onUpdate:value":t[0]||(t[0]=o=>a.pageParams.status=o),style:{width:"200px"},onChange:a.getData},{default:m(()=>[(b(!0),x(L,null,P(a.exam_status_options,o=>(b(),Y(C,{value:o.value},{default:m(()=>[d(i(o.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),e("div",le,[r(a.Input,{onInput:a.getData,modelValue:a.pageParams.testName,"onUpdate:modelValue":t[1]||(t[1]=o=>a.pageParams.testName=o),placeholder:a.t("class_exam.other.search_placeholder")},{icon:m(()=>t[7]||(t[7]=[e("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])]),e("div",re,[r(y,{onChange:a.onPaginationChange,current:a.pageParams.pageNumber,"onUpdate:current":t[2]||(t[2]=o=>a.pageParams.pageNumber=o),total:a.pageParams.totalCount,pageSize:a.pageParams.pageSize,"show-total":(o,S)=>`${S[0]}-${S[1]} of ${o} ${a.t("class_exam.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:a.t("class_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])]),a.exam_data.length>0?(b(),x("div",me,[(b(!0),x(L,null,P(a.exam_data,o=>(b(),x("div",ue,[t[16]||(t[16]=e("i",{class:"bx bx-book-open exam-item-icon"},null,-1)),e("div",null,[e("div",de,[d(i(o.name)+" ",1),r(n,{color:a.getTagColor(o.status)},{default:m(()=>[d(i(o.status),1)]),_:2},1032,["color"])]),e("div",ce,[e("div",null,[t[8]||(t[8]=e("i",{class:"bx bx-calendar"},null,-1)),d(" "+i(a.dayjs(o.date).format("DD/MM/YYYY HH:mm A")),1)])]),e("div",_e,[e("div",pe,[t[9]||(t[9]=e("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),d(" "+i(o.numberOfQuestions)+" "+i(u.$t("dashboards.list_items.quiz.questions")),1)]),e("div",ge,[t[10]||(t[10]=e("i",{class:"bx bx-time-five"},null,-1)),d(" "+i(o.timeLimit)+" "+i(u.$t("class_exam.other.min")),1)]),e("span",be,i(o.numberOfCompletion)+" "+i(u.$t("class_exam.other.completions")),1),e("span",ve,i(u.$t("class_exam.other.assigned"))+" "+i(a.getFormattedRelativeTime(o.relativeTime)),1)])]),e("div",fe,[r(f,{trigger:["click"]},{overlay:m(()=>[r(z,{class:"drop-down-container"},{default:m(()=>[r(g,{key:"0"},{default:m(()=>[t[11]||(t[11]=e("i",{class:"bx bx-info-circle"},null,-1)),d(" "+i(u.$t("question_sets_index.buttons.detail")),1)]),_:1,__:[11]}),r(g,{key:"1"},{default:m(()=>[t[12]||(t[12]=e("i",{class:"bx bx-edit"},null,-1)),d(" "+i(u.$t("question_sets_index.buttons.edit")),1)]),_:1,__:[12]}),r(g,{key:"2"},{default:m(()=>[t[13]||(t[13]=e("i",{class:"bx bx-copy"},null,-1)),d(" "+i(u.$t("question_sets_index.buttons.dublicate")),1)]),_:1,__:[13]}),r(w,{style:{"background-color":"#ddd"}}),r(g,{key:"3"},{default:m(()=>[e("span",xe,[t[14]||(t[14]=e("i",{class:"bx bx-trash-alt"},null,-1)),d(" "+i(u.$t("question_sets_index.buttons.delete")),1)])]),_:1})]),_:1})]),default:m(()=>[t[15]||(t[15]=e("i",{class:"bx bx-dots-vertical-rounded ant-dropdown-link"},null,-1))]),_:1,__:[15]})])]))),256))])):(b(),x("div",ye,[r(T,null,{description:m(()=>[e("span",null,i(u.$t("class_index.other.no_data_matches")),1)]),_:1})]))])])])}const we=V(G,[["render",Ce],["__scopeId","data-v-1afc52c6"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/class/exam.vue"]]);export{we as default};
