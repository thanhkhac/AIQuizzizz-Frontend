var Te=Object.defineProperty;var Ie=(f,e,g)=>e in f?Te(f,e,{enumerable:!0,configurable:!0,writable:!0,value:g}):f[e]=g;var te=(f,e,g)=>Ie(f,typeof e!="symbol"?e+"":e,g);import{c as o,I as Ce,d as ue,u as ve,i as x,j as re,B as he,C as me,s as ye,k as F,M as Z,_ as pe,r as y,E as oe,o as a,w as i,b as n,f as _,t as m,ah as ae,p as W,a as s,F as D,D as R,e as Q,G as se,v as be,L as ke,R as xe,ai as Ae,aj as Ee}from"./index-DhrrK0Mu.js";import{A as Me}from"./ApiTestTemplate-C2cUjulG.js";import{Q as ce}from"./questionTypes-CS3lcRlq.js";import{S as ne}from"./languages-DtYW231W.js";import{T as Oe}from"./TextArea-CfE5AIa4.js";var De={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"};function ge(f){for(var e=1;e<arguments.length;e++){var g=arguments[e]!=null?Object(arguments[e]):{},t=Object.keys(g);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(g).filter(function(L){return Object.getOwnPropertyDescriptor(g,L).enumerable}))),t.forEach(function(L){Le(f,L,g[L])})}return f}function Le(f,e,g){return e in f?Object.defineProperty(f,e,{value:g,enumerable:!0,configurable:!0,writable:!0}):f[e]=g,f}var le=function(e,g){var t=ge({},e,g.attrs);return o(Ce,ge({},t,{icon:De}),null)};le.displayName="InboxOutlined";le.inheritAttrs=!1;const Ge=ue({__name:"ImportQSModal",props:{title:{type:String,required:!0},numberOfQuestion:{type:Number,required:!0}},emits:["import"],setup(f,{expose:e,emit:g}){const{t}=ve(),L=f,H=g,G=x(!1),h=x(),w=x(),S=x(),v=re({checkAll:!1,indeterminate:!1,checkedList:[]}),M=()=>{v.checkedList=[],G.value=!0},O=()=>{G.value=!1};e({openImportModal:M});const C=x([]),P=x(null),l=x(!1),u=()=>{var d;(d=P.value)==null||d.click()},J=async d=>{var z;const k=(z=d.target.files)==null?void 0:z[0];if(k){C.value=[],F.success(k.name+" uploaded successfully."),C.value.push(k);const q=await Me.ImportFile(C.value[0]);q.data.success&&(h.value=[...q.data.data.validQuestions,...q.data.data.invalidQuestions],w.value=[...q.data.data.validQuestions,...q.data.data.invalidQuestions],S.value=q.data.data.invalidQuestions);return}F.error("Upload failed")},T=d=>{var k;const b=((k=d.dataTransfer)==null?void 0:k.types)||[];Array.from(b).includes("files")&&(l.value=!0)},j=d=>{var k;const b=(k=d.dataTransfer)==null?void 0:k.files[0];if(l.value=!1,b){C.value=[],F.success(b.name+" uploaded successfully."),C.value.push(b);return}F.error("Upload failed")},c=d=>{var b;(b=C.value)==null||b.splice(d,1),v.checkedList=[],h.value=[],S.value=[],w.value=[]},U=["all","valid","invalid"],A=he(()=>U.map(d=>({label:d,value:d}))),V=x(A.value[0].value),X=()=>{var b,k;v.checkedList=[];let d=h.value;switch(V.value){case"valid":{d=(b=h.value)==null?void 0:b.filter(z=>{var q;return!((q=S.value)!=null&&q.includes(z))});break}case"invalid":{d=(k=h.value)==null?void 0:k.filter(z=>{var q;return(q=S.value)==null?void 0:q.includes(z)});break}}w.value=d},K=d=>{Object.assign(v,{checkedList:d.target.checked?w.value:[],indeterminate:!1})};me(()=>v.checkedList,d=>{var b;v.indeterminate=!!d.length&&d.length<w.value.length,v.checkAll=d.length===((b=w.value)==null?void 0:b.length)});const p=(d,b)=>{$(b).toggleClass("bx-chevron-up bx-chevron-down");const z=$(`#question-item-answer-${d}`);z&&$(z).slideToggle()},B=()=>{if(v.checkedList.length===0){F.warning(t("message.minimum_question",{number:5}));return}if(v.checkedList.length+L.numberOfQuestion>500){F.warning(t("message.limit_question",{number:500}));return}Z.confirm({title:"Are your sure? ",content:"Import: "+v.checkedList.length+" into "+L.title+" ? ",okText:"Confirm",onOk:()=>{var b;const d=(b=w.value)==null?void 0:b.filter(k=>v.checkedList.includes(k));H("import",d),O()}})};ye(()=>{});const E={t,props:L,emit:H,modal_import_open:G,question_data:h,uploadedQuestions:w,uploadedInvalidQuestions:S,importModalState:v,openImportModal:M,closeImportModal:O,files:C,fileInput:P,isDragging:l,openFileExplorer:u,handleFileChange:J,handleDragEnter:T,handleDrop:j,onRemoveUploadedFile:c,optionKeys:U,select_options:A,selected_option:V,onFilter:X,onCheckAll:K,toggleDisplayAnswer:p,handleModalImport:B,get InboxOutlined(){return le},get QUESTION_TYPE(){return ce}};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}}),Qe={class:"modal-container"},Pe={class:"modal-title-container"},qe={class:"modal-content-item"},Fe={class:"content-item-section upload-section"},Ue={class:"section-title"},ze={class:"section-content"},Ne={class:"customized-file-upload-icons"},Re={class:"file-container"},He={class:"file-item"},Be=["onClick"],Je={class:"content-item-section preview-section"},je={class:"section-content"},Ye={key:0,class:"section-content-header"},Ve={class:"d-flex"},We={class:"preview-question-container"},Ke={class:"question-item-content"},Xe=["innerHTML"],Ze={key:1,class:"question-text"},$e=["id"],et={key:0,class:"multiple-choice-answer"},tt={key:0,class:"text-success"},nt={class:"pair-answer"},ot={class:"pair-answer-item"},at={class:"pair-answer-item"},lt={key:2,class:"ordering-answer"},st={class:"ordering-answer-item"},it={class:"ordering-answer-item"},rt={class:"ordering-answer-item"},ct={class:"short-text-answer"},dt={class:"question-item-toogle-btn"},ut=["onClick"],mt={class:"header-item"};function pt(f,e,g,t,L,H){const G=y("RouterLink"),h=y("a-col"),w=y("a-row"),S=y("a-button"),v=y("a-checkbox"),M=y("a-select-option"),O=y("a-select"),C=y("a-checkbox-group"),P=y("a-modal");return a(),oe(P,{centered:"",width:"100%","wrap-class-name":"full-modal",open:t.modal_import_open,onCancel:t.closeImportModal},{footer:i(()=>[n("div",mt," Total: "+m(t.importModalState.checkedList.length)+" questions ",1),o(S,{class:"main-color-btn",size:"large",key:"submit",type:"primary",onClick:t.handleModalImport},{default:i(()=>e[16]||(e[16]=[_(" Import ")])),_:1,__:[16]})]),default:i(()=>[n("div",Qe,[n("div",Pe,[o(w,{class:"w-100 d-flex align-items-center"},{default:i(()=>[o(h,{span:1},{default:i(()=>[o(G,{onClick:t.closeImportModal,to:{name:""}},{default:i(()=>e[5]||(e[5]=[n("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[5]})]),_:1}),o(h,{class:"main-title",span:23},{default:i(()=>[n("span",null,m(f.$t("create_QS.title")),1),e[6]||(e[6]=_()),e[7]||(e[7]=n("br",null,null,-1)),n("span",null,m(f.$t("create_QS.sub_title")),1)]),_:1,__:[6,7]})]),_:1})]),n("div",qe,[n("div",Fe,[n("div",Ue,[e[9]||(e[9]=n("span",null,"Upload",-1)),o(S,{class:"main-color-btn",type:"primary"},{default:i(()=>e[8]||(e[8]=[_("Download template")])),_:1,__:[8]})]),n("div",ze,[n("input",{onChange:t.handleFileChange,class:"d-none",type:"file",ref:"fileInput"},null,544),n("div",{class:W(["customized-file-upload",t.isDragging?"is-dragging":""]),onClick:t.openFileExplorer,onDragenter:t.handleDragEnter,onDragover:e[0]||(e[0]=ae(l=>t.isDragging=!0,["prevent"])),onDragleave:e[1]||(e[1]=l=>t.isDragging=!1),onDrop:ae(t.handleDrop,["prevent"])},[n("div",Ne,[n("i",{class:W(["bx","bx-down-arrow-alt","bx-fade-up",t.isDragging?"":"d-none"])},null,2),o(t.InboxOutlined,{class:W([t.isDragging?"d-none":""])},null,8,["class"])]),e[10]||(e[10]=n("div",{class:"customized-file-upload-ins"},[n("strong",null,"Click"),_(" or "),n("strong",null,"drag"),_(" file to this area to upload ")],-1)),e[11]||(e[11]=n("div",{class:"customized-file-upload-hint"},[_(" Please use the template above to ensure the file is read correctly."),n("br"),_(" Support for a single upload. ")],-1))],34)]),n("div",Re,[(a(!0),s(D,null,R(t.files,(l,u)=>(a(),s("div",He,[n("span",null,m(l.name),1),n("i",{class:"bx bx-trash text-danger",onClick:J=>t.onRemoveUploadedFile(u)},null,8,Be)]))),256))])]),n("div",Je,[e[15]||(e[15]=n("div",{class:"section-title"},"Preview",-1)),n("div",je,[t.files.length>0?(a(),s("div",Ye,[n("div",{class:W(["header-item",t.importModalState.checkAll?"check-all":""])},[o(v,{onClick:t.onCheckAll,checked:t.importModalState.checkAll,"onUpdate:checked":e[2]||(e[2]=l=>t.importModalState.checkAll=l),indeterminate:t.importModalState.indeterminate},null,8,["checked","indeterminate"]),_(" Check all ("+m(t.importModalState.checkedList.length)+") ",1)],2),n("div",Ve,[o(O,{size:"large",class:"me-3",value:t.selected_option,"onUpdate:value":e[3]||(e[3]=l=>t.selected_option=l),style:{width:"200px"},onChange:t.onFilter},{default:i(()=>[(a(!0),s(D,null,R(t.select_options,l=>(a(),oe(M,{value:l.value},{default:i(()=>[_(m(l.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])])])):Q("v-if",!0),o(C,{value:t.importModalState.checkedList,"onUpdate:value":e[4]||(e[4]=l=>t.importModalState.checkedList=l)},{default:i(()=>[n("div",We,[(a(!0),s(D,null,R(t.uploadedQuestions,(l,u)=>{var J;return a(),s("div",{class:W(["preview-question-item",(J=t.uploadedInvalidQuestions)!=null&&J.includes(l)?"invalid":""])},[o(v,{value:l},null,8,["value"]),n("div",Ke,[l.questionHTML?(a(),s("div",{key:0,class:"question-html",innerHTML:l.questionHTML},null,8,Xe)):(a(),s("div",Ze,m(l.questionText),1)),n("div",{class:"question-item-answer",id:`question-item-answer-${u}`},[l.type===t.QUESTION_TYPE.MULTIPLE_CHOICE?(a(),s("div",et,[n("ul",null,[(a(!0),s(D,null,R(l.multipleChoices,T=>(a(),s("li",null,[_(m(T.text)+" ",1),T.isAnswer?(a(),s("span",tt," ("+m(T.isAnswer)+") ",1)):Q("v-if",!0)]))),256))])])):Q("v-if",!0),l.type===t.QUESTION_TYPE.MATCHING?(a(!0),s(D,{key:1},R(l.matchingPairs,T=>(a(),s("div",nt,[n("span",ot,m(T.leftItem),1),e[12]||(e[12]=n("i",{class:"bx bx-right-arrow-alt"},null,-1)),n("span",at,m(T.rightItem),1)]))),256)):Q("v-if",!0),l.type===t.QUESTION_TYPE.ORDERING?(a(),s("div",lt,[n("div",st,[(a(!0),s(D,null,R(l.orderingItems,T=>(a(),s("div",null,m(T.text),1))),256))]),e[13]||(e[13]=n("i",{class:"bx bx-right-arrow-alt"},null,-1)),n("div",it,[(a(!0),s(D,null,R(l.orderingItems,(T,j)=>(a(),s("div",rt,[n("span",null,"#"+m(j+1),1),_(" - "+m(T.text),1)]))),256))])])):Q("v-if",!0),l.type===t.QUESTION_TYPE.SHORT_TEXT?(a(),s(D,{key:3},[e[14]||(e[14]=n("span",null,"Answer:",-1)),n("div",ct,m(l.shortAnswer),1)],64)):Q("v-if",!0)],8,$e)]),n("div",dt,[n("i",{class:"bx bx-chevron-up",onClick:T=>t.toggleDisplayAnswer(u,T.currentTarget)},null,8,ut)])],2)}),256))])]),_:1},8,["value"])])])])])]),_:1},8,["open"])}const hn=pe(Ge,[["render",pt],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/ImportQSModal.vue"]]),ft={HARD:"Hard",MEDIUM:"Medium",EASY:"Easy"},ie={GENERATE_QUESTION:"AiGenerate/GenerateQuestion",GENERATE_DOCUMENT_STRUCTURE:"AiGenerate/GenerateDocumentStructure",GET_COST_TO_GENERATE:"AiGenerate/DocumentStructure/GetCostToGenerate"};class _t{constructor(){te(this,"GenerateQuestion",async e=>await se.post(ie.GENERATE_QUESTION,e,{headers:{"Content-Type":"multipart/form-data"},maxContentLength:1/0,maxBodyLength:1/0}));te(this,"GenerateDocumentStructure",async e=>{const g=new FormData;return g.append("file",e),await se.post(ie.GENERATE_DOCUMENT_STRUCTURE,g,{headers:{"Content-Type":"multipart/form-data"},maxContentLength:1/0,maxBodyLength:1/0})});te(this,"GetCostToGenerate",async e=>{const g=new FormData;return g.append("file",e),await se.post(ie.GET_COST_TO_GENERATE,g,{headers:{"Content-Type":"multipart/form-data"},maxContentLength:1/0,maxBodyLength:1/0})})}}const de=new _t,gt=ue({__name:"GenerateFileStructure",props:{file:{type:null,required:!0}},emits:["import"],setup(f,{expose:e,emit:g}){const t=f,L=be(ke,{style:{fontSize:"100px",color:"var(--main-color)"},spin:!0}),H=x(),G=x([]);function h(p){return p?Array.isArray(p)?p:[p]:[]}function w(p){return h(p).map(E=>{const d=h(E==null?void 0:E.children);return{...E,title:String((E==null?void 0:E.title)??""),key:crypto.randomUUID(),children:d.length?w(d):void 0}})}const S=x([]),v=x([]);function M(p,B){const E=[];for(const d of p){const b=B.includes(d.key),k=d.children?M(d.children,B):[];(b||k.length>0)&&E.push({title:d.title,key:d.key,children:k.length?k:void 0})}return E}const O=he(()=>M(S.value,v.value));me(S,async()=>{S.value.length>0&&(await xe(),H.value&&(H.value.scrollTop=0))});const C=x(null),P=x(!1),l=x(!1),u=async()=>{try{l.value=!0;const p=await de.GetCostToGenerate(t.file);return p.data.success?p.data.data:(Z.error({title:"Error",content:p.data.message||"Failed to get cost to generate."}),null)}catch(p){return console.error(p),null}finally{l.value=!1}},J=async()=>{try{l.value=!0;const p=await de.GenerateDocumentStructure(t.file);if(!p.data.success){Z.error({title:"Error",content:p.data.message||"Failed to generate file structure."});return}const B=typeof p.data=="string"?JSON.parse(p.data):p.data,E=B==null?void 0:B.data,d=h(E==null?void 0:E.children);G.value=d,S.value=w(G.value)}catch(p){console.error(p)}finally{l.value=!1,c.value=!1}},T=async()=>{if(P.value=!0,G.value.length>0||C.value)return;const p=await u();if(!p){F.error("Failed to get cost to generate file structure.");return}C.value=p,c.value=!0},j=()=>{P.value=!1},c=x(!1),U=async()=>{C.value&&await J()},A=g,V=()=>{var b,k;if(O.value.length===0){Z.error({title:"Error",content:"Please choose at least one section in your document to proceed.",centered:!0});return}const p=(b=S.value)==null?void 0:b[0],B=JSON.stringify({title:p.title,children:p.children}),E=(k=O.value)==null?void 0:k[0],d=JSON.stringify({title:E.title,children:E.children});A("import",B,d),j()},X=()=>{G.value=[],S.value=[],C.value=null};e({openModal:T,closeModal:j,clearData:X});const K={props:t,indicator:L,modalContentRef:H,serverData:G,toArray:h,addRandomKeys:w,treeData:S,checked:v,filterTree:M,selectedTree:O,cost:C,modal_open:P,loading:l,getCostToGenerate:u,generateTreeData:J,openModal:T,closeModal:j,modal_confirm_generate_structure_open:c,onConfirmGenerateFileStructure:U,emit:A,onConfirmImportStructure:V,clearData:X,get ExclamationCircleFilled(){return Ee},get ATree(){return Ae}};return Object.defineProperty(K,"__isScriptSetup",{enumerable:!1,value:!0}),K}}),vt={class:"modal-container"},ht={class:"modal-title-container"},yt={class:"modal-content-item",ref:"modalContentRef"},bt={key:0,class:"loading-container"},kt={key:0},xt={key:1,class:"content-wrapper"},wt={key:0,class:"tree-container"},St={class:"button-container"},Tt={class:"confirm-modal-container"},It={class:"d-flex align-items-center"},Ct={class:"fs-6 ms-5 mt-3"},At={class:"text-danger"};function Et(f,e,g,t,L,H){const G=y("RouterLink"),h=y("a-col"),w=y("a-row"),S=y("a-spin"),v=y("a-button"),M=y("a-modal");return a(),s(D,null,[o(M,{centered:"",width:"100%","wrap-class-name":"medium-modal large",open:t.modal_open,onCancel:t.closeModal},{footer:i(()=>[o(v,{class:"main-color-btn",type:"primary",onClick:t.onConfirmImportStructure},{default:i(()=>e[7]||(e[7]=[_(" Confirm ")])),_:1,__:[7]})]),default:i(()=>[n("div",vt,[n("div",ht,[o(w,{class:"w-100 d-flex align-items-center"},{default:i(()=>[o(h,{span:1},{default:i(()=>[o(G,{onClick:t.closeModal,to:{name:""}},{default:i(()=>e[3]||(e[3]=[n("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[3]})]),_:1}),o(h,{class:"main-title",span:23},{default:i(()=>[n("span",null,m(f.$t("create_QS.title")),1),e[4]||(e[4]=_()),e[5]||(e[5]=n("br",null,null,-1)),n("span",null,m(f.$t("create_QS.sub_title")),1)]),_:1,__:[4,5]})]),_:1})]),n("div",yt,[t.loading?(a(),s("div",bt,[o(S,{size:"large",indicator:t.indicator},null,8,["indicator"]),t.cost?Q("v-if",!0):(a(),s("div",kt,"Calculating cost to generate file"))])):(a(),s("div",xt,[t.treeData.length>0?(a(),s("div",wt,[o(t.ATree,{checkedKeys:t.checked,"onUpdate:checkedKeys":e[0]||(e[0]=O=>t.checked=O),"tree-data":t.treeData,checkable:"","show-icon":!1,"show-line":!0,"field-names":{title:"title",key:"key",children:"children"},defaultExpandAll:!0,style:{width:"100%"}},null,8,["checkedKeys","tree-data"])])):t.cost?(a(),s(D,{key:1},[Q(" get cost success but cancel "),n("div",St,[o(v,{type:"primary",class:"main-color-btn",onClick:e[1]||(e[1]=O=>t.modal_confirm_generate_structure_open=!0)},{default:i(()=>e[6]||(e[6]=[_(" Generate File Structure ")])),_:1,__:[6]})])],2112)):Q("v-if",!0)]))],512)])]),_:1},8,["open"]),o(M,{"wrap-class-name":"medium-modal",centered:"",open:t.modal_confirm_generate_structure_open,closable:!1},{footer:i(()=>[o(v,{class:W(["main-color-btn-ghost",t.loading?"main-color-btn-disabled":""]),type:"ghost",onClick:e[2]||(e[2]=O=>t.modal_confirm_generate_structure_open=!1)},{default:i(()=>e[11]||(e[11]=[_(" Cancel ")])),_:1,__:[11]},8,["class"]),o(v,{loading:t.loading,class:"main-color-btn",type:"primary",onClick:t.onConfirmGenerateFileStructure},{default:i(()=>e[12]||(e[12]=[_("Confirm")])),_:1,__:[12]},8,["loading"])]),default:i(()=>{var O;return[n("div",Tt,[n("div",It,[o(t.ExclamationCircleFilled,{class:"fs-4 me-3 text-warning"}),e[8]||(e[8]=n("div",{class:"fs-6 fw-bold"}," Are you sure you want to generate the file structure? ",-1))]),n("div",Ct,[e[9]||(e[9]=_(" You will need at least ")),n("span",At,m((O=t.cost)==null?void 0:O.miniumPointToGenerate),1),e[10]||(e[10]=_(" point to process this file. "))])])]}),_:1},8,["open"])],64)}const Mt=pe(gt,[["render",Et],["__scopeId","data-v-8be2b719"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/GenerateFileStructure.vue"]]),Ot=ue({__name:"GenerateQSModal",props:{title:{type:String,required:!0},numberOfQuestion:{type:Number,required:!0}},emits:["import"],setup(f,{expose:e,emit:g}){const t=[{id:"q1",type:"MultipleChoice",questionText:"What is the capital of France ?",questionHTML:"<p><strong>What</strong> is <br/> the <em>capital</em> of <u>France</u>? <code>// geography</code></p>",explainText:"Paris is the capital city of France.",score:1,multipleChoices:[{id:"1",text:"Paris",isAnswer:!0},{id:"2",text:"London",isAnswer:!1},{id:"3",text:"Berlin",isAnswer:!1}],matchingPairs:[],orderingItems:[],shortAnswer:""},{id:"q2",type:"Matching",questionText:"Match the countries to their capitals.",questionHTML:"<p><u>Match</u> the <strong>countries</strong> to their <em>capitals</em>. <code>// matching task</code></p>",explainText:"Each country must be paired with its capital.",score:2,multipleChoices:[],matchingPairs:[{id:"1",leftItem:"Japan",rightItem:"Tokyo"},{id:"2",leftItem:"Italy",rightItem:"Rome"},{id:"3",leftItem:"Vietnam",rightItem:"Hanoi"}],orderingItems:[],shortAnswer:""},{id:"q3",type:"Ordering",questionText:"Arrange the steps of the water cycle in the correct order.",questionHTML:"<p><strong>Arrange</strong> the steps of the <u>water cycle</u> in the <em>correct order</em>. <code>// science</code></p>",explainText:"The correct order is: Evaporation → Condensation → Precipitation → Collection.",score:2,multipleChoices:[],matchingPairs:[],orderingItems:[{id:"1",text:"Evaporation",correctOrder:1},{id:"2",text:"Condensation",correctOrder:2},{id:"3",text:"Precipitation",correctOrder:3},{id:"4",text:"Collection",correctOrder:4}],shortAnswer:""},{id:"q4",type:"ShortText",questionText:"What is the chemical symbol for water?",questionHTML:"<p><em>What</em> is the chemical <strong>symbol</strong> for <u>water</u>? <code>H2O</code></p>",explainText:"H2O is the formula for water.",score:1,multipleChoices:[],matchingPairs:[],orderingItems:[],shortAnswer:"H2O"},{id:"q5",type:"MultipleChoice",questionText:"Which planet is known as the Red Planet?",questionHTML:"<p>Which <strong>planet</strong> is known as the <em>Red Planet</em>? <u>Mars</u> <pre><code>// astronomy</code></pre></p>",explainText:"Mars is often called the Red Planet due to its reddish appearance.",score:1,multipleChoices:[{id:"1",text:"Mars",isAnswer:!0},{id:"2",text:"Venus",isAnswer:!1},{id:"3",text:"Jupiter",isAnswer:!1}],matchingPairs:[],orderingItems:[],shortAnswer:""}],{t:L}=ve(),H=f,G=g,h=x(!1),w=()=>{l.checkedList=[],h.value=!0},S=()=>{h.value=!1};e({openGenerateAIModal:w});const v=()=>{if(l.checkedList.length===0){F.warning(L("message.minimum_question",{number:5}));return}if(l.checkedList.length+H.numberOfQuestion>500){F.warning(L("message.limit_question",{number:500}));return}Z.confirm({title:"Are your sure? ",content:"Import: "+l.checkedList.length+"into "+H.title+" ? ",okText:"Confirm",onOk:()=>{const r=P.value.filter(I=>l.checkedList.includes(I.id));G("import",r),S()}})},M=Object.values(ce).map(r=>({label:L(`create_QS.type.${r}`),value:r})),O=Object.values(ft).map(r=>({label:r,value:r})),C=x([]);for(let r=10;r<=50;r+=10)C.value.push({label:r,value:r});const P=x([]),l=re({checkAll:!1,indeterminate:!1,checkedList:[]}),u=re({file:null,isGenerateExplain:!0,language:ne[0].code,questionCount:C.value[0].value,questionTypes:[M[0]],documentStructureJson:null,selectedPartJson:null,title:""}),J=r=>{u.questionTypes.length===0&&(F.warning("At least one question type must be selected."),u.questionTypes.push(r))},T=x(!1),j=be(ke,{style:{fontSize:"100px",color:"var(--main-color)"},spin:!0}),c=async()=>{var r;try{if(T.value=!0,!u.title&&u.isGenerateExplain){F.error("Please enter a reference for the document citation.");return}if(u.documentStructureJson===null||u.selectedPartJson===null){Z.error({title:"Error",content:"Please choose at least one section in your document to proceed.",centered:!0}),q();return}const I=JSON.parse(u.documentStructureJson),Y=JSON.parse(u.selectedPartJson);u.isGenerateExplain&&u.title&&(u.documentStructureJson=JSON.stringify({...I,title:u.title}),u.selectedPartJson=JSON.stringify({...Y,title:u.title}));const N=new FormData;N.append("file",U.value[0]),N.append("isGenerateExplain",u.isGenerateExplain?"true":"false"),N.append("language",((r=ne.find(ee=>ee.code===u.language))==null?void 0:r.label)||ne[0].label),N.append("questionCount",u.questionCount),N.append("questionTypes",JSON.stringify(u.questionTypes.map(ee=>ee))),N.append("documentStructureJson",u.documentStructureJson),N.append("selectedPartJson",u.selectedPartJson);const _e=await de.GenerateQuestion(N);if(!_e.data.success){F.error("Generate failed!");return}P.value=[...P.value||[],..._e.data.data.map((ee,Se)=>({...ee,id:Se}))]}catch(I){console.log(I)}finally{T.value=!1}},U=x([]),A=x(null),V=x(!1),X=()=>{var r;(r=A.value)==null||r.click()},K=async r=>{if(r){if(r.type!=="application/pdf"){F.error("Only PDF files are supported.");return}U.value=[],F.success(r.name+" uploaded successfully."),U.value.push(r);const I=r.name.replace(/\.[^/.]+$/,"");u.title=I,await xe(),q();return}F.error("Upload failed")},p=r=>{var N;const I=r.target,Y=(N=I.files)==null?void 0:N[0];Y&&(K(Y),I.value="")},B=r=>{var Y;const I=((Y=r.dataTransfer)==null?void 0:Y.types)||[];Array.from(I).includes("files")&&(V.value=!0)},E=async r=>{var Y;const I=(Y=r.dataTransfer)==null?void 0:Y.files[0];V.value=!1,I&&K(I)},d=()=>{var r;U.value=[],(r=z.value)==null||r.clearData()},b=r=>{Object.assign(l,{checkedList:r.target.checked?P.value.map(I=>I.id):[],indeterminate:!1})};me(()=>l.checkedList,r=>{l.indeterminate=!!r.length&&r.length<P.value.map(I=>I.id).length,l.checkAll=r.length===t.length});const k=(r,I)=>{$(I).toggleClass("bx-chevron-up bx-chevron-down");const N=$(`#question-item-answer-${r}`);N&&$(N).slideToggle()},z=x(null),q=()=>{z.value&&z.value.openModal()},we=(r,I)=>{u.documentStructureJson=r,u.selectedPartJson=I};ye(()=>{});const fe={question_data_raw:t,t:L,props:H,emit:G,modal_generate_ai_open:h,openGenerateAIModal:w,closeGenerateAIModal:S,handleModalImport:v,questionTypeOptions:M,questionDifficultyOptions:O,questionMaximumOptions:C,generatedQuestions:P,generateModalState:l,generateByAIModalState:u,onDeselectQuestionType:J,loading:T,indicator:j,onGenerateQuestions:c,files:U,fileInput:A,isDragging:V,openFileExplorer:X,onFileChange:K,handleFileChange:p,handleDragEnter:B,handleDrop:E,onRemoveUploadedFile:d,onCheckAll:b,toggleDisplayAnswer:k,generateFileStructureRef:z,openFileStructureModal:q,handleImportStructure:we,get QUESTION_TYPE(){return ce},get SUPPORTED_LOCALES(){return ne},get InboxOutlined(){return le},TextArea:Oe,GenerateFileStructure:Mt};return Object.defineProperty(fe,"__isScriptSetup",{enumerable:!1,value:!0}),fe}}),Dt={class:"modal-container"},Lt={class:"modal-title-container"},Gt={class:"modal-content-item"},Qt={class:"content-item-section upload-section"},Pt={key:0,class:"section-content mb-2"},qt={class:"customized-file-upload-icons"},Ft={key:1,class:"file-container"},Ut={class:"file-item"},zt={class:"content-item-section preview-section"},Nt={key:0,class:"loading-container"},Rt={key:1,class:"section-content"},Ht={class:"section-content-header"},Bt={class:"header-item"},Jt={class:"preview-question-container"},jt={class:"preview-question-item"},Yt={class:"question-item-content"},Vt=["innerHTML"],Wt={key:1,class:"question-text"},Kt=["id"],Xt={key:0,class:"multiple-choice-answer"},Zt={key:0,class:"text-success"},$t={class:"pair-answer"},en={class:"pair-answer-item"},tn={class:"pair-answer-item"},nn={key:2,class:"ordering-answer"},on={class:"ordering-answer-item"},an={class:"ordering-answer-item"},ln={class:"ordering-answer-item"},sn={class:"short-text-answer"},rn={class:"question-item-toogle-btn"},cn=["onClick"],dn={class:"w-100 d-flex justify-content-end"};function un(f,e,g,t,L,H){const G=y("RouterLink"),h=y("a-col"),w=y("a-row"),S=y("a-select-option"),v=y("a-select"),M=y("a-form-item"),O=y("a-switch"),C=y("a-button"),P=y("a-form"),l=y("a-spin"),u=y("a-checkbox"),J=y("a-checkbox-group"),T=y("a-modal");return a(),s(D,null,[o(T,{centered:"",width:"100%","wrap-class-name":"full-modal",open:t.modal_generate_ai_open,onCancel:t.closeGenerateAIModal},{footer:i(()=>e[25]||(e[25]=[])),default:i(()=>{var j;return[n("div",Dt,[n("div",Lt,[o(w,{class:"w-100 d-flex align-items-center"},{default:i(()=>[o(h,{span:1},{default:i(()=>[o(G,{onClick:t.closeGenerateAIModal,to:{name:""}},{default:i(()=>e[11]||(e[11]=[n("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[11]})]),_:1}),o(h,{class:"main-title",span:23},{default:i(()=>[n("span",null,m(f.$t("create_QS.title")),1),e[12]||(e[12]=_()),e[13]||(e[13]=n("br",null,null,-1)),n("span",null,m(f.$t("create_QS.sub_title")),1)]),_:1,__:[12,13]})]),_:1})]),n("div",Gt,[n("div",Qt,[e[18]||(e[18]=n("div",{class:"section-title"},[n("span",null,"Upload")],-1)),t.files.length?Q("v-if",!0):(a(),s("div",Pt,[n("input",{onChange:t.handleFileChange,class:"d-none",type:"file",ref:"fileInput",accept:".pdf"},null,544),n("div",{class:W(["customized-file-upload",t.isDragging?"is-dragging":""]),onClick:t.openFileExplorer,onDragenter:t.handleDragEnter,onDragover:e[0]||(e[0]=ae(c=>t.isDragging=!0,["prevent"])),onDragleave:e[1]||(e[1]=c=>t.isDragging=!1),onDrop:ae(t.handleDrop,["prevent"])},[n("div",qt,[n("i",{class:W(["bx","bx-down-arrow-alt","bx-fade-up",t.isDragging?"":"d-none"])},null,2),o(t.InboxOutlined,{class:W([t.isDragging?"d-none":""])},null,8,["class"])]),e[14]||(e[14]=n("div",{class:"customized-file-upload-ins"},[n("strong",null,"Click"),_(" or "),n("strong",null,"drag"),_(" file to this area to upload ")],-1)),e[15]||(e[15]=n("div",{class:"customized-file-upload-hint"},[_(" Please use the template above to ensure the file is read correctly."),n("br"),_(" Support for a single upload. ")],-1))],34)])),t.files.length?(a(),s("div",Ft,[(a(!0),s(D,null,R(t.files,c=>(a(),s("div",Ut,[n("span",null,m(c.name),1),n("i",{class:"bx bx-trash text-danger",onClick:e[2]||(e[2]=U=>t.onRemoveUploadedFile())})]))),256)),n("div",{class:"file-structure",onClick:t.openFileStructureModal},e[16]||(e[16]=[n("i",{class:"bx bx-file"},null,-1),n("div",null,"Structure",-1)]))])):Q("v-if",!0),o(P,{layout:"vertical",class:"generate-ai-form"},{default:i(()=>[o(w,{class:"d-flex justify-content-between"},{default:i(()=>[Q(` <a-col :span="12">
                                <a-form-item label="Difficulty">
                                    <a-select
                                        v-model:value="generateByAIModalState.difficulty"
                                        style="width: 100%"
                                        :placeholder="'Difficulty of questions'"
                                        :options="questionDifficultyOptions"
                                    />
                                </a-form-item>
                            </a-col> `),o(h,{span:12},{default:i(()=>[o(M,{label:"Language"},{default:i(()=>[o(v,{class:"language-select",value:t.generateByAIModalState.language,"onUpdate:value":e[3]||(e[3]=c=>t.generateByAIModalState.language=c)},{default:i(()=>[(a(!0),s(D,null,R(t.SUPPORTED_LOCALES,c=>(a(),oe(S,{key:`locale-${c.code}`,value:c.code},{default:i(()=>[_(m(c.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1}),o(h,{span:11},{default:i(()=>[o(M,{label:"Maximum question"},{default:i(()=>[o(v,{value:t.generateByAIModalState.questionCount,"onUpdate:value":e[4]||(e[4]=c=>t.generateByAIModalState.questionCount=c),style:{width:"100%"},placeholder:"Maximum number of question",options:t.questionMaximumOptions},null,8,["value","options"])]),_:1})]),_:1})]),_:1}),o(M,{label:"Question types"},{default:i(()=>[o(v,{onDeselect:t.onDeselectQuestionType,value:t.generateByAIModalState.questionTypes,"onUpdate:value":e[5]||(e[5]=c=>t.generateByAIModalState.questionTypes=c),mode:"multiple",style:{width:"100%"},placeholder:"Select multiple",options:t.questionTypeOptions},null,8,["value","options"])]),_:1}),o(w,{class:"d-flex justify-content-between"},{default:i(()=>[o(h,{span:7},{default:i(()=>[o(M,{label:"Enable explaination"},{default:i(()=>[o(O,{checked:t.generateByAIModalState.isGenerateExplain,"onUpdate:checked":e[6]||(e[6]=c=>t.generateByAIModalState.isGenerateExplain=c)},null,8,["checked"])]),_:1})]),_:1}),t.generateByAIModalState.isGenerateExplain?(a(),oe(h,{key:0,span:16},{default:i(()=>[o(M,{label:"Reference name"},{default:i(()=>[o(t.TextArea,{modelValue:t.generateByAIModalState.title,"onUpdate:modelValue":e[7]||(e[7]=c=>t.generateByAIModalState.title=c),"is-required":t.generateByAIModalState.isGenerateExplain,"max-length":200,placeholder:"Enter document title for citation",readonly:!t.generateByAIModalState.isGenerateExplain},null,8,["modelValue","is-required","readonly"])]),_:1})]),_:1})):Q("v-if",!0)]),_:1}),o(M,{style:{"margin-top":"7px"},class:"generate-ai-btn-container"},{default:i(()=>[o(C,{loading:t.loading,size:"large",class:"w-100 main-color-btn generate_ai",type:"primary",onClick:t.onGenerateQuestions},{default:i(()=>e[17]||(e[17]=[_(" ✨ Generate ")])),_:1,__:[17]},8,["loading"])]),_:1})]),_:1})]),n("div",zt,[e[23]||(e[23]=n("div",{class:"section-title"},"Preview",-1)),t.loading?(a(),s("div",Nt,[o(l,{size:"large",indicator:t.indicator},null,8,["indicator"])])):(a(),s("div",Rt,[n("div",Ht,[o(u,{class:W(["header-item",t.generateModalState.checkAll?"check-all":""]),onClick:t.onCheckAll,checked:t.generateModalState.checkAll,"onUpdate:checked":e[8]||(e[8]=c=>t.generateModalState.checkAll=c),indeterminate:t.generateModalState.indeterminate},{default:i(()=>[_(" Check all ("+m(t.generateModalState.checkedList.length)+") ",1)]),_:1},8,["class","checked","indeterminate"]),n("div",Bt," Total: "+m((j=t.generatedQuestions)==null?void 0:j.length)+" questions ",1)]),o(J,{value:t.generateModalState.checkedList,"onUpdate:value":e[10]||(e[10]=c=>t.generateModalState.checkedList=c)},{default:i(()=>[n("div",Jt,[(a(!0),s(D,null,R(t.generatedQuestions,(c,U)=>(a(),s("div",jt,[o(u,{onClick:e[9]||(e[9]=A=>console.log(t.generateModalState.checkedList)),value:c.id},null,8,["value"]),n("div",Yt,[c.questionHTML?(a(),s("div",{key:0,class:"question-html",innerHTML:c.questionHTML},null,8,Vt)):(a(),s("div",Wt,m(c.questionText),1)),n("div",{class:"question-item-answer",id:`question-item-answer-${U}`},[c.type===t.QUESTION_TYPE.MULTIPLE_CHOICE?(a(),s("div",Xt,[n("ul",null,[(a(!0),s(D,null,R(c.multipleChoices,A=>(a(),s("li",null,[_(m(A.text)+" ",1),A.isAnswer?(a(),s("span",Zt," ("+m(A.isAnswer)+") ",1)):Q("v-if",!0)]))),256))])])):Q("v-if",!0),c.type===t.QUESTION_TYPE.MATCHING?(a(!0),s(D,{key:1},R(c.matchingPairs,A=>(a(),s("div",$t,[n("span",en,m(A.leftItem),1),e[19]||(e[19]=n("i",{class:"bx bx-right-arrow-alt"},null,-1)),n("span",tn,m(A.rightItem),1)]))),256)):Q("v-if",!0),c.type===t.QUESTION_TYPE.ORDERING?(a(),s("div",nn,[n("div",on,[(a(!0),s(D,null,R(c.orderingItems,A=>(a(),s("div",null,m(A.text),1))),256))]),e[20]||(e[20]=n("i",{class:"bx bx-right-arrow-alt"},null,-1)),n("div",an,[(a(!0),s(D,null,R(c.orderingItems,(A,V)=>(a(),s("div",ln,[n("span",null,"#"+m(V+1),1),_(" - "+m(A.text),1)]))),256))])])):Q("v-if",!0),c.type===t.QUESTION_TYPE.SHORT_TEXT?(a(),s(D,{key:3},[e[21]||(e[21]=n("span",null,"Answer:",-1)),n("div",sn,m(c.shortAnswer),1)],64)):Q("v-if",!0)],8,Kt)]),n("div",rn,[n("i",{class:"bx bx-chevron-up",onClick:A=>t.toggleDisplayAnswer(U,A.currentTarget)},null,8,cn)])]))),256))])]),_:1},8,["value"])])),e[24]||(e[24]=n("div",{class:"modal-generate-by-ai-warning"},[n("span",null,[n("i",{class:"bx bx-info-circle"}),_(" AI can make mistakes. Please check carefully the important info. ")])],-1)),n("div",dn,[o(C,{class:"main-color-btn",key:"submit",type:"primary",size:"large",onClick:t.handleModalImport},{default:i(()=>e[22]||(e[22]=[_(" Import ")])),_:1,__:[22]})])])])])]}),_:1},8,["open"]),o(t.GenerateFileStructure,{file:t.files[0],ref:"generateFileStructureRef",onImport:t.handleImportStructure},null,8,["file"])],64)}const yn=pe(Ot,[["render",un],["__scopeId","data-v-23b34ba3"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/GenerateQSModal.vue"]]);export{yn as G,hn as I};
