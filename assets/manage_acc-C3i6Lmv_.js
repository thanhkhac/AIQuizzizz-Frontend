var Ae=Object.defineProperty;var Ue=(t,e,o)=>e in t?Ae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var E=(t,e,o)=>Ue(t,typeof e!="symbol"?e+"":e,o);import{y as B,z as G,B as Ee,d as Ce,u as qe,C as se,i as L,D as Ne,s as Be,j as Ge,M,_ as Le,r as x,a as O,o as S,e as p,b as R,c as A,w as k,t as D,F as ce,E as le,G as F,f as ue}from"./index-C2jtDg6B.js";import{I as Me}from"./Input-0Otcuoto.js";const P={GET_ALL_USERS:"/Users",ACTIVE_USER:t=>`/Users/${t}/Active`,BAN_USER:t=>`/Users/${t}/Ban`,ASSIGN_ROLE:t=>`/Users/${t}/Role`};class Pe{constructor(){E(this,"GetAllUser",async e=>await B.get(`${P.GET_ALL_USERS}`,{params:e}));E(this,"AssignRole",async(e,o)=>await B.patch(`${P.ASSIGN_ROLE(e)}`,{},{params:{role:o.role}}));E(this,"ActiveUser",async e=>await B.patch(`${P.ACTIVE_USER(e)}`));E(this,"BanUser",async e=>await B.patch(`${P.BAN_USER(e)}`))}}const C=new Pe;var V,de;function Ie(){if(de)return V;de=1;function t(e){var o=typeof e;return e!=null&&(o=="object"||o=="function")}return V=t,V}var W,fe;function ze(){if(fe)return W;fe=1;var t=typeof G=="object"&&G&&G.Object===Object&&G;return W=t,W}var $,me;function Re(){if(me)return $;me=1;var t=ze(),e=typeof self=="object"&&self&&self.Object===Object&&self,o=t||e||Function("return this")();return $=o,$}var K,_e;function De(){if(_e)return K;_e=1;var t=Re(),e=function(){return t.Date.now()};return K=e,K}var Q,ve;function Fe(){if(ve)return Q;ve=1;var t=/\s/;function e(o){for(var a=o.length;a--&&t.test(o.charAt(a)););return a}return Q=e,Q}var H,ge;function Ve(){if(ge)return H;ge=1;var t=Fe(),e=/^\s+/;function o(a){return a&&a.slice(0,t(a)+1).replace(e,"")}return H=o,H}var X,be;function je(){if(be)return X;be=1;var t=Re(),e=t.Symbol;return X=e,X}var Y,pe;function We(){if(pe)return Y;pe=1;var t=je(),e=Object.prototype,o=e.hasOwnProperty,a=e.toString,s=t?t.toStringTag:void 0;function y(m){var l=o.call(m,s),f=m[s];try{m[s]=void 0;var n=!0}catch{}var u=a.call(m);return n&&(l?m[s]=f:delete m[s]),u}return Y=y,Y}var J,ye;function $e(){if(ye)return J;ye=1;var t=Object.prototype,e=t.toString;function o(a){return e.call(a)}return J=o,J}var Z,he;function Ke(){if(he)return Z;he=1;var t=je(),e=We(),o=$e(),a="[object Null]",s="[object Undefined]",y=t?t.toStringTag:void 0;function m(l){return l==null?l===void 0?s:a:y&&y in Object(l)?e(l):o(l)}return Z=m,Z}var ee,Te;function Qe(){if(Te)return ee;Te=1;function t(e){return e!=null&&typeof e=="object"}return ee=t,ee}var te,Se;function He(){if(Se)return te;Se=1;var t=Ke(),e=Qe(),o="[object Symbol]";function a(s){return typeof s=="symbol"||e(s)&&t(s)==o}return te=a,te}var ae,we;function Xe(){if(we)return ae;we=1;var t=Ve(),e=Ie(),o=He(),a=NaN,s=/^[-+]0x[0-9a-f]+$/i,y=/^0b[01]+$/i,m=/^0o[0-7]+$/i,l=parseInt;function f(n){if(typeof n=="number")return n;if(o(n))return a;if(e(n)){var u=typeof n.valueOf=="function"?n.valueOf():n;n=e(u)?u+"":u}if(typeof n!="string")return n===0?n:+n;n=t(n);var v=y.test(n);return v||m.test(n)?l(n.slice(2),v?2:8):s.test(n)?a:+n}return ae=f,ae}var ne,ke;function Ye(){if(ke)return ne;ke=1;var t=Ie(),e=De(),o=Xe(),a="Expected a function",s=Math.max,y=Math.min;function m(l,f,n){var u,v,i,_,c,T,I=0,q=!1,h=!1,g=!0;if(typeof l!="function")throw new TypeError(a);f=o(f)||0,t(n)&&(q=!!n.leading,h="maxWait"in n,i=h?s(o(n.maxWait)||0,f):i,g="trailing"in n?!!n.trailing:g);function j(d){var w=u,U=v;return u=v=void 0,I=d,_=l.apply(U,w),_}function r(d){return I=d,c=setTimeout(N,f),q?j(d):_}function b(d){var w=d-T,U=d-I,ie=f-w;return h?y(ie,i-U):ie}function re(d){var w=d-T,U=d-I;return T===void 0||w>=f||w<0||h&&U>=i}function N(){var d=e();if(re(d))return oe(d);c=setTimeout(N,b(d))}function oe(d){return c=void 0,g&&u?j(d):(u=v=void 0,_)}function xe(){c!==void 0&&clearTimeout(c),I=0,u=T=v=c=void 0}function Oe(){return c===void 0?_:oe(e())}function z(){var d=e(),w=re(d);if(u=arguments,v=this,T=d,w){if(c===void 0)return r(T);if(h)return clearTimeout(c),c=setTimeout(N,f),j(T)}return c===void 0&&(c=setTimeout(N,f)),_}return z.cancel=xe,z.flush=Oe,z}return ne=m,ne}var Je=Ye();const Ze=Ee(Je),et=Ce({__name:"manage_acc",emits:["updateSidebar"],setup(t,{expose:e,emit:o}){e();const a=o,{t:s}=qe(),y=["all","active","ban"],m=se(()=>y.map(r=>({label:s(`admin.manage_acc.acc_status.${r}`),value:r}))),l=L(m.value[0].value),f=["all","Administrator","Moderator","User"],n=se(()=>f.map(r=>({label:s(`admin.manage_acc.acc_role.${r}`),value:r}))),u=L(n.value[0].value),v=L(""),i=async()=>{console.log({search:v.value,status:l.value,role:u.value}),h.keyword=v.value,l.value==="all"?delete h.IsBanned:h.IsBanned=l.value==="ban",h.role=u.value==="all"?"":u.value,g()};Ne(v,Ze(r=>{i()},300));const _=[{title:"ID",dataIndex:"id",customRender:({index:r})=>r+1,width:50,align:"center"},{title:"Fullname",dataIndex:"fullName",key:"fullName",sorter:(r,b)=>r.fullName.localeCompare(b.fullName),width:350,align:"center"},{title:"Email",dataIndex:"email",key:"email",sorter:(r,b)=>r.email.localeCompare(b.email),width:450,align:"center"},{title:"Token",dataIndex:"token",key:"token",sorter:(r,b)=>r.token-b.token,width:100,align:"center"},{title:"Role",dataIndex:"role",key:"role",sorter:(r,b)=>r.role.localeCompare(b.role),defaultSortOrder:"ascend",width:100,align:"center"},{title:"Ban",key:"ban",width:120,align:"center"}];Be(()=>{a("updateSidebar","account"),g()});const c=L([]);async function T(r){try{r.isBanned?M.confirm({title:"Confirm Ban User",content:"Are you sure you want to ban this user?",centered:!0,onOk:async()=>{await C.BanUser(r.id,{isBanned:!0}),await g()},onCancel:async()=>{await g()}}):M.confirm({title:"Confirm Active User",content:"Are you sure you want to activate this user?",centered:!0,onOk:async()=>{await C.BanUser(r.id,{isBanned:!1}),await g()},onCancel:async()=>{await g()}})}catch(b){console.error("Toggle active ERROR:",b)}}async function I(r){try{console.log("Promote uid: ",r.id),M.confirm({title:"Promote User to Moderator",content:"Are you sure you want to promote this user to Moderator?",centered:!0,onOk:async()=>{await C.AssignRole(r.id,{role:"Moderator"}),await g()},onCancel:async()=>{await g()}})}catch(b){console.error("Promote to Moderator:",b)}}async function q(r){try{console.log("Demote uid: ",r.id),M.confirm({title:"Demote Moderator to User",content:"Are you sure you want to demote this moderator to User?",centered:!0,onOk:async()=>{await C.AssignRole(r.id,{role:"User"}),await g()},onCancel:async()=>{await g()}})}catch(b){console.error("Toggle active ERROR:",b)}}const h=Ge({fieldName:"Email",keyword:"",pageNumber:1,pageSize:15}),g=async()=>{try{let r=await C.GetAllUser(h);r.data.success&&(c.value=r.data.data.items)}catch(r){console.log("ERROR: GETALLBYLIMIT testtemplate: "+r)}},j={emit:a,t:s,optionKeysAccStatus:y,account_status_credit_options:m,selected_acc_status_option:l,optionKeysAccRole:f,account_role_credit_options:n,selected_acc_role_option:u,searchValue:v,onFilter:i,columns:_,dataSource:c,onToggle:T,onPromoteToModerator:I,onDemoteToUser:q,payloadGetUsers:h,getUsersData:g,Input:Me};return Object.defineProperty(j,"__isScriptSetup",{enumerable:!1,value:!0}),j}}),tt={class:"page-container"},at={class:"title-container"},nt={class:"content"},rt={class:"filter-input-item"},ot={class:"filter-input-full"},it={class:"account-table"},st={key:0,class:"action-cell"},ct=["onClick"],lt=["onClick"];function ut(t,e,o,a,s,y){const m=x("a-col"),l=x("a-row"),f=x("a-select-option"),n=x("a-select"),u=x("a-switch"),v=x("a-table");return S(),O("div",tt,[p(" header title "),R("div",at,[A(l,{class:"w-100"},{default:k(()=>[A(m,{class:"main-title",span:20},{default:k(()=>[R("span",null,D(a.t("admin.manage_acc.title")),1)]),_:1})]),_:1})]),R("div",nt,[p(" filter area "),R("div",rt,[p(" filter text input  "),R("div",ot,[A(a.Input,{class:"custom-input",value:a.searchValue,"onUpdate:value":e[0]||(e[0]=i=>a.searchValue=i),placeholder:a.t("admin.manage_acc.search_placeholder")},{icon:k(()=>e[3]||(e[3]=[R("i",{class:"bx bx-search"},null,-1)])),_:1},8,["value","placeholder"])]),p(" filter account status "),A(n,{style:{width:"calc(19%)"},value:a.selected_acc_status_option,"onUpdate:value":e[1]||(e[1]=i=>a.selected_acc_status_option=i),onChange:a.onFilter},{default:k(()=>[(S(!0),O(ce,null,le(a.account_status_credit_options,i=>(S(),F(f,{key:i.value,value:i.value},{default:k(()=>[ue(D(i.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"]),p(" filter account role "),A(n,{style:{width:"calc(19%)"},value:a.selected_acc_role_option,"onUpdate:value":e[2]||(e[2]=i=>a.selected_acc_role_option=i),onChange:a.onFilter},{default:k(()=>[(S(!0),O(ce,null,le(a.account_role_credit_options,i=>(S(),F(f,{key:i.value,value:i.value},{default:k(()=>[ue(D(i.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),p(" table list account "),R("div",it,[A(v,{"data-source":a.dataSource,columns:a.columns,"row-key":"id"},{bodyCell:k(({column:i,record:_})=>[i.key==="ban"?(S(),O("div",st,[p(" icon assign moderator "),_.role==="Moderator"?(S(),O("i",{key:0,class:"bx bx-id-card",title:"Demote moderator to User",style:{color:"#ff002e","font-size":"25px"},onClick:c=>a.onDemoteToUser(_)},null,8,ct)):p("v-if",!0),p(" icon assign user "),_.role==="User"?(S(),O("i",{key:1,class:"bx bx-id-card",title:"Promote user to Moderator",style:{color:"#fff","font-size":"25px"},onClick:c=>a.onPromoteToModerator(_)},null,8,lt)):p("v-if",!0),p(" button ban.active user "),_.role!=="Administrator"?(S(),F(u,{key:2,checked:_.isBanned,"onUpdate:checked":c=>_.isBanned=c,title:"Ban/Active","checked-children":"","un-checked-children":"",onChange:c=>a.onToggle(_)},null,8,["checked","onUpdate:checked","onChange"])):p("v-if",!0)])):p("v-if",!0)]),_:1},8,["data-source"]),p(` <div class="pagination-container">
                    <a-pagination
                        @change="onPaginationChange"
                        v-model:current="pageParams.pageNumber"
                        :total="pageParams.totalCount"
                        :pageSize="pageParams.pageSize"
                        :show-total="
                            (total: any, range: any) =>
                                \`\${range[0]}-\${range[1]} of \${total} \${t('class_member.other.items')}\`
                        "
                        show-size-changer
                        show-quick-jumper
                        class="crud-layout-pagination"
                        :locale="{
                            items_per_page: t('class_index.other.pages'),
                        }"
                    ></a-pagination>
                </div> `)])])])}const _t=Le(et,[["render",ut],["__scopeId","data-v-a9d2c947"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/admin/account/manage_acc.vue"]]);export{_t as default};
