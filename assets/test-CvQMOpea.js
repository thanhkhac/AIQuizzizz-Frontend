import{X as ct,d as dt,q as ht,l as mt,u as ft,i as C,z as Z,j as gt,E as Le,S as de,s as vt,R as _t,M as pt,D as bt,_ as yt,r as N,c as b,o as _,a as p,C as he,e as B,b as i,p as I,w as x,f as U,t as m,F as ee,B as re}from"./index-DNe0PjcS.js";import{A as Te}from"./ApiQuestionSet-BIe5jJD7.js";import{Q as k}from"./questionTypes-CS3lcRlq.js";import{D as xt}from"./index-KZ6bvcw9.js";import{T as St,l as wt}from"./vue-draggable-plus-4ZtfRVvp.js";import{H as He}from"./highcharts-B2VOgLp3.js";import{V as Ne}from"./Validator-CWeiTIFe.js";import{H as Tt}from"./HolderOutlined-C5J3Ar-g.js";/* empty css                                                                 */class qt{shuffleArray(r,O=5){let e=[],R=0;do{e=r.slice();for(let h=e.length-1;h>0;h--){const c=Math.floor(Math.random()*(h+1));[e[h],e[c]]=[e[c],e[h]]}if(R++,r.length<=1)break}while(e.every((h,c)=>h===r[c])&&R<O);return e}shuffleQuestionOptions(r){const O=JSON.parse(JSON.stringify(r));return O.type===k.MATCHING&&O.questionData.matching&&(O.questionData.matching.rightItems=this.shuffleArray(O.questionData.matching.rightItems)),O.type===k.ORDERING&&O.questionData.ordering&&(O.questionData.ordering=this.shuffleArray(O.questionData.ordering.sort((e,R)=>e.correctOrder-R.correctOrder))),O}}const kt=new qt;var me={exports:{}},Ct=me.exports,Ue;function It(){return Ue||(Ue=1,function(q,r){(function(O,e){q.exports=e()})(Ct,function(){var O,e,R=1e3,h=6e4,c=36e5,E=864e5,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,P=31536e6,Q=2628e6,J=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,X={years:P,months:Q,days:E,hours:c,minutes:h,seconds:R,milliseconds:1,weeks:6048e5},Y=function(g){return g instanceof K},z=function(g,u,s){return new K(g,s,u.$l)},V=function(g){return e.p(g)+"s"},W=function(g){return g<0},L=function(g){return W(g)?Math.ceil(g):Math.floor(g)},y=function(g){return Math.abs(g)},G=function(g,u){return g?W(g)?{negative:!0,format:""+y(g)+u}:{negative:!1,format:""+g+u}:{negative:!1,format:""}},K=function(){function g(s,T,M){var S=this;if(this.$d={},this.$l=M,s===void 0&&(this.$ms=0,this.parseFromMilliseconds()),T)return z(s*X[V(T)],this);if(typeof s=="number")return this.$ms=s,this.parseFromMilliseconds(),this;if(typeof s=="object")return Object.keys(s).forEach(function(F){S.$d[V(F)]=s[F]}),this.calMilliseconds(),this;if(typeof s=="string"){var A=s.match(J);if(A){var D=A.slice(2).map(function(F){return F!=null?Number(F):0});return this.$d.years=D[0],this.$d.months=D[1],this.$d.weeks=D[2],this.$d.days=D[3],this.$d.hours=D[4],this.$d.minutes=D[5],this.$d.seconds=D[6],this.calMilliseconds(),this}}return this}var u=g.prototype;return u.calMilliseconds=function(){var s=this;this.$ms=Object.keys(this.$d).reduce(function(T,M){return T+(s.$d[M]||0)*X[M]},0)},u.parseFromMilliseconds=function(){var s=this.$ms;this.$d.years=L(s/P),s%=P,this.$d.months=L(s/Q),s%=Q,this.$d.days=L(s/E),s%=E,this.$d.hours=L(s/c),s%=c,this.$d.minutes=L(s/h),s%=h,this.$d.seconds=L(s/R),s%=R,this.$d.milliseconds=s},u.toISOString=function(){var s=G(this.$d.years,"Y"),T=G(this.$d.months,"M"),M=+this.$d.days||0;this.$d.weeks&&(M+=7*this.$d.weeks);var S=G(M,"D"),A=G(this.$d.hours,"H"),D=G(this.$d.minutes,"M"),F=this.$d.seconds||0;this.$d.milliseconds&&(F+=this.$d.milliseconds/1e3,F=Math.round(1e3*F)/1e3);var ie=G(F,"S"),ae=s.negative||T.negative||S.negative||A.negative||D.negative||ie.negative,ce=A.format||D.format||ie.format?"T":"",te=(ae?"-":"")+"P"+s.format+T.format+S.format+ce+A.format+D.format+ie.format;return te==="P"||te==="-P"?"P0D":te},u.toJSON=function(){return this.toISOString()},u.format=function(s){var T=s||"YYYY-MM-DDTHH:mm:ss",M={Y:this.$d.years,YY:e.s(this.$d.years,2,"0"),YYYY:e.s(this.$d.years,4,"0"),M:this.$d.months,MM:e.s(this.$d.months,2,"0"),D:this.$d.days,DD:e.s(this.$d.days,2,"0"),H:this.$d.hours,HH:e.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:e.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:e.s(this.$d.seconds,2,"0"),SSS:e.s(this.$d.milliseconds,3,"0")};return T.replace(d,function(S,A){return A||String(M[S])})},u.as=function(s){return this.$ms/X[V(s)]},u.get=function(s){var T=this.$ms,M=V(s);return M==="milliseconds"?T%=1e3:T=M==="weeks"?L(T/X[M]):this.$d[M],T||0},u.add=function(s,T,M){var S;return S=T?s*X[V(T)]:Y(s)?s.$ms:z(s,this).$ms,z(this.$ms+S*(M?-1:1),this)},u.subtract=function(s,T){return this.add(s,T,!0)},u.locale=function(s){var T=this.clone();return T.$l=s,T},u.clone=function(){return z(this.$ms,this)},u.humanize=function(s){return O().add(this.$ms,"ms").locale(this.$l).fromNow(!s)},u.valueOf=function(){return this.asMilliseconds()},u.milliseconds=function(){return this.get("milliseconds")},u.asMilliseconds=function(){return this.as("milliseconds")},u.seconds=function(){return this.get("seconds")},u.asSeconds=function(){return this.as("seconds")},u.minutes=function(){return this.get("minutes")},u.asMinutes=function(){return this.as("minutes")},u.hours=function(){return this.get("hours")},u.asHours=function(){return this.as("hours")},u.days=function(){return this.get("days")},u.asDays=function(){return this.as("days")},u.weeks=function(){return this.get("weeks")},u.asWeeks=function(){return this.as("weeks")},u.months=function(){return this.get("months")},u.asMonths=function(){return this.as("months")},u.years=function(){return this.get("years")},u.asYears=function(){return this.as("years")},g}(),l=function(g,u,s){return g.add(u.years()*s,"y").add(u.months()*s,"M").add(u.days()*s,"d").add(u.hours()*s,"h").add(u.minutes()*s,"m").add(u.seconds()*s,"s").add(u.milliseconds()*s,"ms")};return function(g,u,s){O=s,e=s().$utils(),s.duration=function(S,A){var D=s.locale();return z(S,{$l:D},A)},s.isDuration=Y;var T=u.prototype.add,M=u.prototype.subtract;u.prototype.add=function(S,A){return Y(S)?l(this,S,1):T.bind(this)(S,A)},u.prototype.subtract=function(S,A){return Y(S)?l(this,S,-1):M.bind(this)(S,A)}}})}(me)),me.exports}var Qt=It();const Mt=ct(Qt),At=dt({__name:"test",setup(q,{expose:r}){r();const O=new URL("/assets/confetti-bjvcnoca.lottie",import.meta.url).href,e=ht(),R=mt(),{t:h}=ft(),c=C({title:"",description:"",totalQuestionCount:0,questions:[]}),E=Z(()=>y.value.filter(n=>n.result===!1)),d=C({}),P=C(""),Q=C(!1),J=C(!1),X=Z(()=>{var n;return(n=d.value.questionData.multipleChoice)==null?void 0:n.some(t=>t.text.length>=100)}),Y=C([]),z=C([]),V=C([]),W=C([]),L=C(""),y=C([]),G=()=>{y.value=[],J.value=!1,se(0),ue(),xe()},K=C(!1),l=()=>{K.value=!0;let n=sessionStorage.getItem("test_settings");n&&(s.numberOfQuestion=JSON.parse(n).numberOfQuestion,s.questionTypes=JSON.parse(n).questionTypes)},g=()=>{K.value=!1},u=C(),s=gt({numberOfQuestion:1,questionTypes:[k.MULTIPLE_CHOICE,k.MATCHING,k.ORDERING,k.SHORT_TEXT]}),T=(n,t)=>{if(t)s.questionTypes.includes(n)||s.questionTypes.push(n);else{const o=s.questionTypes.indexOf(n);o!==-1&&s.questionTypes.splice(o,1)}},M=async()=>{G(),await ae(),sessionStorage.setItem("test_settings",JSON.stringify(s)),g()},S=C(e.params.id.toString()),A=C(!1),D=C(!0),F=C([]),ie=async()=>{try{if(!Ne.isValidGuid(S.value.toString())){R.push({name:"404"});return}A.value=!0;const n=await Te.GetQuizTypes(S.value.toString());n.data.success&&(F.value=n.data.data.map(t=>t.type),s.questionTypes=n.data.data.map(t=>t.type))}catch(n){console.error(n)}finally{A.value=!1}};Le(F,n=>{n.length>0&&(s.numberOfQuestion=n.length)});const ae=async()=>{if(!Ne.isValidGuid(S.value.toString())){R.push({name:"404"});return}try{A.value=!0;let n=await Te.GetDetailById(S.value.toString());c.value.title=n.data.data.name,c.value.description=n.data.data.description,c.value.totalQuestionCount=n.data.data.questionCount;let t=await Te.TestQuestions(S.value.toString(),s.numberOfQuestion,s.questionTypes.join(","));if(!n.data.success||!t.data.success){R.push({name:"404"});return}c.value.questions=t.data.data.map(o=>kt.shuffleQuestionOptions(o)),se(0)}catch(n){Object.keys(n.response.data.errors).includes(_t.PLAN_REQUIRE_PLAN)&&(D.value=!1,R.back())}finally{A.value=!1}},ce=C(),te=C(!1),qe=()=>{var n,t;te.value=!0,(t=(n=ce.value)==null?void 0:n.getDotLottieInstance())==null||t.play(),setTimeout(()=>{te.value=!1},5e3)},ke=(n,t)=>{var w;const o=c.value.questions.findIndex(v=>v.id===n);if(o===-1)return!1;let f=(w=c.value.questions[o].questionData.multipleChoice)==null?void 0:w.filter(v=>v.isAnswer).map(v=>v.id||[]).sort(),a=t.sort();return t.length!==(f==null?void 0:f.length)?!1:a.every((v,H)=>v===f[H])},Pe=n=>{var w;const t=c.value.questions.findIndex(v=>v.id===d.value.id);let o=(w=c.value.questions[t].questionData.multipleChoice)==null?void 0:w.filter(v=>v.isAnswer).map(v=>v.id||[]);const f=y.value.findIndex(v=>v.questionId===d.value.id);let a=y.value[f].multipleChoices;return o!=null&&o.includes(n.id)?!0:!(a!=null&&a.includes(n.id)&&!n.isAnswer)},Ce=(n,t)=>{var w;const o=c.value.questions.findIndex(v=>v.id===n);if(o===-1)return!1;let f=((w=c.value.questions[o].questionData.ordering)==null?void 0:w.map(v=>v.correctOrder).sort())||[];return t.map(v=>v.correctOrder).every((v,H)=>v===f[H])},Ie=(n,t,o)=>{const f=c.value.questions.findIndex(j=>j.id===n);if(f===-1)return!1;let a=c.value.questions[f].questionData.matching.matches,w=t.map(j=>j.id),v=o.map(j=>j.id);return w.map((j,oe)=>({leftId:j,rightId:v[oe]})).every(j=>a.some(oe=>oe.leftId===j.leftId&&oe.rightId===j.rightId))},ze=n=>{var w,v;const t=d.value.questionData.matching;if(!t)return!1;let o=t.leftItems.some(H=>H.id===n),f=t.matches.find(H=>o?H.leftId===n:H.rightId===n);const a=o?z.value.findIndex(H=>H.id===n):V.value.findIndex(H=>H.id===n);return a===-1||!f?!1:o?((w=V.value[a])==null?void 0:w.id)===f.rightId:((v=z.value[a])==null?void 0:v.id)===f.leftId},le=n=>n.trim().toLowerCase().normalize("NFKC").replace(/[\u2019\u2018\u201B\u0060]/g,"'").replace(/\s+/g," "),Qe=(n,t)=>{const o=c.value.questions.findIndex(f=>f.id===n);return o===-1?!1:le(t)===le(c.value.questions[o].questionData.shortText)},Me=()=>{var o,f;const n=(o=y.value.find(a=>a.questionId===d.value.id))==null?void 0:o.shortText;if(!n)return!1;const t=(f=c.value.questions.find(a=>a.id===d.value.id))==null?void 0:f.questionData.shortText;return le(n)===le(t)},Ve=Z(()=>{var n;if(d.value.type===k.SHORT_TEXT&&J.value&&!Me())return(n=c.value.questions.find(t=>t.id===d.value.id))==null?void 0:n.questionData.shortText}),Fe=C(null),fe=C(!1),Ye=()=>{fe.value=!fe.value},ne=(n,t)=>{n===-1?y.value.push(t):y.value[n]=t},Ge=()=>{if(J.value)return;const n=y.value.findIndex(f=>f.questionId===d.value.id),t=Q.value,o=Q.value?h("learn_QS.result.skipped"):"";switch(d.value.type){case k.MULTIPLE_CHOICE:{Y.value.length>0?ne(n,{questionId:d.value.id,type:d.value.type,isSkipped:t,result:!1,resultText:o,multipleChoices:[...Y.value],matchingLeft:null,matchingRight:null,ordering:null,shortText:""}):n!==-1&&y.value.splice(n,1);break}case k.MATCHING:{ne(n,{questionId:d.value.id,type:d.value.type,isSkipped:t,result:!1,resultText:o,multipleChoices:null,matchingLeft:[...z.value],matchingRight:[...V.value],ordering:null,shortText:""});break}case k.ORDERING:{ne(n,{questionId:d.value.id,type:d.value.type,isSkipped:t,result:!1,resultText:o,multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:[...W.value],shortText:""});break}case k.SHORT_TEXT:{L.value.trim()?ne(n,{questionId:d.value.id,type:d.value.type,isSkipped:t,result:!1,resultText:o,multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:null,shortText:L.value.trim()}):n!==-1&&y.value.splice(n,1);break}}},ge=(n,t)=>{var o,f;switch(n.type){case k.MULTIPLE_CHOICE:return{...t,multipleChoices:((o=n.questionData.multipleChoice)==null?void 0:o.filter(a=>a.isAnswer).map(a=>a.id))??[]};case k.MATCHING:{const a=n.questionData.matching,w=(a==null?void 0:a.matches)??[],v=(a==null?void 0:a.leftItems)??[],H=(a==null?void 0:a.rightItems)??[],j=w.map(Se=>v.find(we=>we.id==Se.leftId)),oe=w.map(Se=>H.find(we=>we.id==Se.rightId));return{...t,matchingLeft:j,matchingRight:oe}}case k.ORDERING:return{...t,ordering:((f=n.questionData.ordering)==null?void 0:f.slice().sort((a,w)=>a.correctOrder-w.correctOrder))??[]};case k.SHORT_TEXT:return{...t,shortText:n.questionData.shortText??""};default:return t}},Ae=()=>{c.value.questions.forEach(n=>{const t={questionId:n.id,type:n.type,isSkipped:!0,result:!1,resultText:h("learn_QS.result.skipped"),multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:null,shortText:""};let o=y.value.findIndex(f=>f.questionId===n.id);o===-1&&(y.value.push(ge(n,t)),o=y.value.length-1),y.value[o].isSkipped&&ne(o,{...y.value[o],...ge(n,{})})})},je=()=>{De(),y.value.length<c.value.questions.length?pt.confirm({title:`You missed ${c.value.questions.length-y.value.length} questions.`,content:"Are you certain about this decision?",okText:h("sidebar.buttons.ok"),cancelText:h("sidebar.buttons.cancel"),centered:!0,onOk:()=>{J.value=!0,Ae(),ve()}}):(J.value=!0,ve())},ve=()=>{const n=c.value.questions.findIndex(t=>t.id===d.value.id);se(n),y.value.filter(t=>t.isSkipped===!1).forEach(t=>{let o;switch(t.type){case k.MULTIPLE_CHOICE:{o=ke(t.questionId,t.multipleChoices),t.result=o,t.resultText=h(o?"learn_QS.result.correct":"learn_QS.result.wrong");break}case k.MATCHING:{o=Ie(t.questionId,t.matchingLeft,t.matchingRight),t.result=o,t.resultText=h(o?"learn_QS.result.correct":"learn_QS.result.wrong");break}case k.ORDERING:{o=Ce(t.questionId,t.ordering),t.result=o,t.resultText=h(o?"learn_QS.result.correct":"learn_QS.result.wrong");break}case k.SHORT_TEXT:{o=Qe(t.questionId,t.shortText),t.result=o,t.resultText=h(o?"learn_QS.result.correct":"learn_QS.result.wrong");break}}}),Re(),E.value.length===0&&qe()},Be=()=>{Q.value=!0;const n=y.value.findIndex(t=>t.questionId===d.value.id);ne(n,{questionId:d.value.id,type:d.value.type,isSkipped:!0,result:!1,resultText:h("learn_QS.result.skipped"),multipleChoices:Y.value,matchingLeft:z.value,matchingRight:V.value,ordering:W.value,shortText:L.value})},se=n=>{var o,f;ue(),Q.value=!1,d.value=c.value.questions[n];const t=y.value.find(a=>a.questionId===d.value.id);switch(d.value.type){case k.MULTIPLE_CHOICE:{P.value=h("learn_QS.instructions.multiple_choice",{number:(o=d.value.questionData.multipleChoice)==null?void 0:o.filter(a=>a.isAnswer).length}),Y.value=t?t==null?void 0:t.multipleChoices:[];break}case k.ORDERING:{P.value=h("learn_QS.instructions.ordering"),W.value=t?t==null?void 0:t.ordering:((f=d.value.questionData.ordering)==null?void 0:f.map(a=>a))||[];break}case k.MATCHING:{P.value=h("learn_QS.instructions.matching"),z.value=t?t==null?void 0:t.matchingLeft:d.value.questionData.matching.leftItems.map(a=>a)||[],V.value=t?t==null?void 0:t.matchingRight:d.value.questionData.matching.rightItems.map(a=>a)||{};break}case k.SHORT_TEXT:{P.value=h("learn_QS.instructions.short_text"),L.value=t?t==null?void 0:t.shortText:"";break}}},Je=()=>{Q.value=!1;const n=c.value.questions.findIndex(t=>t.id===d.value.id);n<c.value.questions.length-1&&se(n+1)},We=()=>{Q.value=!1;const n=c.value.questions.findIndex(t=>t.id===d.value.id);n>0&&se(n-1)},Xe=n=>Array.from(y.value).some(t=>t.questionId===n),Ke=n=>{var t;return(t=y.value.find(o=>o.questionId===n&&!o.isSkipped))==null?void 0:t.result},Ze=Z(()=>y.value.some(n=>n.questionId===d.value.id&&n.isSkipped)),$e=Z(()=>{const n=y.value.find(t=>t.questionId===d.value.id);return{result:n==null?void 0:n.result,resultText:n==null?void 0:n.resultText}}),et=Z(()=>{const n=c.value.questions.findIndex(t=>t.id===d.value.id);return n!==-1&&n<c.value.questions.length-1}),tt=Z(()=>{const n=c.value.questions.findIndex(t=>t.id===d.value.id);return n!==-1&&n>0}),nt=Z(()=>c.value.questions.findIndex(n=>n.id===d.value.id)),_e=()=>Math.floor((c.value.questions.length-E.value.length)/c.value.questions.length*100),Oe=()=>Math.floor(E.value.length/c.value.questions.length*100),pe=()=>{const n=$(".content-item-test-result");n&&$(n).slideToggle()},Re=()=>{pe(),He.setOptions({lang:{decimalPoint:".",thousandsSep:","}}),He.chart("result_chart_container",{chart:{type:"pie",custom:{},events:{render:function(){const n=this,t=n.series[0];let o=n.options.chart.custom.label;o||(o=n.options.chart.custom.label=n.renderer.label(`<strong>${_e()}%</strong>`,0,0).css({color:"var(--text-color)",textAnchor:"middle"}).add());const f=t.center[0]+n.plotLeft,a=t.center[1]+n.plotTop-o.attr("height")/2;o.attr({x:f,y:a}),o.css({fontSize:`${t.center[2]/8}px`})}}},credits:{enabled:!1},plotOptions:{pie:{borderWidth:0,borderRadius:3}},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.0f}%</b>"},series:[{type:"pie",name:"Result",colorByPoint:!0,innerSize:"75%",dataLabels:{enabled:!1},data:[{name:h("practice_test.other.correct"),y:_e(),color:"var(--correct-answer-color)"},{name:h("practice_test.other.incorrect"),y:Oe(),color:"var(--incorrect-answer-color)"}]}]})};de.extend(Mt);const be=C(),ye=C(""),xe=()=>{be.value=de()},De=()=>{const t=de().diff(be.value),o=Math.floor(t/1e3);if(o<60)ye.value=`${h("practice_test.other.your_time")} ${o} ${h(o===1?"practice_test.other.second":"practice_test.other.second_plural")}`;else{const f=de.duration(t),a=f.hours(),w=f.minutes();let v=h("practice_test.other.your_time");a>0&&(v+=`${a} ${a>1?h("practice_test.other.hour"):h("practice_test.other.hour_plural")} `),w>0&&(v+=`${w} ${w>1?h("practice_test.other.minute"):h("practice_test.other.minute_plural")}`),ye.value=v.trim()}},st={scroll:!0,scrollSensitivity:100,scrollSpeed:100,scrollTarget:document.scrollingElement};function ue(){bt(()=>{requestAnimationFrame(()=>{const n=document.querySelectorAll(".matching-option-container.left .answer-option-matching"),t=document.querySelectorAll(".matching-option-container.right .answer-option-matching"),o=Math.min(n.length,t.length);for(let f=0;f<o;f++){const a=n[f],w=t[f];if(!a||!w)continue;a.style.height="auto",w.style.height="auto";const v=Math.max(a.offsetHeight,w.offsetHeight);a.style.height=`${v}px`,w.style.height=`${v}px`}})})}const it=()=>{window.location.reload()},ot=()=>{R.push({name:"User_QuestionSet_Learn",params:{id:S.value}})},rt=()=>{const n=E.value.map(t=>t.questionId);c.value.questions=c.value.questions.filter(t=>n.includes(t.id)),G(),pe()},at=()=>{sessionStorage.setItem("setting_key","Subscription"),R.push({name:"User_Settings"})},lt=n=>{if(!n)return!1;let t=n==null?void 0:n.replace(/`[^`]*`/g,"");return t=t.trim().replace(/^<p>/i,"").replace(/<\/p>$/i,""),t.includes("<pre>")&&t.includes("</pre>")||t.includes("<code>")&&t.includes("</code>")||t.includes("<strong>")&&t.includes("</strong>")||t.includes("<i>")&&t.includes("</i>")||t.includes("<u>")&&t.includes("</u>")||t.includes("<ul>")&&t.includes("</ul>")||t.includes("<ol>")&&t.includes("</ol>")||t.includes("<li>")&&t.includes("</li>")},ut=n=>n?n.replace(/^<p>/i,"").replace(/<\/p>$/i,"").replace("<","'<").replace(">",">'"):"";Le(()=>s.numberOfQuestion,()=>{c.value.totalQuestionCount<=0||(s.numberOfQuestion>c.value.totalQuestionCount?s.numberOfQuestion=c.value.totalQuestionCount:s.numberOfQuestion<1&&(s.numberOfQuestion=1))}),vt(async()=>{let n=sessionStorage.getItem("test_settings");n&&(s.numberOfQuestion=Math.max(1,Math.min(c.value.totalQuestionCount,JSON.parse(n).numberOfQuestion)),s.questionTypes=JSON.parse(n).questionTypes),await ie(),await ae(),l(),se(0),ue(),window.addEventListener("resize",ue),xe()});const Ee={animationPath:O,route:e,router:R,t:h,quiz:c,incorrect:E,currentQuestion:d,currentQuestionInstruction:P,currentQuestionIsSkipped:Q,isSubmitted:J,isOptionExceed:X,userAnswerMultipleChoice:Y,userAnswerMatchingLeft:z,userAnswerMatchingRight:V,userAnswerOrdering:W,userAnswerShortText:L,userAnswer:y,reset:G,setting_modal_open:K,openSettingModal:l,closeSettingModal:g,settingFormRef:u,settingFormState:s,toggleQuestionType:T,onCreateNewTest:M,questionSetId:S,loading:A,isAllowed:D,quizTypes:F,getQuizTypes:ie,getQuizData:ae,animationRef:ce,isAnimationDisplaying:te,triggerAnimation:qe,checkMultipleChoice:ke,checkMultipleChoiceAnswerCorrect:Pe,checkOrdering:Ce,checkMatching:Ie,checkMatchingAnswerCorrect:ze,cleanShortTextAnswer:le,checkShortText:Qe,checkShortextCorrect:Me,getShortTextCorrectAnswer:Ve,explainModal:Fe,explainModalOpen:fe,toggleExplainModal:Ye,updateUserAnswer:ne,onUserAnswerChange:Ge,refactorLeftOverUserAnswer:ge,handleSkippedQuestion:Ae,onSubmitAnswer:je,getUserAnswerResult:ve,onSkipQuestion:Be,onLoadCurrentQuestion:se,onNextQuestion:Je,onPreviousQuestion:We,userAnswerContainQuestion:Xe,getUserAnswerResultById:Ke,userAnswerCurrentQuestionSkipped:Ze,userAnswerCurrentQuestionResult:$e,hasNextQuestion:et,hasPreviousQuestion:tt,currentQuestionIndex:nt,getCorrectPercentage:_e,getInCorrectPercentage:Oe,toggleResult:pe,generateChart:Re,startTime:be,timerResult:ye,timerStart:xe,timerEnd:De,dragOptions:st,syncMatchingHeights:ue,onNewTest:it,onRedirectToLearn:ot,onRetest:rt,onRedirectToSubcription:at,isHTMLContent:lt,processTextWithHtmlTag:ut,get QUESTION_TYPE(){return k},get DotLottieVue(){return xt},TextArea:St,get VueDraggable(){return wt},get HolderOutlined(){return Tt}};return Object.defineProperty(Ee,"__isScriptSetup",{enumerable:!1,value:!0}),Ee}}),Ot={key:0,class:"page-container"},Rt={class:"title-container title-container-header"},Dt={class:"content content-test d-flex flex-column"},Et={class:"d-flex"},Lt={class:"content-item question-navigators"},Ht={class:"question-navigator-title"},Nt={key:1,class:"question-navigator-container"},Ut=["onClick"],Pt={class:"content-item content-item-test-result"},zt={class:"result-container"},Vt={class:"result-section"},Ft={class:"result-section-title"},Yt={class:"result-section-statistic"},Gt={class:"result-text-container"},jt={class:"result-text correct"},Bt={class:"result-text incorrect"},Jt={class:"result-section result-section-buttons"},Wt={class:"result-section-title"},Xt={class:"result-button-title"},Kt={class:"result-button-content"},Zt={class:"result-button-title"},$t={class:"result-button-content"},en={class:"result-button-title"},tn={class:"result-button-content"},nn={class:"content-item"},sn={key:1,class:"section question-section"},on={class:"question-info-index"},rn=["innerHTML"],an={key:1,class:"learn-question text"},ln={class:"section answer-section"},un={class:"d-flex align-items-center"},cn={class:"answer-section-ins"},dn={class:"answer-option-content"},hn={key:0,class:"bx bx-check answer-icon"},mn={key:1,class:"bx bx-x answer-icon"},fn={key:1,class:"answer-option-container matching"},gn={class:"matching-option-container left"},vn={class:"d-flex align-items-center"},_n={class:"answer-option-order"},pn={class:"answer-option-content"},bn={class:"matching-option-container right"},yn={class:"d-flex align-items-center"},xn={class:"answer-option-content"},Sn={class:"answer-option-order"},wn={key:2,class:"answer-option-container ordering"},Tn={class:"answer-option-order"},qn={class:"answer-option-content"},kn={key:3,class:"answer-option-container"},Cn={class:"w-100 d-flex align-items-center"},In={key:0,class:"bx bx-check answer-icon"},Qn={key:1,class:"bx bx-x answer-icon"},Mn={key:0,class:"short-text-correct-answer"},An={class:"learn-question-footer"},On={class:"d-flex"},Rn=["innerHTML"],Dn={key:1,class:"learn-question-explain text"},En={key:1,class:"page-container"},Ln={class:"w-100 h-100 d-flex align-items-center justify-content-center"},Hn={class:"d-flex justify-content-center"},Nn={class:"title-container"},Un={class:"setting-form-item"},Pn={class:"setting-form-item setting-form-switch"};function zn(q,r,O,e,R,h){const c=N("RouterLink"),E=N("a-col"),d=N("a-row"),P=N("a-skeleton"),Q=N("a-button"),J=N("a-checkbox"),X=N("a-checkbox-group"),Y=N("CloseSquareFilled"),z=N("a-result"),V=N("a-input-number"),W=N("a-form-item"),L=N("a-divider"),y=N("a-switch"),G=N("a-form"),K=N("a-modal");return _(),b(ee,null,[e.isAllowed?(_(),b("div",Ot,[e.isAnimationDisplaying?(_(),he(e.DotLottieVue,{key:0,autoplay:e.isAnimationDisplaying,ref:"animationRef",class:I(["animation-container"]),onComplete:r[0]||(r[0]=l=>e.isAnimationDisplaying=!1),src:e.animationPath},null,8,["autoplay","src"])):B("v-if",!0),i("div",Rt,[p(d,{class:"w-100 d-flex align-items-center"},{default:x(()=>[p(E,{span:1},{default:x(()=>[p(c,{to:{name:"User_Library"}},{default:x(()=>r[10]||(r[10]=[i("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[10]})]),_:1}),p(E,{class:"main-title",span:22},{default:x(()=>[i("span",null,m(e.quiz.title),1),r[11]||(r[11]=U()),r[12]||(r[12]=i("br",null,null,-1)),i("span",null,m(e.quiz.description),1)]),_:1,__:[11,12]}),p(E,{span:1},{default:x(()=>[i("i",{class:"bx bx-cog test-setting-btn",onClick:e.openSettingModal})]),_:1})]),_:1})]),i("div",Dt,[i("div",Et,[i("div",Lt,[i("div",Ht,m(e.t("practice_test.other.question_list")),1),e.loading?(_(),he(P,{key:0,active:"",loading:e.loading},null,8,["loading"])):(_(),b("div",Nt,[(_(!0),b(ee,null,re(e.quiz.questions,(l,g)=>(_(),b("div",{class:I(["question-navigation-item-outer",e.currentQuestion.id===l.id?"current-question":""])},[i("div",{class:I(["question-navigator-item",e.userAnswerContainQuestion(l.id)?"completed-question":"",e.isSubmitted?e.getUserAnswerResultById(l.id)?"correct":"incorrect":""]),onClick:u=>e.onLoadCurrentQuestion(g)},[i("span",null,m(g+1),1)],10,Ut)],2))),256))])),p(Q,{disabled:e.isSubmitted,type:"primary",class:I(["main-color-btn",e.isSubmitted?"main-color-btn-disabled":""]),onClick:e.onSubmitAnswer},{default:x(()=>[U(m(q.$t("learn_QS.buttons.submit")),1)]),_:1},8,["disabled","class"])]),i("div",Pt,[i("div",zt,[i("div",Vt,[i("div",Ft,m(e.timerResult),1),i("div",Yt,[r[13]||(r[13]=i("div",{id:"result_chart_container"},null,-1)),i("div",Gt,[i("div",jt,[U(m(q.$t("practice_test.other.correct"))+" ",1),i("span",null,m(e.quiz.questions.length-e.incorrect.length),1)]),i("div",Bt,[U(m(q.$t("practice_test.other.incorrect"))+" ",1),i("span",null,m(e.incorrect.length),1)])])])]),i("div",Jt,[i("div",Wt,m(q.$t("practice_test.final_modal.button_title")),1),i("div",{class:"result-button",onClick:e.onNewTest},[r[14]||(r[14]=i("i",{class:"bx bxs-news"},null,-1)),i("div",null,[i("div",Xt,m(q.$t("practice_test.final_modal.buttons.new_test")),1),i("div",Kt,m(q.$t("practice_test.final_modal.buttons_ins.new_test")),1)])]),e.getInCorrectPercentage()>0?(_(),b("div",{key:0,class:"result-button",onClick:e.onRetest},[r[15]||(r[15]=i("i",{class:"bx bx-reset"},null,-1)),i("div",null,[i("div",Zt,m(q.$t("practice_test.final_modal.buttons.re_test")),1),i("div",$t,m(q.$t("practice_test.final_modal.buttons_ins.re_test")),1)])])):(_(),b("div",{key:1,class:"result-button",onClick:e.onRedirectToLearn},[r[16]||(r[16]=i("i",{class:"bx bx-analyse"},null,-1)),i("div",null,[i("div",en,m(q.$t("practice_test.final_modal.buttons.practice")),1),i("div",tn,m(q.$t("practice_test.final_modal.buttons_ins.practice")),1)])]))])])])]),i("div",nn,[e.loading?(_(),b(ee,{key:0},[p(P,{active:"",loading:e.loading},null,8,["loading"]),p(P,{active:"",loading:e.loading},null,8,["loading"]),p(P,{active:"",loading:e.loading},null,8,["loading"])],64)):(_(),b("div",sn,[i("div",on,m(q.$t("create_QS.question.question"))+" "+m(e.currentQuestionIndex+1),1),e.isHTMLContent(e.currentQuestion.questionText)?(_(),b("div",{key:0,class:"learn-question html",innerHTML:e.currentQuestion.questionText},null,8,rn)):(_(),b("div",an,m(e.processTextWithHtmlTag(e.currentQuestion.questionText)),1)),B(` <div
                            :class="[
                                'learn-question',
                                currentQuestion.textFormat === QUESTION_FORMAT.HTML ? 'd-none' : '',
                            ]"
                        >
                            {{ currentQuestion.questionText }}
                        </div> `),i("div",ln,[i("div",un,[i("div",cn,m(e.currentQuestionInstruction),1),i("div",{class:I(["ms-3 learn-question-result",e.isSubmitted?e.userAnswerCurrentQuestionResult.result?"result-correct":"result-incorrect":"",e.userAnswerCurrentQuestionSkipped?"result-skipped":""])},m(e.userAnswerCurrentQuestionResult.resultText),3)]),e.currentQuestion.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(_(),he(X,{key:0,onChange:e.onUserAnswerChange,value:e.userAnswerMultipleChoice,"onUpdate:value":r[1]||(r[1]=l=>e.userAnswerMultipleChoice=l),class:I(["answer-option-container multiplechoice",e.isOptionExceed?"column":""])},{default:x(()=>[(_(!0),b(ee,null,re(e.currentQuestion.questionData.multipleChoice,(l,g)=>(_(),he(J,{value:l.id,"onUpdate:value":u=>l.id=u,disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,class:I(["answer-option answer-option-multiplechoice",e.isSubmitted&&e.checkMultipleChoiceAnswerCorrect(l)&&l.isAnswer?"answer-correct":"",e.isSubmitted&&!e.checkMultipleChoiceAnswerCorrect(l)&&!l.isAnswer?"answer-incorrect":""])},{default:x(()=>[i("div",dn,m(l.text),1),e.isSubmitted&&e.checkMultipleChoiceAnswerCorrect(l)&&l.isAnswer?(_(),b("i",hn)):B("v-if",!0),e.isSubmitted&&!e.checkMultipleChoiceAnswerCorrect(l)&&!l.isAnswer?(_(),b("i",mn)):B("v-if",!0)]),_:2},1032,["value","onUpdate:value","disabled","class"]))),256))]),_:1},8,["value","class"])):B("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.MATCHING?(_(),b("div",fn,[i("div",gn,[p(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerMatchingLeft,"onUpdate:modelValue":r[2]||(r[2]=l=>e.userAnswerMatchingLeft=l),options:e.dragOptions,onMove:e.syncMatchingHeights,onEnd:r[3]||(r[3]=()=>{e.syncMatchingHeights(),e.onUserAnswerChange()})},{default:x(()=>[(_(!0),b(ee,null,re(e.userAnswerMatchingLeft,(l,g)=>(_(),b("div",vn,[i("div",{class:I(["answer-option answer-option-matching",e.isSubmitted?e.checkMatchingAnswerCorrect(l.id)?"answer-correct":"answer-incorrect":""])},[i("div",_n,[p(e.HolderOutlined)]),i("div",pn,m(l.text),1)],2),i("i",{class:I(["bx bxs-label matching-icon",e.isSubmitted?e.checkMatchingAnswerCorrect(l.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2)]))),256))]),_:1},8,["disabled","modelValue"])]),i("div",bn,[p(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerMatchingRight,"onUpdate:modelValue":r[4]||(r[4]=l=>e.userAnswerMatchingRight=l),options:e.dragOptions,onMove:e.syncMatchingHeights,onEnd:r[5]||(r[5]=()=>{e.syncMatchingHeights(),e.onUserAnswerChange()})},{default:x(()=>[(_(!0),b(ee,null,re(e.userAnswerMatchingRight,(l,g)=>(_(),b("div",yn,[i("i",{class:I(["bx bxs-label matching-icon",e.isSubmitted?e.checkMatchingAnswerCorrect(l.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2),i("div",{class:I(["answer-option answer-option-matching",e.isSubmitted?e.checkMatchingAnswerCorrect(l.id)?"answer-correct":"answer-incorrect":""])},[i("div",xn,m(l.text),1),i("div",Sn,[p(e.HolderOutlined)])],2)]))),256))]),_:1},8,["disabled","modelValue"])])])):B("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.ORDERING?(_(),b("div",wn,[p(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerOrdering,"onUpdate:modelValue":r[6]||(r[6]=l=>e.userAnswerOrdering=l),options:e.dragOptions,onEnd:e.onUserAnswerChange},{default:x(()=>[(_(!0),b(ee,null,re(e.userAnswerOrdering,(l,g)=>(_(),b("div",{class:I(["answer-option answer-option-ordering",e.isSubmitted?g===l.correctOrder?"answer-correct":"answer-incorrect":""])},[i("div",Tn,[p(e.HolderOutlined),U(" "+m(g+1),1)]),i("div",qn,m(l.text),1),i("div",{class:I(["answer-option-order answer-icon",e.isSubmitted?"":"d-none"])},[r[17]||(r[17]=i("i",{class:"bx bx-hash answer-icon"},null,-1)),U(" "+m(l.correctOrder+1),1)],2)],2))),256))]),_:1},8,["disabled","modelValue"])])):B("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.SHORT_TEXT?(_(),b("div",kn,[i("div",{class:I(["answer-short-text",e.isSubmitted?e.checkShortextCorrect()?"answer-correct":"answer-incorrect":""])},[i("div",Cn,[p(e.TextArea,{readonly:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,placeholder:"Enter your answer...",modelValue:e.userAnswerShortText,"onUpdate:modelValue":r[7]||(r[7]=l=>e.userAnswerShortText=l),onChange:e.onUserAnswerChange},null,8,["readonly","modelValue"]),e.isSubmitted&&e.checkShortextCorrect()?(_(),b("i",In)):B("v-if",!0),e.isSubmitted&&!e.checkShortextCorrect()?(_(),b("i",Qn)):B("v-if",!0)]),e.isSubmitted&&!e.checkShortextCorrect()?(_(),b("div",Mn,[r[18]||(r[18]=U(" Correct answer: ")),i("span",null,m(e.getShortTextCorrectAnswer),1)])):B("v-if",!0)],2)])):B("v-if",!0)]),i("div",An,[p(Q,{class:I(["main-color-btn",e.hasPreviousQuestion?"":"main-color-btn-disabled"]),type:"primary",size:"large",onClick:e.onPreviousQuestion},{default:x(()=>[r[19]||(r[19]=i("i",{class:"bx bx-chevron-left"},null,-1)),U(" "+m(q.$t("practice_test.buttons.previous")),1)]),_:1,__:[19]},8,["class"]),e.isSubmitted?(_(),b("div",{key:1,class:I(["main-color-btn-ghost me-3"]),onClick:e.toggleExplainModal},[r[20]||(r[20]=i("i",{class:"bx bx-bulb me-2"},null,-1)),U(" "+m(q.$t("learn_QS.buttons.explaination")),1)])):(_(),b("div",{key:0,class:I(["main-color-btn-ghost",e.userAnswerCurrentQuestionSkipped||e.isSubmitted?"main-color-btn-ghost-disabled":""]),onClick:r[8]||(r[8]=l=>e.onSkipQuestion())},m(q.$t("learn_QS.buttons.dont_know")),3)),i("div",On,[p(Q,{class:I(["main-color-btn",e.hasNextQuestion?"":"main-color-btn-disabled"]),type:"primary",size:"large",onClick:e.onNextQuestion},{default:x(()=>[U(m(q.$t("learn_QS.buttons.next_question"))+" ",1),r[21]||(r[21]=i("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[21]},8,["class"])])])]))]),i("div",{ref:"explainModal",class:I(["explain-modal explain-modal-up",{show:e.explainModalOpen}])},[e.isHTMLContent(e.currentQuestion.explainText)?(_(),b("div",{key:0,class:"learn-question-explain html",innerHTML:e.currentQuestion.explainText},null,8,Rn)):(_(),b("div",Dn,m(e.processTextWithHtmlTag(e.currentQuestion.explainText)),1)),p(Q,{class:I(["main-color-btn close-modal-btn"]),type:"primary",size:"large",onClick:e.toggleExplainModal},{default:x(()=>r[22]||(r[22]=[i("i",{class:"bx bx-chevrons-down"},null,-1)])),_:1,__:[22]}),p(Q,{class:I(["main-color-btn",e.hasNextQuestion?"":"main-color-btn-disabled"]),type:"primary",size:"large",onClick:e.onNextQuestion},{default:x(()=>[U(m(q.$t("learn_QS.buttons.next_question"))+" ",1),r[23]||(r[23]=i("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[23]},8,["class"])],2)])])):(_(),b("div",En,[i("div",Ln,[p(z,{status:"error",title:e.t("now_allowed.main_msg"),"sub-title":e.t("now_allowed.errorMessage")},{icon:x(()=>[p(Y)]),extra:x(()=>[i("div",Hn,[p(Q,{key:"console",type:"primary",class:"me-3 main-color-btn"},{default:x(()=>[U(m(q.$t("now_allowed.libraryNavigator")),1)]),_:1}),p(Q,{onClick:e.onRedirectToSubcription,key:"buy",type:"ghost",class:"main-color-btn-ghost"},{default:x(()=>[U(m(q.$t("now_allowed.subscriptionNavigator")),1)]),_:1})])]),_:1},8,["title","sub-title"])])])),p(K,{centered:"","wrap-class-name":"medium-modal",open:e.setting_modal_open,onCancel:e.closeSettingModal},{footer:x(()=>[p(Q,{type:"primary",class:"main-color-btn",size:"large",shape:"round",onClick:e.onCreateNewTest},{default:x(()=>[U(m(e.t("practice_test.setting_modal.create_new_test")),1)]),_:1})]),default:x(()=>[i("div",Nn,[p(d,{class:"w-100 d-flex align-items-center justify-content-between"},{default:x(()=>[p(E,{span:1},{default:x(()=>[i("div",{onClick:e.closeSettingModal},r[24]||(r[24]=[i("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)]))]),_:1}),p(E,{class:"main-title",span:20},{default:x(()=>[i("span",null,m(q.$t("practice_test.setting_modal.title")),1),r[25]||(r[25]=U()),r[26]||(r[26]=i("br",null,null,-1))]),_:1,__:[25,26]})]),_:1})]),p(G,{class:"setting-form"},{default:x(()=>[p(W,null,{default:x(()=>[i("div",Un,[i("div",null,m(q.$t("practice_test.setting_modal.max_question",{length:e.quiz.totalQuestionCount})),1),p(V,{size:"large",id:"inputNumber",value:e.settingFormState.numberOfQuestion,"onUpdate:value":r[9]||(r[9]=l=>e.settingFormState.numberOfQuestion=l),min:1,max:e.quiz.totalQuestionCount,precision:0},null,8,["value","max"])])]),_:1}),p(L,{style:{"background-color":"var(--form-item-border-color)"}}),p(W,null,{default:x(()=>[(_(!0),b(ee,null,re(e.quizTypes,l=>(_(),b("div",Pn,[i("div",null,m(e.t(`create_QS.type.${l}`)),1),p(y,{disabled:e.settingFormState.questionTypes.length<=1&&e.settingFormState.questionTypes.includes(l),checked:e.settingFormState.questionTypes.includes(l),onChange:g=>e.toggleQuestionType(l,g)},null,8,["disabled","checked","onChange"])]))),256))]),_:1})]),_:1})]),_:1},8,["open"])],64)}const Kn=yt(At,[["render",zn],["__scopeId","data-v-4662dd21"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/question_sets/test.vue"]]);export{Kn as default};
