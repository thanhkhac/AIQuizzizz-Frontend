import{y as B,z as xe,d as Oe,u as Re,B as oe,i as M,C as Ce,s as qe,j as Ae,M as P,_ as Ue,r as x,a as C,o as k,e as p,b as O,c as S,w as y,t as G,F as ie,D as se,E as D,f as A}from"./index-CNJWNuZR.js";import{I as Ee}from"./Input-CgwF4PuG.js";import{A as U}from"./ApiAdmin-PK9-5DnE.js";/* empty css                                                              */var L,ce;function we(){if(ce)return L;ce=1;function r(e){var o=typeof e;return e!=null&&(o=="object"||o=="function")}return L=r,L}var F,le;function Ne(){if(le)return F;le=1;var r=typeof B=="object"&&B&&B.Object===Object&&B;return F=r,F}var V,ue;function ke(){if(ue)return V;ue=1;var r=Ne(),e=typeof self=="object"&&self&&self.Object===Object&&self,o=r||e||Function("return this")();return V=o,V}var W,de;function Be(){if(de)return W;de=1;var r=ke(),e=function(){return r.Date.now()};return W=e,W}var K,fe;function Me(){if(fe)return K;fe=1;var r=/\s/;function e(o){for(var t=o.length;t--&&r.test(o.charAt(t)););return t}return K=e,K}var Q,me;function Pe(){if(me)return Q;me=1;var r=Me(),e=/^\s+/;function o(t){return t&&t.slice(0,r(t)+1).replace(e,"")}return Q=o,Q}var H,_e;function Se(){if(_e)return H;_e=1;var r=ke(),e=r.Symbol;return H=e,H}var X,ve;function ze(){if(ve)return X;ve=1;var r=Se(),e=Object.prototype,o=e.hasOwnProperty,t=e.toString,l=r?r.toStringTag:void 0;function h(m){var u=o.call(m,l),f=m[l];try{m[l]=void 0;var n=!0}catch{}var c=t.call(m);return n&&(u?m[l]=f:delete m[l]),c}return X=h,X}var Y,be;function Ge(){if(be)return Y;be=1;var r=Object.prototype,e=r.toString;function o(t){return e.call(t)}return Y=o,Y}var J,ge;function De(){if(ge)return J;ge=1;var r=Se(),e=ze(),o=Ge(),t="[object Null]",l="[object Undefined]",h=r?r.toStringTag:void 0;function m(u){return u==null?u===void 0?l:t:h&&h in Object(u)?e(u):o(u)}return J=m,J}var Z,pe;function Le(){if(pe)return Z;pe=1;function r(e){return e!=null&&typeof e=="object"}return Z=r,Z}var $,ye;function Fe(){if(ye)return $;ye=1;var r=De(),e=Le(),o="[object Symbol]";function t(l){return typeof l=="symbol"||e(l)&&r(l)==o}return $=t,$}var ee,he;function Ve(){if(he)return ee;he=1;var r=Pe(),e=we(),o=Fe(),t=NaN,l=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,m=/^0o[0-7]+$/i,u=parseInt;function f(n){if(typeof n=="number")return n;if(o(n))return t;if(e(n)){var c=typeof n.valueOf=="function"?n.valueOf():n;n=e(c)?c+"":c}if(typeof n!="string")return n===0?n:+n;n=r(n);var _=h.test(n);return _||m.test(n)?u(n.slice(2),_?2:8):l.test(n)?t:+n}return ee=f,ee}var te,Te;function We(){if(Te)return te;Te=1;var r=we(),e=Be(),o=Ve(),t="Expected a function",l=Math.max,h=Math.min;function m(u,f,n){var c,_,w,i,s,g,j=0,E=!1,T=!1,v=!0;if(typeof u!="function")throw new TypeError(t);f=o(f)||0,r(n)&&(E=!!n.leading,T="maxWait"in n,w=T?l(o(n.maxWait)||0,f):w,v="trailing"in n?!!n.trailing:v);function R(d){var I=c,q=_;return c=_=void 0,j=d,i=u.apply(q,I),i}function a(d){return j=d,s=setTimeout(N,f),E?R(d):i}function b(d){var I=d-g,q=d-j,re=f-I;return T?h(re,w-q):re}function ne(d){var I=d-g,q=d-j;return g===void 0||I>=f||I<0||T&&q>=w}function N(){var d=e();if(ne(d))return ae(d);s=setTimeout(N,b(d))}function ae(d){return s=void 0,v&&c?R(d):(c=_=void 0,i)}function Ie(){s!==void 0&&clearTimeout(s),j=0,c=g=_=s=void 0}function je(){return s===void 0?i:ae(e())}function z(){var d=e(),I=ne(d);if(c=arguments,_=this,g=d,I){if(s===void 0)return a(g);if(T)return clearTimeout(s),s=setTimeout(N,f),R(g)}return s===void 0&&(s=setTimeout(N,f)),i}return z.cancel=Ie,z.flush=je,z}return te=m,te}var Ke=We();const Qe=xe(Ke),He=Oe({__name:"manage_acc",emits:["updateSidebar"],setup(r,{expose:e,emit:o}){e();const t=o,{t:l}=Re(),h=["all","active","ban"],m=oe(()=>h.map(a=>({label:l(`admin.manage_acc.acc_status.${a}`),value:a}))),u=M(m.value[0].value),f=["all","Administrator","Moderator","User"],n=oe(()=>f.map(a=>({label:l(`admin.manage_acc.acc_role.${a}`),value:a}))),c=M(n.value[0].value),_=M(""),w=async()=>{console.log({search:_.value,status:u.value,role:c.value}),T.keyword=_.value,u.value==="all"?delete T.IsBanned:T.IsBanned=u.value==="ban",T.role=c.value==="all"?"":c.value,v()};Ce(_,Qe(a=>{w()},300));const i=[{title:"ID",dataIndex:"id",customRender:({index:a})=>a+1,width:50,align:"center"},{title:"Fullname",dataIndex:"fullName",key:"fullName",sorter:(a,b)=>a.fullName.localeCompare(b.fullName),width:350,align:"center"},{title:"Email",dataIndex:"email",key:"email",sorter:(a,b)=>a.email.localeCompare(b.email),width:450,align:"center"},{title:"Token",dataIndex:"token",key:"token",sorter:(a,b)=>a.token-b.token,width:100,align:"center"},{title:"Role",dataIndex:"role",key:"role",sorter:(a,b)=>a.role.localeCompare(b.role),defaultSortOrder:"ascend",width:100,align:"center"},{title:"",key:"ban",width:120,align:"center"}];qe(()=>{t("updateSidebar","account"),v()});const s=M([]);async function g(a){try{a.isBanned?P.confirm({title:"Confirm Ban User",content:"Are you sure you want to ban this user?",centered:!0,onOk:async()=>{await U.BanUser(a.id,{isBanned:!0}),await v()},onCancel:async()=>{await v()}}):P.confirm({title:"Confirm Active User",content:"Are you sure you want to activate this user?",centered:!0,onOk:async()=>{await U.BanUser(a.id,{isBanned:!1}),await v()},onCancel:async()=>{await v()}})}catch(b){console.error("Toggle active ERROR:",b)}}async function j(a){try{console.log("Promote uid: ",a.id),P.confirm({title:"Promote User to Moderator",content:"Are you sure you want to promote this user to Moderator?",centered:!0,onOk:async()=>{await U.AssignRole(a.id,{role:"Moderator"}),await v()},onCancel:async()=>{await v()}})}catch(b){console.error("Promote to Moderator:",b)}}async function E(a){try{console.log("Demote uid: ",a.id),P.confirm({title:"Demote Moderator to User",content:"Are you sure you want to demote this moderator to User?",centered:!0,onOk:async()=>{await U.AssignRole(a.id,{role:"User"}),await v()},onCancel:async()=>{await v()}})}catch(b){console.error("Toggle active ERROR:",b)}}const T=Ae({fieldName:"Email",keyword:"",pageNumber:1,pageSize:15}),v=async()=>{try{let a=await U.GetAllUser(T);a.data.success&&(s.value=a.data.data.items)}catch(a){console.log("ERROR: GETALLBYLIMIT testtemplate: "+a)}},R={emit:t,t:l,optionKeysAccStatus:h,account_status_credit_options:m,selected_acc_status_option:u,optionKeysAccRole:f,account_role_credit_options:n,selected_acc_role_option:c,searchValue:_,onFilter:w,columns:i,dataSource:s,onToggle:g,onPromoteToModerator:j,onDemoteToUser:E,payloadGetUsers:T,getUsersData:v,Input:Ee};return Object.defineProperty(R,"__isScriptSetup",{enumerable:!1,value:!0}),R}}),Xe={class:"page-container"},Ye={class:"title-container"},Je={class:"content"},Ze={class:"filter-input-item"},$e={class:"filter-input-full"},et={class:"account-table"},tt={key:0,class:"action-cell"},nt=["onClick"],at=["onClick"];function rt(r,e,o,t,l,h){const m=x("a-col"),u=x("a-row"),f=x("a-select-option"),n=x("a-select"),c=x("a-tooltip"),_=x("a-switch"),w=x("a-table");return k(),C("div",Xe,[p(" header title "),O("div",Ye,[S(u,{class:"w-100"},{default:y(()=>[S(m,{class:"main-title",span:20},{default:y(()=>[O("span",null,G(t.t("admin.manage_acc.title")),1)]),_:1})]),_:1})]),O("div",Je,[p(" filter area "),O("div",Ze,[p(" filter text input  "),O("div",$e,[S(t.Input,{class:"custom-input",value:t.searchValue,"onUpdate:value":e[0]||(e[0]=i=>t.searchValue=i),placeholder:t.t("admin.manage_acc.search_placeholder")},{icon:y(()=>e[3]||(e[3]=[O("i",{class:"bx bx-search"},null,-1)])),_:1},8,["value","placeholder"])]),p(" filter account status "),S(n,{style:{width:"calc(19%)"},value:t.selected_acc_status_option,"onUpdate:value":e[1]||(e[1]=i=>t.selected_acc_status_option=i),onChange:t.onFilter},{default:y(()=>[(k(!0),C(ie,null,se(t.account_status_credit_options,i=>(k(),D(f,{key:i.value,value:i.value},{default:y(()=>[A(G(i.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"]),p(" filter account role "),S(n,{style:{width:"calc(19%)"},value:t.selected_acc_role_option,"onUpdate:value":e[2]||(e[2]=i=>t.selected_acc_role_option=i),onChange:t.onFilter},{default:y(()=>[(k(!0),C(ie,null,se(t.account_role_credit_options,i=>(k(),D(f,{key:i.value,value:i.value},{default:y(()=>[A(G(i.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),p(" table list account "),O("div",et,[S(w,{"data-source":t.dataSource,columns:t.columns,"row-key":"id"},{bodyCell:y(({column:i,record:s})=>[i.key==="ban"?(k(),C("div",tt,[p(" icon assign moderator "),S(c,null,{title:y(()=>e[4]||(e[4]=[A(" Demote moderator to User ")])),default:y(()=>[s.role==="Moderator"?(k(),C("i",{key:0,class:"bx bx-id-card",style:{color:"#ff002e","font-size":"25px"},onClick:g=>t.onDemoteToUser(s)},null,8,nt)):p("v-if",!0)]),_:2},1024),p(" icon assign user "),S(c,null,{title:y(()=>e[5]||(e[5]=[A(" Promote user to Moderator ")])),default:y(()=>[s.role==="User"?(k(),C("i",{key:0,class:"bx bx-id-card",style:{color:"#fff","font-size":"25px"},onClick:g=>t.onPromoteToModerator(s)},null,8,at)):p("v-if",!0)]),_:2},1024),p(" button ban.active user "),S(c,null,{title:y(()=>e[6]||(e[6]=[A(" Ban/Active ")])),default:y(()=>[s.role!=="Administrator"?(k(),D(_,{key:0,checked:s.isBanned,"onUpdate:checked":g=>s.isBanned=g,"checked-children":"","un-checked-children":"",onChange:g=>t.onToggle(s)},null,8,["checked","onUpdate:checked","onChange"])):p("v-if",!0)]),_:2},1024)])):p("v-if",!0)]),_:1},8,["data-source"]),p(` <div class="pagination-container">
                    <a-pagination
                        @change="onPaginationChange"
                        v-model:current="pageParams.pageNumber"
                        :total="pageParams.totalCount"
                        :pageSize="pageParams.pageSize"
                        :show-total="
                            (total: any, range: any) =>
                                \`\${range[0]}-\${range[1]} of \${total} \${t('class_member.other.items')}\`
                        "
                        show-size-changer
                        show-quick-jumper
                        class="crud-layout-pagination"
                        :locale="{
                            items_per_page: t('class_index.other.pages'),
                        }"
                    ></a-pagination>
                </div> `)])])])}const lt=Ue(He,[["render",rt],["__scopeId","data-v-a9d2c947"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/admin/account/manage_acc.vue"]]);export{lt as default};
