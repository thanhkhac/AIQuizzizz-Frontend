import{d as O,q as V,l as j,g as G,u as Q,B as H,i as x,j as R,C as K,s as Y,k as A,_ as J,r as i,a as p,o as m,b as o,c as r,f as b,t as d,w as s,F as q,D,E as W}from"./index-BZibwNZh.js";import{A as T}from"./ApiFolder-P72UWJMT.js";import{F as U}from"./folderShareMode-BudLQ2R2.js";import{I as X}from"./Input-CsLykV0d.js";const Z=O({__name:"index",emits:["updateSidebar"],setup(_,{expose:a,emit:I}){var P;a();const e=V(),h=j(),L=G(),{t:u}=Q(),g=I,S=Object.values(U),y=H(()=>S.map(n=>({label:u(`folder_index.select_option.${n}`),value:n!==U.ALL?n:""}))),F=x([]),t=R({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,folderName:((P=e.query.folderName)==null?void 0:P.toString())||"",shareMode:e.query.shareMode||y.value[0].value,totalCount:0,statusFilter:!1}),N=x(!1),c=async()=>{try{N.value=!0;let n=await T.GetAllByLimit(t);if(n.data.success){let f=n.data.data;F.value=f.items,t.pageNumber=f.pageNumber,t.pageSize=f.pageSize,t.totalCount=f.totalCount,t.statusFilter&&(t.pageNumber>f.totalPages&&t.totalCount>0?(t.pageNumber=1,h.push({name:"User_Folder",query:{pageNumber:1,pageSize:t.pageSize,folderName:t.folderName,shareMode:t.shareMode}})):h.push({name:"User_Folder",query:{pageNumber:t.pageNumber,pageSize:t.pageSize,folderName:t.folderName,shareMode:t.shareMode}}),t.statusFilter=!t.statusFilter)}}catch(n){console.log("ERROR: GETALLBYLIMIT folder: "+n)}finally{N.value=!1}};K(()=>Object.keys(e.query).length,()=>{var n;t.pageNumber=e.query.pageNumber||1,t.pageSize=e.query.pageSize||10,t.folderName=((n=e.query.folderName)==null?void 0:n.toString())||"",t.shareMode=e.query.shareMode||y.value[0].value,t.statusFilter=!0,c()});const C=(n,f)=>{t.pageNumber=n,t.pageSize=f,t.statusFilter=!0,c()},w={folderName:[{required:!0,message:"This field is required.",trigger:"change"},{max:100,message:"Limit 100.",trigger:"change"}]},z=x(!1),l=x(),v=R({folderName:""}),k=x(!1),B=async()=>{k.value=!0;try{if(await l.value.validate(),!(await T.Create(v)).data.success){A.error(u("message.created_failed"));return}A.success(u("message.created_successfully")),z.value=!1,await c()}catch(n){console.log(n)}finally{k.value=!1}},E=n=>{h.push({name:"User_Folder_Detail",params:{id:n}})};Y(async()=>{g("updateSidebar","folder"),await c()});const M={route:e,router:h,authStore:L,t:u,emit:g,optionKeys:S,folder_share_mode_options:y,folder_data:F,pageParams:t,loading:N,getData:c,onPaginationChange:C,rules:w,modal_create_open:z,createFolderFormRef:l,createFolderFormState:v,isCreateLoading:k,onCreateFolder:B,onRedirectToFolderDetail:E,Input:X};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}}),$={class:"page-container"},ee={class:"title-container"},ae={class:"main-title"},te={class:"title-button-container"},oe={class:"content"},le={class:"content-item"},ne={class:"content-item-functions"},re={class:"content-item-navigators"},se={class:"navigator-container"},ie={class:"filter-container"},de={style:{width:"300px",padding:"0px"}},ce={key:0,class:"folder-container"},me={key:1,class:"folder-container"},_e=["onClick"],ue={class:"folder-name"},fe={key:1,class:"w-100 m-2 d-flex justify-content-center"},pe={class:"pagination-container"},ge={class:"modal-container"},ve={class:"modal-title-container"};function be(_,a,I,e,h,L){const u=i("a-button"),g=i("RouterLink"),S=i("a-select-option"),y=i("a-select"),F=i("a-skeleton"),t=i("a-empty"),N=i("a-pagination"),c=i("a-col"),C=i("a-row"),w=i("a-form"),z=i("a-modal");return m(),p(q,null,[o("div",$,[o("div",ee,[o("div",ae,[o("span",null,d(_.$t("folder_index.title")),1),a[7]||(a[7]=b()),a[8]||(a[8]=o("br",null,null,-1)),o("span",null,d(_.$t("folder_index.sub_title")),1)]),o("div",te,[r(u,{type:"primary",class:"ms-3 main-color-btn",size:"large",onClick:a[0]||(a[0]=l=>e.modal_create_open=!0)},{default:s(()=>[b(d(_.$t("folder_index.buttons.create_folder"))+" ",1),a[9]||(a[9]=o("i",{class:"bx bx-plus"},null,-1))]),_:1,__:[9]})])]),o("div",oe,[o("div",le,[o("div",ne,[o("div",re,[o("div",se,[r(g,{class:"navigator-item navigator-active",to:{name:""}},{default:s(()=>[b(d(_.$t("folder_index.navigators.folder")),1)]),_:1}),r(g,{class:"navigator-item",to:{name:"User_TestTemplate"}},{default:s(()=>[b(d(_.$t("folder_index.navigators.test_template")),1)]),_:1})])]),o("div",ie,[r(y,{class:"me-3",value:e.pageParams.shareMode,"onUpdate:value":a[1]||(a[1]=l=>e.pageParams.shareMode=l),style:{width:"200px"},onChange:e.getData},{default:s(()=>[(m(!0),p(q,null,D(e.folder_share_mode_options,l=>(m(),W(S,{value:l.value},{default:s(()=>[b(d(l.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),o("div",de,[r(e.Input,{onInput:e.getData,modelValue:e.pageParams.folderName,"onUpdate:modelValue":a[2]||(a[2]=l=>e.pageParams.folderName=l),placeholder:e.t("question_sets_index.search_placeholder")},{icon:s(()=>a[10]||(a[10]=[o("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),e.loading?(m(),p("div",ce,[r(F,{active:"",loading:e.loading},null,8,["loading"]),r(F,{active:"",loading:e.loading},null,8,["loading"])])):(m(),p("div",me,[e.folder_data.length>0?(m(!0),p(q,{key:0},D(e.folder_data,l=>(m(),p("div",{class:"folder",onClick:v=>e.onRedirectToFolderDetail(l.folderTestId)},[a[11]||(a[11]=o("div",{class:"folder-icon"},[o("div",{class:"folder-top"}),o("div",{class:"folder-body"})],-1)),o("div",ue,d(l.name),1)],8,_e))),256)):(m(),p("div",fe,[r(t,null,{description:s(()=>[o("span",null,d(_.$t("folder_index.other.no_data_matches")),1)]),_:1})]))])),o("div",pe,[r(N,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":a[3]||(a[3]=l=>e.pageParams.pageNumber=l),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(l,v)=>`${v[0]}-${v[1]} of ${l} ${e.t("folder_index.other.items")}`,"show-size-changer":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("folder_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])]),r(z,{centered:"","wrap-class-name":"medium-modal",open:e.modal_create_open,onCancel:a[6]||(a[6]=l=>e.modal_create_open=!1)},{footer:s(()=>[r(u,{loading:e.isCreateLoading,class:"main-color-btn",key:"submit",type:"primary",onClick:e.onCreateFolder},{default:s(()=>[b(d(e.t("folder_index.buttons.create")),1)]),_:1},8,["loading"])]),default:s(()=>[o("div",ge,[o("div",ve,[r(C,{class:"w-100 d-flex align-items-center"},{default:s(()=>[r(c,{span:4},{default:s(()=>[r(g,{onClick:a[4]||(a[4]=l=>e.modal_create_open=!1),to:{name:""}},{default:s(()=>a[12]||(a[12]=[o("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[12]})]),_:1}),r(c,{class:"main-title",span:20},{default:s(()=>[o("span",null,d(e.t("folder_index.modal.create_title")),1)]),_:1})]),_:1})]),r(w,{ref:"createFolderFormRef",layout:"vertical",rules:e.rules,model:e.createFolderFormState},{default:s(()=>[r(e.Input,{label:e.t("folder_index.modal.create_folder_name_label"),name:"folderName",value:e.createFolderFormState.folderName,"onUpdate:value":a[5]||(a[5]=l=>e.createFolderFormState.folderName=l),placeholder:e.t("folder_index.modal.create_folder_name_placeholder"),"is-required":!0,"max-length":100},null,8,["label","value","placeholder"])]),_:1},8,["model"])])]),_:1},8,["open"])],64)}const xe=J(Z,[["render",be],["__scopeId","data-v-e2bbfdc4"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/folder/index.vue"]]);export{xe as default};
