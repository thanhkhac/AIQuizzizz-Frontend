import{d as F,q as U,l as A,u as E,i as y,j as O,O as R,s as L,M as B,k,_ as Q,r as q,a as S,o as h,b as e,c,w as r,f as p,t as o,e as D,F as V,D as M,E as j}from"./index-DhrrK0Mu.js";import{A as C}from"./ApiClass-pTCUFE45.js";import{I as G}from"./Input-BvI-y3AG.js";import{C as Y}from"./classStudentPosition-B7ChrNvq.js";const X=F({__name:"quiz",emits:["updateSidebar"],setup(l,{expose:n,emit:I}){var w;n();const t=U(),g=A(),{t:u}=E(),d=I,m=y(t.params.id||""),b=y({classId:"",name:"",topic:""}),s=O({pageNumber:t.query.pageNumber||1,pageSize:t.query.pageSize||10,name:((w=t.query.name)==null?void 0:w.toString())||"",totalCount:0,statusFilter:!1}),z=y([]),i=y(""),v=async()=>{try{const a=await C.GetUserPermission(b.value.classId);a.data.success&&(i.value=a.data.data)}catch(a){console.log(a)}},N=async()=>{try{m.value||g.push({name:"404"});let a=await C.GetById(m.value.toString());a.data.success||g.push({name:"404"}),b.value=a.data.data}catch(a){console.log("ERROR: GETBYID class: "+a)}},f=async()=>{try{let a=await C.GetAllQSByLimit(m.value.toString(),s);if(a.data.success){let _=a.data.data;z.value=_.items,s.pageNumber=_.pageNumber,s.pageSize=_.pageSize,s.totalCount=_.totalCount,s.statusFilter&&(s.pageNumber>_.totalPages&&s.totalCount>0?(s.pageNumber=1,g.push({name:"User_Class_Quiz",params:{id:m.value},query:{pageNumber:1,pageSize:s.pageSize,name:s.name}})):g.push({name:"User_Class_Quiz",params:{id:m.value},query:{pageNumber:s.pageNumber,pageSize:s.pageSize,name:s.name}}),s.statusFilter=!s.statusFilter)}}catch(a){console.log("ERROR: GETALLEXAMBYLIMIT class qs: "+a)}};R(()=>{var a;Object.keys(t.query).length===0&&(s.pageNumber=t.query.pageNumber||1,s.pageSize=t.query.pageSize||10,s.name=((a=t.query.name)==null?void 0:a.toString())||"",s.statusFilter=!0,f())});const P=(a,_)=>{s.pageNumber=a,s.pageSize=_,s.statusFilter=!0,f()},T=a=>{B.confirm({title:u("class_question_set.modal.delete_title"),content:u("class_question_set.modal.delete_content"),okText:u("sidebar.buttons.ok"),cancelText:u("sidebar.buttons.cancel"),onOk:async()=>{if(!(await C.DeleteQuestionSetFromClass(b.value.classId,a)).data.success){k.success(u("message.removed_failed"));return}k.success(u("message.removed_successfully")),f()}})};L(async()=>{d("updateSidebar","class"),await N(),await v(),await f()});const x={route:t,router:g,t:u,emit:d,classId:m,classData:b,pageParams:s,question_set_data:z,userRoleInClass:i,getPermission:v,getClassData:N,getData:f,onPaginationChange:P,onDeleteQSFromClass:T,Input:G,get CLASS_STUDENT_POSITION(){return Y}};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}}),$={class:"page-container"},H={class:"title-container"},J={class:"breadcrumb-container"},K={class:"title-breadcrumb-item"},W={class:"title-breadcrumb-item"},Z={class:"breadcrumb-item-topic"},ee={class:"content"},te={class:"content-item"},se={class:"content-item-title"},ae={class:"content-item-functions"},ne={class:"content-item-navigators"},oe={class:"navigator-container"},ie={style:{width:"300px",padding:"0px"}},le={key:0,class:"quiz-item-container"},re={class:"quiz-item"},ce={class:"quiz-item-title"},ue={class:"quiz-item-description"},de={class:"quiz-item-info quiz-info-detail"},me={class:"quiz-item-questions"},_e={class:"quiz-item-created-by"},pe={class:"exam-item-actions"},ge=["onClick"],be={key:1,class:"w-100 d-flex justify-content-center"},ve={class:"pagination-container"};function he(l,n,I,t,g,u){const d=q("RouterLink"),m=q("a-button"),b=q("a-tooltip"),s=q("a-empty"),z=q("a-pagination");return h(),S("div",$,[e("div",H,[e("div",J,[e("ul",null,[e("li",K,[c(d,{to:{name:"User_Class"}},{default:r(()=>[e("span",null,o(l.$t("class_index.title")),1),n[2]||(n[2]=p()),n[3]||(n[3]=e("br",null,null,-1))]),_:1,__:[2,3]}),n[4]||(n[4]=e("i",{class:"bx bx-chevron-right"},null,-1))]),e("li",W,[c(d,{to:{name:""},class:"breadcrumb-item-class"},{default:r(()=>[e("span",null,o(t.classData.name),1),e("span",Z,o(t.classData.topic),1)]),_:1})])])])]),e("div",ee,[e("div",te,[e("div",se,[e("div",null,[e("span",null,o(l.$t("class_question_set.title")),1),e("span",null,o(l.$t("class_question_set.sub_title")),1)])]),e("div",ae,[e("div",ne,[e("div",oe,[c(d,{class:"navigator-item",to:{name:"User_Class_Exam"}},{default:r(()=>[p(o(l.$t("class_index.navigators.exam")),1)]),_:1}),c(d,{class:"navigator-item navigator-active",to:{name:""}},{default:r(()=>[p(o(l.$t("class_index.navigators.quiz")),1)]),_:1}),c(d,{class:"navigator-item",to:{name:"User_Class_Student"}},{default:r(()=>[p(o(l.$t("class_index.navigators.member")),1)]),_:1})])]),D(` <a-select
                        v-model:value="pageParams.shareMode"
                        style="width: 200px"
                        @change="getData"
                    >
                        <a-select-option v-for="option in share_mode_options" :value="option.value">
                            {{ option.label }}
                        </a-select-option>
                    </a-select> `),e("div",ie,[c(t.Input,{onInput:t.getData,modelValue:t.pageParams.name,"onUpdate:modelValue":n[0]||(n[0]=i=>t.pageParams.name=i),placeholder:t.t("question_sets_index.search_placeholder")},{icon:r(()=>n[5]||(n[5]=[e("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])]),t.question_set_data.length>0?(h(),S("div",le,[(h(!0),S(V,null,M(t.question_set_data,i=>(h(),S("div",re,[n[7]||(n[7]=e("i",{class:"bx bx-book-open quiz-item-icon"},null,-1)),e("div",null,[e("div",ce,o(i.name),1),e("div",ue,o(i.description),1),e("div",de,[e("div",me,[n[6]||(n[6]=e("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),p(" "+o(i.totalQuestionCount)+" "+o(l.$t("dashboards.list_items.quiz.questions")),1)]),e("div",_e,o(l.$t("class_question_set.other.created_by"))+" "+o(i.createBy),1)])]),e("div",pe,[c(m,{type:"primary",class:"me-3 main-color-btn"},{default:r(()=>[p(o(l.$t("class_question_set.buttons.view")),1)]),_:1}),t.userRoleInClass!==t.CLASS_STUDENT_POSITION.STUDENT?(h(),j(b,{key:0},{title:r(()=>[p(o(l.$t("question_sets_index.buttons.delete")),1)]),default:r(()=>[e("i",{style:{cursor:"pointer"},class:"text-danger bx bx-trash-alt",onClick:v=>t.onDeleteQSFromClass(i.id)},null,8,ge)]),_:2},1024)):D("v-if",!0)])]))),256))])):(h(),S("div",be,[c(s,null,{description:r(()=>[e("span",null,o(l.$t("class_index.other.no_data_matches")),1)]),_:1})])),e("div",ve,[c(z,{onChange:t.onPaginationChange,current:t.pageParams.pageNumber,"onUpdate:current":n[1]||(n[1]=i=>t.pageParams.pageNumber=i),total:t.pageParams.totalCount,pageSize:t.pageParams.pageSize,"show-total":(i,v)=>`${v[0]}-${v[1]} of ${i} ${t.t("class_question_set.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:t.t("class_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])])}const ye=Q(X,[["render",he],["__scopeId","data-v-b4964186"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/class/quiz.vue"]]);export{ye as default};
