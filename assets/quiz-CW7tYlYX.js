import{d as A,q as E,l as O,u as L,i as y,j as Q,C as V,s as B,M as G,k as T,_ as M,r as S,a as b,o as g,b as t,c as r,w as u,f as h,t as o,e as P,F as N,D as j,E as Y}from"./index-BZibwNZh.js";import{A as I}from"./ApiClass-kQc_Dqx9.js";import{C as X}from"./classStudentPosition-B7ChrNvq.js";import{I as H}from"./Input-CsLykV0d.js";import{V as J}from"./Validator-CWeiTIFe.js";const K=A({__name:"quiz",emits:["updateSidebar"],setup(l,{expose:n,emit:k}){var x;n();const e=E(),d=O(),{t:m}=L(),_=k,c=y(e.params.id||""),f=y({classId:"",name:"",topic:""}),a=Q({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,name:((x=e.query.name)==null?void 0:x.toString())||"",totalCount:0,statusFilter:!1}),z=y([]),C=y(""),i=y(!1),v=async()=>{try{const s=await I.GetUserPermission(f.value.classId);s.data.success&&(C.value=s.data.data)}catch(s){console.log(s)}},D=async()=>{try{if(!J.isValidGuid(c.value.toString())){d.push({name:"404"});return}c.value||d.push({name:"404"});let s=await I.GetById(c.value.toString());s.data.success||d.push({name:"404"}),f.value=s.data.data}catch(s){console.log("ERROR: GETBYID class: "+s)}},q=async()=>{try{i.value=!0;let s=await I.GetAllQSByLimit(c.value.toString(),a);if(s.data.success){let p=s.data.data;z.value=p.items,a.pageNumber=p.pageNumber,a.pageSize=p.pageSize,a.totalCount=p.totalCount,a.statusFilter&&(a.pageNumber>p.totalPages&&a.totalCount>0?(a.pageNumber=1,d.push({name:"User_Class_Quiz",params:{id:c.value},query:{pageNumber:1,pageSize:a.pageSize,name:a.name}})):d.push({name:"User_Class_Quiz",params:{id:c.value},query:{pageNumber:a.pageNumber,pageSize:a.pageSize,name:a.name}}),a.statusFilter=!a.statusFilter)}}catch(s){console.log("ERROR: GETALLEXAMBYLIMIT class qs: "+s)}finally{i.value=!1}};V(()=>Object.keys(e.query).length,()=>{var s;a.pageNumber=e.query.pageNumber||1,a.pageSize=e.query.pageSize||10,a.name=((s=e.query.name)==null?void 0:s.toString())||"",a.statusFilter=!0,q()});const R=(s,p)=>{a.pageNumber=s,a.pageSize=p,a.statusFilter=!0,q()},F=s=>{G.confirm({title:m("class_question_set.modal.delete_title"),content:m("class_question_set.modal.delete_content"),okText:m("sidebar.buttons.ok"),cancelText:m("sidebar.buttons.cancel"),onOk:async()=>{if(!(await I.DeleteQuestionSetFromClass(f.value.classId,s)).data.success){T.success(m("message.removed_failed"));return}T.success(m("message.removed_successfully")),q()}})},U=s=>{d.push({name:"User_Class_Quiz_Detail",params:{id:s}})};B(async()=>{_("updateSidebar","class"),await D(),await v(),await q()});const w={route:e,router:d,t:m,emit:_,classId:c,classData:f,pageParams:a,question_set_data:z,userRoleInClass:C,loading:i,getPermission:v,getClassData:D,getData:q,onPaginationChange:R,onDeleteQSFromClass:F,onRedirectToDetail:U,get CLASS_STUDENT_POSITION(){return X},Input:H};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),W={class:"page-container"},Z={class:"title-container"},$={class:"breadcrumb-container"},ee={class:"title-breadcrumb-item"},te={class:"title-breadcrumb-item"},ae={class:"breadcrumb-item-topic"},se={class:"content"},ne={class:"content-item"},oe={class:"content-item-title"},ie={class:"content-item-functions"},le={class:"content-item-navigators"},re={class:"navigator-container"},ce={style:{width:"300px",padding:"0px"}},ue={key:0,class:"quiz-item-container"},de={class:"quiz-item"},me={class:"quiz-item-title"},_e={class:"quiz-item-description"},pe={class:"quiz-item-info quiz-info-detail"},ge={class:"quiz-item-questions"},ve={class:"quiz-item-created-by"},be={class:"exam-item-actions"},he=["onClick"],fe={key:1,class:"w-100 d-flex justify-content-center"},Se={class:"pagination-container"};function qe(l,n,k,e,d,m){const _=S("RouterLink"),c=S("a-skeleton"),f=S("a-button"),a=S("a-tooltip"),z=S("a-empty"),C=S("a-pagination");return g(),b("div",W,[t("div",Z,[t("div",$,[t("ul",null,[t("li",ee,[r(_,{to:{name:"User_Class"}},{default:u(()=>[t("span",null,o(l.$t("class_index.title")),1),n[2]||(n[2]=h()),n[3]||(n[3]=t("br",null,null,-1))]),_:1,__:[2,3]}),n[4]||(n[4]=t("i",{class:"bx bx-chevron-right"},null,-1))]),t("li",te,[r(_,{to:{name:""},class:"breadcrumb-item-class"},{default:u(()=>[t("span",null,o(e.classData.name),1),t("span",ae,o(e.classData.topic),1)]),_:1})])])])]),t("div",se,[t("div",ne,[t("div",oe,[t("div",null,[t("span",null,o(l.$t("class_question_set.title")),1),t("span",null,o(l.$t("class_question_set.sub_title")),1)])]),t("div",ie,[t("div",le,[t("div",re,[r(_,{class:"navigator-item",to:{name:"User_Class_Exam"}},{default:u(()=>[h(o(l.$t("class_index.navigators.exam")),1)]),_:1}),r(_,{class:"navigator-item navigator-active",to:{name:""}},{default:u(()=>[h(o(l.$t("class_index.navigators.quiz")),1)]),_:1}),r(_,{class:"navigator-item",to:{name:"User_Class_Student"}},{default:u(()=>[h(o(l.$t("class_index.navigators.member")),1)]),_:1})])]),P(` <a-select
                        v-model:value="pageParams.shareMode"
                        style="width: 200px"
                        @change="getData"
                    >
                        <a-select-option v-for="option in share_mode_options" :value="option.value">
                            {{ option.label }}
                        </a-select-option>
                    </a-select> `),t("div",ce,[r(e.Input,{onInput:e.getData,modelValue:e.pageParams.name,"onUpdate:modelValue":n[0]||(n[0]=i=>e.pageParams.name=i),placeholder:e.t("question_sets_index.search_placeholder")},{icon:u(()=>n[5]||(n[5]=[t("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])]),e.loading?(g(),b(N,{key:0},[r(c,{active:"",loading:e.loading},null,8,["loading"]),r(c,{active:"",loading:e.loading},null,8,["loading"]),r(c,{active:"",loading:e.loading},null,8,["loading"])],64)):(g(),b(N,{key:1},[e.question_set_data.length>0?(g(),b("div",ue,[(g(!0),b(N,null,j(e.question_set_data,i=>(g(),b("div",de,[n[7]||(n[7]=t("i",{class:"bx bx-book-open quiz-item-icon"},null,-1)),t("div",null,[t("div",me,o(i.name),1),t("div",_e,o(i.description),1),t("div",pe,[t("div",ge,[n[6]||(n[6]=t("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),h(" "+o(i.totalQuestionCount)+" "+o(l.$t("dashboards.list_items.quiz.questions")),1)]),t("div",ve,o(l.$t("class_question_set.other.created_by"))+" "+o(i.createBy),1)])]),t("div",be,[r(f,{type:"primary",class:"me-3 main-color-btn",onClick:v=>e.onRedirectToDetail(i.id)},{default:u(()=>[h(o(l.$t("class_question_set.buttons.view")),1)]),_:2},1032,["onClick"]),e.userRoleInClass!==e.CLASS_STUDENT_POSITION.STUDENT?(g(),Y(a,{key:0},{title:u(()=>[h(o(l.$t("question_sets_index.buttons.delete")),1)]),default:u(()=>[t("i",{style:{cursor:"pointer"},class:"text-danger bx bx-trash-alt",onClick:v=>e.onDeleteQSFromClass(i.id)},null,8,he)]),_:2},1024)):P("v-if",!0)])]))),256))])):(g(),b("div",fe,[r(z,null,{description:u(()=>[t("span",null,o(l.$t("class_index.other.no_data_matches")),1)]),_:1})]))],64)),t("div",Se,[r(C,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":n[1]||(n[1]=i=>e.pageParams.pageNumber=i),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(i,v)=>`${v[0]}-${v[1]} of ${i} ${e.t("class_question_set.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("class_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])])}const ke=M(K,[["render",qe],["__scopeId","data-v-b4964186"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/class/quiz.vue"]]);export{ke as default};
