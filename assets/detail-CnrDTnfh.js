import{d as J,u as Z,i as v,H as G,K,j as le,s as ee,k as ie,_ as te,r as c,C as H,o as r,w as a,b as e,p as M,c as i,f as m,t as l,a as d,F as b,B as I,q as oe,l as re,G as de,e as P}from"./index-Dd8-myui.js";import{A as X}from"./ApiQuestionSet-wCWw8J7f.js";import{Q as B}from"./questionTypes-CS3lcRlq.js";import{I as se}from"./Input-BtmZP41X.js";import{T as ce}from"./TransferQuestionData-Bl0XXg5D.js";import{V as ue}from"./Validator-CWeiTIFe.js";const j={PRIVATE:"private",PUBLIC:"public",IN_CLASS:"in_class"},O={EDIT:"edit",VIEW:"view"},_e=J({__name:"ShareModal",setup(_,{expose:s}){const{t:A}=Z(),t=v(!1),k=()=>{t.value=!0},q=()=>{t.value=!1};s({openModal:k});const g=[j.PUBLIC,j.PRIVATE,j.IN_CLASS],p=G(()=>g.map(u=>({label:A(`share_modal.visibility.${u}.mode`),value:u}))),S=v(p.value[0].value),x=v("");K(()=>S.value,u=>{x.value=A(`share_modal.visibility.${u}.explain`)});const E=[O.VIEW,O.EDIT],L=G(()=>E.map(u=>({label:A(`share_modal.permission.${u}.mode`),value:u}))),U=v(L.value[0].value),V=[{id:"1",email:"ducnthe173064@fpt.edu.vn",hasAccess:!0},{id:"2",email:"ducnthe173064@fpt.edu.vn",hasAccess:!0},{id:"4",email:"ducnguyen@gmail.com",hasAccess:!0},{id:"5",email:"ducnguyen@gmail.com",hasAccess:!0},{id:"6",email:"ducntan1234@gmail.com",hasAccess:!1},{id:"7",email:"ducntan1234@gmail.com",hasAccess:!1},{id:"8",email:"qwert@gmail.com",hasAccess:!1},{id:"9",email:"qwert@gmail.com",hasAccess:!1},{id:"10",email:"asdfg@gmail.com",hasAccess:!1},{id:"11",email:"asdfg@gmail.com",hasAccess:!1}],y=[{id:"1",fullName:"NguyenTanDuc",email:"ducnthe173064@fpt.edu.vn",permission:O.EDIT},{id:"2",fullName:"NguyenDuc",email:"ducnguyen@gmail.com",permission:O.VIEW}],z=v([{id:"1",name:"SEP490 - Summer 2025"},{id:"2",name:"MLN111 - Spring 2025"},{id:"3",name:"MLN121 - Spring 2025"}]),w=v(""),C=v([]),o=v([]),R=v(null);function n(u){var T;w.value&&!((T=R.value)!=null&&T.contains(u.target))?C.value=[]:C.value=[...o.value]}const h=()=>{if(!w.value.trim()){C.value=[],o.value=[];return}let u=V.filter(T=>T.email.includes(w.value.trim()));C.value=u,o.value=[...u]},f=v([]),Q=u=>{y.push({id:u.id,email:u.email,fullName:u.email,permission:O.VIEW}),u.hasAccess=!0,ie.success("Added successfully")},Y=(u,T)=>{},D=u=>{},N=le({checkAll:!1,indeterminate:!1,checkedList:[]}),ne=u=>{var T;Object.assign(N,{checkedList:u.target.checked?(T=z.value)==null?void 0:T.map(F=>F.id):[],indeterminate:!1})};K(()=>N.checkedList,u=>{var T;N.indeterminate=!!u.length&&u.length<z.value.map(F=>F.id).length,N.checkAll=u.length===((T=z.value)==null?void 0:T.length)});const ae=()=>{q()};ee(()=>{document.addEventListener("click",n),f.value.push(...y),x.value=A(`share_modal.visibility.${S.value}.explain`)});const W={t:A,visibility:t,openModal:k,closeModal:q,visibilityKeys:g,visibility_options:p,selected_visibility_option:S,selected_visibility_explain:x,permissionKeys:E,permission_options:L,selected_permission_option:U,user_sample:V,user_permission_sample:y,user_class_sample:z,searchUserEmailValue:w,userFound:C,lastSearchResult:o,searchUserResultRef:R,handleMouseClickOutside:n,onSearchUser:h,userWithPermission:f,onShareWithResultUser:Q,onChangePeoplePermission:Y,onConfirmRemovePeopleAccess:D,shareClassState:N,onCheckAll:ne,onShareClass:ae,Input:se,get VISIBILITY(){return j}};return Object.defineProperty(W,"__isScriptSetup",{enumerable:!1,value:!0}),W}}),me={class:"title-container"},ve={class:"visibility-explain"},pe={class:"search-user",ref:"searchUserResultRef"},he={class:"search-user-result"},fe={class:"search-user-item"},be={class:"user-item-email"},ge={class:"list-item-section"},ye={class:"list-item-title"},Ie={class:"list-item-container"},ke={class:"list-item"},Se={class:"people-access-info"},xe={class:"people-access-permission"},we={class:"list-item-section"},Ce={class:"list-item-title d-flex align-items-center"},Te={class:"list-item"},Ae={class:"mt-3 d-flex justify-content-end"};function ze(_,s,A,t,k,q){const g=c("RouterLink"),p=c("a-col"),S=c("a-row"),x=c("a-select-option"),E=c("a-select"),L=c("a-form-item"),U=c("a-qrcode"),V=c("a-input"),y=c("a-button"),z=c("a-popconfirm"),w=c("a-checkbox"),C=c("a-checkbox-group"),o=c("a-form"),R=c("a-modal");return r(),H(R,{centered:"",width:"100%","wrap-class-name":"medium-modal",open:t.visibility,onCancel:t.closeModal},{footer:a(()=>s[12]||(s[12]=[])),default:a(()=>[e("div",{class:M(["page-container",t.selected_visibility_option===t.VISIBILITY.PRIVATE?"larger":""])},[e("div",me,[i(S,{class:"w-100 d-flex align-items-center justify-content-between"},{default:a(()=>[i(p,{span:1},{default:a(()=>[i(g,{to:{name:""},onClick:t.closeModal},{default:a(()=>s[4]||(s[4]=[e("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[4]})]),_:1}),i(p,{class:"main-title",span:22},{default:a(()=>[e("span",null,l(_.$t("share_modal.title")),1),s[5]||(s[5]=m()),s[6]||(s[6]=e("br",null,null,-1)),e("span",null,l(_.$t("share_modal.sub_title")),1)]),_:1,__:[5,6]})]),_:1})]),i(o,{layout:"vertical"},{default:a(()=>[i(S,{class:"p-3 d-flex justify-content-between"},{default:a(()=>[i(p,{span:24},{default:a(()=>[i(L,{label:_.$t("share_modal.component_title.visibility")},{default:a(()=>[i(E,{class:"me-3",value:t.selected_visibility_option,"onUpdate:value":s[0]||(s[0]=n=>t.selected_visibility_option=n),style:{width:"200px"}},{default:a(()=>[(r(!0),d(b,null,I(t.visibility_options,n=>(r(),H(x,{value:n.value},{default:a(()=>[m(l(n.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),e("div",ve,l(t.selected_visibility_explain),1)]),_:1},8,["label"])]),_:1}),i(p,{span:24,class:M(["shareable-link-container",t.selected_visibility_option===t.VISIBILITY.PUBLIC?"":"d-none"])},{default:a(()=>[i(U,{value:"AIQuizziz.com.vn"}),e("div",null,[i(V,{class:"share-link",value:"http://localhost:5173/user/library/1/Introduction%20to%20Biology"}),i(y,{class:"mt-2 main-color-btn",type:"primary"},{default:a(()=>[s[7]||(s[7]=e("i",{class:"me-3 bx bx-link-alt"},null,-1)),m(" "+l(_.$t("share_modal.buttons.copy_link")),1)]),_:1,__:[7]})])]),_:1},8,["class"]),i(p,{span:24,class:M([t.selected_visibility_option===t.VISIBILITY.PRIVATE?"":"d-none"])},{default:a(()=>[e("div",pe,[i(t.Input,{onChange:t.onSearchUser,label:t.t("share_modal.component_title.share_with_email"),value:t.searchUserEmailValue,"onUpdate:value":s[1]||(s[1]=n=>t.searchUserEmailValue=n),placeholder:t.t("share_modal.other.search_email_placeholder")},{icon:a(()=>s[8]||(s[8]=[e("i",{class:"bx bx-envelope"},null,-1)])),_:1},8,["label","value","placeholder"]),e("div",{class:M(["search-user-container",t.userFound.length<=0?"d-none":""])},[e("div",he,[(r(!0),d(b,null,I(t.userFound,n=>(r(),d("div",fe,[e("div",be,l(n.email),1),e("div",{class:M(["user-item-access",n.hasAccess?"d-none":""])},[i(y,{type:"primary",class:"main-color-btn",onClick:h=>t.onShareWithResultUser(n)},{default:a(()=>[...s[9]||(s[9]=[e("i",{class:"bx bxs-user-plus"},null,-1)])]),_:2,__:[9]},1032,["onClick"])],2)]))),256))])],2)],512),e("div",ge,[e("div",ye,l(_.$t("share_modal.component_title.people_with_access")),1),e("div",Ie,[(r(),d(b,null,I(t.user_permission_sample,n=>e("div",ke,[s[11]||(s[11]=e("img",{class:"people-access-img",src:"",alt:""},null,-1)),e("div",Se,[e("span",null,l(n.fullName),1),e("span",null,l(n.email),1)]),e("div",xe,[i(E,{onChange:h=>t.onChangePeoplePermission(n.id,n.permission),style:{width:"130px"},value:n.permission,"onUpdate:value":h=>n.permission=h},{default:a(()=>[(r(!0),d(b,null,I(t.permission_options,h=>(r(),H(x,{value:h.value},{default:a(()=>[m(l(h.label),1)]),_:2},1032,["value"]))),256))]),_:2},1032,["onChange","value","onUpdate:value"]),i(z,{title:_.$t("share_modal.other.delete_warning"),"ok-text":_.$t("share_modal.buttons.yes"),"cancel-text":_.$t("share_modal.buttons.no"),onConfirm:h=>t.onConfirmRemovePeopleAccess(n.id)},{default:a(()=>[...s[10]||(s[10]=[e("i",{class:"ms-2 text-danger bx bx-trash"},null,-1)])]),_:2,__:[10]},1032,["title","ok-text","cancel-text","onConfirm"])])])),64))])])]),_:1},8,["class"]),i(p,{span:24,class:M([t.selected_visibility_option===t.VISIBILITY.IN_CLASS?"":"d-none"])},{default:a(()=>[e("div",we,[e("div",Ce,[e("div",{class:M(["w-25 header-item",t.shareClassState.checkAll?"check-all":""])},[i(w,{onClick:t.onCheckAll,checked:t.shareClassState.checkAll,"onUpdate:checked":s[2]||(s[2]=n=>t.shareClassState.checkAll=n),indeterminate:t.shareClassState.indeterminate},{default:a(()=>[m(l(_.$t("share_modal.buttons.check_all",{number:t.shareClassState.checkedList.length})),1)]),_:1},8,["checked","indeterminate"])],2),e("span",null,l(_.$t("share_modal.component_title.share_with_class")),1)]),e("div",null,[i(C,{class:"list-item-container",value:t.shareClassState.checkedList,"onUpdate:value":s[3]||(s[3]=n=>t.shareClassState.checkedList=n)},{default:a(()=>[(r(!0),d(b,null,I(t.user_class_sample,n=>(r(),d("div",Te,[i(w,{value:n.id},{default:a(()=>[e("span",null,l(n.name),1)]),_:2},1032,["value"])]))),256))]),_:1},8,["value"])]),e("div",Ae,[i(y,{type:"primary",class:"main-color-btn",size:"large",onClick:t.onShareClass},{default:a(()=>[m(l(_.$t("share_modal.buttons.done")),1)]),_:1})])])]),_:1},8,["class"])]),_:1})]),_:1})],2)]),_:1},8,["open"])}const qe=te(_e,[["render",ze],["__scopeId","data-v-a1cc234f"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/ShareModal.vue"]]),Ee=J({__name:"detail",setup(_,{expose:s}){s();const{t:A}=Z(),t=oe(),k=re(),q=v(t.params.id),g=v({id:"",name:"",description:"",numberOfQuestions:0,completedQuestions:0,ratingCount:0,ratingAverage:0,createdBy:"",createdAt:"",createdById:"",tags:[],lastAccessByMe:"",visibilityMode:""}),p=v([]),S=["All",B.MULTIPLE_CHOICE,B.MATCHING,B.ORDERING,B.SHORT_TEXT],x=G(()=>S.map(f=>({label:A(`create_QS.type.${f}`),value:f}))),E=v(x.value[0].value),L=v(""),U=async()=>{ue.isValidGuid(q.value.toString())||k.push({name:"404"});const f=await X.GetDetailById(q.value.toString()),Q=await X.GetQuestionById(q.value.toString());(!f.data.success||!Q.data.success)&&k.push({name:"User_Library"}),g.value=f.data.data,g.value.createdBy=f.data.data.createdBy.fullName,p.value=Q.data.data.map(Y=>ce.transformResponseToRequest(Y))},V=(f,Q)=>{$(Q).toggleClass("bx-chevron-up bx-chevron-down");const D=$(`#question-item-answer-${f}`);D&&$(D).slideToggle()},y=v(null),z=()=>{var f;(f=y.value)==null||f.openModal()},w=()=>{k.push({name:"User_QuestionSet_Learn",params:{id:g.value.id}})},C=()=>{k.push({name:"User_QuestionSet_Test",params:{id:g.value.id}})},o=()=>{k.push({name:"User_QuestionSet_Update",params:{id:g.value.id}})},R=v(!1),n=v(0);ee(()=>{U()});const h={t:A,route:t,router:k,question_set_id:q,quiz:g,quiz_questions:p,optionKeys:S,question_type_options:x,selected_type_option:E,searchValue:L,getData:U,toggleDisplayAnswer:V,shareModalRef:y,onOpenShareModal:z,onRedirectToLearn:w,onRedirectToTest:C,onRedirectToEdit:o,modal_rate_open:R,rateValue:n,get QUESTION_TYPE(){return B},Input:se,get dayjs(){return de},ShareModal:qe};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),Le={class:"content"},Re={class:"content-item"},Ue={class:"content-item-title"},Ve={class:"d-flex flex-row align-items-center quiz-header-functions"},Me={class:"d-flex align-items-center"},Qe={class:"quiz-info"},Ne={class:"quiz-tag-container"},Pe={class:"quiz-tag-item"},Be={class:"quiz-credit"},Oe={class:"share-btn-container"},Ye={class:"action-container"},De={class:"credit-user"},je={class:"credit-user-info"},He={class:"d-flex"},Fe={class:"content-item"},Ge={class:"content-item-title"},We={class:"content-item-functions"},Ke={style:{width:"300px",padding:"0"}},Xe={class:"preview-question-container"},Je={class:"preview-question-item"},Ze={class:"question-item-content"},$e=["innerHTML"],et={key:1,class:"question-text"},tt=["id"],st={key:0,class:"multiple-choice-answer"},nt={key:0,class:"text-success"},at={class:"pair-answer"},lt={class:"pair-answer-item"},it={class:"pair-answer-item"},ot={key:2,class:"ordering-answer"},rt={class:"ordering-answer-item"},dt={class:"ordering-answer-item"},ct={class:"ordering-answer-item"},ut={class:"short-text-answer"},_t={class:"question-item-toogle-btn"},mt=["onClick"],vt={class:"title-container"},pt={class:"modal-rate-container"};function ht(_,s,A,t,k,q){const g=c("RouterLink"),p=c("a-menu-item"),S=c("a-menu-divider"),x=c("a-menu"),E=c("a-dropdown"),L=c("a-button"),U=c("a-select-option"),V=c("a-select"),y=c("a-col"),z=c("a-row"),w=c("a-rate"),C=c("a-modal");return r(),d(b,null,[e("div",Le,[i(g,{class:"navigator-back-link d-flex align-items-center p-2",to:{name:""}},{default:a(()=>[s[5]||(s[5]=e("i",{class:"me-1 bx bx-chevron-left"},null,-1)),m(" "+l(_.$t("detail_QS.other.library")),1)]),_:1,__:[5]}),e("div",Re,[e("div",Ue,[e("div",null,[e("span",null,l(t.quiz.name),1),e("span",null,l(t.quiz.description),1)]),e("div",Ve,[i(E,{trigger:["click"],placement:"bottomRight"},{overlay:a(()=>[i(x,{class:"drop-down-container"},{default:a(()=>[i(p,{key:"1",onClick:t.onRedirectToEdit},{default:a(()=>[s[6]||(s[6]=e("i",{class:"bx bx-edit"},null,-1)),m(" "+l(_.$t("question_sets_index.buttons.edit")),1)]),_:1,__:[6]}),i(p,{key:"2"},{default:a(()=>[s[7]||(s[7]=e("i",{class:"bx bx-copy"},null,-1)),m(" "+l(_.$t("question_sets_index.buttons.dublicate")),1)]),_:1,__:[7]}),i(S,{style:{"background-color":"#ddd"}}),i(p,{key:"3"},{default:a(()=>[e("span",Me,[s[8]||(s[8]=e("i",{class:"bx bx-trash-alt"},null,-1)),m(" "+l(_.$t("question_sets_index.buttons.delete")),1)])]),_:1})]),_:1})]),default:a(()=>[s[9]||(s[9]=e("i",{class:"bx bx-dots-horizontal-rounded ant-dropdown-link"},null,-1))]),_:1,__:[9]})])]),e("div",Qe,[e("div",{class:"quiz-rating",onClick:s[0]||(s[0]=o=>t.modal_rate_open=!0)},l(t.quiz.ratingAverage)+" ⭐️ ("+l(t.quiz.ratingCount)+" "+l(_.$t("detail_QS.other.reviews"))+") ",1),e("div",Ne,[(r(!0),d(b,null,I(t.quiz.tags,o=>(r(),d("div",Pe,l(o.name),1))),256))])]),e("div",Be,[e("div",Oe,[i(L,{type:"primary",class:"main-color-btn share-btn",size:"large",onClick:t.onOpenShareModal},{default:a(()=>[s[10]||(s[10]=e("i",{class:"bx bx-share-alt"},null,-1)),m(" "+l(_.$t("detail_QS.buttons.share_quiz")),1)]),_:1,__:[10]})])]),e("div",Ye,[e("div",De,[s[11]||(s[11]=e("div",{class:"user-image",alt:""},null,-1)),e("div",je,[e("span",null,l(_.$t("detail_QS.other.created_by",{username:t.quiz.createdBy})),1),e("span",null,l(t.dayjs(t.quiz.createdAt).format("DD/MM/YYYY")),1)])]),e("div",He,[e("div",{class:"action-item",onClick:t.onRedirectToLearn},[m(l(_.$t("detail_QS.buttons.learn"))+" ",1),s[12]||(s[12]=e("i",{class:"bx bx-analyse"},null,-1))]),e("div",{class:"action-item",onClick:t.onRedirectToTest},[m(l(_.$t("detail_QS.buttons.test"))+" ",1),s[13]||(s[13]=e("i",{class:"bx bx-detail"},null,-1))])])])]),e("div",Fe,[e("div",Ge,[e("div",null,[e("span",null,l(_.$t("detail_QS.other.questions",{number:t.quiz_questions.length})),1)])]),e("div",We,[i(V,{class:"me-3",value:t.selected_type_option,"onUpdate:value":s[1]||(s[1]=o=>t.selected_type_option=o),style:{width:"200px"}},{default:a(()=>[(r(!0),d(b,null,I(t.question_type_options,o=>(r(),H(U,{value:o.value},{default:a(()=>[m(l(o.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),e("div",Ke,[i(t.Input,{modelValue:t.searchValue,"onUpdate:modelValue":s[2]||(s[2]=o=>t.searchValue=o),placeholder:t.t("question_sets_index.search_placeholder")},{icon:a(()=>s[14]||(s[14]=[e("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])]),e("div",Xe,[(r(!0),d(b,null,I(t.quiz_questions,(o,R)=>(r(),d("div",Je,[e("div",Ze,[o.questionHTML?(r(),d("div",{key:0,class:"question-html",innerHTML:o.questionHTML},null,8,$e)):(r(),d("div",et,l(o.questionText),1)),e("div",{class:"question-item-answer",id:`question-item-answer-${R}`,style:{display:"none"}},[o.type===t.QUESTION_TYPE.MULTIPLE_CHOICE?(r(),d("div",st,[e("ul",null,[(r(!0),d(b,null,I(o.multipleChoices,n=>(r(),d("li",null,[m(l(n.text)+" ",1),n.isAnswer?(r(),d("span",nt," ("+l(n.isAnswer)+") ",1)):P("v-if",!0)]))),256))])])):P("v-if",!0),o.type===t.QUESTION_TYPE.MATCHING?(r(!0),d(b,{key:1},I(o.matchingPairs,n=>(r(),d("div",at,[e("span",lt,l(n.leftItem),1),s[15]||(s[15]=e("i",{class:"bx bx-right-arrow-alt"},null,-1)),e("span",it,l(n.rightItem),1)]))),256)):P("v-if",!0),o.type===t.QUESTION_TYPE.ORDERING?(r(),d("div",ot,[e("div",rt,[(r(!0),d(b,null,I(o.orderingItems,n=>(r(),d("div",null,l(n.text),1))),256))]),s[16]||(s[16]=e("i",{class:"bx bx-right-arrow-alt"},null,-1)),e("div",dt,[(r(!0),d(b,null,I(o.orderingItems,(n,h)=>(r(),d("div",ct,[e("span",null,"#"+l(h+1),1),m(" - "+l(n.text),1)]))),256))])])):P("v-if",!0),o.type===t.QUESTION_TYPE.SHORT_TEXT?(r(),d(b,{key:3},[s[17]||(s[17]=e("span",null,"Answer:",-1)),e("div",ut,l(o.shortAnswer),1)],64)):P("v-if",!0)],8,tt)]),e("div",_t,[e("i",{class:"bx bx-chevron-down",onClick:n=>t.toggleDisplayAnswer(R,n.currentTarget)},null,8,mt)])]))),256))])])]),i(t.ShareModal,{ref:"shareModalRef"},null,512),i(C,{"wrap-class-name":"medium-modal",visible:t.modal_rate_open},{footer:a(()=>[i(L,{type:"primary",class:"main-color-btn"},{default:a(()=>s[20]||(s[20]=[m("Send")])),_:1,__:[20]})]),default:a(()=>[e("div",vt,[i(z,{class:"w-100 d-flex align-items-center justify-content-between"},{default:a(()=>[i(y,{span:1},{default:a(()=>[e("div",{onClick:s[3]||(s[3]=o=>t.modal_rate_open=!1)},s[18]||(s[18]=[e("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)]))]),_:1}),i(y,{class:"main-title",span:20},{default:a(()=>s[19]||(s[19]=[e("span",null,"Rate the question set",-1),m(),e("br",null,null,-1)])),_:1,__:[19]})]),_:1})]),e("div",pt,[i(w,{value:t.rateValue,"onUpdate:value":s[4]||(s[4]=o=>t.rateValue=o),style:{"font-size":"40px"}},null,8,["value"])])]),_:1},8,["visible"])],64)}const St=te(Ee,[["render",ht],["__scopeId","data-v-307050af"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/question_sets/detail.vue"]]);export{St as default};
