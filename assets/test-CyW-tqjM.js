import{a2 as Ae,a3 as je,d as Je,u as We,i as C,H as X,j as Be,G as le,s as Xe,M as Ke,S as Ze,_ as $e,r as P,a as y,o as b,b as i,c as v,C as _e,f as U,p as I,w,g as F,t as k,F as K,B as ne,e as et}from"./index-C4kWnLRR.js";import{H as tt,D as nt}from"./index-C6uUAcEg.js";import{Q as S}from"./questionTypes-CS3lcRlq.js";import{T as it}from"./TextArea-BAqMXKaI.js";import{l as st}from"./vue-draggable-plus-BE0PNLYU.js";var rt=je();const Ce=Ae(rt);var ce={exports:{}},ot=ce.exports,ke;function at(){return ke||(ke=1,function(ue,o){(function(Z,e){ue.exports=e()})(ot,function(){var Z,e,g=1e3,ee=6e4,Y=36e5,u=864e5,G=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,A=31536e6,V=2628e6,ie=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,E={years:A,months:V,days:u,hours:Y,minutes:ee,seconds:g,milliseconds:1,weeks:6048e5},Q=function(p){return p instanceof j},H=function(p,c,r){return new j(p,r,c.$l)},L=function(p){return e.p(p)+"s"},z=function(p){return p<0},m=function(p){return z(p)?Math.ceil(p):Math.floor(p)},l=function(p){return Math.abs(p)},q=function(p,c){return p?z(p)?{negative:!0,format:""+l(p)+c}:{negative:!1,format:""+p+c}:{negative:!1,format:""}},j=function(){function p(r,x,_){var T=this;if(this.$d={},this.$l=_,r===void 0&&(this.$ms=0,this.parseFromMilliseconds()),x)return H(r*E[L(x)],this);if(typeof r=="number")return this.$ms=r,this.parseFromMilliseconds(),this;if(typeof r=="object")return Object.keys(r).forEach(function(R){T.$d[L(R)]=r[R]}),this.calMilliseconds(),this;if(typeof r=="string"){var M=r.match(ie);if(M){var O=M.slice(2).map(function(R){return R!=null?Number(R):0});return this.$d.years=O[0],this.$d.months=O[1],this.$d.weeks=O[2],this.$d.days=O[3],this.$d.hours=O[4],this.$d.minutes=O[5],this.$d.seconds=O[6],this.calMilliseconds(),this}}return this}var c=p.prototype;return c.calMilliseconds=function(){var r=this;this.$ms=Object.keys(this.$d).reduce(function(x,_){return x+(r.$d[_]||0)*E[_]},0)},c.parseFromMilliseconds=function(){var r=this.$ms;this.$d.years=m(r/A),r%=A,this.$d.months=m(r/V),r%=V,this.$d.days=m(r/u),r%=u,this.$d.hours=m(r/Y),r%=Y,this.$d.minutes=m(r/ee),r%=ee,this.$d.seconds=m(r/g),r%=g,this.$d.milliseconds=r},c.toISOString=function(){var r=q(this.$d.years,"Y"),x=q(this.$d.months,"M"),_=+this.$d.days||0;this.$d.weeks&&(_+=7*this.$d.weeks);var T=q(_,"D"),M=q(this.$d.hours,"H"),O=q(this.$d.minutes,"M"),R=this.$d.seconds||0;this.$d.milliseconds&&(R+=this.$d.milliseconds/1e3,R=Math.round(1e3*R)/1e3);var W=q(R,"S"),de=r.negative||x.negative||T.negative||M.negative||O.negative||W.negative,re=M.format||O.format||W.format?"T":"",oe=(de?"-":"")+"P"+r.format+x.format+T.format+re+M.format+O.format+W.format;return oe==="P"||oe==="-P"?"P0D":oe},c.toJSON=function(){return this.toISOString()},c.format=function(r){var x=r||"YYYY-MM-DDTHH:mm:ss",_={Y:this.$d.years,YY:e.s(this.$d.years,2,"0"),YYYY:e.s(this.$d.years,4,"0"),M:this.$d.months,MM:e.s(this.$d.months,2,"0"),D:this.$d.days,DD:e.s(this.$d.days,2,"0"),H:this.$d.hours,HH:e.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:e.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:e.s(this.$d.seconds,2,"0"),SSS:e.s(this.$d.milliseconds,3,"0")};return x.replace(G,function(T,M){return M||String(_[T])})},c.as=function(r){return this.$ms/E[L(r)]},c.get=function(r){var x=this.$ms,_=L(r);return _==="milliseconds"?x%=1e3:x=_==="weeks"?m(x/E[_]):this.$d[_],x||0},c.add=function(r,x,_){var T;return T=x?r*E[L(x)]:Q(r)?r.$ms:H(r,this).$ms,H(this.$ms+T*(_?-1:1),this)},c.subtract=function(r,x){return this.add(r,x,!0)},c.locale=function(r){var x=this.clone();return x.$l=r,x},c.clone=function(){return H(this.$ms,this)},c.humanize=function(r){return Z().add(this.$ms,"ms").locale(this.$l).fromNow(!r)},c.valueOf=function(){return this.asMilliseconds()},c.milliseconds=function(){return this.get("milliseconds")},c.asMilliseconds=function(){return this.as("milliseconds")},c.seconds=function(){return this.get("seconds")},c.asSeconds=function(){return this.as("seconds")},c.minutes=function(){return this.get("minutes")},c.asMinutes=function(){return this.as("minutes")},c.hours=function(){return this.get("hours")},c.asHours=function(){return this.as("hours")},c.days=function(){return this.get("days")},c.asDays=function(){return this.as("days")},c.weeks=function(){return this.get("weeks")},c.asWeeks=function(){return this.as("weeks")},c.months=function(){return this.get("months")},c.asMonths=function(){return this.as("months")},c.years=function(){return this.get("years")},c.asYears=function(){return this.as("years")},p}(),se=function(p,c,r){return p.add(c.years()*r,"y").add(c.months()*r,"M").add(c.days()*r,"d").add(c.hours()*r,"h").add(c.minutes()*r,"m").add(c.seconds()*r,"s").add(c.milliseconds()*r,"ms")};return function(p,c,r){Z=r,e=r().$utils(),r.duration=function(T,M){var O=r.locale();return H(T,{$l:O},M)},r.isDuration=Q;var x=c.prototype.add,_=c.prototype.subtract;c.prototype.add=function(T,M){return Q(T)?se(this,T,1):x.bind(this)(T,M)},c.prototype.subtract=function(T,M){return Q(T)?se(this,T,-1):_.bind(this)(T,M)}}})}(ce)),ce.exports}var lt=at();const ct=Ae(lt),ut=Je({__name:"test",setup(ue,{expose:o}){o();const{t:Z}=We(),e={HTML:"HTML",PLAIN_TEXT:"PlainText"},g={id:"123456",title:"Programming fundamental",description:"Basic knowledge about programming.",totalQuestion:30,completed:8,question:[{id:"11111111-aaaa-aaaa-aaaa-111111111111",questionSetId:"11111111-1111-1111-1111-111111111111",type:"MultipleChoice",textFormat:"HTML",questionText:"<p>Which of the following are valid variable declarations in JavaScript?<br/><pre>let x = 5;<br>const y = 'hello';<br>var 1name = 'error';</pre></p>",score:10,scoreGraded:0,explainText:`Variables in JavaScript cannot start with a number. 'let x = 5' and 'const y = "hello"' are valid, but 'var 1name = "error"' is invalid.`,questionData:{multipleChoice:[{id:"a1",text:"Giữ vững địa vị thống trị của giai cấp công nhân thông qua Đảng Cộng sản Việt Nam trong mối liên minh giai cấp",isAnswer:!0},{id:"a2",text:"Giữ vững lập trường chính trị - tư tưởng của giai cấp công nhân, vai trò lãnh đạo của Đảng Cộng sản Việt Nam, giữ vững độc lập dân tộc và định hướng đi lên chủ nghĩa xã hội",isAnswer:!0},{id:"a3",text:"Giữ vững nền kinh tế thị trường theo hướng hiện đại, kiên định con đường đi lên chủ nghĩa xã hội",isAnswer:!1},{id:"a4",text:"Giữ vững nền kinh tế thị trường theo hướng hiện đại, kiên định con đường đi lên chủ nghĩa xã hội",isAnswer:!1}],matching:null,ordering:null,shortText:null}},{id:"44444444-dddd-dddd-dddd-444444444444",questionSetId:"11111111-1111-1111-1111-111111111111",type:"ShortText",textFormat:"HTML",questionText:"What is the output of the following code?<br/><pre>console.log(typeof null);</pre>",score:5,scoreGraded:5,explainText:"`typeof null` returns `'object'` due to a historical bug in JavaScript that has been preserved for backward compatibility.",questionData:{multipleChoice:null,matching:null,ordering:null,shortText:"object"}},{id:"22222222-bbbb-bbbb-bbbb-222222222222",questionSetId:"11111111-1111-1111-1111-111111111111",type:"Matching",textFormat:"PlainText",questionText:"Match the data types with appropriate examples.",score:10,scoreGraded:10,explainText:"A string is a series of characters like 'Hello World'. A boolean can be true or false. A number is a numeric value like 42.",questionData:{multipleChoice:null,ordering:null,shortText:null,matching:{leftItems:[{id:"l1",text:"String"},{id:"l2",text:"Boolean"},{id:"l3",text:"Number"}],rightItems:[{id:"r1",text:"'Hello World'"},{id:"r2",text:"true"},{id:"r3",text:"42"}],matches:[{leftId:"l1",rightId:"r1"},{leftId:"l2",rightId:"r2"},{leftId:"l3",rightId:"r3"}]}}},{id:"33333333-cccc-cccc-cccc-333333333333",questionSetId:"11111111-1111-1111-1111-111111111111",type:"Ordering",textFormat:"PlainText",questionText:"Arrange the steps of executing a JavaScript function.",score:10,scoreGraded:10,explainText:"First, the function must be declared. Then it can be called, at which point the body of the function will execute.",questionData:{multipleChoice:null,matching:null,shortText:null,ordering:[{id:"s2",text:"Function is called",correctOrder:2},{id:"s3",text:"Function body is executed",correctOrder:3},{id:"s1",text:"Function is declared",correctOrder:1}]}},{id:"55555555-aaaa-aaaa-aaaa-555555555555",questionSetId:"11111111-1111-1111-1111-111111111111",type:"MultipleChoice",textFormat:"HTML",questionText:"Which of the following statements correctly define a function in JavaScript?<br/><pre>function greet() { return 'Hi'; }</pre>",score:10,scoreGraded:0,explainText:"`function greet()` and `let greet = () => 'Hi';` are valid JavaScript function declarations. `def greet()` is Python syntax and not valid in JavaScript.",questionData:{multipleChoice:[{id:"f1",text:"function greet() { return 'Hi'; }",isAnswer:!0},{id:"f2",text:"def greet(): return 'Hi'",isAnswer:!1},{id:"f3",text:"let greet = () => 'Hi';",isAnswer:!0}],matching:null,ordering:null,shortText:null}},{id:"66666666-bbbb-bbbb-bbbb-666666666666",questionSetId:"11111111-1111-1111-1111-111111111111",type:"Matching",textFormat:"PlainText",questionText:"Match the loop type with its primary use case.",score:10,scoreGraded:10,explainText:"`for` is used when the number of iterations is known, `while` is better when the condition is dynamic, and `forEach` is designed for arrays.",questionData:{multipleChoice:null,ordering:null,shortText:null,matching:{leftItems:[{id:"lp1",text:"for loop"},{id:"lp2",text:"while loop"},{id:"lp3",text:"forEach loop"}],rightItems:[{id:"ru1",text:"Known number of iterations"},{id:"ru2",text:"Iterating over array elements"},{id:"ru3",text:"Unknown loop condition"}],matches:[{leftId:"lp1",rightId:"ru1"},{leftId:"lp2",rightId:"ru3"},{leftId:"lp3",rightId:"ru2"}]}}},{id:"77777777-cccc-cccc-cccc-777777777777",questionSetId:"11111111-1111-1111-1111-111111111111",type:"Ordering",textFormat:"PlainText",questionText:"Arrange the steps for writing and running a basic JavaScript program.",score:10,scoreGraded:10,explainText:"JavaScript code is typically written in a .js file, then linked in HTML, and finally run in the browser when the HTML is opened.",questionData:{multipleChoice:null,matching:null,shortText:null,ordering:[{id:"j1",text:"Write code in a .js file",correctOrder:1},{id:"j2",text:"Link the file to an HTML document",correctOrder:2},{id:"j3",text:"Open the HTML file in a browser",correctOrder:3}]}},{id:"88888888-dddd-dddd-dddd-888888888888",questionSetId:"11111111-1111-1111-1111-111111111111",type:"ShortText",textFormat:"HTML",questionText:"What will be the output of the following JavaScript code?<br/><pre>console.log(2 + '2');</pre>",score:5,scoreGraded:5,explainText:"When using `+` with a number and a string, JavaScript performs string concatenation. So `2 + '2'` becomes `'22'`.",questionData:{multipleChoice:null,matching:null,ordering:null,shortText:"22"}},{id:"99999999-eeee-eeee-eeee-999999999999",questionSetId:"11111111-1111-1111-1111-111111111111",type:"ShortText",textFormat:"PlainText",questionText:"In programming, what does 'DRY' stand for?",score:5,scoreGraded:5,explainText:"DRY stands for 'Don't Repeat Yourself', a principle aimed at reducing code duplication and improving maintainability.",questionData:{multipleChoice:null,matching:null,ordering:null,shortText:"Don't Repeat Yourself"}}]},ee=C([]),Y=X(()=>m.value.filter(n=>n.result===!1)),u=C(g.question[0]),G=C(""),A=C(!1),V=C(!1),ie=X(()=>{var n;return(n=u.value.questionData.multipleChoice)==null?void 0:n.some(t=>t.text.length>=100)}),E=C([]),Q=C([]),H=C([]),L=C([]),z=C(""),m=C([]),l=C(),q=C(!1),j=()=>{var n,t;q.value=!0,(t=(n=l.value)==null?void 0:n.getDotLottieInstance())==null||t.play(),setTimeout(()=>{q.value=!1},5e3)},se=(n,t)=>{var f;const s=g.question.findIndex(h=>h.id===n);if(s===-1)return!1;let d=(f=g.question[s].questionData.multipleChoice)==null?void 0:f.filter(h=>h.isAnswer).map(h=>h.id||[]).sort(),a=t.sort();return t.length!==(d==null?void 0:d.length)?!1:a.every((h,D)=>h===d[D])},p=n=>{var f;const t=g.question.findIndex(h=>h.id===u.value.id);let s=(f=g.question[t].questionData.multipleChoice)==null?void 0:f.filter(h=>h.isAnswer).map(h=>h.id||[]);const d=m.value.findIndex(h=>h.questionId===u.value.id);let a=m.value[d].multipleChoices;return s!=null&&s.includes(n.id)?!0:!(a!=null&&a.includes(n.id)&&!n.isAnswer)},c=(n,t)=>{var f;const s=g.question.findIndex(h=>h.id===n);if(s===-1)return!1;let d=((f=g.question[s].questionData.ordering)==null?void 0:f.map(h=>h.correctOrder).sort())||[];return t.map(h=>h.correctOrder).every((h,D)=>h===d[D])},r=(n,t,s)=>{const d=g.question.findIndex(N=>N.id===n);if(d===-1)return!1;let a=g.question[d].questionData.matching.matches,f=t.map(N=>N.id),h=s.map(N=>N.id);return f.map((N,te)=>({leftId:N,rightId:h[te]})).every(N=>a.some(te=>te.leftId===N.leftId&&te.rightId===N.rightId))},x=n=>{var f,h;const t=u.value.questionData.matching;if(!t)return!1;let s=t.leftItems.some(D=>D.id===n),d=t.matches.find(D=>s?D.leftId===n:D.rightId===n);const a=s?Q.value.findIndex(D=>D.id===n):H.value.findIndex(D=>D.id===n);return a===-1||!d?!1:s?((f=H.value[a])==null?void 0:f.id)===d.rightId:((h=Q.value[a])==null?void 0:h.id)===d.leftId},_=n=>n.trim().toLowerCase().normalize("NFKC").replace(/[\u2019\u2018\u201B\u0060]/g,"'").replace(/\s+/g," "),T=(n,t)=>{const s=g.question.findIndex(d=>d.id===n);return s===-1?!1:_(t)===_(g.question[s].questionData.shortText)},M=()=>{var s,d;const n=(s=m.value.find(a=>a.questionId===u.value.id))==null?void 0:s.shortText;if(!n)return!1;const t=(d=g.question.find(a=>a.id===u.value.id))==null?void 0:d.questionData.shortText;return _(n)===_(t)},O=X(()=>{var n;if(u.value.type===S.SHORT_TEXT&&V.value&&!M())return(n=g.question.find(t=>t.id===u.value.id))==null?void 0:n.questionData.shortText}),R=C(null),W=C(!1),de=()=>{W.value=!W.value},re=C(!1),oe=()=>{re.value=!0;let n=sessionStorage.getItem("test_settings");n&&(J.numberOfQuestion=JSON.parse(n).numberOfQuestion,J.questionTypes=JSON.parse(n).questionTypes)},Me=()=>{re.value=!1},Oe=C(),J=Be({numberOfQuestion:20,questionTypes:[S.MULTIPLE_CHOICE,S.MATCHING,S.ORDERING,S.SHORT_TEXT]}),De=(n,t)=>{if(t)J.questionTypes.includes(n)||J.questionTypes.push(n);else{const s=J.questionTypes.indexOf(n);s!==-1&&J.questionTypes.splice(s,1)}},Qe=()=>{sessionStorage.setItem("test_settings",JSON.stringify(J))},B=(n,t)=>{n===-1?m.value.push(t):m.value[n]=t},He=()=>{if(V.value)return;const n=m.value.findIndex(d=>d.questionId===u.value.id),t=A.value,s=A.value?"Skipped":"";switch(u.value.type){case S.MULTIPLE_CHOICE:{E.value.length>0?B(n,{questionId:u.value.id,type:u.value.type,isSkipped:t,result:!1,resultText:s,multipleChoices:[...E.value],matchingLeft:null,matchingRight:null,ordering:null,shortText:""}):n!==-1&&m.value.splice(n,1);break}case S.MATCHING:{B(n,{questionId:u.value.id,type:u.value.type,isSkipped:t,result:!1,resultText:s,multipleChoices:null,matchingLeft:[...Q.value],matchingRight:[...H.value],ordering:null,shortText:""});break}case S.ORDERING:{B(n,{questionId:u.value.id,type:u.value.type,isSkipped:t,result:!1,resultText:s,multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:[...L.value],shortText:""});break}case S.SHORT_TEXT:{z.value.trim()?B(n,{questionId:u.value.id,type:u.value.type,isSkipped:t,result:!1,resultText:s,multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:null,shortText:z.value.trim()}):n!==-1&&m.value.splice(n,1);break}}},he=(n,t)=>{var s,d;switch(n.type){case S.MULTIPLE_CHOICE:return{...t,multipleChoices:((s=n.questionData.multipleChoice)==null?void 0:s.filter(a=>a.isAnswer).map(a=>a.id))??[]};case S.MATCHING:{const a=n.questionData.matching,f=(a==null?void 0:a.matches)??[],h=(a==null?void 0:a.leftItems)??[],D=(a==null?void 0:a.rightItems)??[],N=f.map(xe=>h.find(be=>be.id==xe.leftId)),te=f.map(xe=>D.find(be=>be.id==xe.rightId));return{...t,matchingLeft:N,matchingRight:te}}case S.ORDERING:return{...t,ordering:((d=n.questionData.ordering)==null?void 0:d.slice().sort((a,f)=>a.correctOrder-f.correctOrder))??[]};case S.SHORT_TEXT:return{...t,shortText:n.questionData.shortText??""};default:return t}},we=()=>{g.question.forEach(n=>{const t={questionId:n.id,type:n.type,isSkipped:!0,result:!1,resultText:"Skipped",multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:null,shortText:""};let s=m.value.findIndex(d=>d.questionId===n.id);s===-1&&(m.value.push(he(n,t)),s=m.value.length-1),m.value[s].isSkipped&&B(s,{...m.value[s],...he(n,{})})})},Ee=()=>{qe(),m.value.length<g.question.length?Ke.confirm({title:`You missed ${g.question.length-m.value.length} questions.`,content:"Are you certain about this decision?",onOk:()=>{V.value=!0,we(),me()}}):(V.value=!0,me())},me=()=>{const n=g.question.findIndex(t=>t.id===u.value.id);ae(n),m.value.filter(t=>t.isSkipped===!1).forEach(t=>{let s;switch(t.type){case S.MULTIPLE_CHOICE:{s=se(t.questionId,t.multipleChoices),t.result=s,t.resultText=s?"Correct!":"Wrong answer";break}case S.MATCHING:{s=r(t.questionId,t.matchingLeft,t.matchingRight),t.result=s,t.resultText=s?"Correct!":"Wrong answer";break}case S.ORDERING:{s=c(t.questionId,t.ordering),t.result=s,t.resultText=s?"Correct!":"Wrong answer";break}case S.SHORT_TEXT:{s=T(t.questionId,t.shortText),t.result=s,t.resultText=s?"Correct!":"Wrong answer";break}}}),ye(),Y.value.length===0&&j()},Le=()=>{A.value=!0;const n=m.value.findIndex(t=>t.questionId===u.value.id);B(n,{questionId:u.value.id,type:u.value.type,isSkipped:!0,result:!1,resultText:"Skipped",multipleChoices:E.value,matchingLeft:Q.value,matchingRight:H.value,ordering:L.value,shortText:z.value})},ae=n=>{var s,d;A.value=!1,u.value=g.question[n];const t=m.value.find(a=>a.questionId===u.value.id);switch(u.value.type){case S.MULTIPLE_CHOICE:{G.value=`Choose (${(s=u.value.questionData.multipleChoice)==null?void 0:s.filter(a=>a.isAnswer).length}) options.`,E.value=t?t==null?void 0:t.multipleChoices:[];break}case S.ORDERING:{G.value="Arrange these options to their correct order.",L.value=t?t==null?void 0:t.ordering:((d=u.value.questionData.ordering)==null?void 0:d.map(a=>a))||[];break}case S.MATCHING:{G.value="Arrange the items to align with their correct matches.",Q.value=t?t==null?void 0:t.matchingLeft:u.value.questionData.matching.leftItems.map(a=>a)||[],H.value=t?t==null?void 0:t.matchingRight:u.value.questionData.matching.rightItems.map(a=>a)||{};break}case S.SHORT_TEXT:{G.value="Fill in the blank the correct answer.",z.value=t?t==null?void 0:t.shortText:"";break}}},Re=()=>{A.value=!1;const n=g.question.findIndex(t=>t.id===u.value.id);n<g.question.length-1&&ae(n+1)},Ne=()=>{A.value=!1;const n=g.question.findIndex(t=>t.id===u.value.id);n>0&&ae(n-1)},Pe=n=>Array.from(m.value).some(t=>t.questionId===n),Ue=n=>{var t;return(t=m.value.find(s=>s.questionId===n&&!s.isSkipped))==null?void 0:t.result},Fe=X(()=>m.value.some(n=>n.questionId===u.value.id&&n.isSkipped)),Ve=X(()=>{const n=m.value.find(t=>t.questionId===u.value.id);return{result:n==null?void 0:n.result,resultText:n==null?void 0:n.resultText}}),Ye=X(()=>{const n=g.question.findIndex(t=>t.id===u.value.id);return n!==-1&&n<g.question.length-1}),Ge=X(()=>{const n=g.question.findIndex(t=>t.id===u.value.id);return n!==-1&&n>0}),ge=()=>Math.floor((g.question.length-Y.value.length)/g.question.length*100),Te=()=>Math.floor(Y.value.length/g.question.length*100),ye=()=>{const n=$(".content-item-test-result");n&&$(n).slideToggle(),Ce.setOptions({lang:{decimalPoint:".",thousandsSep:","}}),Ce.chart("result_chart_container",{chart:{type:"pie",custom:{},events:{render:function(){const t=this,s=t.series[0];let d=t.options.chart.custom.label;d||(d=t.options.chart.custom.label=t.renderer.label(`<strong>${ge()}%</strong>`,0,0).css({color:"var(--text-color)",textAnchor:"middle"}).add());const a=s.center[0]+t.plotLeft,f=s.center[1]+t.plotTop-d.attr("height")/2;d.attr({x:a,y:f}),d.css({fontSize:`${s.center[2]/8}px`})}}},credits:{enabled:!1},plotOptions:{pie:{borderWidth:0,borderRadius:3}},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.0f}%</b>"},series:[{type:"pie",name:"Result",colorByPoint:!0,innerSize:"75%",dataLabels:{enabled:!1},data:[{name:"Correct",y:ge(),color:"var(--correct-answer-color)"},{name:"Incorrect",y:Te(),color:"var(--incorrect-answer-color)"}]}]})};le.extend(ct);const fe=C(),ve=C(""),Se=()=>{fe.value=le()},qe=()=>{const t=le().diff(fe.value),s=Math.floor(t/1e3);if(s<60)ve.value=`Your time: ${s} second${s===1?"":"s"}`;else{const d=le.duration(t),a=d.hours(),f=d.minutes();let h="Your time: ";a>0&&(h+=`${a} hour${a>1?"s":""} `),f>0&&(h+=`${f} minute${f>1?"s":""}`),ve.value=h.trim()}},ze={scroll:!0,scrollSensitivity:100,scrollSpeed:100,scrollTarget:document.scrollingElement};function pe(){Ze(()=>{requestAnimationFrame(()=>{const n=document.querySelectorAll(".matching-option-container.left .answer-option-matching"),t=document.querySelectorAll(".matching-option-container.right .answer-option-matching"),s=Math.min(n.length,t.length);for(let d=0;d<s;d++){const a=n[d],f=t[d];if(!a||!f)continue;a.style.height="auto",f.style.height="auto";const h=Math.max(a.offsetHeight,f.offsetHeight);a.style.height=`${h}px`,f.style.height=`${h}px`}})})}Xe(()=>{ae(0),pe(),window.addEventListener("resize",pe),Se()});const Ie={t:Z,QUESTION_FORMAT:e,quiz:g,completed:ee,incorrect:Y,currentQuestion:u,currentQuestionInstruction:G,currentQuestionIsSkipped:A,isSubmitted:V,isOptionExceed:ie,userAnswerMultipleChoice:E,userAnswerMatchingLeft:Q,userAnswerMatchingRight:H,userAnswerOrdering:L,userAnswerShortText:z,userAnswer:m,animationRef:l,isAnimationDisplaying:q,triggerAnimation:j,checkMultipleChoice:se,checkMultipleChoiceAnswerCorrect:p,checkOrdering:c,checkMatching:r,checkMatchingAnswerCorrect:x,cleanShortTextAnswer:_,checkShortText:T,checkShortextCorrect:M,getShortTextCorrectAnswer:O,explainModal:R,explainModalOpen:W,toggleExplainModal:de,setting_modal_open:re,openSettingModal:oe,closeSettingModal:Me,settingFormRef:Oe,settingFormState:J,toggleQuestionType:De,onCreateNewTest:Qe,updateUserAnswer:B,onUserAnswerChange:He,refactorLeftOverUserAnswer:he,handleSkippedQuestion:we,onSubmitAnswer:Ee,getUserAnswerResult:me,onSkipQuestion:Le,onLoadCurrentQuestion:ae,onNextQuestion:Re,onPreviousQuestion:Ne,userAnswerContainQuestion:Pe,getUserAnswerResultById:Ue,userAnswerCurrentQuestionSkipped:Fe,userAnswerCurrentQuestionResult:Ve,hasNextQuestion:Ye,hasPreviousQuestion:Ge,getCorrectPercentage:ge,getInCorrectPercentage:Te,generateChart:ye,startTime:fe,timerResult:ve,timerStart:Se,timerEnd:qe,dragOptions:ze,syncMatchingHeights:pe,get DotLottieVue(){return nt},get QUESTION_TYPE(){return S},TextArea:it,get VueDraggable(){return st},get HolderOutlined(){return tt}};return Object.defineProperty(Ie,"__isScriptSetup",{enumerable:!1,value:!0}),Ie}}),dt={class:"page-container"},ht={class:"title-container title-container-header"},mt={class:"content content-test d-flex flex-column"},gt={class:"d-flex"},ft={class:"content-item question-navigators"},vt={class:"question-navigator-container"},pt=["onClick"],xt={class:"content-item content-item-test-result"},bt={class:"result-container"},_t={class:"result-section"},wt={class:"result-section-title"},Tt={class:"result-section-statistic"},yt={class:"result-text-container"},St={class:"result-text correct"},qt={class:"result-text incorrect"},It={class:"result-section result-section-buttons"},Ct={key:0,class:"result-button"},kt={key:1,class:"result-button"},At={class:"content-item"},Mt={class:"section question-section"},Ot=["innerHTML"],Dt={class:"section answer-section"},Qt={class:"d-flex align-items-center"},Ht={class:"answer-section-ins"},Et={class:"answer-option-content"},Lt={key:0,class:"bx bx-check answer-icon"},Rt={key:1,class:"bx bx-x answer-icon"},Nt={key:1,class:"answer-option-container matching"},Pt={class:"matching-option-container left"},Ut={class:"d-flex align-items-center"},Ft={class:"answer-option-order"},Vt={class:"answer-option-content"},Yt={class:"matching-option-container right"},Gt={class:"d-flex align-items-center"},zt={class:"answer-option-content"},jt={class:"answer-option-order"},Jt={key:2,class:"answer-option-container ordering"},Wt={class:"answer-option-order"},Bt={class:"answer-option-content"},Xt={key:3,class:"answer-option-container"},Kt={class:"w-100 d-flex align-items-center"},Zt={key:0,class:"bx bx-check answer-icon"},$t={key:1,class:"bx bx-x answer-icon"},en={key:0,class:"short-text-correct-answer"},tn={class:"learn-question-footer"},nn={class:"d-flex"},sn={class:"learn-question-explain"},rn={class:"title-container"},on={class:"setting-form-item"},an={class:"setting-form-item setting-form-switch"};function ln(ue,o,Z,e,g,ee){const Y=P("RouterLink"),u=P("a-col"),G=P("a-row"),A=P("a-button"),V=P("a-checkbox"),ie=P("a-checkbox-group"),E=P("a-input-number"),Q=P("a-form-item"),H=P("a-divider"),L=P("a-switch"),z=P("a-form"),m=P("a-modal");return b(),y(K,null,[i("div",dt,[e.isAnimationDisplaying?(b(),_e(e.DotLottieVue,{key:0,autoplay:e.isAnimationDisplaying,ref:"animationRef",class:I(["animation-container"]),onComplete:o[0]||(o[0]=l=>e.isAnimationDisplaying=!1),src:"/src/assets/confetti.lottie"},null,8,["autoplay"])):U("v-if",!0),i("div",ht,[v(G,{class:"w-100 d-flex align-items-center"},{default:w(()=>[v(u,{span:1},{default:w(()=>[v(Y,{to:{name:"User_Library"}},{default:w(()=>o[8]||(o[8]=[i("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[8]})]),_:1}),v(u,{class:"main-title",span:22},{default:w(()=>[i("span",null,k(e.quiz.title),1),o[9]||(o[9]=F()),o[10]||(o[10]=i("br",null,null,-1)),i("span",null,k(e.quiz.description),1)]),_:1,__:[9,10]}),v(u,{span:1},{default:w(()=>[i("i",{class:"bx bx-cog test-setting-btn",onClick:e.openSettingModal})]),_:1})]),_:1})]),i("div",mt,[i("div",gt,[i("div",ft,[o[12]||(o[12]=i("div",{class:"question-navigator-title"},"Question list",-1)),i("div",vt,[(b(!0),y(K,null,ne(e.quiz.question,(l,q)=>(b(),y("div",{class:I(["question-navigator-item",e.currentQuestion.id===l.id?"current-question":"",e.userAnswerContainQuestion(l.id)?"completed-question":"",e.isSubmitted?e.getUserAnswerResultById(l.id)?"correct":"incorrect":""]),onClick:j=>e.onLoadCurrentQuestion(q)},[i("span",null,k(q+1),1)],10,pt))),256))]),v(A,{type:"primary",class:I(["main-color-btn",e.isSubmitted?"main-color-btn-disabled":""]),onClick:e.onSubmitAnswer},{default:w(()=>o[11]||(o[11]=[F(" Submit ")])),_:1,__:[11]},8,["class"])]),i("div",xt,[i("div",bt,[i("div",_t,[i("div",wt,k(e.timerResult),1),i("div",Tt,[o[15]||(o[15]=i("div",{id:"result_chart_container"},null,-1)),i("div",yt,[i("div",St,[o[13]||(o[13]=F(" Correct: ")),i("span",null,k(e.quiz.question.length-e.incorrect.length),1)]),i("div",qt,[o[14]||(o[14]=F(" Incorrect: ")),i("span",null,k(e.incorrect.length),1)])])])]),i("div",It,[o[18]||(o[18]=et('<div class="result-section-title" data-v-4662dd21>Next steps</div><div class="result-button" data-v-4662dd21><i class="bx bxs-news" data-v-4662dd21></i><div data-v-4662dd21><div class="result-button-title" data-v-4662dd21>New test</div><div class="result-button-content" data-v-4662dd21> Attempt new test with current options </div></div></div>',2)),e.getInCorrectPercentage()<=30?(b(),y("div",Ct,o[16]||(o[16]=[i("i",{class:"bx bx-analyse"},null,-1),i("div",null,[i("div",{class:"result-button-title"},"Practice in learn mode"),i("div",{class:"result-button-content"}," Learn these questions in a different way build you knowledge. ")],-1)]))):U("v-if",!0),e.getInCorrectPercentage()>30?(b(),y("div",kt,o[17]||(o[17]=[i("i",{class:"bx bx-reset"},null,-1),i("div",null,[i("div",{class:"result-button-title"}," Retest using incorrect questions "),i("div",{class:"result-button-content"}," Test yourself again on the questions you got wrong. ")],-1)]))):U("v-if",!0)])])])]),i("div",At,[i("div",Mt,[i("div",{class:I(["learn-question",e.currentQuestion.textFormat===e.QUESTION_FORMAT.HTML?"":"d-none"]),innerHTML:e.currentQuestion.questionText},null,10,Ot),i("div",{class:I(["learn-question",e.currentQuestion.textFormat===e.QUESTION_FORMAT.HTML?"d-none":""])},k(e.currentQuestion.questionText),3),i("div",Dt,[i("div",Qt,[i("div",Ht,k(e.currentQuestionInstruction),1),i("div",{class:I(["ms-3 learn-question-result",e.isSubmitted?e.userAnswerCurrentQuestionResult.result?"result-correct":"result-incorrect":"",e.userAnswerCurrentQuestionSkipped?"result-skipped":""])},k(e.userAnswerCurrentQuestionResult.resultText),3)]),e.currentQuestion.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(b(),_e(ie,{key:0,onChange:e.onUserAnswerChange,value:e.userAnswerMultipleChoice,"onUpdate:value":o[1]||(o[1]=l=>e.userAnswerMultipleChoice=l),class:I(["answer-option-container multiplechoice",e.isOptionExceed?"column":""])},{default:w(()=>[(b(!0),y(K,null,ne(e.currentQuestion.questionData.multipleChoice,(l,q)=>(b(),_e(V,{value:l.id,"onUpdate:value":j=>l.id=j,disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,class:I(["answer-option answer-option-multiplechoice",e.isSubmitted&&e.checkMultipleChoiceAnswerCorrect(l)&&l.isAnswer?"answer-correct":"",e.isSubmitted&&!e.checkMultipleChoiceAnswerCorrect(l)&&!l.isAnswer?"answer-incorrect":""])},{default:w(()=>[i("div",Et,k(l.text),1),e.isSubmitted&&e.checkMultipleChoiceAnswerCorrect(l)&&l.isAnswer?(b(),y("i",Lt)):U("v-if",!0),e.isSubmitted&&!e.checkMultipleChoiceAnswerCorrect(l)&&!l.isAnswer?(b(),y("i",Rt)):U("v-if",!0)]),_:2},1032,["value","onUpdate:value","disabled","class"]))),256))]),_:1},8,["value","class"])):U("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.MATCHING?(b(),y("div",Nt,[i("div",Pt,[v(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerMatchingLeft,"onUpdate:modelValue":o[2]||(o[2]=l=>e.userAnswerMatchingLeft=l),options:e.dragOptions,onEnd:e.syncMatchingHeights,onVnodeUpdated:e.onUserAnswerChange},{default:w(()=>[(b(!0),y(K,null,ne(e.userAnswerMatchingLeft,(l,q)=>(b(),y("div",Ut,[i("div",{class:I(["answer-option answer-option-matching",e.isSubmitted?e.checkMatchingAnswerCorrect(l.id)?"answer-correct":"answer-incorrect":""])},[i("div",Ft,[v(e.HolderOutlined)]),i("div",Vt,k(l.text),1)],2),i("i",{class:I(["bx bxs-label matching-icon",e.isSubmitted?e.checkMatchingAnswerCorrect(l.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2)]))),256))]),_:1},8,["disabled","modelValue"])]),i("div",Yt,[v(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerMatchingRight,"onUpdate:modelValue":o[3]||(o[3]=l=>e.userAnswerMatchingRight=l),options:e.dragOptions,onEnd:e.syncMatchingHeights,onVnodeUpdated:e.onUserAnswerChange},{default:w(()=>[(b(!0),y(K,null,ne(e.userAnswerMatchingRight,(l,q)=>(b(),y("div",Gt,[i("i",{class:I(["bx bxs-label matching-icon",e.isSubmitted?e.checkMatchingAnswerCorrect(l.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2),i("div",{class:I(["answer-option answer-option-matching",e.isSubmitted?e.checkMatchingAnswerCorrect(l.id)?"answer-correct":"answer-incorrect":""])},[i("div",zt,k(l.text),1),i("div",jt,[v(e.HolderOutlined)])],2)]))),256))]),_:1},8,["disabled","modelValue"])])])):U("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.ORDERING?(b(),y("div",Jt,[v(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerOrdering,"onUpdate:modelValue":o[4]||(o[4]=l=>e.userAnswerOrdering=l),options:e.dragOptions,onVnodeUpdated:e.onUserAnswerChange},{default:w(()=>[(b(!0),y(K,null,ne(e.userAnswerOrdering,(l,q)=>(b(),y("div",{class:I(["answer-option answer-option-ordering",e.isSubmitted?q+1===l.correctOrder?"answer-correct":"answer-incorrect":""])},[i("div",Wt,[v(e.HolderOutlined),F(" "+k(q+1),1)]),i("div",Bt,k(l.text),1),i("div",{class:I(["answer-option-order answer-icon",e.isSubmitted?"":"d-none"])},[o[19]||(o[19]=i("i",{class:"bx bx-hash answer-icon"},null,-1)),F(" "+k(l.correctOrder),1)],2)],2))),256))]),_:1},8,["disabled","modelValue"])])):U("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.SHORT_TEXT?(b(),y("div",Xt,[i("div",{class:I(["answer-short-text",e.isSubmitted?e.checkShortextCorrect()?"answer-correct":"answer-incorrect":""])},[i("div",Kt,[v(e.TextArea,{readonly:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,placeholder:"Enter your answer...",modelValue:e.userAnswerShortText,"onUpdate:modelValue":o[5]||(o[5]=l=>e.userAnswerShortText=l),onChange:e.onUserAnswerChange},null,8,["readonly","modelValue"]),e.isSubmitted&&e.checkShortextCorrect()?(b(),y("i",Zt)):U("v-if",!0),e.isSubmitted&&!e.checkShortextCorrect()?(b(),y("i",$t)):U("v-if",!0)]),e.isSubmitted&&!e.checkShortextCorrect()?(b(),y("div",en,[o[20]||(o[20]=F(" Correct answer: ")),i("span",null,k(e.getShortTextCorrectAnswer),1)])):U("v-if",!0)],2)])):U("v-if",!0)]),i("div",tn,[v(A,{class:I(["main-color-btn",e.hasPreviousQuestion?"":"main-color-btn-disabled"]),type:"primary",size:"large",onClick:e.onPreviousQuestion},{default:w(()=>o[21]||(o[21]=[i("i",{class:"bx bx-chevron-left"},null,-1),F(" Previous question ")])),_:1,__:[21]},8,["class"]),i("div",{class:I(["main-color-btn-ghost",e.userAnswerCurrentQuestionSkipped||e.isSubmitted?"main-color-btn-ghost-disabled":""]),onClick:o[6]||(o[6]=l=>e.onSkipQuestion())}," Don't know? ",2),i("div",nn,[v(A,{class:I(["main-color-btn",e.hasNextQuestion?"":"main-color-btn-disabled"]),type:"primary",size:"large",onClick:e.onNextQuestion},{default:w(()=>o[22]||(o[22]=[F(" Next question "),i("i",{class:"bx bx-chevron-right"},null,-1)])),_:1,__:[22]},8,["class"])])])])]),i("div",{ref:"explainModal",class:I(["explain-modal explain-modal-up",{show:e.explainModalOpen}])},[i("div",sn,k(e.currentQuestion.explainText),1),v(A,{class:I(["main-color-btn close-modal-btn"]),type:"primary",size:"large",onClick:e.toggleExplainModal},{default:w(()=>o[23]||(o[23]=[i("i",{class:"bx bx-chevrons-down"},null,-1)])),_:1,__:[23]}),v(A,{class:I(["main-color-btn"]),type:"primary",size:"large",onClick:e.onNextQuestion},{default:w(()=>o[24]||(o[24]=[F(" Next question "),i("i",{class:"bx bx-chevron-right"},null,-1)])),_:1,__:[24]})],2)])]),v(m,{centered:"","wrap-class-name":"medium-modal",open:e.setting_modal_open,onCancel:e.closeSettingModal},{footer:w(()=>[v(A,{type:"primary",class:"main-color-btn",size:"large",shape:"round",onClick:e.onCreateNewTest},{default:w(()=>o[27]||(o[27]=[F(" Create new test ")])),_:1,__:[27]})]),default:w(()=>[i("div",rn,[v(G,{class:"w-100 d-flex align-items-center justify-content-between"},{default:w(()=>[v(u,{span:1},{default:w(()=>[i("div",{onClick:e.closeSettingModal},o[25]||(o[25]=[i("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)]))]),_:1}),v(u,{class:"main-title",span:20},{default:w(()=>o[26]||(o[26]=[i("span",null,"Practice test settings",-1),F(),i("br",null,null,-1)])),_:1,__:[26]})]),_:1})]),v(z,{class:"setting-form"},{default:w(()=>[v(Q,null,{default:w(()=>[i("div",on,[i("div",null,"Number of question (max "+k(e.quiz.question.length)+"):",1),v(E,{size:"large",id:"inputNumber",value:e.settingFormState.numberOfQuestion,"onUpdate:value":o[7]||(o[7]=l=>e.settingFormState.numberOfQuestion=l),min:5,max:e.quiz.totalQuestion},null,8,["value","max"])])]),_:1}),v(H,{style:{"background-color":"var(--form-item-border-color)"}}),v(Q,null,{default:w(()=>[(b(!0),y(K,null,ne(e.QUESTION_TYPE,l=>(b(),y("div",an,[i("div",null,k(l),1),v(L,{disabled:e.settingFormState.questionTypes.length<=1&&e.settingFormState.questionTypes.includes(l),checked:e.settingFormState.questionTypes.includes(l),onChange:q=>e.toggleQuestionType(l,q)},null,8,["disabled","checked","onChange"])]))),256))]),_:1})]),_:1})]),_:1},8,["open"])],64)}const gn=$e(ut,[["render",ln],["__scopeId","data-v-4662dd21"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/question_sets/test.vue"]]);export{gn as default};
