var Ot=Object.defineProperty;var Nt=(t,n,o)=>n in t?Ot(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o;var Ne=(t,n,o)=>Nt(t,typeof n!="symbol"?n+"":n,o);import{ah as Pt,ai as Vt,d as Te,aj as Ft,ak as Rt,i as j,al as Ht,B as N,C as Ie,Q as st,a4 as ie,am as be,an as xe,c as p,ao as Ut,ap as fe,aq as P,ar as le,as as Qt,at as Kt,a0 as Pe,au as zt,av as rt,aw as xt,ax as Bt,ay as we,az as pt,aA as jt,aB as Gt,aC as qt,aD as gt,aE as Re,aF as Wt,aG as $t,aH as Ce,aI as Yt,aJ as Ct,aK as Jt,aL as Xt,aM as et,aN as Zt,aO as en,aP as tn,aQ as nn,aR as ln,aS as an,aT as on,aU as sn,aV as yt,aW as rn,aX as cn,aY as dn,aZ as un,a_ as tt,a$ as nt,b0 as vn,b1 as fn,b2 as hn,I as mn,u as It,j as it,s as Tt,k as ue,M as Et,_ as ft,r as R,E as Ve,o as b,w as k,b as l,f as B,t as M,b3 as Fe,p as ve,a as x,F as ee,D as ne,e as re,G as lt,v as pn,L as gn}from"./index-BhCEM7Qr.js";import{A as yn}from"./ApiTestTemplate-GdvjRZpe.js";import{Q as ct}from"./questionTypes-CS3lcRlq.js";import{S as _t}from"./languages-DtYW231W.js";import{T as _n}from"./TextArea-WM5cwCwM.js";function At(t){return Array.isArray(t)?t:t!==void 0?[t]:[]}function bn(t){const{label:n,value:o,children:e}=t||{},a=o||"value";return{_title:n?[n]:["title","label"],value:a,key:a,children:e||"children"}}function dt(t){return t.disabled||t.disableCheckbox||t.checkable===!1}function Sn(t,n){const o=[];function e(a){a.forEach(d=>{o.push(d[n.value]);const u=d[n.children];u&&e(u)})}return e(t),o}function ut(t){return t==null}const Lt=Symbol("TreeSelectContextPropsKey");function wn(t){return Vt(Lt,t)}function kn(){return Pt(Lt,{})}const xn={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Cn=Te({compatConfig:{MODE:3},name:"OptionList",inheritAttrs:!1,setup(t,n){let{slots:o,expose:e}=n;const a=Ft(),d=Rt(),u=kn(),s=j(),f=Ht(()=>u.treeData,[()=>a.open,()=>u.treeData],h=>h[0]),r=N(()=>{const{checkable:h,halfCheckedKeys:D,checkedKeys:Q}=d;return h?{checked:Q,halfChecked:D}:null});Ie(()=>a.open,()=>{st(()=>{var h;a.open&&!a.multiple&&d.checkedKeys.length&&((h=s.value)===null||h===void 0||h.scrollTo({key:d.checkedKeys[0]}))})},{immediate:!0,flush:"post"});const c=N(()=>String(a.searchValue).toLowerCase()),S=h=>c.value?String(h[d.treeNodeFilterProp]).toLowerCase().includes(c.value):!1,E=ie(d.treeDefaultExpandedKeys),w=ie(null);Ie(()=>a.searchValue,()=>{a.searchValue&&(w.value=Sn(be(u.treeData),be(u.fieldNames)))},{immediate:!0});const A=N(()=>d.treeExpandedKeys?d.treeExpandedKeys.slice():a.searchValue?w.value:E.value),v=h=>{var D;E.value=h,w.value=h,(D=d.onTreeExpand)===null||D===void 0||D.call(d,h)},y=h=>{h.preventDefault()},T=(h,D)=>{let{node:Q}=D;var q,K;const{checkable:ae,checkedKeys:te}=d;ae&&dt(Q)||((q=u.onSelect)===null||q===void 0||q.call(u,Q.key,{selected:!te.includes(Q.key)}),a.multiple||(K=a.toggleOpen)===null||K===void 0||K.call(a,!1))},g=j(null),i=N(()=>d.keyEntities[g.value]),U=h=>{g.value=h};return e({scrollTo:function(){for(var h,D,Q=arguments.length,q=new Array(Q),K=0;K<Q;K++)q[K]=arguments[K];return(D=(h=s.value)===null||h===void 0?void 0:h.scrollTo)===null||D===void 0?void 0:D.call(h,...q)},onKeydown:h=>{var D;const{which:Q}=h;switch(Q){case xe.UP:case xe.DOWN:case xe.LEFT:case xe.RIGHT:(D=s.value)===null||D===void 0||D.onKeydown(h);break;case xe.ENTER:{if(i.value){const{selectable:q,value:K}=i.value.node||{};q!==!1&&T(null,{node:{key:g.value},selected:!d.checkedKeys.includes(K)})}break}case xe.ESC:a.toggleOpen(!1)}},onKeyup:()=>{}}),()=>{var h;const{prefixCls:D,multiple:Q,searchValue:q,open:K,notFoundContent:ae=(h=o.notFoundContent)===null||h===void 0?void 0:h.call(o)}=a,{listHeight:te,listItemHeight:Z,virtual:I,dropdownMatchSelectWidth:m,treeExpandAction:C}=u,{checkable:V,treeDefaultExpandAll:H,treeIcon:Se,showTreeIcon:he,switcherIcon:Ae,treeLine:Le,loadData:Me,treeLoadedKeys:ke,treeMotion:F,onTreeLoad:J,checkedKeys:oe}=d;if(f.value.length===0)return p("div",{role:"listbox",class:`${D}-empty`,onMousedown:y},[ae]);const me={fieldNames:u.fieldNames};return ke&&(me.loadedKeys=ke),A.value&&(me.expandedKeys=A.value),p("div",{onMousedown:y},[i.value&&K&&p("span",{style:xn,"aria-live":"assertive"},[i.value.node.value]),p(Ut,fe(fe({ref:s,focusable:!1,prefixCls:`${D}-tree`,treeData:f.value,height:te,itemHeight:Z,virtual:I!==!1&&m!==!1,multiple:Q,icon:Se,showIcon:he,switcherIcon:Ae,showLine:Le,loadData:q?null:Me,motion:F,activeKey:g.value,checkable:V,checkStrictly:!0,checkedKeys:r.value,selectedKeys:V?[]:oe,defaultExpandAll:H},me),{},{onActiveChange:U,onSelect:T,onCheck:T,onExpand:v,onLoad:J,filterTreeNode:S,expandAction:C}),P(P({},o),{checkable:d.customSlots.treeCheckable}))])}}}),In="SHOW_ALL",Mt="SHOW_PARENT",ht="SHOW_CHILD";function bt(t,n,o,e){const a=new Set(t);return n===ht?t.filter(d=>{const u=o[d];return!(u&&u.children&&u.children.some(s=>{let{node:f}=s;return a.has(f[e.value])})&&u.children.every(s=>{let{node:f}=s;return dt(f)||a.has(f[e.value])}))}):n===Mt?t.filter(d=>{const u=o[d],s=u?u.parent:null;return!(s&&!dt(s.node)&&a.has(s.key))}):t}const Ee=()=>null;Ee.inheritAttrs=!1;Ee.displayName="ATreeSelectNode";Ee.isTreeSelectNode=!0;var Tn=function(t,n){var o={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(o[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,e=Object.getOwnPropertySymbols(t);a<e.length;a++)n.indexOf(e[a])<0&&Object.prototype.propertyIsEnumerable.call(t,e[a])&&(o[e[a]]=t[e[a]]);return o};function En(t){return t&&t.type&&t.type.isTreeSelectNode}function An(t){function n(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Qt(o).map(e=>{var a,d,u;if(!En(e))return le(!e,"TreeSelect/TreeSelectNode can only accept TreeSelectNode as children."),null;const s=e.children||{},f=e.key,r={};for(const[Q,q]of Object.entries(e.props))r[Kt(Q)]=q;const{isLeaf:c,checkable:S,selectable:E,disabled:w,disableCheckbox:A}=r,v={isLeaf:c||c===""||void 0,checkable:S||S===""||void 0,selectable:E||E===""||void 0,disabled:w||w===""||void 0,disableCheckbox:A||A===""||void 0},y=P(P({},r),v),{title:T=(a=s.title)===null||a===void 0?void 0:a.call(s,y),switcherIcon:g=(d=s.switcherIcon)===null||d===void 0?void 0:d.call(s,y)}=r,i=Tn(r,["title","switcherIcon"]),U=(u=s.default)===null||u===void 0?void 0:u.call(s),h=P(P(P({},i),{title:T,switcherIcon:g,key:f,isLeaf:c}),v),D=n(U);return D.length&&(h.children=D),h})}return n(t)}function vt(t){if(!t)return t;const n=P({},t);return"props"in n||Object.defineProperty(n,"props",{get(){return le(!1,"New `vc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),n}}),n}function Ln(t,n,o,e,a,d){let u=null,s=null;function f(){function r(c){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0",E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return c.map((w,A)=>{const v=`${S}-${A}`,y=w[d.value],T=o.includes(y),g=r(w[d.children]||[],v,T),i=p(Ee,w,{default:()=>[g.map(U=>U.node)]});if(n===y&&(u=i),T){const U={pos:v,node:i,children:g};return E||s.push(U),U}return null}).filter(w=>w)}s||(s=[],r(e),s.sort((c,S)=>{let{node:{props:{value:E}}}=c,{node:{props:{value:w}}}=S;const A=o.indexOf(E),v=o.indexOf(w);return A-v}))}Object.defineProperty(t,"triggerNode",{get(){return le(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),f(),u}}),Object.defineProperty(t,"allCheckedNodes",{get(){return le(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),f(),a?s:s.map(r=>{let{node:c}=r;return c})}})}function Mn(t,n){let{id:o,pId:e,rootPId:a}=n;const d={},u=[];return t.map(f=>{const r=P({},f),c=r[o];return d[c]=r,r.key=r.key||c,r}).forEach(f=>{const r=f[e],c=d[r];c&&(c.children=c.children||[],c.children.push(f)),(r===a||!c&&a===null)&&u.push(f)}),u}function Dn(t,n,o){const e=ie();return Ie([o,t,n],()=>{const a=o.value;t.value?e.value=o.value?Mn(be(t.value),P({id:"id",pId:"pId",rootPId:null},a!==!0?a:{})):be(t.value).slice():e.value=An(be(n.value))},{immediate:!0,deep:!0}),e}const On=t=>{const n=ie({valueLabels:new Map}),o=ie();return Ie(t,()=>{o.value=be(t.value)},{immediate:!0}),[N(()=>{const{valueLabels:a}=n.value,d=new Map,u=o.value.map(s=>{var f;const{value:r}=s,c=(f=s.label)!==null&&f!==void 0?f:a.get(r);return d.set(r,c),P(P({},s),{label:c})});return n.value.valueLabels=d,u})]},Nn=(t,n)=>{const o=ie(new Map),e=ie({});return Pe(()=>{const a=n.value,d=zt(t.value,{fieldNames:a,initWrapper:u=>P(P({},u),{valueEntities:new Map}),processEntity:(u,s)=>{const f=u.node[a.value];{const r=u.node.key;le(!ut(f),"TreeNode `value` is invalidate: undefined"),le(!s.valueEntities.has(f),`Same \`value\` exist in the tree: ${f}`),le(!r||String(r)===String(f),`\`key\` or \`value\` with TreeNode must be the same or you can remove one of them. key: ${r}, value: ${f}.`)}s.valueEntities.set(f,u)}});o.value=d.valueEntities,e.value=d.keyEntities}),{valueEntities:o,keyEntities:e}},Pn=(t,n,o,e,a,d)=>{const u=ie([]),s=ie([]);return Pe(()=>{let f=t.value.map(S=>{let{value:E}=S;return E}),r=n.value.map(S=>{let{value:E}=S;return E});const c=f.filter(S=>!e.value[S]);o.value&&({checkedKeys:f,halfCheckedKeys:r}=rt(f,!0,e.value,a.value,d.value)),u.value=Array.from(new Set([...c,...f])),s.value=r}),[u,s]},Vn=(t,n,o)=>{let{treeNodeFilterProp:e,filterTreeNode:a,fieldNames:d}=o;return N(()=>{const{children:u}=d.value,s=n.value,f=e==null?void 0:e.value;if(!s||a.value===!1)return t.value;let r;if(typeof a.value=="function")r=a.value;else{const S=s.toUpperCase();r=(E,w)=>{const A=w[f];return String(A).toUpperCase().includes(S)}}function c(S){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const w=[];for(let A=0,v=S.length;A<v;A++){const y=S[A],T=y[u],g=E||r(s,vt(y)),i=c(T||[],g);(g||i.length)&&w.push(P(P({},y),{[u]:i}))}return w}return c(t.value)})};function Fn(t){const{searchPlaceholder:n,treeCheckStrictly:o,treeCheckable:e,labelInValue:a,value:d,multiple:u}=t;le(!n,"`searchPlaceholder` has been removed, please use `placeholder` instead"),o&&a===!1&&le(!1,"`treeCheckStrictly` will force set `labelInValue` to `true`."),(a||o)&&le(At(d).every(s=>s&&typeof s=="object"&&"value"in s),"Invalid prop `value` supplied to `TreeSelect`. You should use { label: string, value: string | number } or [{ label: string, value: string | number }] instead."),o||u||e?le(!d||Array.isArray(d),"`value` should be an array when `TreeSelect` is checkable or multiple."):le(!Array.isArray(d),"`value` should not be array when `TreeSelect` is single mode.")}function Dt(){return P(P({},Re($t(),["mode"])),{prefixCls:String,id:String,value:{type:[String,Number,Object,Array]},defaultValue:{type:[String,Number,Object,Array]},onChange:{type:Function},searchValue:String,inputValue:String,onSearch:{type:Function},autoClearSearchValue:{type:Boolean,default:void 0},filterTreeNode:{type:[Boolean,Function],default:void 0},treeNodeFilterProp:String,onSelect:Function,onDeselect:Function,showCheckedStrategy:{type:String},treeNodeLabelProp:String,fieldNames:{type:Object},multiple:{type:Boolean,default:void 0},treeCheckable:{type:Boolean,default:void 0},treeCheckStrictly:{type:Boolean,default:void 0},labelInValue:{type:Boolean,default:void 0},treeData:{type:Array},treeDataSimpleMode:{type:[Boolean,Object],default:void 0},loadData:{type:Function},treeLoadedKeys:{type:Array},onTreeLoad:{type:Function},treeDefaultExpandAll:{type:Boolean,default:void 0},treeExpandedKeys:{type:Array},treeDefaultExpandedKeys:{type:Array},onTreeExpand:{type:Function},virtual:{type:Boolean,default:void 0},listHeight:Number,listItemHeight:Number,onDropdownVisibleChange:{type:Function},treeLine:{type:[Boolean,Object],default:void 0},treeIcon:Ce.any,showTreeIcon:{type:Boolean,default:void 0},switcherIcon:Ce.any,treeMotion:Ce.any,children:Array,treeExpandAction:String,showArrow:{type:Boolean,default:void 0},showSearch:{type:Boolean,default:void 0},open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},placeholder:Ce.any,maxTagPlaceholder:{type:Function},dropdownPopupAlign:Ce.any,customSlots:Object})}function Rn(t){return!t||typeof t!="object"}const Hn=Te({compatConfig:{MODE:3},name:"TreeSelect",inheritAttrs:!1,props:xt(Dt(),{treeNodeFilterProp:"value",autoClearSearchValue:!0,showCheckedStrategy:ht,listHeight:200,listItemHeight:20,prefixCls:"vc-tree-select"}),setup(t,n){let{attrs:o,expose:e,slots:a}=n;const d=Bt(we(t,"id")),u=N(()=>t.treeCheckable&&!t.treeCheckStrictly),s=N(()=>t.treeCheckable||t.treeCheckStrictly),f=N(()=>t.treeCheckStrictly||t.labelInValue),r=N(()=>s.value||t.multiple);Pe(()=>{Fn(t)});const c=N(()=>bn(t.fieldNames)),[S,E]=pt("",{value:N(()=>t.searchValue!==void 0?t.searchValue:t.inputValue),postState:_=>_||""}),w=_=>{var L;E(_),(L=t.onSearch)===null||L===void 0||L.call(t,_)},A=Dn(we(t,"treeData"),we(t,"children"),we(t,"treeDataSimpleMode")),{keyEntities:v,valueEntities:y}=Nn(A,c),T=_=>{const L=[],O=[];return _.forEach(G=>{y.value.has(G)?O.push(G):L.push(G)}),{missingRawValues:L,existRawValues:O}},g=Vn(A,S,{fieldNames:c,treeNodeFilterProp:we(t,"treeNodeFilterProp"),filterTreeNode:we(t,"filterTreeNode")}),i=_=>{if(_){if(t.treeNodeLabelProp)return _[t.treeNodeLabelProp];const{_title:L}=c.value;for(let O=0;O<L.length;O+=1){const G=_[L[O]];if(G!==void 0)return G}}},U=_=>At(_).map(O=>Rn(O)?{value:O}:O),h=_=>U(_).map(O=>{let{label:G}=O;const{value:X,halfChecked:Y}=O;let z;const W=y.value.get(X);return W&&(G=G??i(W.node),z=W.node.disabled),{label:G,value:X,halfChecked:Y,disabled:z}}),[D,Q]=pt(t.defaultValue,{value:we(t,"value")}),q=N(()=>U(D.value)),K=ie([]),ae=ie([]);Pe(()=>{const _=[],L=[];q.value.forEach(O=>{O.halfChecked?L.push(O):_.push(O)}),K.value=_,ae.value=L});const te=N(()=>K.value.map(_=>_.value)),{maxLevel:Z,levelEntities:I}=jt(v),[m,C]=Pn(K,ae,u,v,Z,I),V=N(()=>{const O=bt(m.value,t.showCheckedStrategy,v.value,c.value).map(Y=>{var z,W,se;return(se=(W=(z=v.value[Y])===null||z===void 0?void 0:z.node)===null||W===void 0?void 0:W[c.value.value])!==null&&se!==void 0?se:Y}).map(Y=>{const z=K.value.find(W=>W.value===Y);return{value:Y,label:z==null?void 0:z.label}}),G=h(O),X=G[0];return!r.value&&X&&ut(X.value)&&ut(X.label)?[]:G.map(Y=>{var z;return P(P({},Y),{label:(z=Y.label)!==null&&z!==void 0?z:Y.value})})}),[H]=On(V),Se=(_,L,O)=>{const G=h(_);if(Q(G),t.autoClearSearchValue&&E(""),t.onChange){let X=_;u.value&&(X=bt(_,t.showCheckedStrategy,v.value,c.value).map(_e=>{const Oe=y.value.get(_e);return Oe?Oe.node[c.value.value]:_e}));const{triggerValue:Y,selected:z}=L||{triggerValue:void 0,selected:void 0};let W=X;if(t.treeCheckStrictly){const de=ae.value.filter(_e=>!X.includes(_e.value));W=[...W,...de]}const se=h(W),ge={preValue:K.value,triggerValue:Y};let ye=!0;(t.treeCheckStrictly||O==="selection"&&!z)&&(ye=!1),Ln(ge,Y,_,A.value,ye,c.value),s.value?ge.checked=z:ge.selected=z;const ce=f.value?se:se.map(de=>de.value);t.onChange(r.value?ce:ce[0],f.value?null:se.map(de=>de.label),ge)}},he=(_,L)=>{let{selected:O,source:G}=L;var X,Y,z;const W=be(v.value),se=be(y.value),ge=W[_],ye=ge==null?void 0:ge.node,ce=(X=ye==null?void 0:ye[c.value.value])!==null&&X!==void 0?X:_;if(!r.value)Se([ce],{selected:!0,triggerValue:ce},"option");else{let de=O?[...te.value,ce]:m.value.filter(_e=>_e!==ce);if(u.value){const{missingRawValues:_e,existRawValues:Oe}=T(de),mt=Oe.map(Ze=>se.get(Ze).key);let Xe;O?{checkedKeys:Xe}=rt(mt,!0,W,Z.value,I.value):{checkedKeys:Xe}=rt(mt,{halfCheckedKeys:C.value},W,Z.value,I.value),de=[..._e,...Xe.map(Ze=>W[Ze].node[c.value.value])]}Se(de,{selected:O,triggerValue:ce},G||"option")}O||!r.value?(Y=t.onSelect)===null||Y===void 0||Y.call(t,ce,vt(ye)):(z=t.onDeselect)===null||z===void 0||z.call(t,ce,vt(ye))},Ae=_=>{if(t.onDropdownVisibleChange){const L={};Object.defineProperty(L,"documentClickClose",{get(){return le(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1}}),t.onDropdownVisibleChange(_,L)}},Le=(_,L)=>{const O=_.map(G=>G.value);if(L.type==="clear"){Se(O,{},"selection");return}L.values.length&&he(L.values[0].value,{selected:!1,source:"selection"})},{treeNodeFilterProp:Me,loadData:ke,treeLoadedKeys:F,onTreeLoad:J,treeDefaultExpandAll:oe,treeExpandedKeys:me,treeDefaultExpandedKeys:Ue,onTreeExpand:Qe,virtual:Ke,listHeight:ze,listItemHeight:Be,treeLine:je,treeIcon:De,showTreeIcon:Ge,switcherIcon:qe,treeMotion:We,customSlots:$e,dropdownMatchSelectWidth:Ye,treeExpandAction:Je}=Gt(t);qt(gt({checkable:s,loadData:ke,treeLoadedKeys:F,onTreeLoad:J,checkedKeys:m,halfCheckedKeys:C,treeDefaultExpandAll:oe,treeExpandedKeys:me,treeDefaultExpandedKeys:Ue,onTreeExpand:Qe,treeIcon:De,treeMotion:We,showTreeIcon:Ge,switcherIcon:qe,treeLine:je,treeNodeFilterProp:Me,keyEntities:v,customSlots:$e})),wn(gt({virtual:Ke,listHeight:ze,listItemHeight:Be,treeData:g,fieldNames:c,onSelect:he,dropdownMatchSelectWidth:Ye,treeExpandAction:Je}));const pe=j();return e({focus(){var _;(_=pe.value)===null||_===void 0||_.focus()},blur(){var _;(_=pe.value)===null||_===void 0||_.blur()},scrollTo(_){var L;(L=pe.value)===null||L===void 0||L.scrollTo(_)}}),()=>{var _;const L=Re(t,["id","prefixCls","customSlots","value","defaultValue","onChange","onSelect","onDeselect","searchValue","inputValue","onSearch","autoClearSearchValue","filterTreeNode","treeNodeFilterProp","showCheckedStrategy","treeNodeLabelProp","multiple","treeCheckable","treeCheckStrictly","labelInValue","fieldNames","treeDataSimpleMode","treeData","children","loadData","treeLoadedKeys","onTreeLoad","treeDefaultExpandAll","treeExpandedKeys","treeDefaultExpandedKeys","onTreeExpand","virtual","listHeight","listItemHeight","onDropdownVisibleChange","treeLine","treeIcon","showTreeIcon","switcherIcon","treeMotion"]);return p(Wt,fe(fe(fe({ref:pe},o),L),{},{id:d,prefixCls:t.prefixCls,mode:r.value?"multiple":void 0,displayValues:H.value,onDisplayValuesChange:Le,searchValue:S.value,onSearch:w,OptionList:Cn,emptyOptions:!A.value.length,onDropdownVisibleChange:Ae,tagRender:t.tagRender||a.tagRender,dropdownMatchSelectWidth:(_=t.dropdownMatchSelectWidth)!==null&&_!==void 0?_:!0}),a)}}}),Un=t=>{const{componentCls:n,treePrefixCls:o,colorBgElevated:e}=t,a=`.${o}`;return[{[`${n}-dropdown`]:[{padding:`${t.paddingXS}px ${t.paddingXS/2}px`},Jt(o,Ct(t,{colorBgContainer:e})),{[a]:{borderRadius:0,"&-list-holder-inner":{alignItems:"stretch",[`${a}-treenode`]:{[`${a}-node-content-wrapper`]:{flex:"auto"}}}}},Xt(`${o}-checkbox`,t),{"&-rtl":{direction:"rtl",[`${a}-switcher${a}-switcher_close`]:{[`${a}-switcher-icon svg`]:{transform:"rotate(90deg)"}}}}]}]};function Qn(t,n){return Yt("TreeSelect",o=>{const e=Ct(o,{treePrefixCls:n.value});return[Un(e)]})(t)}const St=(t,n,o)=>o!==void 0?o:`${t}-${n}`;function Kn(){return P(P({},Re(Dt(),["showTreeIcon","treeMotion","inputIcon","getInputElement","treeLine","customSlots"])),{suffixIcon:Ce.any,size:nt(),bordered:hn(),treeLine:fn([Boolean,Object]),replaceFields:vn(),placement:nt(),status:nt(),popupClassName:String,dropdownClassName:String,"onUpdate:value":tt(),"onUpdate:treeExpandedKeys":tt(),"onUpdate:searchValue":tt()})}const at=Te({compatConfig:{MODE:3},name:"ATreeSelect",inheritAttrs:!1,props:xt(Kn(),{choiceTransitionName:"",listHeight:256,treeIcon:!1,listItemHeight:26,bordered:!0}),slots:Object,setup(t,n){let{attrs:o,slots:e,expose:a,emit:d}=n;le(!(t.treeData===void 0&&e.default),"`children` of TreeSelect is deprecated. Please use `treeData` instead."),et(t.multiple!==!1||!t.treeCheckable,"TreeSelect","`multiple` will always be `true` when `treeCheckable` is true"),et(t.replaceFields===void 0,"TreeSelect","`replaceFields` is deprecated, please use fieldNames instead"),et(!t.dropdownClassName,"TreeSelect","`dropdownClassName` is deprecated. Please use `popupClassName` instead.");const u=Zt(),s=en.useInject(),f=N(()=>tn(s.status,t.status)),{prefixCls:r,renderEmpty:c,direction:S,virtual:E,dropdownMatchSelectWidth:w,size:A,getPopupContainer:v,getPrefixCls:y,disabled:T}=nn("select",t),{compactSize:g,compactItemClassnames:i}=ln(r,S),U=N(()=>g.value||A.value),h=an(),D=N(()=>{var F;return(F=T.value)!==null&&F!==void 0?F:h.value}),Q=N(()=>y()),q=N(()=>t.placement!==void 0?t.placement:S.value==="rtl"?"bottomRight":"bottomLeft"),K=N(()=>St(Q.value,on(q.value),t.transitionName)),ae=N(()=>St(Q.value,"",t.choiceTransitionName)),te=N(()=>y("select-tree",t.prefixCls)),Z=N(()=>y("tree-select",t.prefixCls)),[I,m]=sn(r),[C]=Qn(Z,te),V=N(()=>yt(t.popupClassName||t.dropdownClassName,`${Z.value}-dropdown`,{[`${Z.value}-dropdown-rtl`]:S.value==="rtl"},m.value)),H=N(()=>!!(t.treeCheckable||t.multiple)),Se=N(()=>t.showArrow!==void 0?t.showArrow:t.loading||!H.value),he=j();a({focus(){var F,J;(J=(F=he.value).focus)===null||J===void 0||J.call(F)},blur(){var F,J;(J=(F=he.value).blur)===null||J===void 0||J.call(F)}});const Ae=function(){for(var F=arguments.length,J=new Array(F),oe=0;oe<F;oe++)J[oe]=arguments[oe];d("update:value",J[0]),d("change",...J),u.onFieldChange()},Le=F=>{d("update:treeExpandedKeys",F),d("treeExpand",F)},Me=F=>{d("update:searchValue",F),d("search",F)},ke=F=>{d("blur",F),u.onFieldBlur()};return()=>{var F,J,oe;const{notFoundContent:me=(F=e.notFoundContent)===null||F===void 0?void 0:F.call(e),prefixCls:Ue,bordered:Qe,listHeight:Ke,listItemHeight:ze,multiple:Be,treeIcon:je,treeLine:De,showArrow:Ge,switcherIcon:qe=(J=e.switcherIcon)===null||J===void 0?void 0:J.call(e),fieldNames:We=t.replaceFields,id:$e=u.id.value,placeholder:Ye=(oe=e.placeholder)===null||oe===void 0?void 0:oe.call(e)}=t,{isFormItemInput:Je,hasFeedback:pe,feedbackIcon:_}=s,{suffixIcon:L,removeIcon:O,clearIcon:G}=rn(P(P({},t),{multiple:H.value,showArrow:Se.value,hasFeedback:pe,feedbackIcon:_,prefixCls:r.value}),e);let X;me!==void 0?X=me:X=c("Select");const Y=Re(t,["suffixIcon","itemIcon","removeIcon","clearIcon","switcherIcon","bordered","status","onUpdate:value","onUpdate:treeExpandedKeys","onUpdate:searchValue"]),z=yt(!Ue&&Z.value,{[`${r.value}-lg`]:U.value==="large",[`${r.value}-sm`]:U.value==="small",[`${r.value}-rtl`]:S.value==="rtl",[`${r.value}-borderless`]:!Qe,[`${r.value}-in-form-item`]:Je},cn(r.value,f.value,pe),i.value,o.class,m.value),W={};return t.treeData===void 0&&e.default&&(W.children=dn(e.default())),I(C(p(Hn,fe(fe(fe(fe({},o),Y),{},{disabled:D.value,virtual:E.value,dropdownMatchSelectWidth:w.value,id:$e,fieldNames:We,ref:he,prefixCls:r.value,class:z,listHeight:Ke,listItemHeight:ze,treeLine:!!De,inputIcon:L,multiple:Be,removeIcon:O,clearIcon:G,switcherIcon:se=>un(te.value,qe,se,e.leafIcon,De),showTreeIcon:je,notFoundContent:X,getPopupContainer:v==null?void 0:v.value,treeMotion:null,dropdownClassName:V.value,choiceTransitionName:ae.value,onChange:Ae,onBlur:ke,onSearch:Me,onTreeExpand:Le},W),{},{transitionName:K.value,customSlots:P(P({},e),{treeCheckable:()=>p("span",{class:`${r.value}-tree-checkbox-inner`},null)}),maxTagPlaceholder:t.maxTagPlaceholder||e.maxTagPlaceholder,placement:q.value,showArrow:pe||Ge,placeholder:Ye}),P(P({},e),{treeCheckable:()=>p("span",{class:`${r.value}-tree-checkbox-inner`},null)}))))}}}),wt=Ee,zn=P(at,{TreeNode:Ee,SHOW_ALL:In,SHOW_PARENT:Mt,SHOW_CHILD:ht,install:t=>(t.component(at.name,at),t.component(wt.displayName,wt),t)});var Bn={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"};function kt(t){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?Object(arguments[n]):{},e=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(e=e.concat(Object.getOwnPropertySymbols(o).filter(function(a){return Object.getOwnPropertyDescriptor(o,a).enumerable}))),e.forEach(function(a){jn(t,a,o[a])})}return t}function jn(t,n,o){return n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}var He=function(n,o){var e=kt({},n,o.attrs);return p(mn,kt({},e,{icon:Bn}),null)};He.displayName="InboxOutlined";He.inheritAttrs=!1;const Gn=Te({__name:"ImportQSModal",props:{title:{type:String,required:!0}},emits:["import"],setup(t,{expose:n,emit:o}){const{t:e}=It(),a=t,d=o,u=j(!1),s=j(),f=j(),r=j(),c=it({checkAll:!1,indeterminate:!1,checkedList:[]}),S=()=>{c.checkedList=[],u.value=!0},E=()=>{u.value=!1};n({openImportModal:S});const w=j([]),A=j(null),v=j(!1),y=()=>{var I;(I=A.value)==null||I.click()},T=async I=>{var V;const C=(V=I.target.files)==null?void 0:V[0];if(C){w.value=[],ue.success(C.name+" uploaded successfully."),w.value.push(C);const H=await yn.ImportFile(w.value[0]);H.data.success&&(s.value=[...H.data.data.validQuestions,...H.data.data.invalidQuestions],f.value=[...H.data.data.validQuestions,...H.data.data.invalidQuestions],r.value=H.data.data.invalidQuestions);return}ue.error("Upload failed")},g=I=>{var C;const m=((C=I.dataTransfer)==null?void 0:C.types)||[];Array.from(m).includes("files")&&(v.value=!0)},i=I=>{var C;const m=(C=I.dataTransfer)==null?void 0:C.files[0];if(v.value=!1,m){w.value=[],ue.success(m.name+" uploaded successfully."),w.value.push(m);return}ue.error("Upload failed")},U=I=>{var m;(m=w.value)==null||m.splice(I,1),c.checkedList=[],s.value=[],r.value=[],f.value=[]},h=["all","valid","invalid"],D=N(()=>h.map(I=>({label:I,value:I}))),Q=j(D.value[0].value),q=()=>{var m,C;c.checkedList=[];let I=s.value;switch(Q.value){case"valid":{I=(m=s.value)==null?void 0:m.filter(V=>{var H;return!((H=r.value)!=null&&H.includes(V))});break}case"invalid":{I=(C=s.value)==null?void 0:C.filter(V=>{var H;return(H=r.value)==null?void 0:H.includes(V)});break}}f.value=I},K=I=>{Object.assign(c,{checkedList:I.target.checked?f.value:[],indeterminate:!1})};Ie(()=>c.checkedList,I=>{var m;c.indeterminate=!!I.length&&I.length<f.value.length,c.checkAll=I.length===((m=f.value)==null?void 0:m.length)});const ae=(I,m)=>{$(m).toggleClass("bx-chevron-up bx-chevron-down");const V=$(`#question-item-answer-${I}`);V&&$(V).slideToggle()},te=()=>{if(c.checkedList.length===0){ue.warning("Please choose at least 1 question to import!");return}Et.confirm({title:"Are your sure? ",content:"Import: "+c.checkedList.length+" into "+a.title+" ? ",okText:"Confirm",onOk:()=>{var m;const I=(m=f.value)==null?void 0:m.filter(C=>c.checkedList.includes(C));d("import",I),E()}})};Tt(()=>{});const Z={t:e,props:a,emit:d,modal_import_open:u,question_data:s,uploadedQuestions:f,uploadedInvalidQuestions:r,importModalState:c,openImportModal:S,closeImportModal:E,files:w,fileInput:A,isDragging:v,openFileExplorer:y,handleFileChange:T,handleDragEnter:g,handleDrop:i,onRemoveUploadedFile:U,optionKeys:h,select_options:D,selected_option:Q,onFilter:q,onCheckAll:K,toggleDisplayAnswer:ae,handleModalImport:te,get InboxOutlined(){return He},get QUESTION_TYPE(){return ct}};return Object.defineProperty(Z,"__isScriptSetup",{enumerable:!1,value:!0}),Z}}),qn={class:"modal-container"},Wn={class:"modal-title-container"},$n={class:"modal-content-item"},Yn={class:"content-item-section upload-section"},Jn={class:"section-title"},Xn={class:"section-content"},Zn={class:"customized-file-upload-icons"},el={class:"file-container"},tl={class:"file-item"},nl=["onClick"],ll={class:"content-item-section preview-section"},al={class:"section-content"},ol={key:0,class:"section-content-header"},sl={class:"d-flex"},rl={class:"preview-question-container"},il={class:"question-item-content"},cl=["innerHTML"],dl={key:1,class:"question-text"},ul=["id"],vl={key:0,class:"multiple-choice-answer"},fl={key:0,class:"text-success"},hl={class:"pair-answer"},ml={class:"pair-answer-item"},pl={class:"pair-answer-item"},gl={key:2,class:"ordering-answer"},yl={class:"ordering-answer-item"},_l={class:"ordering-answer-item"},bl={class:"ordering-answer-item"},Sl={class:"short-text-answer"},wl={class:"question-item-toogle-btn"},kl=["onClick"],xl={class:"header-item"};function Cl(t,n,o,e,a,d){const u=R("RouterLink"),s=R("a-col"),f=R("a-row"),r=R("a-button"),c=R("a-checkbox"),S=R("a-select-option"),E=R("a-select"),w=R("a-checkbox-group"),A=R("a-modal");return b(),Ve(A,{centered:"",width:"100%","wrap-class-name":"full-modal",open:e.modal_import_open,onCancel:e.closeImportModal},{footer:k(()=>[l("div",xl," Total: "+M(e.importModalState.checkedList.length)+" questions ",1),p(r,{class:"main-color-btn",size:"large",key:"submit",type:"primary",onClick:e.handleModalImport},{default:k(()=>n[16]||(n[16]=[B(" Import ")])),_:1,__:[16]})]),default:k(()=>[l("div",qn,[l("div",Wn,[p(f,{class:"w-100 d-flex align-items-center"},{default:k(()=>[p(s,{span:1},{default:k(()=>[p(u,{onClick:e.closeImportModal,to:{name:""}},{default:k(()=>n[5]||(n[5]=[l("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[5]})]),_:1}),p(s,{class:"main-title",span:23},{default:k(()=>[l("span",null,M(t.$t("create_QS.title")),1),n[6]||(n[6]=B()),n[7]||(n[7]=l("br",null,null,-1)),l("span",null,M(t.$t("create_QS.sub_title")),1)]),_:1,__:[6,7]})]),_:1})]),l("div",$n,[l("div",Yn,[l("div",Jn,[n[9]||(n[9]=l("span",null,"Upload",-1)),p(r,{class:"main-color-btn",type:"primary"},{default:k(()=>n[8]||(n[8]=[B("Download template")])),_:1,__:[8]})]),l("div",Xn,[l("input",{onChange:e.handleFileChange,class:"d-none",type:"file",ref:"fileInput"},null,544),l("div",{class:ve(["customized-file-upload",e.isDragging?"is-dragging":""]),onClick:e.openFileExplorer,onDragenter:e.handleDragEnter,onDragover:n[0]||(n[0]=Fe(v=>e.isDragging=!0,["prevent"])),onDragleave:n[1]||(n[1]=v=>e.isDragging=!1),onDrop:Fe(e.handleDrop,["prevent"])},[l("div",Zn,[l("i",{class:ve(["bx","bx-down-arrow-alt","bx-fade-up",e.isDragging?"":"d-none"])},null,2),p(e.InboxOutlined,{class:ve([e.isDragging?"d-none":""])},null,8,["class"])]),n[10]||(n[10]=l("div",{class:"customized-file-upload-ins"},[l("strong",null,"Click"),B(" or "),l("strong",null,"drag"),B(" file to this area to upload ")],-1)),n[11]||(n[11]=l("div",{class:"customized-file-upload-hint"},[B(" Please use the template above to ensure the file is read correctly."),l("br"),B(" Support for a single upload. ")],-1))],34)]),l("div",el,[(b(!0),x(ee,null,ne(e.files,(v,y)=>(b(),x("div",tl,[l("span",null,M(v.name),1),l("i",{class:"bx bx-trash text-danger",onClick:T=>e.onRemoveUploadedFile(y)},null,8,nl)]))),256))])]),l("div",ll,[n[15]||(n[15]=l("div",{class:"section-title"},"Preview",-1)),l("div",al,[e.files.length>0?(b(),x("div",ol,[l("div",{class:ve(["header-item",e.importModalState.checkAll?"check-all":""])},[p(c,{onClick:e.onCheckAll,checked:e.importModalState.checkAll,"onUpdate:checked":n[2]||(n[2]=v=>e.importModalState.checkAll=v),indeterminate:e.importModalState.indeterminate},null,8,["checked","indeterminate"]),B(" Check all ("+M(e.importModalState.checkedList.length)+") ",1)],2),l("div",sl,[p(E,{size:"large",class:"me-3",value:e.selected_option,"onUpdate:value":n[3]||(n[3]=v=>e.selected_option=v),style:{width:"200px"},onChange:e.onFilter},{default:k(()=>[(b(!0),x(ee,null,ne(e.select_options,v=>(b(),Ve(S,{value:v.value},{default:k(()=>[B(M(v.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])])])):re("v-if",!0),p(w,{value:e.importModalState.checkedList,"onUpdate:value":n[4]||(n[4]=v=>e.importModalState.checkedList=v)},{default:k(()=>[l("div",rl,[(b(!0),x(ee,null,ne(e.uploadedQuestions,(v,y)=>{var T;return b(),x("div",{class:ve(["preview-question-item",(T=e.uploadedInvalidQuestions)!=null&&T.includes(v)?"invalid":""])},[p(c,{value:v},null,8,["value"]),l("div",il,[v.questionHTML?(b(),x("div",{key:0,class:"question-html",innerHTML:v.questionHTML},null,8,cl)):(b(),x("div",dl,M(v.questionText),1)),l("div",{class:"question-item-answer",id:`question-item-answer-${y}`},[v.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(b(),x("div",vl,[l("ul",null,[(b(!0),x(ee,null,ne(v.multipleChoices,g=>(b(),x("li",null,[B(M(g.text)+" ",1),g.isAnswer?(b(),x("span",fl," ("+M(g.isAnswer)+") ",1)):re("v-if",!0)]))),256))])])):re("v-if",!0),v.type===e.QUESTION_TYPE.MATCHING?(b(!0),x(ee,{key:1},ne(v.matchingPairs,g=>(b(),x("div",hl,[l("span",ml,M(g.leftItem),1),n[12]||(n[12]=l("i",{class:"bx bx-right-arrow-alt"},null,-1)),l("span",pl,M(g.rightItem),1)]))),256)):re("v-if",!0),v.type===e.QUESTION_TYPE.ORDERING?(b(),x("div",gl,[l("div",yl,[(b(!0),x(ee,null,ne(v.orderingItems,g=>(b(),x("div",null,M(g.text),1))),256))]),n[13]||(n[13]=l("i",{class:"bx bx-right-arrow-alt"},null,-1)),l("div",_l,[(b(!0),x(ee,null,ne(v.orderingItems,(g,i)=>(b(),x("div",bl,[l("span",null,"#"+M(i+1),1),B(" - "+M(g.text),1)]))),256))])])):re("v-if",!0),v.type===e.QUESTION_TYPE.SHORT_TEXT?(b(),x(ee,{key:3},[n[14]||(n[14]=l("span",null,"Answer:",-1)),l("div",Sl,M(v.shortAnswer),1)],64)):re("v-if",!0)],8,ul)]),l("div",wl,[l("i",{class:"bx bx-chevron-up",onClick:g=>e.toggleDisplayAnswer(y,g.currentTarget)},null,8,kl)])],2)}),256))])]),_:1},8,["value"])])])])])]),_:1},8,["open"])}const xa=ft(Gn,[["render",Cl],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/ImportQSModal.vue"]]),Il={HARD:"Hard",MEDIUM:"Medium",EASY:"Easy"},ot={GENERATE_QUESTION:"AiGenerate/GenerateQuestion",GENERATE_DOCUMENT_STRUCTURE:"AiGenerate/GenerateDocumentStructure",GET_COST_TO_GENERATE:"AiGenerate/DocumentStructure/GetCostToGenerate"};class Tl{constructor(){Ne(this,"GenerateQuestion",async n=>await lt.post(`${ot.GENERATE_QUESTION}`,n));Ne(this,"GenerateDocumentStructure",async n=>{const o=new FormData;return o.append("file",n),await lt.post(ot.GENERATE_DOCUMENT_STRUCTURE,o,{headers:{"Content-Type":"multipart/form-data"},maxContentLength:1/0,maxBodyLength:1/0})});Ne(this,"GetCostToGenerate",async n=>await lt.post(`${ot.GET_COST_TO_GENERATE}`,n))}}const El=new Tl,Al=Te({__name:"GenerateFileStructure",props:{file:{type:null,required:!0}},setup(t,{expose:n}){const o=t,e=pn(gn,{style:{fontSize:"100px",color:"var(--main-color)"},spin:!0}),a=j([]);function d(y){return y?Array.isArray(y)?y:[y]:[]}function u(y){return d(y).map(g=>{const i=d(g==null?void 0:g.children);return{...g,title:String((g==null?void 0:g.title)??""),key:crypto.randomUUID(),children:i.length?u(i):void 0}})}const s=j([]),f=j([]);function r(y,T){const g=[];for(const i of y){const U=T.includes(i.key),h=i.children?r(i.children,T):[];(U||h.length>0)&&g.push({title:i.title,key:i.key,children:h.length?h:void 0})}return g}const c=N(()=>r(s.value,f.value)),S=j(!1),E=j(!1),w=async()=>{S.value=!0;try{E.value=!0;const y=await El.GenerateDocumentStructure(o.file),T=typeof y.data=="string"?JSON.parse(y.data):y.data,g=T==null?void 0:T.data,i=d(g==null?void 0:g.children);a.value=i,s.value=u(a.value)}catch(y){console.error(y)}finally{E.value=!1}},A=()=>{S.value=!1};n({openModal:w,closeModal:A});const v={props:o,indicator:e,serverData:a,toArray:d,addRandomKeys:u,treeData:s,checked:f,filterTree:r,selectedTree:c,modal_open:S,loading:E,openModal:w,closeModal:A,get ATreeSelect(){return zn}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),Ll={class:"modal-container"},Ml={class:"modal-title-container"},Dl={class:"modal-content-item"},Ol={key:0,class:"d-flex justify-content-center align-items-center",style:{"min-height":"50vh"}},Nl={key:1},Pl={style:{"background-color":"black"}},Vl={style:{color:"#d1d5db"}};function Fl(t,n,o,e,a,d){const u=R("RouterLink"),s=R("a-col"),f=R("a-row"),r=R("a-spin"),c=R("a-modal");return b(),Ve(c,{centered:"",width:"100%","wrap-class-name":"medium-modal large",open:e.modal_open,onCancel:e.closeModal},{default:k(()=>[l("div",Ll,[l("div",Ml,[p(f,{class:"w-100 d-flex align-items-center"},{default:k(()=>[p(s,{span:1},{default:k(()=>[p(u,{onClick:e.closeModal,to:{name:""}},{default:k(()=>n[1]||(n[1]=[l("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[1]})]),_:1}),p(s,{class:"main-title",span:23},{default:k(()=>[l("span",null,M(t.$t("create_QS.title")),1),n[2]||(n[2]=B()),n[3]||(n[3]=l("br",null,null,-1)),l("span",null,M(t.$t("create_QS.sub_title")),1)]),_:1,__:[2,3]})]),_:1})]),l("div",Dl,[e.loading?(b(),x("div",Ol,[p(r,{size:"large",indicator:e.indicator},null,8,["indicator"])])):(b(),x("div",Nl,[p(e.ATreeSelect,{value:e.checked,"onUpdate:value":n[0]||(n[0]=S=>e.checked=S),"tree-data":e.treeData,"field-names":{label:"title",value:"key",children:"children"},"tree-checkable":"","show-checked-strategy":"SHOW_PARENT","allow-clear":"","show-search":"",placeholder:"Select sections to include",style:{width:"100%"},"max-tag-count":3},null,8,["value","tree-data"]),n[4]||(n[4]=l("h3",null,"Selected Tree Structure:",-1)),l("div",Pl,[l("pre",Vl,M(JSON.stringify(e.selectedTree,null,2)),1)])]))])])]),_:1},8,["open"])}const Rl=ft(Al,[["render",Fl],["__scopeId","data-v-8be2b719"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/GenerateFileStructure.vue"]]),Hl=Te({__name:"GenerateQSModal",props:{title:{type:String,required:!0}},emits:["import"],setup(t,{expose:n,emit:o}){const e=[{id:"q1",type:"MultipleChoice",questionText:"What is the capital of France ?",questionHTML:"<p><strong>What</strong> is <br/> the <em>capital</em> of <u>France</u>? <code>// geography</code></p>",explainText:"Paris is the capital city of France.",score:1,multipleChoices:[{id:"1",text:"Paris",isAnswer:!0},{id:"2",text:"London",isAnswer:!1},{id:"3",text:"Berlin",isAnswer:!1}],matchingPairs:[],orderingItems:[],shortAnswer:""},{id:"q2",type:"Matching",questionText:"Match the countries to their capitals.",questionHTML:"<p><u>Match</u> the <strong>countries</strong> to their <em>capitals</em>. <code>// matching task</code></p>",explainText:"Each country must be paired with its capital.",score:2,multipleChoices:[],matchingPairs:[{id:"1",leftItem:"Japan",rightItem:"Tokyo"},{id:"2",leftItem:"Italy",rightItem:"Rome"},{id:"3",leftItem:"Vietnam",rightItem:"Hanoi"}],orderingItems:[],shortAnswer:""},{id:"q3",type:"Ordering",questionText:"Arrange the steps of the water cycle in the correct order.",questionHTML:"<p><strong>Arrange</strong> the steps of the <u>water cycle</u> in the <em>correct order</em>. <code>// science</code></p>",explainText:"The correct order is: Evaporation → Condensation → Precipitation → Collection.",score:2,multipleChoices:[],matchingPairs:[],orderingItems:[{id:"1",text:"Evaporation",correctOrder:1},{id:"2",text:"Condensation",correctOrder:2},{id:"3",text:"Precipitation",correctOrder:3},{id:"4",text:"Collection",correctOrder:4}],shortAnswer:""},{id:"q4",type:"ShortText",questionText:"What is the chemical symbol for water?",questionHTML:"<p><em>What</em> is the chemical <strong>symbol</strong> for <u>water</u>? <code>H2O</code></p>",explainText:"H2O is the formula for water.",score:1,multipleChoices:[],matchingPairs:[],orderingItems:[],shortAnswer:"H2O"},{id:"q5",type:"MultipleChoice",questionText:"Which planet is known as the Red Planet?",questionHTML:"<p>Which <strong>planet</strong> is known as the <em>Red Planet</em>? <u>Mars</u> <pre><code>// astronomy</code></pre></p>",explainText:"Mars is often called the Red Planet due to its reddish appearance.",score:1,multipleChoices:[{id:"1",text:"Mars",isAnswer:!0},{id:"2",text:"Venus",isAnswer:!1},{id:"3",text:"Jupiter",isAnswer:!1}],matchingPairs:[],orderingItems:[],shortAnswer:""}],{t:a}=It(),d=t,u=o,s=j(!1),f=()=>{v.checkedList=[],s.value=!0},r=()=>{s.value=!1};n({openGenerateAIModal:f});const c=()=>{Et.confirm({title:"Are your sure? ",content:"Import: "+v.checkedList.length+"into "+d.title+" ? ",okText:"Confirm",onOk:()=>{const m=e.filter(C=>v.checkedList.includes(C.id));u("import",m),r()}})},S=Object.values(ct).map(m=>({label:a(`create_QS.type.${m}`),value:m})),E=Object.values(Il).map(m=>({label:m,value:m})),w=j([]);for(let m=10;m<=100;m+=10)w.value.push({label:m,value:m});const A=j(),v=it({checkAll:!1,indeterminate:!1,checkedList:[]}),y=it({selectedQuestionTypes:[S[0]],maxQuestion:w.value[0].value,difficulty:E[0].value,language:_t[0].code,enableExplain:!0,title:""}),T=j([]),g=j(null),i=j(!1),U=()=>{var m;(m=g.value)==null||m.click()},h=async m=>{var H;const C=m.target,V=(H=C.files)==null?void 0:H[0];if(V){T.value=[],ue.success(V.name+" uploaded successfully."),T.value.push(V),y.title=V.name,await st(),Z(),C.value="";return}ue.error("Upload failed")},D=m=>{var V;const C=((V=m.dataTransfer)==null?void 0:V.types)||[];Array.from(C).includes("files")&&(i.value=!0)},Q=async m=>{var V;const C=(V=m.dataTransfer)==null?void 0:V.files[0];if(i.value=!1,C){T.value=[],ue.success(C.name+" uploaded successfully."),T.value.push(C),y.title=C.name,await st(),Z();return}ue.error("Upload failed")},q=()=>{T.value=[]},K=m=>{Object.assign(v,{checkedList:m.target.checked?e.map(C=>C.id):[],indeterminate:!1})};Ie(()=>v.checkedList,m=>{v.indeterminate=!!m.length&&m.length<e.map(C=>C.id).length,v.checkAll=m.length===e.length});const ae=(m,C)=>{$(C).toggleClass("bx-chevron-up bx-chevron-down");const H=$(`#question-item-answer-${m}`);H&&$(H).slideToggle()},te=j(null),Z=()=>{te.value&&te.value.openModal()};Tt(()=>{A.value=e});const I={question_data_raw:e,t:a,props:d,emit:u,modal_generate_ai_open:s,openGenerateAIModal:f,closeGenerateAIModal:r,handleModalImport:c,questionTypeOptions:S,questionDifficultyOptions:E,questionMaximumOptions:w,generatedQuestions:A,generateModalState:v,generateByAIModalState:y,files:T,fileInput:g,isDragging:i,openFileExplorer:U,handleFileChange:h,handleDragEnter:D,handleDrop:Q,onRemoveUploadedFile:q,onCheckAll:K,toggleDisplayAnswer:ae,generateFileStructureRef:te,openFileStructureModal:Z,get QUESTION_TYPE(){return ct},get SUPPORTED_LOCALES(){return _t},get InboxOutlined(){return He},TextArea:_n,GenerateFileStructure:Rl};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}}),Ul={class:"modal-container"},Ql={class:"modal-title-container"},Kl={class:"modal-content-item"},zl={class:"content-item-section upload-section"},Bl={class:"section-content"},jl={class:"customized-file-upload-icons"},Gl={class:"file-container"},ql={class:"file-item"},Wl={class:"content-item-section preview-section"},$l={class:"section-content"},Yl={class:"section-content-header"},Jl={class:"header-item"},Xl={class:"preview-question-container"},Zl={class:"preview-question-item"},ea={class:"question-item-content"},ta=["innerHTML"],na={key:1,class:"question-text"},la=["id"],aa={key:0,class:"multiple-choice-answer"},oa={key:0,class:"text-success"},sa={class:"pair-answer"},ra={class:"pair-answer-item"},ia={class:"pair-answer-item"},ca={key:2,class:"ordering-answer"},da={class:"ordering-answer-item"},ua={class:"ordering-answer-item"},va={class:"ordering-answer-item"},fa={class:"short-text-answer"},ha={class:"question-item-toogle-btn"},ma=["onClick"],pa={class:"w-100 d-flex justify-content-end"};function ga(t,n,o,e,a,d){const u=R("RouterLink"),s=R("a-col"),f=R("a-row"),r=R("a-select"),c=R("a-form-item"),S=R("a-select-option"),E=R("a-switch"),w=R("a-button"),A=R("a-form"),v=R("a-checkbox"),y=R("a-checkbox-group"),T=R("a-modal");return b(),x(ee,null,[p(T,{centered:"",width:"100%","wrap-class-name":"full-modal",open:e.modal_generate_ai_open,onCancel:e.closeGenerateAIModal},{footer:k(()=>n[25]||(n[25]=[])),default:k(()=>{var g;return[l("div",Ul,[l("div",Ql,[p(f,{class:"w-100 d-flex align-items-center"},{default:k(()=>[p(s,{span:1},{default:k(()=>[p(u,{onClick:e.closeGenerateAIModal,to:{name:""}},{default:k(()=>n[12]||(n[12]=[l("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[12]})]),_:1}),p(s,{class:"main-title",span:23},{default:k(()=>[l("span",null,M(t.$t("create_QS.title")),1),n[13]||(n[13]=B()),n[14]||(n[14]=l("br",null,null,-1)),l("span",null,M(t.$t("create_QS.sub_title")),1)]),_:1,__:[13,14]})]),_:1})]),l("div",Kl,[l("div",zl,[n[18]||(n[18]=l("div",{class:"section-title"},[l("span",null,"Upload")],-1)),l("div",Bl,[l("input",{onChange:e.handleFileChange,class:"d-none",type:"file",ref:"fileInput"},null,544),l("div",{class:ve(["customized-file-upload",e.isDragging?"is-dragging":""]),onClick:e.openFileExplorer,onDragenter:e.handleDragEnter,onDragover:n[0]||(n[0]=Fe(i=>e.isDragging=!0,["prevent"])),onDragleave:n[1]||(n[1]=i=>e.isDragging=!1),onDrop:Fe(e.handleDrop,["prevent"])},[l("div",jl,[l("i",{class:ve(["bx","bx-down-arrow-alt","bx-fade-up",e.isDragging?"":"d-none"])},null,2),p(e.InboxOutlined,{class:ve([e.isDragging?"d-none":""])},null,8,["class"])]),n[15]||(n[15]=l("div",{class:"customized-file-upload-ins"},[l("strong",null,"Click"),B(" or "),l("strong",null,"drag"),B(" file to this area to upload ")],-1)),n[16]||(n[16]=l("div",{class:"customized-file-upload-hint"},[B(" Please use the template above to ensure the file is read correctly."),l("br"),B(" Support for a single upload. ")],-1))],34)]),l("div",Gl,[(b(!0),x(ee,null,ne(e.files,i=>(b(),x("div",ql,[l("span",null,M(i.name),1),l("i",{class:"bx bx-trash text-danger",onClick:n[2]||(n[2]=U=>e.onRemoveUploadedFile())})]))),256))]),p(A,{layout:"vertical",class:"generate-ai-form"},{default:k(()=>[p(f,{class:"d-flex justify-content-between"},{default:k(()=>[p(s,{span:12},{default:k(()=>[p(c,{label:"Difficulty"},{default:k(()=>[p(r,{value:e.generateByAIModalState.difficulty,"onUpdate:value":n[3]||(n[3]=i=>e.generateByAIModalState.difficulty=i),style:{width:"100%"},placeholder:"Difficulty of questions",options:e.questionDifficultyOptions},null,8,["value","options"])]),_:1})]),_:1}),p(s,{span:11},{default:k(()=>[p(c,{label:"Maximum question"},{default:k(()=>[p(r,{value:e.generateByAIModalState.maxQuestion,"onUpdate:value":n[4]||(n[4]=i=>e.generateByAIModalState.maxQuestion=i),style:{width:"100%"},placeholder:"Maximum number of question",options:e.questionMaximumOptions},null,8,["value","options"])]),_:1})]),_:1})]),_:1}),p(c,{label:"Question types"},{default:k(()=>[p(r,{value:e.generateByAIModalState.selectedQuestionTypes,"onUpdate:value":n[5]||(n[5]=i=>e.generateByAIModalState.selectedQuestionTypes=i),mode:"multiple",style:{width:"100%"},placeholder:"Select multiple",options:e.questionTypeOptions},null,8,["value","options"])]),_:1}),p(f,{class:"d-flex justify-content-between"},{default:k(()=>[p(s,{span:12},{default:k(()=>[p(c,{label:"Language"},{default:k(()=>[p(r,{class:"language-select",value:e.generateByAIModalState.language,"onUpdate:value":n[6]||(n[6]=i=>e.generateByAIModalState.language=i)},{default:k(()=>[(b(!0),x(ee,null,ne(e.SUPPORTED_LOCALES,i=>(b(),Ve(S,{key:`locale-${i.code}`,value:i.code},{default:k(()=>[B(M(i.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1}),p(s,{span:11},{default:k(()=>[p(c,{label:"Enable explaination"},{default:k(()=>[p(E,{checked:e.generateByAIModalState.enableExplain,"onUpdate:checked":n[7]||(n[7]=i=>e.generateByAIModalState.enableExplain=i)},null,8,["checked"])]),_:1})]),_:1})]),_:1}),p(c,{label:"Language"},{default:k(()=>[p(e.TextArea,{value:e.generateByAIModalState.title,"onUpdate:value":n[8]||(n[8]=i=>e.generateByAIModalState.title=i),"is-required":e.generateByAIModalState.enableExplain,"max-length":200,placeholder:"Enter document title for citation",readonly:!e.generateByAIModalState.enableExplain},null,8,["value","is-required","readonly"])]),_:1}),p(c,{style:{"margin-top":"7px"},class:"generate-ai-btn-container"},{default:k(()=>[p(w,{size:"large",class:"w-100 main-color-btn generate_ai",type:"primary"},{default:k(()=>n[17]||(n[17]=[B(" ✨ Generate ")])),_:1,__:[17]})]),_:1})]),_:1})]),l("div",Wl,[n[23]||(n[23]=l("div",{class:"section-title"},"Preview",-1)),l("div",$l,[l("div",Yl,[p(v,{class:ve(["header-item",e.generateModalState.checkAll?"check-all":""]),onClick:e.onCheckAll,checked:e.generateModalState.checkAll,"onUpdate:checked":n[9]||(n[9]=i=>e.generateModalState.checkAll=i),indeterminate:e.generateModalState.indeterminate},{default:k(()=>[B(" Check all ("+M(e.generateModalState.checkedList.length)+") ",1)]),_:1},8,["class","checked","indeterminate"]),l("div",Jl," Total: "+M((g=e.generatedQuestions)==null?void 0:g.length)+" questions ",1)]),p(y,{value:e.generateModalState.checkedList,"onUpdate:value":n[11]||(n[11]=i=>e.generateModalState.checkedList=i)},{default:k(()=>[l("div",Xl,[(b(!0),x(ee,null,ne(e.generatedQuestions,(i,U)=>(b(),x("div",Zl,[p(v,{onClick:n[10]||(n[10]=h=>console.log(e.generateModalState.checkedList)),value:i.id},null,8,["value"]),l("div",ea,[i.questionHTML?(b(),x("div",{key:0,class:"question-html",innerHTML:i.questionHTML},null,8,ta)):(b(),x("div",na,M(i.questionText),1)),l("div",{class:"question-item-answer",id:`question-item-answer-${U}`},[i.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(b(),x("div",aa,[l("ul",null,[(b(!0),x(ee,null,ne(i.multipleChoices,h=>(b(),x("li",null,[B(M(h.text)+" ",1),h.isAnswer?(b(),x("span",oa," ("+M(h.isAnswer)+") ",1)):re("v-if",!0)]))),256))])])):re("v-if",!0),i.type===e.QUESTION_TYPE.MATCHING?(b(!0),x(ee,{key:1},ne(i.matchingPairs,h=>(b(),x("div",sa,[l("span",ra,M(h.leftItem),1),n[19]||(n[19]=l("i",{class:"bx bx-right-arrow-alt"},null,-1)),l("span",ia,M(h.rightItem),1)]))),256)):re("v-if",!0),i.type===e.QUESTION_TYPE.ORDERING?(b(),x("div",ca,[l("div",da,[(b(!0),x(ee,null,ne(i.orderingItems,h=>(b(),x("div",null,M(h.text),1))),256))]),n[20]||(n[20]=l("i",{class:"bx bx-right-arrow-alt"},null,-1)),l("div",ua,[(b(!0),x(ee,null,ne(i.orderingItems,(h,D)=>(b(),x("div",va,[l("span",null,"#"+M(D+1),1),B(" - "+M(h.text),1)]))),256))])])):re("v-if",!0),i.type===e.QUESTION_TYPE.SHORT_TEXT?(b(),x(ee,{key:3},[n[21]||(n[21]=l("span",null,"Answer:",-1)),l("div",fa,M(i.shortAnswer),1)],64)):re("v-if",!0)],8,la)]),l("div",ha,[l("i",{class:"bx bx-chevron-up",onClick:h=>e.toggleDisplayAnswer(U,h.currentTarget)},null,8,ma)])]))),256))])]),_:1},8,["value"])]),n[24]||(n[24]=l("div",{class:"modal-generate-by-ai-warning"},[l("span",null,[l("i",{class:"bx bx-info-circle"}),B(" AI can make mistakes. Please check carefully the important info. ")])],-1)),l("div",pa,[p(w,{class:"main-color-btn",key:"submit",type:"primary",size:"large",onClick:e.handleModalImport},{default:k(()=>n[22]||(n[22]=[B(" Import ")])),_:1,__:[22]})])])])])]}),_:1},8,["open"]),p(e.GenerateFileStructure,{file:e.files[0],ref:"generateFileStructureRef"},null,8,["file"])],64)}const Ca=ft(Hl,[["render",ga],["__scopeId","data-v-23b34ba3"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/GenerateQSModal.vue"]]);export{Ca as G,xa as I};
