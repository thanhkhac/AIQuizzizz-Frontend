var at=Object.defineProperty;var rt=(_,n,Q)=>n in _?at(_,n,{enumerable:!0,configurable:!0,writable:!0,value:Q}):_[n]=Q;var te=(_,n,Q)=>rt(_,typeof n!="symbol"?n+"":n,Q);import{y as _e,d as it,u as lt,q as ct,l as ut,g as dt,i as v,C as Ne,j as mt,s as _t,ah as vt,k as ne,S as ht,O as gt,_ as ft,r as M,a as i,o as r,b as t,c as u,w as h,f,t as a,p,e as I,G as ve,F as x,E as D}from"./index-CNC2148x.js";import{A as oe}from"./ApiQuestionSet-B_nLwkxV.js";import{Q as A}from"./questionTypes-CS3lcRlq.js";import{T as pt}from"./TextArea-Cfsh6sg3.js";import{l as wt}from"./vue-draggable-plus-BepsPqA6.js";import{V as bt}from"./Validator-CWeiTIFe.js";import{D as yt}from"./index-xIf_eyCL.js";import{H as It}from"./HolderOutlined-DExnu7RE.js";const Re=[{id:"q1",quote:"Keep pushing. You're almost there!"},{id:"q2",quote:"Stay focused. You've got this!"},{id:"q3",quote:"One step at a time. Keep going!"},{id:"q4",quote:"You're doing great. Don't stop now!"},{id:"q5",quote:"Every effort counts. Keep it up!"},{id:"q6",quote:"Strong mind. Strong progress."},{id:"q7",quote:"Momentum is yours. Own it!"},{id:"q8",quote:"Eyes forward. Energy up!"},{id:"q9",quote:"You're closer than you think."},{id:"q10",quote:"Rise up. Power through!"}],Ct="/assets/trophy-BqY0IuVX.png",he={GET_ALL_BY_QUESTION_ID:"Comment/Question/{questionId}",REPLY:"Comment/{commentId}/Reply",DELETE:"Comment/{commentId}"};class Qt{constructor(){te(this,"GetAllByQuestionId",async n=>{const Q=he.GET_ALL_BY_QUESTION_ID.replace("{questionId}",n.questionId);return await _e.get(Q,{params:{pageNumber:n.pageNumber,pageSize:n.pageSize}})});te(this,"Create",async n=>{const Q=he.GET_ALL_BY_QUESTION_ID.replace("{questionId}",n.questionId);return await _e.post(Q,null,{params:{content:n.content}})});te(this,"Reply",async n=>{const Q=he.REPLY.replace("{commentId}",n.commentId);return await _e.post(Q,null,{params:{content:n.content}})});te(this,"Delete",async n=>{const Q=he.DELETE.replace("{commentId}",n);return await _e.delete(Q)})}}const se=new Qt,St=it({__name:"learn",setup(_,{expose:n}){n();const Q=new URL("/assets/confetti-bjvcnoca.lottie",import.meta.url).href,{t:e}=lt(),ge=ct(),B=ut(),j=dt(),F={HTML:"HTML",PLAIN_TEXT:"PlainText"},C=v({title:"",description:"",completedQuestionCount:0,totalQuestionCount:0,questions:[]}),L=v(ge.params.id),G=async()=>{if(!bt.isValidGuid(L.value.toString())){B.push({name:"404"});return}try{let s=await oe.GetDetailById(L.value.toString()),c=await oe.LearnQuestions(L.value.toString(),7);if(!s.data.success||!c.data.success){B.push({name:"404"});return}if(C.value=c.data.data,C.value.completedQuestionCount===C.value.totalQuestionCount){Ee();return}C.value.title=s.data.data.name,C.value.description=s.data.data.description}catch(s){Object.keys(s.response.data.errors).includes(vt.PLAN_REQUIRE_PLAN)&&B.push({name:"not-allowed"})}N.value=[...C.value.questions],d.value=N.value[0],N.value.shift()},fe=[{id:"1",user:{userName:"NguyenTanDuc"},content:"D",lastModified:"09/07/2025 10:12AM"},{id:"2",user:{userName:"NguyenManhDuong"},content:"Phải là A mới đúng",lastModified:"09/07/2025 10:15AM"},{id:"3",user:{userName:"PhamXuanTruong"},content:"A",lastModified:"09/07/2025 10:18AM"},{id:"4",user:{userName:"NguyenManhHieu"},content:"D",lastModified:"09/07/2025 10:20AM"},{id:"5",user:{userName:"NguyenDucTan123"},content:"It's d for sure",lastModified:"09/07/2025 10:25AM"},{id:"6",user:{userName:"NguyenDucTan123"},content:"It's d for sure",lastModified:"09/07/2025 10:25AM"},{id:"7",user:{userName:"NguyenDucTan123"},content:"It's d for sure",lastModified:"09/07/2025 10:25AM"},{id:"8",user:{userName:"NguyenDucTan123"},content:"It's d for sure",lastModified:"09/07/2025 10:25AM"},{id:"9",user:{userName:"NguyenDucTan123"},content:"It's d for sure",lastModified:"09/07/2025 10:25AM"},{id:"10",user:{userName:"NguyenDucTan123"},content:"It's d for sure",lastModified:"09/07/2025 10:25AM"}],k=v(C.value.completedQuestionCount),U=v([]),q=v(new Set),N=v([]),R=v(!1),d=v({}),z=v(""),o=v(!1),b=v(!1),E=v([]),S=Ne(()=>{var s;return(s=d.value.questionData.multipleChoice)==null?void 0:s.some(c=>c.text.length>=100)}),w=v([]),T=v([]),P=v([]),V=v(""),O=v({result:!1,resultText:e("learn_QS.result.wrong")}),X=Ne(()=>Math.floor(C.value.completedQuestionCount/C.value.totalQuestionCount*100)),pe=()=>{var l;let s=(l=d.value.questionData.multipleChoice)==null?void 0:l.filter(m=>m.isAnswer).map(m=>m.id||[]).sort(),c=E.value.sort();return E.value.length!==(s==null?void 0:s.length)?!1:c.every((m,g)=>m===s[g])},He=s=>{var g;const c=C.value.questions.findIndex(y=>y.id===d.value.id);let l=(g=C.value.questions[c].questionData.multipleChoice)==null?void 0:g.filter(y=>y.isAnswer).map(y=>y.id||[]),m=E.value;return l!=null&&l.includes(s.id)?!0:!(m!=null&&m.includes(s.id)&&!s.isAnswer)},we=()=>{var l;let s=((l=d.value.questionData.ordering)==null?void 0:l.map(m=>m.correctOrder).sort())||[];return P.value.map(m=>m.correctOrder).every((m,g)=>m===s[g])},be=()=>{let s=d.value.questionData.matching.matches,c=w.value.map(g=>g.id),l=T.value.map(g=>g.id);return c.map((g,y)=>({leftId:g,rightId:l[y]})).every(g=>s.some(y=>y.leftId===g.leftId&&y.rightId===g.rightId))},Ue=s=>{var y,Y;const c=d.value.questionData.matching;if(!c)return!1;let l=c.leftItems.some(H=>H.id===s),m=c.matches.find(H=>l?H.leftId===s:H.rightId===s);const g=l?w.value.findIndex(H=>H.id===s):T.value.findIndex(H=>H.id===s);return g===-1||!m?!1:l?((y=T.value[g])==null?void 0:y.id)===m.rightId:((Y=w.value[g])==null?void 0:Y.id)===m.leftId},ye=s=>s.trim().toLowerCase().normalize("NFKC").replace(/[\u2019\u2018\u201B\u0060]/g,"'").replace(/\s+/g," "),Ie=()=>ye(V.value)===ye(d.value.questionData.shortText),ze=v(null),Ce=v(!1),K=()=>{Ce.value=!Ce.value},Qe=v(!1),Pe=j.getUserInfo(),J=v([]),ae=v(""),W=v(null),re=v(!1),Z=mt({pageNumber:1,pageSize:1,questionId:""}),ee=v(!1),ie=async()=>{ee.value=!0;const s=await se.GetAllByQuestionId(Z);s.data.success&&(J.value=s.data.data.items.filter(c=>!c.parentId)),ee.value=!1},Ve=async()=>{let s;if(re.value&&W.value?s=await se.Reply({commentId:W.value.id,content:ae.value}):s=await se.Create({questionId:d.value.id,content:ae.value}),s.data.success){ne.success("Added successfully!"),await ie();return}ne.success("Added failed!")},Ye=async s=>{},Fe=async s=>{if((await se.Delete(s)).data.success){ne.success("Delete successfully!"),await ie();return}ne.success("Delete failed!")},Ge=s=>{re.value=!0,W.value=s},Be=()=>{ae.value="",re.value=!1,W.value=null},le=v([]),je=s=>{le.value[s]=!le.value[s],$(`#reply-items-${s}`).slideToggle()},Xe=async()=>{Z.pageNumber+=1,ee.value=!0;const s=await se.GetAllByQuestionId(Z);if(s.data.success){const c=s.data.data.items.filter(l=>!l.parentId);J.value=[...J.value,...c]}ee.value=!1},Ke=async()=>{Qe.value=!0,Z.questionId=d.value.id,await ie()},Je=()=>{Qe.value=!1},Se=()=>{oe.LearnHistory(L.value.toString(),[{questionId:d.value.id,isCorrect:!0}])},We=()=>{switch(K(),o.value=!0,d.value.type){case A.MULTIPLE_CHOICE:{O.value={result:pe(),resultText:pe()?e("learn_QS.result.correct"):e("learn_QS.result.wrong")};break}case A.ORDERING:{O.value={result:we(),resultText:we()?e("learn_QS.result.correct"):e("learn_QS.result.wrong")};break}case A.MATCHING:{O.value={result:be(),resultText:be()?e("learn_QS.result.correct"):e("learn_QS.result.wrong")};break}case A.SHORT_TEXT:{O.value={result:Ie(),resultText:Ie()?e("learn_QS.result.correct"):e("learn_QS.result.wrong")};break}}O.value.result===!1&&!R.value?q.value.add(d.value):O.value.result&&R.value?(q.value.delete(d.value),U.value.push(d.value),C.value.completedQuestionCount+=1,Se()):O.value.result===!1?q.value.add(d.value):(U.value.push(d.value),C.value.completedQuestionCount+=1,Se()),de()},Ze=s=>{var c;switch(K(),o.value=!0,b.value=!0,O.value={result:!1,resultText:e("learn_QS.result.skipped")},q.value.add(d.value),d.value.type){case A.MULTIPLE_CHOICE:{E.value=(c=d.value.questionData.multipleChoice)==null?void 0:c.filter(l=>l.isAnswer).map(l=>l.id);break}case A.MATCHING:{const l=d.value.questionData.matching,m=(l==null?void 0:l.matches)??[],g=(l==null?void 0:l.leftItems)??[],y=(l==null?void 0:l.rightItems)??[],Y=m.map(Me=>g.find(Ae=>Ae.id==Me.leftId)),H=m.map(Me=>y.find(Ae=>Ae.id==Me.rightId));w.value=Y,T.value=H;break}case A.ORDERING:{P.value=P.value.sort((l,m)=>l.correctOrder-m.correctOrder);break}case A.SHORT_TEXT:{V.value=d.value.questionData.shortText;break}}de()},ce=()=>{var s;switch(d.value.type){case A.MULTIPLE_CHOICE:{z.value=e("learn_QS.instructions.multiple_choice",{number:(s=d.value.questionData.multipleChoice)==null?void 0:s.filter(c=>c.isAnswer).length}),E.value=[];break}case A.ORDERING:{z.value="Arrange these options to their correct order.",P.value=d.value.questionData.ordering;break}case A.MATCHING:{z.value="Arrange the items to align with their correct matches.",w.value=d.value.questionData.matching.leftItems,T.value=d.value.questionData.matching.rightItems;break}case A.SHORT_TEXT:{z.value="Fill in the blank the correct answer.",V.value="";break}}},$e=()=>{me(),de(),!(N.value.length<=0)&&(d.value=N.value.shift(),o.value=!1,b.value=!1,ce(),K())},ue=v(!1),ke=v(""),qe=()=>{ke.value=e(`learn_QS.final_modal.quotes.${Re[Math.floor(Math.random()*Re.length)].id}`),setTimeout(()=>{ue.value=!0},1e3)},et=()=>{ue.value=!1},de=async()=>{if(!(N.value.length>0)){if(q.value.size>0&&!R.value)R.value=!0,N.value=Array.from(q.value);else if(q.value.size===0&&!R.value||q.value.size>0&&R.value){const s=C.value.questions.map(c=>({questionId:c.id,isCorrect:U.value.some(l=>l.id===c.id)}));await oe.LearnHistory(L.value.toString(),s),qe();return}}},tt=(s,c)=>{$(c).toggleClass("bx-chevron-down bx-chevron-up");const m=$(`#question-item-answer-${s}`);m&&$(m).slideToggle()},nt=async()=>{await G(),R.value=!1,b.value=!1,o.value=!1,z.value="",ue.value=!1,q.value=new Set,U.value=[],K(),ce()},Te=v(!1),Ee=()=>{Te.value=!0,De()},Oe=v(),xe=v(!1),De=()=>{var s,c;xe.value=!0,(c=(s=Oe.value)==null?void 0:s.getDotLottieInstance())==null||c.play(),setTimeout(()=>{xe.value=!1},5e3)},ot=async()=>{(await oe.resetLearnHistory(L.value.toString())).data.success&&(ne.success(e("learn_QS.msg.learn_mode_reset")),Te.value=!1,await G())},st={scroll:!0,scrollSensitivity:100,scrollSpeed:100,scrollTarget:document.scrollingElement};function me(){ht(()=>{requestAnimationFrame(()=>{const s=document.querySelectorAll(".matching-option-container.left .answer-option-matching"),c=document.querySelectorAll(".matching-option-container.right .answer-option-matching"),l=Math.min(s.length,c.length);for(let m=0;m<l;m++){const g=s[m],y=c[m];if(!g||!y)continue;g.style.height="auto",y.style.height="auto";const Y=Math.max(g.offsetHeight,y.offsetHeight);g.style.height=`${Y}px`,y.style.height=`${Y}px`}})})}_t(async()=>{await G(),ce(),me(),window.addEventListener("resize",me),le.value=J.value.map(()=>!1)});const Le={animationPath:Q,t:e,route:ge,router:B,authStore:j,QUESTION_FORMAT:F,quiz:C,questionSetId:L,getQuizData:G,comment_sample:fe,totalCompleted:k,completed:U,incorrect:q,currentSession:N,isCurrentSessionReLearn:R,currentQuestion:d,currentQuestionInstruction:z,currentQuestionIsSubmitted:o,currentQuestionIsSkipped:b,userAnswerMultipleChoice:E,isOptionExceed:S,userAnswerMatchingLeft:w,userAnswerMatchingRight:T,userAnswerOrdering:P,userAnswerShortText:V,currentQuestionResult:O,completionPercentage:X,checkMultipleChoice:pe,checkMultipleChoiceAnswerCorrect:He,checkOrdering:we,checkMatching:be,checkMatchingAnswerCorrect:Ue,cleanShortTextAnswer:ye,checkShortText:Ie,explainModal:ze,explainModalOpen:Ce,toggleExplainModal:K,commentModalOpen:Qe,user_info:Pe,currentQuestionComments:J,commentValue:ae,chosenComment:W,isReplying:re,commentPageParams:Z,commentLoading:ee,getCommentData:ie,onAddComment:Ve,onEditComment:Ye,onDeleteComment:Fe,onTriggerReply:Ge,onCancelReplying:Be,repliesOpen:le,onToggleReplyContainer:je,onLoadMoreComment:Xe,onOpenCommentModal:Ke,onCloseCommentModal:Je,sendCorrectQuestionHistory:Se,onSubmitAnswer:We,onSkipQuestion:Ze,resetUserAnswer:ce,onNextQuestion:$e,finalModalOpen:ue,finalModalQuote:ke,openFinalModal:qe,closeFinalModal:et,triggerFinalModal:de,toggleDisplayAnswer:tt,onContinuesLearn:nt,completeModalOpen:Te,openCompleteModal:Ee,animationRef:Oe,isAnimationDisplaying:xe,triggerAnimation:De,onResetLearnHistory:ot,dragOptions:st,syncMatchingHeights:me,get QUESTION_TYPE(){return A},TextArea:pt,get VueDraggable(){return wt},get HolderOutlined(){return It},get dayjs(){return gt},get DotLottieVue(){return yt},get trophy_png(){return Ct}};return Object.defineProperty(Le,"__isScriptSetup",{enumerable:!1,value:!0}),Le}}),Tt={class:"page-container"},xt={class:"title-container"},Mt={class:"progress-bar-container"},At={class:"progress-info"},kt={class:"progress-info-number"},qt={class:"progress-info-percentage"},Et={class:"content"},Ot={class:"content-item"},Dt={class:"section question-section"},Lt=["innerHTML"],Nt={class:"section answer-section"},Rt={key:0,class:"relearn-ins"},Ht={class:"d-flex align-items-center"},Ut={class:"answer-section-ins"},zt={class:"answer-option-content"},Pt={key:0,class:"bx bx-check answer-icon"},Vt={key:1,class:"bx bx-x answer-icon"},Yt={key:2,class:"answer-option-container matching"},Ft={class:"matching-option-container left"},Gt={class:"d-flex align-items-center"},Bt={class:"answer-option-order"},jt={class:"answer-option-content"},Xt={class:"matching-option-container right"},Kt={class:"d-flex align-items-center"},Jt={class:"answer-option-content"},Wt={class:"answer-option-order"},Zt={key:3,class:"answer-option-container ordering"},$t={class:"answer-option-order"},en={class:"answer-option-content"},tn={key:4,class:"answer-option-container"},nn={class:"w-100 d-flex align-items-center"},on={key:0,class:"bx bx-check answer-icon"},sn={key:1,class:"bx bx-x answer-icon"},an={key:0,class:"short-text-correct-answer"},rn={class:"learn-question-footer"},ln={class:"d-flex"},cn={class:"learn-question-explain"},un={class:"comment-section"},dn={class:"comment-container"},mn={class:"comment-main-content"},_n={class:"w-100 d-flex flex-column"},vn={class:"comment-content-info"},hn={key:0,class:"comment-actions"},gn=["onClick"],fn={class:"comment-content"},pn={class:"comment-reply"},wn=["onClick"],bn=["onClick"],yn=["id"],In={class:"comment-item"},Cn={class:"comment-main-content"},Qn={class:"w-100 d-flex flex-column"},Sn={class:"comment-content-info"},Tn={key:0,class:"comment-actions"},xn=["onClick"],Mn={class:"comment-content"},An={key:1,class:"w-100 h-100 d-flex justify-content-center align-items-center"},kn={key:0},qn={key:1},En={class:"comment-form-footer"},On={class:"title-container"},Dn={class:"content-item modal-final-container"},Ln={class:"final-modal-quote"},Nn={class:"progress-bar-container final"},Rn={class:"progress-info"},Hn={class:"progress-info-percentage"},Un={class:"progress-info"},zn={class:"progress-info-percentage"},Pn={class:"progress-info-percentage"},Vn={class:"content-item modal-final-container"},Yn={class:"preview-question-title"},Fn={class:"preview-question-container"},Gn={class:"preview-question-item"},Bn={class:"question-item-content"},jn=["innerHTML"],Xn={key:1,class:"question-text"},Kn=["id"],Jn={key:0,class:"multiple-choice-answer"},Wn={key:0,class:"text-success"},Zn={class:"pair-answer"},$n={class:"pair-answer-item"},eo={class:"pair-answer-item"},to={key:2,class:"ordering-answer"},no={class:"ordering-answer-item"},oo={class:"ordering-answer-item"},so={class:"ordering-answer-item"},ao={class:"short-text-answer"},ro={class:"question-item-toogle-btn"},io=["onClick"],lo={class:"content-item final-modal-footer"},co={class:"modal-complete-container"},uo={class:"content-item modal-complete"},mo=["src"],_o={class:"modal-complete-content-container"},vo={class:"modal-complete-content"},ho={class:"modal-complete-content sub-content"},go={class:"modal-complete-buttons-container"};function fo(_,n,Q,e,ge,B){const j=M("RouterLink"),F=M("a-col"),C=M("a-row"),L=M("a-progress"),G=M("a-checkbox"),fe=M("a-checkbox-group"),k=M("a-button"),U=M("a-popconfirm"),q=M("a-skeleton"),N=M("a-empty"),R=M("a-form"),d=M("a-drawer"),z=M("a-divider");return r(),i(x,null,[t("div",Tt,[t("div",xt,[u(C,{class:"w-100 d-flex align-items-center"},{default:h(()=>[u(F,{span:1},{default:h(()=>[u(j,{to:{name:"User_Library"}},{default:h(()=>n[8]||(n[8]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[8]})]),_:1}),u(F,{class:"main-title",span:23},{default:h(()=>[t("span",null,a(e.quiz.title),1),n[9]||(n[9]=f()),n[10]||(n[10]=t("br",null,null,-1)),t("span",null,a(e.quiz.description),1)]),_:1,__:[9,10]})]),_:1})]),t("div",Mt,[t("div",At,[t("div",kt,a(_.$t("learn_QS.other.progress_count",{current:e.totalCompleted+1,total:e.quiz.totalQuestionCount})),1),t("div",qt,[t("span",null,a(e.completionPercentage),1),f(" % "+a(_.$t("learn_QS.other.completed")),1)])]),u(L,{"show-info":!1,"stroke-color":"#7C3AED",status:"active",percent:e.completionPercentage},null,8,["percent"])]),t("div",Et,[t("div",Ot,[t("div",Dt,[t("div",{class:p(["learn-question",e.currentQuestion.textFormat===e.QUESTION_FORMAT.HTML?"":"d-none"]),innerHTML:e.currentQuestion.questionText},null,10,Lt),t("div",{class:p(["learn-question",e.currentQuestion.textFormat===e.QUESTION_FORMAT.HTML?"d-none":""])},a(e.currentQuestion.questionText),3),t("div",Nt,[e.isCurrentSessionReLearn?(r(),i("div",Rt,a(_.$t("learn_QS.instructions.re_learn_ins")),1)):I("v-if",!0),t("div",Ht,[t("div",Ut,a(e.currentQuestionInstruction),1),t("div",{class:p(["ms-3 learn-question-result",e.currentQuestionIsSubmitted?"":"d-none",e.currentQuestionIsSubmitted?e.currentQuestionResult.result?"result-correct":"result-incorrect":"",e.currentQuestionIsSkipped?"result-skipped":""])},a(e.currentQuestionResult.resultText),3)]),e.currentQuestion.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(r(),ve(fe,{key:1,value:e.userAnswerMultipleChoice,"onUpdate:value":n[0]||(n[0]=o=>e.userAnswerMultipleChoice=o),class:p(["answer-option-container multiplechoice",e.isOptionExceed?"column":""])},{default:h(()=>[(r(!0),i(x,null,D(e.currentQuestion.questionData.multipleChoice,o=>(r(),ve(G,{value:o.id,"onUpdate:value":b=>o.id=b,disabled:e.currentQuestionIsSubmitted,class:p(["answer-option answer-option-multiplechoice",e.currentQuestionIsSubmitted&&e.checkMultipleChoiceAnswerCorrect(o)&&o.isAnswer?"answer-correct":"",e.currentQuestionIsSubmitted&&!e.checkMultipleChoiceAnswerCorrect(o)&&!o.isAnswer?"answer-incorrect":""])},{default:h(()=>[t("div",zt,a(o.text),1),e.currentQuestionIsSubmitted&&e.checkMultipleChoiceAnswerCorrect(o)&&o.isAnswer?(r(),i("i",Pt)):I("v-if",!0),e.currentQuestionIsSubmitted&&!e.checkMultipleChoiceAnswerCorrect(o)&&!o.isAnswer?(r(),i("i",Vt)):I("v-if",!0)]),_:2},1032,["value","onUpdate:value","disabled","class"]))),256))]),_:1},8,["value","class"])):I("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.MATCHING?(r(),i("div",Yt,[t("div",Ft,[u(e.VueDraggable,{disabled:e.currentQuestionIsSubmitted,modelValue:e.userAnswerMatchingLeft,"onUpdate:modelValue":n[1]||(n[1]=o=>e.userAnswerMatchingLeft=o),options:e.dragOptions,onEnd:e.syncMatchingHeights},{default:h(()=>[(r(!0),i(x,null,D(e.userAnswerMatchingLeft,(o,b)=>(r(),i("div",Gt,[t("div",{class:p(["answer-option answer-option-matching",e.currentQuestionIsSubmitted?e.checkMatchingAnswerCorrect(o.id)?"answer-correct":"answer-incorrect":""])},[t("div",Bt,[u(e.HolderOutlined)]),t("div",jt,a(o.text),1)],2),t("i",{class:p(["bx bxs-label matching-icon",e.currentQuestionIsSubmitted?e.checkMatchingAnswerCorrect(o.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2)]))),256))]),_:1},8,["disabled","modelValue"])]),t("div",Xt,[u(e.VueDraggable,{disabled:e.currentQuestionIsSubmitted,modelValue:e.userAnswerMatchingRight,"onUpdate:modelValue":n[2]||(n[2]=o=>e.userAnswerMatchingRight=o),options:e.dragOptions,onEnd:e.syncMatchingHeights},{default:h(()=>[(r(!0),i(x,null,D(e.userAnswerMatchingRight,(o,b)=>(r(),i("div",Kt,[t("i",{class:p(["bx bxs-label matching-icon",e.currentQuestionIsSubmitted?e.checkMatchingAnswerCorrect(o.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2),t("div",{class:p(["answer-option answer-option-matching",e.currentQuestionIsSubmitted?e.checkMatchingAnswerCorrect(o.id)?"answer-correct":"answer-incorrect":""])},[t("div",Jt,a(o.text),1),t("div",Wt,[u(e.HolderOutlined)])],2)]))),256))]),_:1},8,["disabled","modelValue"])])])):I("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.ORDERING?(r(),i("div",Zt,[u(e.VueDraggable,{disabled:e.currentQuestionIsSubmitted,modelValue:e.userAnswerOrdering,"onUpdate:modelValue":n[3]||(n[3]=o=>e.userAnswerOrdering=o),options:e.dragOptions},{default:h(()=>[(r(!0),i(x,null,D(e.userAnswerOrdering,(o,b)=>(r(),i("div",{class:p(["answer-option answer-option-ordering",e.currentQuestionIsSubmitted?b===o.correctOrder?"answer-correct":"answer-incorrect":""])},[t("div",$t,[u(e.HolderOutlined),f(" "+a(b+1),1)]),t("div",en,a(o.text),1),t("div",{class:p(["answer-option-order answer-icon",e.currentQuestionIsSubmitted?"":"d-none"])},[n[11]||(n[11]=t("i",{class:"bx bx-hash answer-icon"},null,-1)),f(" "+a(o.correctOrder),1)],2)],2))),256))]),_:1},8,["disabled","modelValue"])])):I("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.SHORT_TEXT?(r(),i("div",tn,[t("div",{layout:"vertical",class:p(["answer-short-text",e.currentQuestionIsSubmitted?e.checkShortText()?"answer-correct":"answer-incorrect":""])},[t("div",nn,[u(e.TextArea,{readonly:e.currentQuestionIsSubmitted,placeholder:"Enter your answer...",modelValue:e.userAnswerShortText,"onUpdate:modelValue":n[4]||(n[4]=o=>e.userAnswerShortText=o)},null,8,["readonly","modelValue"]),e.currentQuestionIsSubmitted&&e.checkShortText()?(r(),i("i",on)):I("v-if",!0),e.currentQuestionIsSubmitted&&!e.checkShortText()?(r(),i("i",sn)):I("v-if",!0)]),e.currentQuestionIsSubmitted&&!e.checkShortText()?(r(),i("div",an,[f(a(_.$t("learn_QS.instructions.short_text_answer"))+" ",1),t("span",null,a(e.currentQuestion.questionData.shortText),1)])):I("v-if",!0)],2)])):I("v-if",!0)])]),t("div",rn,[t("div",{class:p(["main-color-btn-ghost",e.currentQuestionIsSubmitted?"main-color-btn-ghost-disabled":""]),onClick:n[5]||(n[5]=o=>e.onSkipQuestion(o))},a(_.$t("learn_QS.buttons.dont_know")),3),t("div",ln,[t("div",{class:p(["main-color-btn-ghost me-3",e.currentQuestionIsSubmitted?"":"d-none"]),onClick:e.onOpenCommentModal},[n[12]||(n[12]=t("i",{class:"bx bx-conversation me-2"},null,-1)),f(" "+a(_.$t("learn_QS.buttons.comment")),1)],2),t("div",{class:p(["main-color-btn-ghost me-3",e.currentQuestionIsSubmitted?"":"d-none"]),onClick:e.toggleExplainModal},[n[13]||(n[13]=t("i",{class:"bx bx-bulb me-2"},null,-1)),f(" "+a(_.$t("learn_QS.buttons.explaination")),1)],2),u(k,{class:p(["main-color-btn",e.currentQuestionIsSubmitted?"main-color-btn-disabled":""]),type:"primary",size:"large",onClick:e.onSubmitAnswer},{default:h(()=>[f(a(_.$t("learn_QS.buttons.submit")),1)]),_:1},8,["class"])])])]),t("div",{ref:"explainModal",class:p(["explain-modal explain-modal-up",{show:e.explainModalOpen}])},[t("div",cn,a(e.currentQuestion.explainText),1),u(k,{class:p(["main-color-btn close-modal-btn"]),type:"primary",size:"large",onClick:e.toggleExplainModal},{default:h(()=>n[14]||(n[14]=[t("i",{class:"bx bx-chevrons-down"},null,-1)])),_:1,__:[14]}),u(k,{class:p(["main-color-btn"]),type:"primary",size:"large",onClick:e.onNextQuestion},{default:h(()=>[f(a(_.$t("learn_QS.buttons.next_question"))+" ",1),n[15]||(n[15]=t("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[15]})],2),u(d,{width:500,title:"Comment section",placement:"right",open:e.commentModalOpen,onClose:e.onCloseCommentModal},{default:h(()=>[t("div",un,[t("div",dn,[e.currentQuestionComments.length>0?(r(),i(x,{key:0},[(r(!0),i(x,null,D(e.currentQuestionComments,(o,b)=>{var E;return r(),i("div",{class:p(["comment-item",((E=e.chosenComment)==null?void 0:E.id)===o.id?"comment-item-chosen":""])},[t("div",mn,[n[19]||(n[19]=t("i",{class:"bx bx-user-circle comment-user-img"},null,-1)),t("div",_n,[t("div",vn,[f(a(o.createBy.fullName)+" ",1),t("span",null,a(e.dayjs(o.createdAt).format("DD/MM/YYYY HH:mm")),1),o.createBy.userId===e.user_info.id?(r(),i("div",hn,[t("i",{class:"me-3 bx bx-edit",onClick:S=>e.onEditComment(o.id)},null,8,gn),u(U,{class:"pop-confirm-delete",title:_.$t("create_QS.quiz.confirm"),onConfirm:S=>e.onDeleteComment(o.id)},{default:h(()=>[...n[16]||(n[16]=[t("i",{class:"text-danger bx bx-trash-alt"},null,-1)])]),_:2},1032,["title","onConfirm"])])):I("v-if",!0)]),t("div",fn,a(o.content),1),t("div",pn,[t("div",{class:"comment-reply-btn",onClick:S=>e.onTriggerReply(o)}," Reply ",8,wn),t("div",{class:"comment-children-open-btn",onClick:S=>e.onToggleReplyContainer(b)},a(e.repliesOpen[b]?"Close":"View")+" ("+a(o.childComments.length)+") replies ",9,bn)]),t("div",{id:"reply-items-"+b,class:"child-comment-container",style:{display:"none"}},[(r(!0),i(x,null,D(o.childComments,(S,w)=>(r(),i("div",In,[t("div",Cn,[n[18]||(n[18]=t("i",{class:"bx bx-user-circle comment-user-img"},null,-1)),t("div",Qn,[t("div",Sn,[f(a(S.createBy.fullName)+" ",1),t("span",null,a(e.dayjs(S.createdAt).format("DD/MM/YYYY HH:mm")),1),S.createBy.userId===e.user_info.id?(r(),i("div",Tn,[t("i",{class:"me-3 bx bx-edit",onClick:T=>e.onEditComment(S.id)},null,8,xn),u(U,{class:"pop-confirm-delete",title:_.$t("create_QS.quiz.confirm"),onConfirm:T=>e.onDeleteComment(S.id)},{default:h(()=>[...n[17]||(n[17]=[t("i",{class:"text-danger bx bx-trash-alt"},null,-1)])]),_:2},1032,["title","onConfirm"])])):I("v-if",!0)]),t("div",Mn,a(S.content),1)])])]))),256))],8,yn)])])],2)}),256)),e.commentLoading?(r(),ve(q,{key:0,loading:e.commentLoading},null,8,["loading"])):I("v-if",!0),u(k,{type:"primary",class:"main-color-btn",onClick:e.onLoadMoreComment,loading:e.commentLoading},{default:h(()=>n[20]||(n[20]=[f(" Load more ")])),_:1,__:[20]},8,["loading"])],64)):(r(),i("div",An,[u(N,null,{description:h(()=>n[21]||(n[21]=[t("span",null,"No one has commented yet.",-1)])),_:1})]))]),u(R,{layout:"vertical",class:"comment-form"},{default:h(()=>{var o;return[e.isReplying?(r(),i("label",kn," Replying to @"+a((o=e.chosenComment)==null?void 0:o.createBy.fullName),1)):(r(),i("label",qn,"Your comment")),u(e.TextArea,{value:e.commentValue,"onUpdate:value":n[6]||(n[6]=b=>e.commentValue=b),placeholder:"Enter comment","max-length":500},null,8,["value"]),t("div",En,[u(k,{type:"primary",shape:"round",class:p(["me-3 main-color-btn-ghost",e.isReplying?"":"main-color-btn-ghost-disabled"]),onClick:e.onCancelReplying},{default:h(()=>[f(a(_.$t("learn_QS.buttons.cancel")),1)]),_:1},8,["class"]),u(k,{type:"primary",shape:"round",class:p(["main-color-btn",e.commentValue?"":"main-color-btn-disabled"]),onClick:e.onAddComment},{default:h(()=>[f(a(_.$t("learn_QS.buttons.send_comment")),1)]),_:1},8,["class"])])]}),_:1})])]),_:1},8,["open"])])]),u(d,{open:e.finalModalOpen,placement:"top",height:"100vh",closable:!1,onClose:e.closeFinalModal,"body-style":{padding:0,height:"100%"}},{title:h(()=>[t("div",On,[u(C,{class:"w-100 d-flex align-items-center"},{default:h(()=>[u(F,{span:1},{default:h(()=>[u(j,{to:{name:"User_Library"}},{default:h(()=>n[22]||(n[22]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[22]})]),_:1}),u(F,{class:"main-title",span:23},{default:h(()=>[t("span",null,a(e.quiz.title),1),n[23]||(n[23]=f()),n[24]||(n[24]=t("br",null,null,-1))]),_:1,__:[23,24]})]),_:1})])]),default:h(()=>[t("div",Dn,[t("div",Ln,a(e.finalModalQuote),1)]),t("div",Nn,[t("div",Rn,[t("div",Hn,[f(a(_.$t("learn_QS.other.total_set_progress"))+" ",1),t("span",null,a(e.completionPercentage)+"%",1)])]),u(L,{"show-info":!1,"stroke-color":"#7C3AED",status:"active",percent:e.completionPercentage},null,8,["percent"]),t("div",Un,[t("div",zn,[f(a(_.$t("learn_QS.other.completed"))+": ",1),t("span",null,a(e.quiz.completedQuestionCount),1)]),t("div",Pn,[f(a(_.$t("learn_QS.other.total_question"))+" ",1),t("span",null,a(e.quiz.totalQuestionCount),1)])])]),t("div",Vn,[u(z,{style:{"background-color":"var(--content-item-border-color)"}}),t("div",Yn,a(_.$t("learn_QS.other.preview_modal_title")),1),t("div",Fn,[(r(!0),i(x,null,D(e.completed,(o,b)=>{var E,S;return r(),i("div",Gn,[t("div",Bn,[o.textFormat===e.QUESTION_FORMAT.HTML?(r(),i("div",{key:0,class:"question-html",innerHTML:o.questionText},null,8,jn)):(r(),i("div",Xn,a(o.questionText),1)),t("div",{class:"question-item-answer",id:`question-item-answer-${b}`},[o.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(r(),i("div",Jn,[t("ul",null,[(r(!0),i(x,null,D(o.questionData.multipleChoice,w=>(r(),i("li",null,[f(a(w.text)+" ",1),w.isAnswer?(r(),i("span",Wn," ("+a(w.isAnswer)+") ",1)):I("v-if",!0)]))),256))])])):I("v-if",!0),o.type===e.QUESTION_TYPE.MATCHING?(r(!0),i(x,{key:1},D((E=o.questionData.matching)==null?void 0:E.matches,w=>{var T,P,V,O;return r(),i("div",Zn,[t("span",$n,a((P=(T=o.questionData.matching)==null?void 0:T.leftItems.find(X=>X.id===w.leftId))==null?void 0:P.text),1),n[25]||(n[25]=t("i",{class:"bx bx-right-arrow-alt"},null,-1)),t("span",eo,a((O=(V=o.questionData.matching)==null?void 0:V.rightItems.find(X=>X.id===w.rightId))==null?void 0:O.text),1)])}),256)):I("v-if",!0),o.type===e.QUESTION_TYPE.ORDERING?(r(),i("div",to,[t("div",no,[(r(!0),i(x,null,D(o.questionData.ordering,w=>(r(),i("div",null,a(w.text),1))),256))]),n[26]||(n[26]=t("i",{class:"bx bx-right-arrow-alt"},null,-1)),t("div",oo,[(r(!0),i(x,null,D((S=o.questionData.ordering)==null?void 0:S.sort((w,T)=>w.correctOrder-T.correctOrder),(w,T)=>(r(),i("div",so,[t("span",null,"#"+a(w.correctOrder),1),f(" - "+a(w.text),1)]))),256))])])):I("v-if",!0),o.type===e.QUESTION_TYPE.SHORT_TEXT?(r(),i(x,{key:3},[n[27]||(n[27]=t("span",null,"Answer:",-1)),t("div",ao,a(o.questionData.shortText),1)],64)):I("v-if",!0)],8,Kn)]),t("div",ro,[t("i",{class:"bx bx-chevron-up",onClick:w=>e.toggleDisplayAnswer(b,w.currentTarget)},null,8,io)])])}),256))]),t("div",lo,[t("div",null,a(_.$t("learn_QS.other.preview_modal_continues_ins")),1),u(k,{class:p(["main-color-btn"]),type:"primary",size:"large",shape:"round",onClick:e.onContinuesLearn},{default:h(()=>[f(a(_.$t("learn_QS.buttons.continue")),1)]),_:1})])])]),_:1},8,["open"]),u(d,{open:e.completeModalOpen,placement:"top",height:"100vh",closable:!1,onClose:e.closeFinalModal,"body-style":{padding:0,height:"100%"}},{default:h(()=>[e.isAnimationDisplaying?(r(),ve(e.DotLottieVue,{key:0,autoplay:e.isAnimationDisplaying,ref:"animationRef",class:p(["animation-container"]),onComplete:n[7]||(n[7]=o=>e.isAnimationDisplaying=!1),src:e.animationPath},null,8,["autoplay","src"])):I("v-if",!0),t("div",co,[t("div",uo,[t("img",{class:"modal-complete-img",src:e.trophy_png,alt:""},null,8,mo),t("div",_o,[t("div",vo,a(_.$t("learn_QS.other.complete_modal_congratulation")),1),t("div",ho,a(_.$t("learn_QS.other.complete_modal_ins")),1)]),t("div",go,[u(k,{type:"primary",class:"main-color-btn ghost-btn",size:"large"},{default:h(()=>[f(a(_.$t("learn_QS.buttons.back_to_home")),1)]),_:1}),u(k,{type:"primary",class:"main-color-btn",size:"large"},{default:h(()=>[f(a(_.$t("learn_QS.buttons.take_a_test")),1)]),_:1}),u(k,{type:"primary",class:"main-color-btn",size:"large",onClick:e.onResetLearnHistory},{default:h(()=>[f(a(_.$t("learn_QS.buttons.reset_learn_mode")),1)]),_:1})])])])]),_:1},8,["open"])],64)}const xo=ft(St,[["render",fo],["__scopeId","data-v-5fe31f19"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/question_sets/learn.vue"]]);export{xo as default};
