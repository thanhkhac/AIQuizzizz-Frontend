import{d as H,q as Q,l as K,g as W,u as Y,i as m,C as X,j as I,P as Z,s as $,k as j,_ as ee,r as c,a as y,o as b,b as t,c as o,e as ae,f as g,t as i,w as n,F as R,E as J,G as se}from"./index-CNC2148x.js";import{A}from"./ApiClass-BckaWWMn.js";import{I as te}from"./Input-B6AzPJuz.js";const O={ALL:"All",TEACHER:"Teacher",STUDENT:"Student",OWNER:"Owner"},le=H({__name:"index",emits:["updateSidebar"],setup(f,{expose:a,emit:P}){var D;a();const e=Q(),C=K(),k=W(),{t:_}=Y(),h=P,N=m(k.getUserInfo()),S=Object.values(O),x=X(()=>S.map(r=>({label:_(`class_index.select_option.${r}`),value:r!==O.ALL?r:""}))),l=I({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,name:((D=e.query.name)==null?void 0:D.toString())||"",shareMode:e.query.shareMode||x.value[0].value,totalCount:0,statusFilter:!1}),u=m([]),d=async()=>{try{let r=await A.GetAllByLimit(l);if(r.data.success){let p=r.data.data;u.value=p.items,l.pageNumber=p.pageNumber,l.pageSize=p.pageSize,l.totalCount=p.totalCount,l.statusFilter&&(l.pageNumber>p.totalPages&&l.totalCount>0?(l.pageNumber=1,C.push({name:"User_Class",query:{pageNumber:1,pageSize:l.pageSize,name:l.name,shareMode:l.shareMode}})):C.push({name:"User_Class",query:{pageNumber:l.pageNumber,pageSize:l.pageSize,name:l.name,shareMode:l.shareMode}}),l.statusFilter=!l.statusFilter)}}catch(r){console.log("ERROR: GETALLBYLIMIT class: "+r)}};Z(()=>{var r;Object.keys(e.query).length===0&&(l.pageNumber=e.query.pageNumber||1,l.pageSize=e.query.pageSize||10,l.name=((r=e.query.name)==null?void 0:r.toString())||"",l.shareMode=e.query.shareMode||x.value[0].value,l.statusFilter=!0,d())});const w=(r,p)=>{l.pageNumber=r,l.pageSize=p,l.statusFilter=!0,d()},z={code:[{required:!0,message:"This field is required.",trigger:"change"}],name:[{required:!0,message:"This field is required.",trigger:"change"},{max:100,message:"Limit 100.",trigger:"change"}],topic:[{max:100,message:"Limit 100",trigger:"change"}]},F=m(!1),s=m(),v=I({code:""}),q=m(!1),V=async()=>{q.value=!0;try{if(await s.value.validate(),!(await A.JoinClass(v)).data.success){j.error("Join class failed");return}j.success("Join class successfully."),await d()}catch(r){console.log(r)}finally{q.value=!1}},M=m(!1),U=m(),E=I({name:"",topic:""}),L=m(!1),B=async()=>{L.value=!0;try{if(await U.value.validate(),!(await A.Create(E)).data.success){j.error("Create class failed");return}M.value=!1,j.success("Create class successfully."),await d()}catch(r){console.log(r)}finally{L.value=!1}},G=r=>{C.push({name:"User_Class_Exam",params:{id:r}})};$(async()=>{h("updateSidebar","class"),await d()});const T={route:e,router:C,authStore:k,t:_,emit:h,user:N,optionKeys:S,class_credit_options:x,pageParams:l,class_data:u,getData:d,onPaginationChange:w,rules:z,modal_join_class_open:F,joinClassFormRef:s,joinClassFormState:v,isJoinLoading:q,onJoinClass:V,modal_create_class_open:M,createClassFormRef:U,createClassFormState:E,isCreateLoading:L,onCreateClass:B,onRedirectToClassDetail:G,Input:te};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}}),oe={class:"page-container"},ne={class:"title-container"},re={class:"main-title"},ie={class:"title-button-container"},ce={class:"content"},de={class:"content-item"},me={class:"content-item-functions"},_e={class:"filter-container"},ue={style:{width:"300px",padding:"0px"}},pe={class:"class-container"},ge=["onClick"],fe={class:"class-item-name"},ve={class:"class-item-topic"},be={class:"class-item-owner"},Ce={key:1,class:"w-100 m-2 d-flex justify-content-center"},xe={class:"pagination-container"},ye={class:"modal-container"},he={class:"modal-title-container"},Se={class:"modal-container"},we={class:"modal-title-container"};function ze(f,a,P,e,C,k){const _=c("a-button"),h=c("a-select-option"),N=c("a-select"),S=c("a-empty"),x=c("a-pagination"),l=c("RouterLink"),u=c("a-col"),d=c("a-row"),w=c("a-form"),z=c("a-modal"),F=c("a-form-item");return b(),y(R,null,[t("div",oe,[t("div",ne,[t("div",re,[t("span",null,i(f.$t("class_index.title")),1),a[12]||(a[12]=g()),a[13]||(a[13]=t("br",null,null,-1)),t("span",null,i(f.$t("class_index.sub_title")),1)]),t("div",ie,[o(_,{type:"primary",class:"main-color-btn",size:"large",onClick:a[0]||(a[0]=s=>e.modal_join_class_open=!0)},{default:n(()=>[g(i(f.$t("class_index.buttons.join_class"))+" ",1),a[14]||(a[14]=t("i",{class:"bx bx-log-in"},null,-1))]),_:1,__:[14]}),o(_,{type:"primary",class:"ms-3 main-color-btn",size:"large",onClick:a[1]||(a[1]=s=>e.modal_create_class_open=!0)},{default:n(()=>[g(i(f.$t("class_index.buttons.create_class"))+" ",1),a[15]||(a[15]=t("i",{class:"bx bx-plus"},null,-1))]),_:1,__:[15]})])]),t("div",ce,[t("div",de,[t("div",me,[t("div",_e,[o(N,{class:"me-3",value:e.pageParams.shareMode,"onUpdate:value":a[2]||(a[2]=s=>e.pageParams.shareMode=s),style:{width:"200px"},onChange:e.getData},{default:n(()=>[(b(!0),y(R,null,J(e.class_credit_options,s=>(b(),se(h,{value:s.value},{default:n(()=>[g(i(s.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),t("div",ue,[o(e.Input,{onInput:e.getData,modelValue:e.pageParams.name,"onUpdate:modelValue":a[3]||(a[3]=s=>e.pageParams.name=s),placeholder:e.t("class_index.other.search_class_placeholder")},{icon:n(()=>a[16]||(a[16]=[t("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),t("div",pe,[e.class_data.length>0?(b(!0),y(R,{key:0},J(e.class_data,s=>(b(),y("div",{class:"class-item",onClick:v=>e.onRedirectToClassDetail(s.classId)},[t("div",fe,i(s.name),1),t("div",ve,i(s.topic),1),t("div",be,[a[17]||(a[17]=t("i",{class:"bx bxs-user"},null,-1)),g(" "+i(s.owner),1)])],8,ge))),256)):(b(),y("div",Ce,[o(S,null,{description:n(()=>[t("span",null,i(f.$t("class_index.other.no_data_matches")),1)]),_:1})]))]),t("div",xe,[o(x,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":a[4]||(a[4]=s=>e.pageParams.pageNumber=s),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(s,v)=>`${v[0]}-${v[1]} of ${s} ${e.t("class_index.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("class_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])]),o(z,{centered:"","wrap-class-name":"medium-modal",open:e.modal_join_class_open,onCancel:a[7]||(a[7]=s=>e.modal_join_class_open=!1)},{footer:n(()=>[o(_,{loading:e.isJoinLoading,class:"main-color-btn",key:"submit",type:"primary",onClick:e.onJoinClass},{default:n(()=>[g(i(e.t("class_index.buttons.join")),1)]),_:1},8,["loading"])]),default:n(()=>[t("div",ye,[t("div",he,[o(d,{class:"w-100 d-flex align-items-center"},{default:n(()=>[o(u,{span:4},{default:n(()=>[o(l,{onClick:a[5]||(a[5]=s=>e.modal_join_class_open=!1),to:{name:""}},{default:n(()=>a[18]||(a[18]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[18]})]),_:1}),o(u,{class:"main-title",span:20},{default:n(()=>[t("span",null,i(e.t("class_index.modal.join_title")),1)]),_:1})]),_:1})]),o(w,{ref:"joinClassFormRef",model:e.joinClassFormState,layout:"vertical",rules:e.rules},{default:n(()=>[o(e.Input,{label:e.t("class_index.modal.join_class_code_label"),name:"code",value:e.joinClassFormState.code,"onUpdate:value":a[6]||(a[6]=s=>e.joinClassFormState.code=s),placeholder:e.t("class_index.modal.join_class_code_placeholder"),"is-required":!0},null,8,["label","value","placeholder"])]),_:1},8,["model"])])]),_:1},8,["open"]),ae(" create modal "),o(z,{centered:"","wrap-class-name":"medium-modal",open:e.modal_create_class_open,onCancel:a[11]||(a[11]=s=>e.modal_create_class_open=!1)},{footer:n(()=>[o(_,{loading:e.isCreateLoading,class:"main-color-btn",key:"submit",type:"primary",onClick:e.onCreateClass},{default:n(()=>[g(i(e.t("class_index.buttons.create")),1)]),_:1},8,["loading"])]),default:n(()=>[t("div",Se,[t("div",we,[o(d,{class:"w-100 d-flex align-items-center"},{default:n(()=>[o(u,{span:4},{default:n(()=>[o(l,{onClick:a[8]||(a[8]=s=>e.modal_create_class_open=!1),to:{name:""}},{default:n(()=>a[19]||(a[19]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[19]})]),_:1}),o(u,{class:"main-title",span:20},{default:n(()=>[t("span",null,i(e.t("class_index.modal.create_title")),1)]),_:1})]),_:1})]),o(w,{ref:"createClassFormRef",layout:"vertical",rules:e.rules,model:e.createClassFormState},{default:n(()=>[o(F,null,{default:n(()=>[o(e.Input,{label:e.t("class_index.modal.create_class_name_label"),name:"name",value:e.createClassFormState.name,"onUpdate:value":a[9]||(a[9]=s=>e.createClassFormState.name=s),placeholder:e.t("class_index.modal.create_class_name_placeholder"),"is-required":!0,"max-length":100},null,8,["label","value","placeholder"])]),_:1}),o(F,null,{default:n(()=>[o(e.Input,{label:e.t("class_index.modal.create_class_topic_label"),name:"topic",value:e.createClassFormState.topic,"onUpdate:value":a[10]||(a[10]=s=>e.createClassFormState.topic=s),placeholder:e.t("class_index.modal.create_class_topic_placeholder"),"max-length":100},null,8,["label","value","placeholder"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["open"])],64)}const Ne=ee(le,[["render",ze],["__scopeId","data-v-958f51f8"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/class/index.vue"]]);export{Ne as default};
