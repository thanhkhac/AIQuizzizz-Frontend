import{d as Q,q as G,l as H,u as K,H as B,i as k,j as O,K as Y,s as X,_ as Z,r as d,a as w,o as v,b as t,f as A,c as n,w as o,t as S,g as r,F as P,B as M,C as h}from"./index-GMohsbg5.js";import{A as j}from"./ApiClass-CgFhTsnn.js";import{I as J}from"./Input-Dxl2nhUC.js";const W={FULL_NAME:"FullName",EMAIL:"Email"},$=Q({__name:"student",emits:["updateSidebar"],setup(U,{expose:e,emit:V}){var T;e();const a=G(),g=H(),{t:D}=K(),c=V,f=Object.values(W),b=B(()=>f.map(l=>({label:D(`class_student.select_option.${l}`),value:l}))),m=k(a.params.id||""),y=k({classId:"",name:"",topic:""}),s=O({pageNumber:a.query.pageNumber||1,pageSize:a.query.pageSize||10,keyword:((T=a.query.keyword)==null?void 0:T.toString())||"",fieldName:a.query.fieldName||b.value[0].value,totalCount:0,statusFilter:!1}),N=k([]),I=async()=>{try{m.value||g.push({name:"404"});let l=await j.GetById(m.value.toString());l.data.success||g.push({name:"404"}),y.value=l.data.data}catch(l){console.log("ERROR: GETBYID class: "+l)}},x=async()=>{try{let l=await j.GetAllStudentByLimit(m.value.toString(),s);if(l.data.success){let u=l.data.data;N.value=u.items,s.pageNumber=u.pageNumber,s.pageSize=u.pageSize,s.totalCount=u.totalCount,s.statusFilter&&(s.pageNumber>u.totalPages&&s.totalCount>0?(s.pageNumber=1,g.push({name:"User_Class_Student",params:{id:m.value},query:{pageNumber:1,pageSize:s.pageSize,keyword:s.keyword,fieldName:s.fieldName}})):g.push({name:"User_Class_Student",params:{id:m.value},query:{pageNumber:s.pageNumber,pageSize:s.pageSize,keyword:s.keyword,fieldName:s.fieldName}}),s.statusFilter=!s.statusFilter)}}catch(l){console.log("ERROR: GETALLEXAMBYLIMIT class exam: "+l)}};Y(()=>{var l;Object.keys(a.query).length===0&&(s.pageNumber=a.query.pageNumber||1,s.pageSize=a.query.pageSize||10,s.keyword=((l=a.query.keyword)==null?void 0:l.toString())||"",s.fieldName=a.query.fieldName||b.value[0].value,s.statusFilter=!0,x())});const R=(l,u)=>{s.pageNumber=l,s.pageSize=u,s.statusFilter=!0,x()},C=[{title:"No",key:"no",customRender:l=>l.index+1},{title:"FullName",dataIndex:"fullName",key:"fullName",sorter:(l,u)=>l.fullName.localeCompare(u.fullName)},{title:"Email",dataIndex:"email",key:"email",sorter:(l,u)=>l.email.localeCompare(u.email)},{title:"Position",dataIndex:"position",key:"position"},{key:"action"}],z=[1,3,5,7,30],F=B(()=>z.map(l=>({label:l+(l===1?" day":" days"),value:l}))),p=k(!1),q=O({classId:m.value,code:"e3m3TR41fk+t",expiredTime:F.value[0].value}),E=k(!1),L=()=>{p.value=!0},i=()=>{};X(async()=>{c("updateSidebar","class"),await I(),await x()});const _={route:a,router:g,t:D,emit:c,optionKeys:f,class_position_options:b,classId:m,classData:y,pageParams:s,student_data:N,getClassData:I,getData:x,onPaginationChange:R,columns:C,optionDays:z,code_limit_time:F,modal_invitation_open:p,invitationFormState:q,isInvitaionLoading:E,onOpenInvitationModal:L,onResetInvitation:i,Input:J};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),ee={class:"page-container"},te={class:"title-container"},ae={class:"breadcrumb-container"},ne={class:"title-breadcrumb-item"},oe={class:"title-breadcrumb-item"},se={class:"breadcrumb-item-topic"},le={class:"content"},ie={class:"content-item"},de={class:"content-item-title"},re={class:"content-item-functions"},ue={class:"content-item-navigators"},me={class:"navigator-container"},ce={style:{width:"300px",padding:"0px"}},_e={key:0,class:"student-name-container"},pe=["src"],ve={class:"student-name"},ge={key:1,class:"student-action"},fe={class:"d-flex align-items-center"},be={class:"pagination-container"},ye={class:"mt-4 content-item"},xe={class:"danger-zone mt-3 p-4"},Se={class:"modal-container"},ke={class:"modal-title-container"},we={class:"modal-invitation-body"},Ne={class:"invitation-code-container"},Ie={class:"invitation-code-container"};function Ce(U,e,V,a,g,D){const c=d("RouterLink"),f=d("a-button"),b=d("a-select-option"),m=d("a-select"),y=d("a-menu-item"),s=d("a-menu-divider"),N=d("a-menu"),I=d("a-dropdown"),x=d("a-table"),R=d("a-pagination"),C=d("a-col"),z=d("a-row"),F=d("a-qrcode"),p=d("a-form-item"),q=d("a-form"),E=d("a-divider"),L=d("a-modal");return v(),w(P,null,[t("div",ee,[t("div",te,[t("div",ae,[t("ul",null,[t("li",ne,[n(c,{to:{name:"User_Class"}},{default:o(()=>e[8]||(e[8]=[t("span",null," Class ",-1)])),_:1,__:[8]}),e[9]||(e[9]=t("i",{class:"bx bx-chevron-right"},null,-1))]),t("li",oe,[n(c,{to:{name:""},class:"breadcrumb-item-class"},{default:o(()=>[t("span",null,S(a.classData.name),1),t("span",se,S(a.classData.topic),1)]),_:1})])])])]),t("div",le,[t("div",ie,[t("div",de,[e[11]||(e[11]=t("div",null,[t("span",null,"Student Directory"),t("span",null,"View and manage all your students")],-1)),n(f,{class:"main-color-btn",type:"primary",size:"large",onClick:a.onOpenInvitationModal},{default:o(()=>e[10]||(e[10]=[t("i",{class:"me-2 bx bx-user-plus"},null,-1),r(" Invite student ")])),_:1,__:[10]})]),t("div",re,[t("div",ue,[t("div",me,[n(c,{class:"navigator-item",to:{name:"User_Class_Exam"}},{default:o(()=>e[12]||(e[12]=[r(" Exam ")])),_:1,__:[12]}),n(c,{class:"navigator-item",to:{name:"User_Class_Quiz"}},{default:o(()=>e[13]||(e[13]=[r(" Quiz ")])),_:1,__:[13]}),n(c,{class:"navigator-item navigator-active",to:{name:""}},{default:o(()=>e[14]||(e[14]=[r(" Student ")])),_:1,__:[14]})])]),n(m,{value:a.pageParams.fieldName,"onUpdate:value":e[0]||(e[0]=i=>a.pageParams.fieldName=i),style:{width:"200px"},onChange:a.getData},{default:o(()=>[(v(!0),w(P,null,M(a.class_position_options,i=>(v(),h(b,{value:i.value},{default:o(()=>[r(S(i.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),t("div",ce,[n(a.Input,{onInput:a.getData,modelValue:a.pageParams.keyword,"onUpdate:modelValue":e[1]||(e[1]=i=>a.pageParams.keyword=i),placeholder:a.t("question_sets_index.search_placeholder")},{icon:o(()=>e[15]||(e[15]=[t("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])]),n(x,{columns:a.columns,"data-source":a.student_data,"row-key":"studentId",pagination:!1},{bodyCell:o(({column:i,record:_})=>[i.key==="fullName"?(v(),w("div",_e,[t("img",{class:"student-image",src:_.image,alt:""},null,8,pe),t("div",ve,S(_.fullName),1)])):A("v-if",!0),i.key==="action"?(v(),w("div",ge,[n(I,{trigger:["click"],placement:"bottomRight"},{overlay:o(()=>[n(N,{class:"drop-down-container"},{default:o(()=>[n(y,{key:"1"},{default:o(()=>e[16]||(e[16]=[t("i",{class:"bx bxs-id-card"},null,-1),r(" Assign lecturer ")])),_:1,__:[16]}),n(y,{key:"2"},{default:o(()=>e[17]||(e[17]=[t("i",{class:"bx bx-history"},null,-1),r(" History test ")])),_:1,__:[17]}),n(s,{style:{"background-color":"#ddd"}}),n(y,{key:"3"},{default:o(()=>[t("span",fe,[e[18]||(e[18]=t("i",{class:"bx bx-trash-alt"},null,-1)),r(" "+S(U.$t("question_sets_index.buttons.delete")),1)])]),_:1})]),_:1})]),default:o(()=>[e[19]||(e[19]=t("i",{class:"bx bx-dots-vertical-rounded student-action-dropdown"},null,-1))]),_:1,__:[19]})])):A("v-if",!0)]),_:1},8,["data-source"]),t("div",be,[n(R,{onChange:a.onPaginationChange,current:a.pageParams.pageNumber,"onUpdate:current":e[2]||(e[2]=i=>a.pageParams.pageNumber=i),total:a.pageParams.totalCount,pageSize:a.pageParams.pageSize,"show-total":(i,_)=>`${_[0]}-${_[1]} of ${i} items`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination"},null,8,["current","total","pageSize","show-total"])])]),t("div",ye,[e[23]||(e[23]=t("div",{class:"content-item-title"},[t("div",null,[t("span",{class:"text-danger"},"Danger Zone"),t("span",null,"Irreversible actions for your class")])],-1)),t("div",xe,[e[21]||(e[21]=t("div",{class:"text-danger fs-6 fw-bold"},"Delete class",-1)),e[22]||(e[22]=t("div",{class:"text-secondary"}," Once you delete your class, there is no going back. All your data will be permanently removed ",-1)),n(f,{class:"mt-3",type:"primary",danger:"",size:"large"},{default:o(()=>e[20]||(e[20]=[r(" Delete account ")])),_:1,__:[20]})])])])]),A(" invitation modal "),n(L,{width:"750px",centered:"","wrap-class-name":"medium-modal",open:a.modal_invitation_open,onCancel:e[7]||(e[7]=i=>a.modal_invitation_open=!1)},{footer:o(()=>[n(q,{layout:"vertical",class:"w-100 d-flex align-items-end justify-content-between"},{default:o(()=>[n(p,{label:"Time limit"},{default:o(()=>[n(m,{value:a.invitationFormState.expiredTime,"onUpdate:value":e[6]||(e[6]=i=>a.invitationFormState.expiredTime=i),style:{width:"200px"},onChange:a.getData},{default:o(()=>[(v(!0),w(P,null,M(a.code_limit_time,i=>(v(),h(b,{value:i.value},{default:o(()=>[r(S(i.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),_:1}),n(p,null,{default:o(()=>[n(f,{loading:a.isInvitaionLoading,class:"main-color-btn",key:"submit",type:"primary",onClick:a.onResetInvitation},{default:o(()=>e[29]||(e[29]=[r(" Reset code ")])),_:1,__:[29]},8,["loading"])]),_:1})]),_:1})]),default:o(()=>[t("div",Se,[t("div",ke,[n(z,{class:"w-100 d-flex align-items-center"},{default:o(()=>[n(C,{span:2},{default:o(()=>[n(c,{onClick:e[3]||(e[3]=i=>a.modal_invitation_open=!1),to:{name:""}},{default:o(()=>e[24]||(e[24]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[24]})]),_:1}),n(C,{class:"main-title",span:22},{default:o(()=>e[25]||(e[25]=[t("span",null,"Invite members",-1),r(),t("br",null,null,-1),t("span",null,"Share link, QR code or invitation code to invite them.",-1)])),_:1,__:[25]})]),_:1})]),t("div",we,[n(F,{value:a.invitationFormState.code,class:"invitation-body-qrcode"},null,8,["value"]),n(q,{layout:"vertical",class:"invitation-body-link"},{default:o(()=>[n(p,{label:"Class code"},{default:o(()=>[t("div",Ne,[n(a.Input,{modelValue:a.invitationFormState.code,"onUpdate:modelValue":e[4]||(e[4]=i=>a.invitationFormState.code=i),"is-required":!0,"max-length":100,readonly:!0},null,8,["modelValue"]),e[26]||(e[26]=t("i",{class:"bx bx-copy"},null,-1))])]),_:1}),n(p,{label:"Invitation link"},{default:o(()=>[t("div",Ie,[n(a.Input,{modelValue:a.invitationFormState.code,"onUpdate:modelValue":e[5]||(e[5]=i=>a.invitationFormState.code=i),"is-required":!0,"max-length":100,readonly:!0},null,8,["modelValue"]),e[27]||(e[27]=t("i",{class:"bx bx-copy"},null,-1))])]),_:1})]),_:1})]),n(E,null,{default:o(()=>e[28]||(e[28]=[r("OR")])),_:1,__:[28]})])]),_:1},8,["open"])],64)}const De=Z($,[["render",Ce],["__scopeId","data-v-6a35c450"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/class/student.vue"]]);export{De as default};
