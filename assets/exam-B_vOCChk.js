import{d as F,q as M,l as R,u as U,i as k,H as $,j,K as A,s as B,G as O,_ as V,r as c,a as x,o as b,b as e,c as r,w as u,g as d,t as o,F as P,B as E,C as G}from"./index-B3og19O_.js";import{A as D}from"./ApiClass-Dtx73zoh.js";import{I as Y}from"./Input-BJCj3x0C.js";const T={ALL:"All",UPCOMING:"Upcoming",ACTIVE:"Active",COMPLETED:"Completed"},Q=F({__name:"exam",emits:["updateSidebar"],setup(m,{expose:t,emit:I}){var L;t();const a=M(),v=R(),{t:z}=U(),_=I,p=k(a.params.id||""),C=k({classId:"",name:"",topic:""}),N=Object.values(T),y=$(()=>N.map(s=>({label:z(`class_exam.select_option.${s}`),value:s!==T.ALL?s:""}))),n=j({pageNumber:a.query.pageNumber||1,pageSize:a.query.pageSize||10,testName:((L=a.query.testName)==null?void 0:L.toString())||"",status:a.query.status||y.value[0].value,totalCount:0,statusFilter:!1}),g=k([]),S=async()=>{try{p.value||v.push({name:"404"});let s=await D.GetById(p.value.toString());s.data.success||v.push({name:"404"}),C.value=s.data.data}catch(s){console.log("ERROR: GETBYID class: "+s)}},f=async()=>{try{let s=await D.GetAllExamByLimit(p.value.toString(),n);if(s.data.success){let l=s.data.data;g.value=l.items,n.pageNumber=l.pageNumber,n.pageSize=l.pageSize,n.totalCount=l.totalCount,n.statusFilter&&(n.pageNumber>l.totalPages&&n.totalCount>0?(n.pageNumber=1,v.push({name:"User_Class_Exam",params:{id:p.value},query:{pageNumber:1,pageSize:n.pageSize,testName:n.testName,status:n.status}})):v.push({name:"User_Class_Exam",params:{id:p.value},query:{pageNumber:n.pageNumber,pageSize:n.pageSize,testName:n.testName,status:n.status}}),n.statusFilter=!n.statusFilter)}}catch(s){console.log("ERROR: GETALLEXAMBYLIMIT class exam: "+s)}};A(()=>{var s;Object.keys(a.query).length===0&&(n.pageNumber=a.query.pageNumber||1,n.pageSize=a.query.pageSize||10,n.testName=((s=a.query.testName)==null?void 0:s.toString())||"",n.status=a.query.status||y.value[0].value,n.statusFilter=!0,f())});const w=(s,l)=>{n.pageNumber=s,n.pageSize=l,n.statusFilter=!0,f()},q=s=>{if(s<24)return`${s} hour${s!==1?"s":""} ago`;if(s<24*7){const l=Math.floor(s/24);return`${l} day${l!==1?"s":""} ago`}else if(s<24*30){const l=Math.floor(s/168);return`${l} week${l!==1?"s":""} ago`}else if(s<24*365){const l=Math.floor(s/720);return`${l} month${l!==1?"s":""} ago`}else{const l=Math.floor(s/8760);return`${l} year${l!==1?"s":""} ago`}},i=s=>{switch(s.toLowerCase()){case"completed":return"#3b82f6";case"active":return"#22C55E";case"upcoming":return"#f59e0b"}};B(async()=>{_("updateSidebar","class"),await S(),await f()});const h={route:a,router:v,t:z,emit:_,classId:p,classData:C,optionKeys:N,exam_status_options:y,pageParams:n,exam_data:g,getClassData:S,getData:f,onPaginationChange:w,getFormattedRelativeTime:q,getTagColor:i,get dayjs(){return O},Input:Y};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),H={class:"page-container"},K={class:"title-container"},X={class:"breadcrumb-container"},J={class:"title-breadcrumb-item"},W={class:"title-breadcrumb-item"},Z={class:"breadcrumb-item-topic"},ee={class:"content"},te={class:"content-item"},ae={class:"content-item-title"},se={class:"content-item-functions"},ne={class:"content-item-navigators"},oe={class:"navigator-container"},ie={style:{width:"300px",padding:"0px"}},le={class:"pagination-container"},re={key:0,class:"exam-item-container"},ue={class:"exam-item"},me={class:"exam-item-title"},de={class:"exam-item-info exam-item-date"},ce={class:"exam-item-info exam-info-detail"},_e={class:"exam-item-questions"},pe={class:"exam-item-time"},ge={class:"exam-item-assigned completion"},be={class:"exam-item-assigned"},ve={class:"exam-item-actions"},fe={class:"d-flex align-items-center"},xe={key:1,class:"w-100 d-flex justify-content-center"};function ye(m,t,I,a,v,z){const _=c("RouterLink"),p=c("a-button"),C=c("a-select-option"),N=c("a-select"),y=c("a-pagination"),n=c("a-tag"),g=c("a-menu-item"),S=c("a-menu-divider"),f=c("a-menu"),w=c("a-dropdown"),q=c("a-empty");return b(),x("div",H,[e("div",K,[e("div",X,[e("ul",null,[e("li",J,[r(_,{to:{name:"User_Class"}},{default:u(()=>[e("span",null,o(m.$t("class_index.title")),1),t[3]||(t[3]=d()),t[4]||(t[4]=e("br",null,null,-1))]),_:1,__:[3,4]}),t[5]||(t[5]=e("i",{class:"bx bx-chevron-right"},null,-1))]),e("li",W,[r(_,{to:{name:""},class:"breadcrumb-item-class"},{default:u(()=>[e("span",null,o(a.classData.name),1),e("span",Z,o(a.classData.topic),1)]),_:1})])])])]),e("div",ee,[e("div",te,[e("div",ae,[e("div",null,[e("span",null,o(m.$t("class_index.title")),1),e("span",null,o(m.$t("class_exam.sub_title")),1)]),r(p,{class:"main-color-btn",type:"primary",size:"large"},{default:u(()=>[t[6]||(t[6]=e("i",{class:"me-2 bx bx-list-plus"},null,-1)),d(" "+o(m.$t("class_exam.buttons.assign_test")),1)]),_:1,__:[6]})]),e("div",se,[e("div",ne,[e("div",oe,[r(_,{class:"navigator-item navigator-active",to:{name:""}},{default:u(()=>[d(o(m.$t("class_index.navigators.exam")),1)]),_:1}),r(_,{class:"navigator-item",to:{name:"User_Class_Quiz"}},{default:u(()=>[d(o(m.$t("class_index.navigators.quiz")),1)]),_:1}),r(_,{class:"navigator-item",to:{name:"User_Class_Student"}},{default:u(()=>[d(o(m.$t("class_index.navigators.member")),1)]),_:1})])]),r(N,{value:a.pageParams.status,"onUpdate:value":t[0]||(t[0]=i=>a.pageParams.status=i),style:{width:"200px"},onChange:a.getData},{default:u(()=>[(b(!0),x(P,null,E(a.exam_status_options,i=>(b(),G(C,{value:i.value},{default:u(()=>[d(o(i.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),e("div",ie,[r(a.Input,{onInput:a.getData,modelValue:a.pageParams.testName,"onUpdate:modelValue":t[1]||(t[1]=i=>a.pageParams.testName=i),placeholder:a.t("class_exam.other.search_placeholder")},{icon:u(()=>t[7]||(t[7]=[e("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])]),e("div",le,[r(y,{onChange:a.onPaginationChange,current:a.pageParams.pageNumber,"onUpdate:current":t[2]||(t[2]=i=>a.pageParams.pageNumber=i),total:a.pageParams.totalCount,pageSize:a.pageParams.pageSize,"show-total":(i,h)=>`${h[0]}-${h[1]} of ${i} ${a.t("class_exam.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:a.t("class_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])]),a.exam_data.length>0?(b(),x("div",re,[(b(!0),x(P,null,E(a.exam_data,i=>(b(),x("div",ue,[t[16]||(t[16]=e("i",{class:"bx bx-book-open exam-item-icon"},null,-1)),e("div",null,[e("div",me,[d(o(i.name)+" ",1),r(n,{color:a.getTagColor(i.status)},{default:u(()=>[d(o(i.status),1)]),_:2},1032,["color"])]),e("div",de,[e("div",null,[t[8]||(t[8]=e("i",{class:"bx bx-calendar"},null,-1)),d(" "+o(a.dayjs(i.date).format("DD/MM/YYYY HH:mm A")),1)])]),e("div",ce,[e("div",_e,[t[9]||(t[9]=e("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),d(" "+o(i.numberOfQuestions)+" "+o(m.$t("dashboards.list_items.quiz.questions")),1)]),e("div",pe,[t[10]||(t[10]=e("i",{class:"bx bx-time-five"},null,-1)),d(" "+o(i.timeLimit)+" "+o(m.$t("class_exam.other.min")),1)]),e("span",ge,o(i.numberOfCompletion)+" "+o(m.$t("class_exam.other.completions")),1),e("span",be,o(m.$t("class_exam.other.assigned"))+" "+o(a.getFormattedRelativeTime(i.relativeTime)),1)])]),e("div",ve,[r(w,{trigger:["click"]},{overlay:u(()=>[r(f,{class:"drop-down-container"},{default:u(()=>[r(g,{key:"0"},{default:u(()=>[t[11]||(t[11]=e("i",{class:"bx bx-info-circle"},null,-1)),d(" "+o(m.$t("question_sets_index.buttons.detail")),1)]),_:1,__:[11]}),r(g,{key:"1"},{default:u(()=>[t[12]||(t[12]=e("i",{class:"bx bx-edit"},null,-1)),d(" "+o(m.$t("question_sets_index.buttons.edit")),1)]),_:1,__:[12]}),r(g,{key:"2"},{default:u(()=>[t[13]||(t[13]=e("i",{class:"bx bx-copy"},null,-1)),d(" "+o(m.$t("question_sets_index.buttons.dublicate")),1)]),_:1,__:[13]}),r(S,{style:{"background-color":"#ddd"}}),r(g,{key:"3"},{default:u(()=>[e("span",fe,[t[14]||(t[14]=e("i",{class:"bx bx-trash-alt"},null,-1)),d(" "+o(m.$t("question_sets_index.buttons.delete")),1)])]),_:1})]),_:1})]),default:u(()=>[t[15]||(t[15]=e("i",{class:"bx bx-dots-vertical-rounded ant-dropdown-link"},null,-1))]),_:1,__:[15]})])]))),256))])):(b(),x("div",xe,[r(q,null,{description:u(()=>[e("span",null,o(m.$t("class_index.other.no_data_matches")),1)]),_:1})]))])])])}const Se=V(Q,[["render",ye],["__scopeId","data-v-1afc52c6"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/class/exam.vue"]]);export{Se as default};
