var st=Object.defineProperty;var at=(m,n,T)=>n in m?st(m,n,{enumerable:!0,configurable:!0,writable:!0,value:T}):m[n]=T;var ee=(m,n,T)=>at(m,typeof n!="symbol"?n+"":n,T);import{G as ve,d as lt,u as it,q as rt,l as ct,g as ut,i as _,B as Le,j as dt,s as mt,P as _t,k as te,R as vt,Q as gt,_ as ht,r as A,a as i,o as l,b as t,c as r,E as ne,w as g,f,t as a,F as x,p,e as S,D as O}from"./index-BCUxjaAq.js";import{A as oe}from"./ApiQuestionSet-KXdPi0X5.js";import{H as ft,Q as pt}from"./questionTextFormat-sPP3yj2l.js";import{Q as M}from"./questionTypes-CS3lcRlq.js";import{T as bt}from"./TextArea-B3IciHWP.js";import{l as wt}from"./vue-draggable-plus-DDQDMlok.js";import{V as yt}from"./Validator-CWeiTIFe.js";import{D as Qt}from"./index-uZINfWG1.js";/* empty css                                                                 */const Re=[{id:"q1",quote:"Keep pushing. You're almost there!"},{id:"q2",quote:"Stay focused. You've got this!"},{id:"q3",quote:"One step at a time. Keep going!"},{id:"q4",quote:"You're doing great. Don't stop now!"},{id:"q5",quote:"Every effort counts. Keep it up!"},{id:"q6",quote:"Strong mind. Strong progress."},{id:"q7",quote:"Momentum is yours. Own it!"},{id:"q8",quote:"Eyes forward. Energy up!"},{id:"q9",quote:"You're closer than you think."},{id:"q10",quote:"Rise up. Power through!"}],Ct="/assets/trophy-BqY0IuVX.png",ge={GET_ALL_BY_QUESTION_ID:"Comment/Question/{questionId}",REPLY:"Comment/{commentId}/Reply",DELETE:"Comment/{commentId}"};class It{constructor(){ee(this,"GetAllByQuestionId",async n=>{const T=ge.GET_ALL_BY_QUESTION_ID.replace("{questionId}",n.questionId);return await ve.get(T,{params:{pageNumber:n.pageNumber,pageSize:n.pageSize}})});ee(this,"Create",async n=>{const T=ge.GET_ALL_BY_QUESTION_ID.replace("{questionId}",n.questionId);return await ve.post(T,null,{params:{content:n.content}})});ee(this,"Reply",async n=>{const T=ge.REPLY.replace("{commentId}",n.commentId);return await ve.post(T,null,{params:{content:n.content}})});ee(this,"Delete",async n=>{const T=ge.DELETE.replace("{commentId}",n);return await ve.delete(T)})}}const se=new It,St=lt({__name:"learn",setup(m,{expose:n}){n();const T=new URL("/assets/confetti-bjvcnoca.lottie",import.meta.url).href,{t:e}=it(),he=rt(),G=ct(),j=ut(),Q=_({title:"",description:"",completedQuestionCount:0,totalQuestionCount:0,questions:[]}),D=_(he.params.id),N=_(!1),U=async()=>{if(N.value=!0,!yt.isValidGuid(D.value.toString())){G.push({name:"404"});return}try{let s=await oe.GetDetailById(D.value.toString()),u=await oe.LearnQuestions(D.value.toString(),7);if(!s.data.success||!u.data.success){G.push({name:"404"});return}if(Q.value=u.data.data,Q.value.completedQuestionCount===Q.value.totalQuestionCount){qe();return}Q.value.title=s.data.data.name,Q.value.description=s.data.data.description,E.value=[...Q.value.questions],v.value=E.value[0],E.value.shift()}catch(s){Object.keys(s.response.data.errors).includes(_t.PLAN_REQUIRE_PLAN)&&G.push({name:"not-allowed"})}finally{N.value=!1}},fe=_(Q.value.completedQuestionCount),z=_([]),y=_(new Set),E=_([]),L=_(!1),v=_({}),R=_(""),V=_(!1),o=_(!1),w=_([]),P=Le(()=>{var s;return(s=v.value.questionData.multipleChoice)==null?void 0:s.some(u=>u.text.length>=100)}),C=_([]),b=_([]),k=_([]),Y=_(""),q=_({result:!1,resultText:e("learn_QS.result.wrong")}),ae=Le(()=>Math.floor(Q.value.completedQuestionCount/Q.value.totalQuestionCount*100)),B=()=>{var c;let s=(c=v.value.questionData.multipleChoice)==null?void 0:c.filter(d=>d.isAnswer).map(d=>d.id||[]).sort(),u=w.value.sort();return w.value.length!==(s==null?void 0:s.length)?!1:u.every((d,h)=>d===s[h])},He=s=>{var h;const u=Q.value.questions.findIndex(I=>I.id===v.value.id);let c=(h=Q.value.questions[u].questionData.multipleChoice)==null?void 0:h.filter(I=>I.isAnswer).map(I=>I.id||[]),d=w.value;return c!=null&&c.includes(s.id)?!0:!(d!=null&&d.includes(s.id)&&!s.isAnswer)},pe=()=>{var c;let s=((c=v.value.questionData.ordering)==null?void 0:c.map(d=>d.correctOrder).sort())||[];return k.value.map(d=>d.correctOrder).every((d,h)=>d===s[h])},be=()=>{let s=v.value.questionData.matching.matches,u=C.value.map(h=>h.id),c=b.value.map(h=>h.id);return u.map((h,I)=>({leftId:h,rightId:c[I]})).every(h=>s.some(I=>I.leftId===h.leftId&&I.rightId===h.rightId))},Ne=s=>{var I,F;const u=v.value.questionData.matching;if(!u)return!1;let c=u.leftItems.some(H=>H.id===s),d=u.matches.find(H=>c?H.leftId===s:H.rightId===s);const h=c?C.value.findIndex(H=>H.id===s):b.value.findIndex(H=>H.id===s);return h===-1||!d?!1:c?((I=b.value[h])==null?void 0:I.id)===d.rightId:((F=C.value[h])==null?void 0:F.id)===d.leftId},we=s=>s.trim().toLowerCase().normalize("NFKC").replace(/[\u2019\u2018\u201B\u0060]/g,"'").replace(/\s+/g," "),ye=()=>we(Y.value)===we(v.value.questionData.shortText),Ue=_(null),Qe=_(!1),K=()=>{Qe.value=!Qe.value},Ce=_(!1),ze=j.getUserInfo(),X=_([]),le=_(""),J=_(null),ie=_(!1),W=dt({pageNumber:1,pageSize:1,questionId:""}),Z=_(!1),re=async()=>{Z.value=!0;const s=await se.GetAllByQuestionId(W);s.data.success&&(X.value=s.data.data.items.filter(u=>!u.parentId)),Z.value=!1},Ve=async()=>{let s;if(ie.value&&J.value?s=await se.Reply({commentId:J.value.id,content:le.value}):s=await se.Create({questionId:v.value.id,content:le.value}),s.data.success){te.success(e("message.added_successfully")),await re();return}te.error(e("message.added_failed"))},Pe=async s=>{},Ye=async s=>{if((await se.Delete(s)).data.success){te.success(e("message.deleted_successfully")),await re();return}te.error(e("message.deleted_failed"))},Be=s=>{ie.value=!0,J.value=s},Fe=()=>{le.value="",ie.value=!1,J.value=null},ce=_([]),Ge=s=>{ce.value[s]=!ce.value[s],$(`#reply-items-${s}`).slideToggle()},je=async()=>{W.pageNumber+=1,Z.value=!0;const s=await se.GetAllByQuestionId(W);if(s.data.success){const u=s.data.data.items.filter(c=>!c.parentId);X.value=[...X.value,...u]}Z.value=!1},Ke=async()=>{Ce.value=!0,W.questionId=v.value.id,await re()},Xe=()=>{Ce.value=!1},Ie=()=>{oe.LearnHistory(D.value.toString(),[{questionId:v.value.id,isCorrect:!0}])},Je=()=>{switch(K(),V.value=!0,v.value.type){case M.MULTIPLE_CHOICE:{q.value={result:B(),resultText:B()?e("learn_QS.result.correct"):e("learn_QS.result.wrong")};break}case M.ORDERING:{q.value={result:pe(),resultText:pe()?e("learn_QS.result.correct"):e("learn_QS.result.wrong")};break}case M.MATCHING:{q.value={result:be(),resultText:be()?e("learn_QS.result.correct"):e("learn_QS.result.wrong")};break}case M.SHORT_TEXT:{q.value={result:ye(),resultText:ye()?e("learn_QS.result.correct"):e("learn_QS.result.wrong")};break}}q.value.result===!1&&!L.value?y.value.add(v.value):q.value.result&&L.value?(y.value.delete(v.value),z.value.push(v.value),Q.value.completedQuestionCount+=1,Ie()):q.value.result===!1?y.value.add(v.value):(z.value.push(v.value),Q.value.completedQuestionCount+=1,Ie()),me()},We=s=>{var u;switch(K(),V.value=!0,o.value=!0,q.value={result:!1,resultText:e("learn_QS.result.skipped")},y.value.add(v.value),v.value.type){case M.MULTIPLE_CHOICE:{w.value=(u=v.value.questionData.multipleChoice)==null?void 0:u.filter(c=>c.isAnswer).map(c=>c.id);break}case M.MATCHING:{const c=v.value.questionData.matching,d=(c==null?void 0:c.matches)??[],h=(c==null?void 0:c.leftItems)??[],I=(c==null?void 0:c.rightItems)??[],F=d.map(Te=>h.find(ke=>ke.id==Te.leftId)),H=d.map(Te=>I.find(ke=>ke.id==Te.rightId));C.value=F,b.value=H;break}case M.ORDERING:{k.value=k.value.sort((c,d)=>c.correctOrder-d.correctOrder);break}case M.SHORT_TEXT:{Y.value=v.value.questionData.shortText;break}}me()},ue=()=>{var s;switch(v.value.type){case M.MULTIPLE_CHOICE:{R.value=e("learn_QS.instructions.multiple_choice",{number:(s=v.value.questionData.multipleChoice)==null?void 0:s.filter(u=>u.isAnswer).length}),w.value=[];break}case M.ORDERING:{R.value=e("learn_QS.instructions.matching"),k.value=v.value.questionData.ordering;break}case M.MATCHING:{R.value=e("learn_QS.instructions.ordering"),C.value=v.value.questionData.matching.leftItems,b.value=v.value.questionData.matching.rightItems;break}case M.SHORT_TEXT:{R.value=e("learn_QS.instructions.short_text"),Y.value="";break}}},Ze=()=>{_e(),me(),!(E.value.length<=0)&&(v.value=E.value.shift(),V.value=!1,o.value=!1,ue(),K())},de=_(!1),Ae=_(""),Me=()=>{Ae.value=e(`learn_QS.final_modal.quotes.${Re[Math.floor(Math.random()*Re.length)].id}`),setTimeout(()=>{de.value=!0},1e3)},$e=()=>{de.value=!1},me=async()=>{if(!(E.value.length>0)){if(y.value.size>0&&!L.value)L.value=!0,E.value=Array.from(y.value);else if(y.value.size===0&&!L.value||y.value.size>0&&L.value){const s=Q.value.questions.map(u=>({questionId:u.id,isCorrect:z.value.some(c=>c.id===u.id)}));await oe.LearnHistory(D.value.toString(),s),Me();return}}},et=(s,u)=>{$(u).toggleClass("bx-chevron-down bx-chevron-up");const d=$(`#question-item-answer-${s}`);d&&$(d).slideToggle()},tt=async()=>{await U(),L.value=!1,o.value=!1,V.value=!1,R.value="",de.value=!1,y.value=new Set,z.value=[],K(),ue()},Se=_(!1),qe=()=>{Se.value=!0,Oe()},Ee=_(),xe=_(!1),Oe=()=>{var s,u;xe.value=!0,(u=(s=Ee.value)==null?void 0:s.getDotLottieInstance())==null||u.play(),setTimeout(()=>{xe.value=!1},5e3)},nt=async()=>{(await oe.resetLearnHistory(D.value.toString())).data.success&&(te.success(e("learn_QS.msg.learn_mode_reset")),Se.value=!1,await U())},ot={scroll:!0,scrollSensitivity:100,scrollSpeed:100,scrollTarget:document.scrollingElement};function _e(){vt(()=>{requestAnimationFrame(()=>{const s=document.querySelectorAll(".matching-option-container.left .answer-option-matching"),u=document.querySelectorAll(".matching-option-container.right .answer-option-matching"),c=Math.min(s.length,u.length);for(let d=0;d<c;d++){const h=s[d],I=u[d];if(!h||!I)continue;h.style.height="auto",I.style.height="auto";const F=Math.max(h.offsetHeight,I.offsetHeight);h.style.height=`${F}px`,I.style.height=`${F}px`}})})}mt(async()=>{await U(),ue(),_e(),window.addEventListener("resize",_e),ce.value=X.value.map(()=>!1)});const De={animationPath:T,t:e,route:he,router:G,authStore:j,quiz:Q,questionSetId:D,loading:N,getQuizData:U,totalCompleted:fe,completed:z,incorrect:y,currentSession:E,isCurrentSessionReLearn:L,currentQuestion:v,currentQuestionInstruction:R,currentQuestionIsSubmitted:V,currentQuestionIsSkipped:o,userAnswerMultipleChoice:w,isOptionExceed:P,userAnswerMatchingLeft:C,userAnswerMatchingRight:b,userAnswerOrdering:k,userAnswerShortText:Y,currentQuestionResult:q,completionPercentage:ae,checkMultipleChoice:B,checkMultipleChoiceAnswerCorrect:He,checkOrdering:pe,checkMatching:be,checkMatchingAnswerCorrect:Ne,cleanShortTextAnswer:we,checkShortText:ye,explainModal:Ue,explainModalOpen:Qe,toggleExplainModal:K,commentModalOpen:Ce,user_info:ze,currentQuestionComments:X,commentValue:le,chosenComment:J,isReplying:ie,commentPageParams:W,commentLoading:Z,getCommentData:re,onAddComment:Ve,onEditComment:Pe,onDeleteComment:Ye,onTriggerReply:Be,onCancelReplying:Fe,repliesOpen:ce,onToggleReplyContainer:Ge,onLoadMoreComment:je,onOpenCommentModal:Ke,onCloseCommentModal:Xe,sendCorrectQuestionHistory:Ie,onSubmitAnswer:Je,onSkipQuestion:We,resetUserAnswer:ue,onNextQuestion:Ze,finalModalOpen:de,finalModalQuote:Ae,openFinalModal:Me,closeFinalModal:$e,triggerFinalModal:me,toggleDisplayAnswer:et,onContinuesLearn:tt,completeModalOpen:Se,openCompleteModal:qe,animationRef:Ee,isAnimationDisplaying:xe,triggerAnimation:Oe,onResetLearnHistory:nt,dragOptions:ot,syncMatchingHeights:_e,get QUESTION_FORMAT(){return pt},get QUESTION_TYPE(){return M},TextArea:bt,get VueDraggable(){return wt},get HolderOutlined(){return ft},get dayjs(){return gt},get DotLottieVue(){return Qt},get trophy_png(){return Ct}};return Object.defineProperty(De,"__isScriptSetup",{enumerable:!1,value:!0}),De}}),xt={class:"page-container"},Tt={class:"title-container"},kt={key:1,class:"progress-bar-container"},At={class:"progress-info"},Mt={class:"progress-info-number"},qt={class:"progress-info-percentage"},Et={class:"content"},Ot={class:"content-item"},Dt={class:"section question-section"},Lt=["innerHTML"],Rt={class:"section answer-section"},Ht={key:0,class:"relearn-ins"},Nt={class:"d-flex align-items-center"},Ut={class:"answer-section-ins"},zt={class:"answer-option-content"},Vt={key:0,class:"bx bx-check answer-icon"},Pt={key:1,class:"bx bx-x answer-icon"},Yt={key:2,class:"answer-option-container matching"},Bt={class:"matching-option-container left"},Ft={class:"d-flex align-items-center"},Gt={class:"answer-option-order"},jt={class:"answer-option-content"},Kt={class:"matching-option-container right"},Xt={class:"d-flex align-items-center"},Jt={class:"answer-option-content"},Wt={class:"answer-option-order"},Zt={key:3,class:"answer-option-container ordering"},$t={class:"answer-option-order"},en={class:"answer-option-content"},tn={key:4,class:"answer-option-container"},nn={class:"w-100 d-flex align-items-center"},on={key:0,class:"bx bx-check answer-icon"},sn={key:1,class:"bx bx-x answer-icon"},an={key:0,class:"short-text-correct-answer"},ln={class:"learn-question-footer"},rn={class:"d-flex"},cn=["innerHTML"],un={class:"comment-section"},dn={class:"comment-container"},mn={class:"comment-main-content"},_n={class:"w-100 d-flex flex-column"},vn={class:"comment-content-info"},gn={key:0,class:"comment-actions"},hn=["onClick"],fn={class:"comment-content"},pn={class:"comment-reply"},bn=["onClick"],wn=["onClick"],yn=["id"],Qn={class:"comment-item"},Cn={class:"comment-main-content"},In={class:"w-100 d-flex flex-column"},Sn={class:"comment-content-info"},xn={key:0,class:"comment-actions"},Tn=["onClick"],kn={class:"comment-content"},An={key:1,class:"w-100 h-100 d-flex justify-content-center align-items-center"},Mn={key:0},qn={key:1},En={class:"comment-form-footer"},On={class:"title-container"},Dn={class:"content-item modal-final-container"},Ln={class:"final-modal-quote"},Rn={class:"progress-bar-container final"},Hn={class:"progress-info"},Nn={class:"progress-info-percentage"},Un={class:"progress-info"},zn={class:"progress-info-percentage"},Vn={class:"progress-info-percentage"},Pn={class:"content-item modal-final-container"},Yn={class:"preview-question-title"},Bn={class:"preview-question-container"},Fn={class:"preview-question-item"},Gn={class:"question-item-content"},jn=["innerHTML"],Kn={key:1,class:"question-text"},Xn=["id"],Jn={key:0,class:"multiple-choice-answer"},Wn={key:0,class:"text-success"},Zn={class:"pair-answer"},$n={class:"pair-answer-item"},eo={class:"pair-answer-item"},to={key:2,class:"ordering-answer"},no={class:"ordering-answer-item"},oo={class:"ordering-answer-item"},so={class:"ordering-answer-item"},ao={class:"short-text-answer"},lo={class:"question-item-toogle-btn"},io=["onClick"],ro={class:"content-item final-modal-footer"},co={class:"modal-complete-container"},uo={class:"content-item modal-complete"},mo=["src"],_o={class:"modal-complete-content-container"},vo={class:"modal-complete-content"},go={class:"modal-complete-content sub-content"},ho={class:"modal-complete-buttons-container"};function fo(m,n,T,e,he,G){const j=A("RouterLink"),Q=A("a-col"),D=A("a-row"),N=A("a-skeleton"),U=A("a-progress"),fe=A("a-checkbox"),z=A("a-checkbox-group"),y=A("a-button"),E=A("a-popconfirm"),L=A("a-empty"),v=A("a-form"),R=A("a-drawer"),V=A("a-divider");return l(),i(x,null,[t("div",xt,[t("div",Tt,[r(D,{class:"w-100 d-flex align-items-center"},{default:g(()=>[r(Q,{span:1},{default:g(()=>[r(j,{to:{name:"User_Library"}},{default:g(()=>n[8]||(n[8]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[8]})]),_:1}),r(Q,{class:"main-title",span:23},{default:g(()=>[t("span",null,a(e.quiz.title),1),n[9]||(n[9]=f()),n[10]||(n[10]=t("br",null,null,-1)),t("span",null,a(e.quiz.description),1)]),_:1,__:[9,10]})]),_:1})]),e.loading?(l(),ne(N,{key:0,loading:e.loading},null,8,["loading"])):(l(),i("div",kt,[t("div",At,[t("div",Mt,a(m.$t("learn_QS.other.progress_count",{current:e.quiz.completedQuestionCount+1,total:e.quiz.totalQuestionCount})),1),t("div",qt,[t("span",null,a(e.completionPercentage),1),f(" % "+a(m.$t("learn_QS.other.completed")),1)])]),r(U,{"show-info":!1,"stroke-color":"#7C3AED",status:"active",percent:e.completionPercentage},null,8,["percent"])])),t("div",Et,[t("div",Ot,[e.loading?(l(),i(x,{key:0},[r(N,{loading:e.loading},null,8,["loading"]),r(N,{loading:e.loading},null,8,["loading"]),r(N,{loading:e.loading},null,8,["loading"])],64)):(l(),i(x,{key:1},[t("div",Dt,[t("div",{class:p(["learn-question",e.currentQuestion.textFormat===e.QUESTION_FORMAT.HTML?"":"d-none"]),innerHTML:e.currentQuestion.questionText},null,10,Lt),t("div",{class:p(["learn-question",e.currentQuestion.textFormat===e.QUESTION_FORMAT.HTML?"d-none":""])},a(e.currentQuestion.questionText),3),t("div",Rt,[e.isCurrentSessionReLearn?(l(),i("div",Ht,a(m.$t("learn_QS.instructions.re_learn_ins")),1)):S("v-if",!0),t("div",Nt,[t("div",Ut,a(e.currentQuestionInstruction),1),t("div",{class:p(["ms-3 learn-question-result",e.currentQuestionIsSubmitted?"":"d-none",e.currentQuestionIsSubmitted?e.currentQuestionResult.result?"result-correct":"result-incorrect":"",e.currentQuestionIsSkipped?"result-skipped":""])},a(e.currentQuestionResult.resultText),3)]),e.currentQuestion.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(l(),ne(z,{key:1,value:e.userAnswerMultipleChoice,"onUpdate:value":n[0]||(n[0]=o=>e.userAnswerMultipleChoice=o),class:p(["answer-option-container multiplechoice",e.isOptionExceed?"column":""])},{default:g(()=>[(l(!0),i(x,null,O(e.currentQuestion.questionData.multipleChoice,o=>(l(),ne(fe,{value:o.id,"onUpdate:value":w=>o.id=w,disabled:e.currentQuestionIsSubmitted,class:p(["answer-option answer-option-multiplechoice",e.currentQuestionIsSubmitted&&e.checkMultipleChoiceAnswerCorrect(o)&&o.isAnswer?"answer-correct":"",e.currentQuestionIsSubmitted&&!e.checkMultipleChoiceAnswerCorrect(o)&&!o.isAnswer?"answer-incorrect":""])},{default:g(()=>[t("div",zt,a(o.text),1),e.currentQuestionIsSubmitted&&e.checkMultipleChoiceAnswerCorrect(o)&&o.isAnswer?(l(),i("i",Vt)):S("v-if",!0),e.currentQuestionIsSubmitted&&!e.checkMultipleChoiceAnswerCorrect(o)&&!o.isAnswer?(l(),i("i",Pt)):S("v-if",!0)]),_:2},1032,["value","onUpdate:value","disabled","class"]))),256))]),_:1},8,["value","class"])):S("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.MATCHING?(l(),i("div",Yt,[t("div",Bt,[r(e.VueDraggable,{disabled:e.currentQuestionIsSubmitted,modelValue:e.userAnswerMatchingLeft,"onUpdate:modelValue":n[1]||(n[1]=o=>e.userAnswerMatchingLeft=o),options:e.dragOptions,onEnd:e.syncMatchingHeights},{default:g(()=>[(l(!0),i(x,null,O(e.userAnswerMatchingLeft,(o,w)=>(l(),i("div",Ft,[t("div",{class:p(["answer-option answer-option-matching",e.currentQuestionIsSubmitted?e.checkMatchingAnswerCorrect(o.id)?"answer-correct":"answer-incorrect":""])},[t("div",Gt,[r(e.HolderOutlined)]),t("div",jt,a(o.text),1)],2),t("i",{class:p(["bx bxs-label matching-icon",e.currentQuestionIsSubmitted?e.checkMatchingAnswerCorrect(o.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2)]))),256))]),_:1},8,["disabled","modelValue"])]),t("div",Kt,[r(e.VueDraggable,{disabled:e.currentQuestionIsSubmitted,modelValue:e.userAnswerMatchingRight,"onUpdate:modelValue":n[2]||(n[2]=o=>e.userAnswerMatchingRight=o),options:e.dragOptions,onEnd:e.syncMatchingHeights},{default:g(()=>[(l(!0),i(x,null,O(e.userAnswerMatchingRight,(o,w)=>(l(),i("div",Xt,[t("i",{class:p(["bx bxs-label matching-icon",e.currentQuestionIsSubmitted?e.checkMatchingAnswerCorrect(o.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2),t("div",{class:p(["answer-option answer-option-matching",e.currentQuestionIsSubmitted?e.checkMatchingAnswerCorrect(o.id)?"answer-correct":"answer-incorrect":""])},[t("div",Jt,a(o.text),1),t("div",Wt,[r(e.HolderOutlined)])],2)]))),256))]),_:1},8,["disabled","modelValue"])])])):S("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.ORDERING?(l(),i("div",Zt,[r(e.VueDraggable,{disabled:e.currentQuestionIsSubmitted,modelValue:e.userAnswerOrdering,"onUpdate:modelValue":n[3]||(n[3]=o=>e.userAnswerOrdering=o),options:e.dragOptions},{default:g(()=>[(l(!0),i(x,null,O(e.userAnswerOrdering,(o,w)=>(l(),i("div",{class:p(["answer-option answer-option-ordering",e.currentQuestionIsSubmitted?w===o.correctOrder?"answer-correct":"answer-incorrect":""])},[t("div",$t,[r(e.HolderOutlined),f(" "+a(w+1),1)]),t("div",en,a(o.text),1),t("div",{class:p(["answer-option-order answer-icon",e.currentQuestionIsSubmitted?"":"d-none"])},[n[11]||(n[11]=t("i",{class:"bx bx-hash answer-icon"},null,-1)),f(" "+a(o.correctOrder),1)],2)],2))),256))]),_:1},8,["disabled","modelValue"])])):S("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.SHORT_TEXT?(l(),i("div",tn,[t("div",{layout:"vertical",class:p(["answer-short-text",e.currentQuestionIsSubmitted?e.checkShortText()?"answer-correct":"answer-incorrect":""])},[t("div",nn,[r(e.TextArea,{readonly:e.currentQuestionIsSubmitted,placeholder:"Enter your answer...",modelValue:e.userAnswerShortText,"onUpdate:modelValue":n[4]||(n[4]=o=>e.userAnswerShortText=o)},null,8,["readonly","modelValue"]),e.currentQuestionIsSubmitted&&e.checkShortText()?(l(),i("i",on)):S("v-if",!0),e.currentQuestionIsSubmitted&&!e.checkShortText()?(l(),i("i",sn)):S("v-if",!0)]),e.currentQuestionIsSubmitted&&!e.checkShortText()?(l(),i("div",an,[f(a(m.$t("learn_QS.instructions.short_text_answer"))+" ",1),t("span",null,a(e.currentQuestion.questionData.shortText),1)])):S("v-if",!0)],2)])):S("v-if",!0)])]),t("div",ln,[t("div",{class:p(["main-color-btn-ghost",e.currentQuestionIsSubmitted?"main-color-btn-ghost-disabled":""]),onClick:n[5]||(n[5]=o=>e.onSkipQuestion(o))},a(m.$t("learn_QS.buttons.dont_know")),3),t("div",rn,[t("div",{class:p(["main-color-btn-ghost me-3",e.currentQuestionIsSubmitted?"":"d-none"]),onClick:e.onOpenCommentModal},[n[12]||(n[12]=t("i",{class:"bx bx-conversation me-2"},null,-1)),f(" "+a(m.$t("learn_QS.buttons.comment")),1)],2),t("div",{class:p(["main-color-btn-ghost me-3",e.currentQuestionIsSubmitted?"":"d-none"]),onClick:e.toggleExplainModal},[n[13]||(n[13]=t("i",{class:"bx bx-bulb me-2"},null,-1)),f(" "+a(m.$t("learn_QS.buttons.explaination")),1)],2),r(y,{class:p(["main-color-btn",e.currentQuestionIsSubmitted?"main-color-btn-disabled":""]),type:"primary",size:"large",onClick:e.onSubmitAnswer},{default:g(()=>[f(a(m.$t("learn_QS.buttons.submit")),1)]),_:1},8,["class"])])])],64))]),t("div",{ref:"explainModal",class:p(["explain-modal explain-modal-up",{show:e.explainModalOpen}])},[t("div",{class:"learn-question-explain",innerHTML:e.currentQuestion.explainText},null,8,cn),r(y,{class:p(["main-color-btn close-modal-btn"]),type:"primary",size:"large",onClick:e.toggleExplainModal},{default:g(()=>n[14]||(n[14]=[t("i",{class:"bx bx-chevrons-down"},null,-1)])),_:1,__:[14]}),r(y,{class:p(["main-color-btn",e.currentSession.length<=0?"main-color-btn-disabled":""]),type:"primary",size:"large",onClick:e.onNextQuestion},{default:g(()=>[f(a(m.$t("learn_QS.buttons.next_question"))+" ",1),n[15]||(n[15]=t("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[15]},8,["class"])],2),r(R,{width:500,title:"Comment section",placement:"right",open:e.commentModalOpen,onClose:e.onCloseCommentModal},{default:g(()=>[t("div",un,[t("div",dn,[e.currentQuestionComments.length>0?(l(),i(x,{key:0},[(l(!0),i(x,null,O(e.currentQuestionComments,(o,w)=>{var P;return l(),i("div",{class:p(["comment-item",((P=e.chosenComment)==null?void 0:P.id)===o.id?"comment-item-chosen":""])},[t("div",mn,[n[19]||(n[19]=t("i",{class:"bx bx-user-circle comment-user-img"},null,-1)),t("div",_n,[t("div",vn,[f(a(o.createBy.fullName)+" ",1),t("span",null,a(e.dayjs(o.createdAt).format("DD/MM/YYYY HH:mm")),1),o.createBy.userId===e.user_info.id?(l(),i("div",gn,[t("i",{class:"me-3 bx bx-edit",onClick:C=>e.onEditComment(o.id)},null,8,hn),r(E,{class:"pop-confirm-delete",title:m.$t("create_QS.quiz.confirm"),onConfirm:C=>e.onDeleteComment(o.id)},{default:g(()=>[...n[16]||(n[16]=[t("i",{class:"text-danger bx bx-trash-alt"},null,-1)])]),_:2},1032,["title","onConfirm"])])):S("v-if",!0)]),t("div",fn,a(o.content),1),t("div",pn,[t("div",{class:"comment-reply-btn",onClick:C=>e.onTriggerReply(o)}," Reply ",8,bn),t("div",{class:"comment-children-open-btn",onClick:C=>e.onToggleReplyContainer(w)},a(e.repliesOpen[w]?"Close":"View")+" ("+a(o.childComments.length)+") replies ",9,wn)]),t("div",{id:"reply-items-"+w,class:"child-comment-container",style:{display:"none"}},[(l(!0),i(x,null,O(o.childComments,(C,b)=>(l(),i("div",Qn,[t("div",Cn,[n[18]||(n[18]=t("i",{class:"bx bx-user-circle comment-user-img"},null,-1)),t("div",In,[t("div",Sn,[f(a(C.createBy.fullName)+" ",1),t("span",null,a(e.dayjs(C.createdAt).format("DD/MM/YYYY HH:mm")),1),C.createBy.userId===e.user_info.id?(l(),i("div",xn,[t("i",{class:"me-3 bx bx-edit",onClick:k=>e.onEditComment(C.id)},null,8,Tn),r(E,{class:"pop-confirm-delete",title:m.$t("create_QS.quiz.confirm"),onConfirm:k=>e.onDeleteComment(C.id)},{default:g(()=>[...n[17]||(n[17]=[t("i",{class:"text-danger bx bx-trash-alt"},null,-1)])]),_:2},1032,["title","onConfirm"])])):S("v-if",!0)]),t("div",kn,a(C.content),1)])])]))),256))],8,yn)])])],2)}),256)),e.commentLoading?(l(),ne(N,{key:0,loading:e.commentLoading},null,8,["loading"])):S("v-if",!0),r(y,{type:"primary",class:"main-color-btn",onClick:e.onLoadMoreComment,loading:e.commentLoading},{default:g(()=>n[20]||(n[20]=[f(" Load more ")])),_:1,__:[20]},8,["loading"])],64)):(l(),i("div",An,[r(L,null,{description:g(()=>n[21]||(n[21]=[t("span",null,"No one has commented yet.",-1)])),_:1})]))]),r(v,{layout:"vertical",class:"comment-form"},{default:g(()=>{var o;return[e.isReplying?(l(),i("label",Mn," Replying to @"+a((o=e.chosenComment)==null?void 0:o.createBy.fullName),1)):(l(),i("label",qn,"Your comment")),r(e.TextArea,{value:e.commentValue,"onUpdate:value":n[6]||(n[6]=w=>e.commentValue=w),placeholder:"Enter comment","max-length":500},null,8,["value"]),t("div",En,[r(y,{type:"primary",shape:"round",class:p(["me-3 main-color-btn-ghost",e.isReplying?"":"main-color-btn-ghost-disabled"]),onClick:e.onCancelReplying},{default:g(()=>[f(a(m.$t("learn_QS.buttons.cancel")),1)]),_:1},8,["class"]),r(y,{type:"primary",shape:"round",class:p(["main-color-btn",e.commentValue?"":"main-color-btn-disabled"]),onClick:e.onAddComment},{default:g(()=>[f(a(m.$t("learn_QS.buttons.send_comment")),1)]),_:1},8,["class"])])]}),_:1})])]),_:1},8,["open"])])]),r(R,{open:e.finalModalOpen,placement:"top",height:"100vh",closable:!1,onClose:e.closeFinalModal,"body-style":{padding:0,height:"100%"}},{title:g(()=>[t("div",On,[r(D,{class:"w-100 d-flex align-items-center"},{default:g(()=>[r(Q,{span:1},{default:g(()=>[r(j,{to:{name:"User_Library"}},{default:g(()=>n[22]||(n[22]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[22]})]),_:1}),r(Q,{class:"main-title",span:23},{default:g(()=>[t("span",null,a(e.quiz.title),1),n[23]||(n[23]=f()),n[24]||(n[24]=t("br",null,null,-1))]),_:1,__:[23,24]})]),_:1})])]),default:g(()=>[t("div",Dn,[t("div",Ln,a(e.finalModalQuote),1)]),t("div",Rn,[t("div",Hn,[t("div",Nn,[f(a(m.$t("learn_QS.other.total_set_progress"))+" ",1),t("span",null,a(e.completionPercentage)+"%",1)])]),r(U,{"show-info":!1,"stroke-color":"#7C3AED",status:"active",percent:e.completionPercentage},null,8,["percent"]),t("div",Un,[t("div",zn,[f(a(m.$t("learn_QS.other.completed"))+": ",1),t("span",null,a(e.quiz.completedQuestionCount),1)]),t("div",Vn,[f(a(m.$t("learn_QS.other.total_question"))+" ",1),t("span",null,a(e.quiz.totalQuestionCount),1)])])]),t("div",Pn,[r(V,{style:{"background-color":"var(--content-item-border-color)"}}),t("div",Yn,a(m.$t("learn_QS.other.preview_modal_title")),1),t("div",Bn,[(l(!0),i(x,null,O(e.completed,(o,w)=>{var P,C;return l(),i("div",Fn,[t("div",Gn,[o.textFormat===e.QUESTION_FORMAT.HTML?(l(),i("div",{key:0,class:"question-html",innerHTML:o.questionText},null,8,jn)):(l(),i("div",Kn,a(o.questionText),1)),t("div",{class:"question-item-answer",id:`question-item-answer-${w}`},[o.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(l(),i("div",Jn,[t("ul",null,[(l(!0),i(x,null,O(o.questionData.multipleChoice,b=>(l(),i("li",null,[f(a(b.text)+" ",1),b.isAnswer?(l(),i("span",Wn," ("+a(b.isAnswer)+") ",1)):S("v-if",!0)]))),256))])])):S("v-if",!0),o.type===e.QUESTION_TYPE.MATCHING?(l(!0),i(x,{key:1},O((P=o.questionData.matching)==null?void 0:P.matches,b=>{var k,Y,q,ae;return l(),i("div",Zn,[t("span",$n,a((Y=(k=o.questionData.matching)==null?void 0:k.leftItems.find(B=>B.id===b.leftId))==null?void 0:Y.text),1),n[25]||(n[25]=t("i",{class:"bx bx-right-arrow-alt"},null,-1)),t("span",eo,a((ae=(q=o.questionData.matching)==null?void 0:q.rightItems.find(B=>B.id===b.rightId))==null?void 0:ae.text),1)])}),256)):S("v-if",!0),o.type===e.QUESTION_TYPE.ORDERING?(l(),i("div",to,[t("div",no,[(l(!0),i(x,null,O(o.questionData.ordering,b=>(l(),i("div",null,a(b.text),1))),256))]),n[26]||(n[26]=t("i",{class:"bx bx-right-arrow-alt"},null,-1)),t("div",oo,[(l(!0),i(x,null,O((C=o.questionData.ordering)==null?void 0:C.sort((b,k)=>b.correctOrder-k.correctOrder),(b,k)=>(l(),i("div",so,[t("span",null,"#"+a(b.correctOrder),1),f(" - "+a(b.text),1)]))),256))])])):S("v-if",!0),o.type===e.QUESTION_TYPE.SHORT_TEXT?(l(),i(x,{key:3},[n[27]||(n[27]=t("span",null,"Answer:",-1)),t("div",ao,a(o.questionData.shortText),1)],64)):S("v-if",!0)],8,Xn)]),t("div",lo,[t("i",{class:"bx bx-chevron-up",onClick:b=>e.toggleDisplayAnswer(w,b.currentTarget)},null,8,io)])])}),256))]),t("div",ro,[t("div",null,a(m.$t("learn_QS.other.preview_modal_continues_ins")),1),r(y,{class:p(["main-color-btn"]),type:"primary",size:"large",shape:"round",onClick:e.onContinuesLearn},{default:g(()=>[f(a(m.$t("learn_QS.buttons.continue")),1)]),_:1})])])]),_:1},8,["open"]),r(R,{open:e.completeModalOpen,placement:"top",height:"100vh",closable:!1,onClose:e.closeFinalModal,"body-style":{padding:0,height:"100%"}},{default:g(()=>[e.isAnimationDisplaying?(l(),ne(e.DotLottieVue,{key:0,autoplay:e.isAnimationDisplaying,ref:"animationRef",class:p(["animation-container"]),onComplete:n[7]||(n[7]=o=>e.isAnimationDisplaying=!1),src:e.animationPath},null,8,["autoplay","src"])):S("v-if",!0),t("div",co,[t("div",uo,[t("img",{class:"modal-complete-img",src:e.trophy_png,alt:""},null,8,mo),t("div",_o,[t("div",vo,a(m.$t("learn_QS.other.complete_modal_congratulation")),1),t("div",go,a(m.$t("learn_QS.other.complete_modal_ins")),1)]),t("div",ho,[r(y,{type:"primary",class:"main-color-btn ghost-btn",size:"large"},{default:g(()=>[f(a(m.$t("learn_QS.buttons.back_to_home")),1)]),_:1}),r(y,{type:"primary",class:"main-color-btn",size:"large"},{default:g(()=>[f(a(m.$t("learn_QS.buttons.take_a_test")),1)]),_:1}),r(y,{type:"primary",class:"main-color-btn",size:"large",onClick:e.onResetLearnHistory},{default:g(()=>[f(a(m.$t("learn_QS.buttons.reset_learn_mode")),1)]),_:1})])])])]),_:1},8,["open"])],64)}const ko=ht(St,[["render",fo],["__scopeId","data-v-5fe31f19"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/question_sets/learn.vue"]]);export{ko as default};
