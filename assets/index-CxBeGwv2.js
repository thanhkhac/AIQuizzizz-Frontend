import{d as D,q as E,l as O,g as Y,u as j,C as G,i as S,j as Q,P as H,s as K,k as x,M as J,_ as W,r as _,a as g,o as m,b as t,c as l,f as h,t as r,w as p,F as C,E as A,G as X}from"./index-C2jtDg6B.js";import{A as w}from"./ApiTestTemplate-Ds5LzdWO.js";import{F as L}from"./folderShareMode-BudLQ2R2.js";import{I as Z}from"./Input-0Otcuoto.js";import{S as $}from"./ShareModal-BiXPYbo-.js";import{V as ee}from"./visibility-PZlBDoOn.js";import"./ApiFolder-DE_T1vB3.js";const te=D({__name:"index",emits:["updateSidebar"],setup(d,{expose:n,emit:M}){var R;n();const e=E(),c=O(),k=Y(),{t:I}=j(),f=M,z=Object.values(L),v=G(()=>z.map(s=>({label:I(`folder_index.select_option.${s}`),value:s!==L.ALL?s:""}))),b=S([]),a=Q({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,name:((R=e.query.name)==null?void 0:R.toString())||"",shareMode:e.query.shareMode||v.value[0].value,totalCount:0,statusFilter:!1}),o=async()=>{try{let s=await w.GetAllByLimit(a);if(s.data.success){let i=s.data.data;b.value=i.items,a.pageNumber=i.pageNumber,a.pageSize=i.pageSize,a.totalCount=i.totalCount,a.statusFilter&&(a.pageNumber>i.totalPages&&a.totalCount>0?(a.pageNumber=1,c.push({name:"User_TestTemplate",query:{pageNumber:1,pageSize:a.pageSize,name:a.name,shareMode:a.shareMode}})):c.push({name:"User_TestTemplate",query:{pageNumber:a.pageNumber,pageSize:a.pageSize,name:a.name,shareMode:a.shareMode}}),a.statusFilter=!a.statusFilter)}}catch(s){console.log("ERROR: GETALLBYLIMIT testtemplate: "+s)}};H(()=>{var s;Object.keys(e.query).length===0&&(a.pageNumber=e.query.pageNumber||1,a.pageSize=e.query.pageSize||10,a.name=((s=e.query.name)==null?void 0:s.toString())||"",a.shareMode=e.query.shareMode||v.value[0].value,a.statusFilter=!0,o())});const u=(s,i)=>{a.pageNumber=s,a.pageSize=i,a.statusFilter=!0,o()},U=()=>{c.push({name:"User_TestTemplate_Create"})},F=async s=>{if(await T(s),!y.value.canEdit){x.warning("You don't have permission to perform this function!");return}c.push({name:"User_TestTemplate_Update",params:{id:s}})},V=async s=>{if(await T(s),!y.value.canDelete){x.warning("You don't have permission to perform this function!");return}y.value.canEdit?c.push({name:"User_TestTemplate_Update",params:{id:s}}):x.warning("You don't have permission to perform this function!"),J.confirm({title:"Are you sure to delete this test template?",content:"Please double check the important resources!",onOk:async()=>{(await w.Delete(s)).data.success&&(x.success("Removed successfully!"),await o())}})},y=S({canEdit:!1,canDelete:!1}),T=async s=>{const i=await w.GetPermissions(s);i.data.success&&(y.value=i.data.data)},P=S(null),B=s=>{var i;q.value=s,(i=P.value)==null||i.openModal()},q=S({testTemplateId:"",name:"",createdBy:"",numberOfQuestion:0,dateCreated:0});K(async()=>{f("updateSidebar","folder"),await o(),q.value=b.value[0]});const N={route:e,router:c,authStore:k,t:I,emit:f,optionKeys:z,share_mode_options:v,test_template_data:b,pageParams:a,getData:o,onPaginationChange:u,onRefirectToCreate:U,onRefirectToUpdate:F,onDelete:V,permission:y,getPermission:T,shareModalRef:P,onOpenShareModal:B,chosenTemplate:q,Input:Z,ShareModal:$,get VISIBILITY(){return ee}};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}}),ae={class:"page-container"},se={class:"title-container"},oe={class:"main-title"},ne={class:"title-button-container"},ie={class:"content"},re={class:"content-item"},le={class:"content-item-functions"},de={class:"content-item-navigators"},ce={class:"navigator-container"},ue={class:"filter-container"},me={style:{width:"300px",padding:"0px"}},pe={key:0,class:"quiz-item-container"},_e={class:"quiz-item"},ge={class:"quiz-item-title"},he={class:"quiz-item-info quiz-info-detail"},fe={class:"quiz-item-questions"},ve={class:"quiz-item-created-by"},be={class:"exam-item-actions"},ye=["onClick"],Ie=["onClick"],ze=["onClick"],Se={key:1,class:"w-100 d-flex justify-content-center"},xe={class:"pagination-container"};function Te(d,n,M,e,c,k){const I=_("a-button"),f=_("RouterLink"),z=_("a-select-option"),v=_("a-select"),b=_("a-empty"),a=_("a-pagination");return m(),g(C,null,[t("div",ae,[t("div",se,[t("div",oe,[t("span",null,r(d.$t("folder_index.title")),1),n[3]||(n[3]=h()),n[4]||(n[4]=t("br",null,null,-1)),t("span",null,r(d.$t("folder_index.sub_title")),1)]),t("div",ne,[l(I,{type:"primary",class:"ms-3 main-color-btn",size:"large",onClick:e.onRefirectToCreate},{default:p(()=>n[5]||(n[5]=[h(" Create new template "),t("i",{class:"bx bx-plus"},null,-1)])),_:1,__:[5]})])]),t("div",ie,[t("div",re,[t("div",le,[t("div",de,[t("div",ce,[l(f,{class:"navigator-item",to:{name:"User_Folder"}},{default:p(()=>[h(r(d.$t("folder_index.navigators.folder")),1)]),_:1}),l(f,{class:"navigator-item navigator-active",to:{name:""}},{default:p(()=>[h(r(d.$t("folder_index.navigators.test_template")),1)]),_:1})])]),t("div",ue,[l(v,{class:"me-3",value:e.pageParams.shareMode,"onUpdate:value":n[0]||(n[0]=o=>e.pageParams.shareMode=o),style:{width:"200px"},onChange:e.getData},{default:p(()=>[(m(!0),g(C,null,A(e.share_mode_options,o=>(m(),X(z,{value:o.value},{default:p(()=>[h(r(o.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),t("div",me,[l(e.Input,{onInput:e.getData,modelValue:e.pageParams.name,"onUpdate:modelValue":n[1]||(n[1]=o=>e.pageParams.name=o),placeholder:e.t("class_index.other.search_class_placeholder")},{icon:p(()=>n[6]||(n[6]=[t("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),e.test_template_data.length>0?(m(),g("div",pe,[(m(!0),g(C,null,A(e.test_template_data,o=>(m(),g("div",_e,[n[8]||(n[8]=t("i",{class:"bx bx-book-open quiz-item-icon"},null,-1)),t("div",null,[t("div",ge,r(o.name),1),t("div",he,[t("div",fe,[n[7]||(n[7]=t("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),h(" "+r(o.numberOfQuestion)+" "+r(d.$t("dashboards.list_items.quiz.questions")),1)]),t("div",ve,r(d.$t("class_question_set.other.created_by"))+" "+r(o.createdBy),1)])]),t("div",be,[t("i",{class:"bx bx-share-alt",onClick:u=>e.onOpenShareModal(o)},null,8,ye),t("i",{class:"bx bx-edit",onClick:u=>e.onRefirectToUpdate(o.testTemplateId)},null,8,Ie),t("i",{class:"text-danger bx bx-trash-alt",onClick:u=>e.onDelete(o.testTemplateId)},null,8,ze)])]))),256))])):(m(),g("div",Se,[l(b,null,{description:p(()=>n[9]||(n[9]=[t("span",null," No data matches. ",-1)])),_:1})])),t("div",xe,[l(a,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":n[2]||(n[2]=o=>e.pageParams.pageNumber=o),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(o,u)=>`${u[0]}-${u[1]} of ${o} ${e.t("folder_index.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("folder_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])]),l(e.ShareModal,{ref:"shareModalRef",id:e.chosenTemplate.testTemplateId,name:e.chosenTemplate.name,mode:"template",options:[e.VISIBILITY.PRIVATE],visibility:e.VISIBILITY.PRIVATE},null,8,["id","name","options","visibility"])],64)}const Re=W(te,[["render",Te],["__scopeId","data-v-3b3a6f2e"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/test_template/index.vue"]]);export{Re as default};
