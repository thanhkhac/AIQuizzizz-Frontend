import{d as j,u as F,q as X,l as J,i as p,C as K,s as W,M as Z,k as ee,O as te,_ as ne,r as _,a,o,b as t,c as l,w as c,f as m,t as i,e as y,G as D,F as g,E as b}from"./index-C2jtDg6B.js";import{A as R}from"./ApiQuestionSet-C75xoSuo.js";import{Q as I}from"./questionTypes-CS3lcRlq.js";import{I as se}from"./Input-0Otcuoto.js";import{T as oe}from"./TransferQuestionData-Bl0XXg5D.js";import{V as ae}from"./Validator-CWeiTIFe.js";import{S as ie}from"./ShareModal-BiXPYbo-.js";import{V as le}from"./visibility-PZlBDoOn.js";import"./ApiTestTemplate-Ds5LzdWO.js";import"./ApiFolder-DE_T1vB3.js";const re=j({__name:"detail",setup(v,{expose:n}){n();const{t:M}=F(),e=X(),f=J(),S=p(!1),h=p(e.params.id),d=p({id:"",name:"",description:"",totalQuestionCount:0,completedQuestionCount:0,ratingCount:0,ratingAverage:0,createBy:"",createdAt:"",createdById:"",tags:[],lastAccessByMe:"",visibilityMode:""}),T=p([]),q=["All",I.MULTIPLE_CHOICE,I.MATCHING,I.ORDERING,I.SHORT_TEXT],z=K(()=>q.map(r=>({label:M(`create_QS.type.${r}`),value:r}))),L=p(z.value[0].value),C=p(""),E=async()=>{try{S.value=!0,ae.isValidGuid(h.value.toString())||f.push({name:"404"});const r=await R.GetDetailById(h.value.toString()),w=await R.GetQuestionById(h.value.toString());(!r.data.success||!w.data.success)&&f.push({name:"User_Library"}),d.value=r.data.data,d.value.createBy=r.data.data.createdBy.fullName,T.value=w.data.data.map(P=>oe.transformResponseToRequest(P)),await N()}catch{}finally{S.value=!1}},V=(r,w)=>{$(w).toggleClass("bx-chevron-up bx-chevron-down");const Y=$(`#question-item-answer-${r}`);Y&&$(Y).slideToggle()},k=p(null),A=()=>{var r;(r=k.value)==null||r.openModal()},U=()=>{f.push({name:"User_QuestionSet_Learn",params:{id:d.value.id}})},O=()=>{f.push({name:"User_QuestionSet_Test",params:{id:d.value.id}})},s=()=>{f.push({name:"User_QuestionSet_Update",params:{id:d.value.id}})},x=p(!1),u=p(0),Q=p({canEdit:!1,canDelete:!1}),N=async()=>{const r=await R.GetPermissions(d.value.id);r.data.success&&(Q.value=r.data.data)},H=()=>{Z.confirm({title:"Are you sure to delete this question set from class?",content:"Please double check for important resources!",onOk:async()=>{(await R.Delete(d.value.id)).data.success&&(ee.success("Delete successfully."),f.push("User_Library"))}})},G=r=>{const w=[r];sessionStorage.setItem("selected_tags",JSON.stringify(w)),f.push({name:"User_QuestionSet_Search"})};W(async()=>{await E()});const B={t:M,route:e,router:f,loading:S,question_set_id:h,quiz:d,quiz_questions:T,optionKeys:q,question_type_options:z,selected_type_option:L,searchValue:C,getData:E,toggleDisplayAnswer:V,shareModalRef:k,onOpenShareModal:A,onRedirectToLearn:U,onRedirectToTest:O,onRedirectToEdit:s,modal_rate_open:x,rateValue:u,permission:Q,getPermission:N,onDelete:H,onRedirectToSearch:G,get QUESTION_TYPE(){return I},Input:se,get dayjs(){return te},ShareModal:ie,get VISIBILITY(){return le}};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}}),de={class:"content"},ce={class:"content-item"},ue={key:0},_e={key:1},me={class:"content-item-title"},ve={key:0,class:"d-flex flex-row align-items-center quiz-header-functions"},pe={class:"d-flex align-items-center"},fe={class:"quiz-info"},ge={class:"quiz-tag-container"},ye=["onClick"],be={class:"quiz-credit"},he={class:"share-btn-container"},we={class:"action-container"},Te={class:"credit-user"},ke={class:"credit-user-info"},xe={class:"d-flex"},Ie={class:"content-item"},Se={class:"content-item-title"},qe={class:"content-item-functions"},ze={style:{width:"300px",padding:"0"}},Ce={key:0},Ee={key:1,class:"preview-question-container"},Qe={class:"preview-question-item"},Re={class:"question-item-content"},Me=["innerHTML"],Le={key:1,class:"question-text"},Ve=["id"],Ae={key:0,class:"multiple-choice-answer"},Ue={key:0,class:"text-success"},Oe={class:"pair-answer"},De={class:"pair-answer-item"},Ne={class:"pair-answer-item"},Be={key:2,class:"ordering-answer"},Pe={class:"ordering-answer-item"},Ye={class:"ordering-answer-item"},He={class:"ordering-answer-item"},Ge={class:"short-text-answer"},je={class:"question-item-toogle-btn"},Fe=["onClick"],Xe={class:"title-container"},Je={class:"modal-rate-container"};function Ke(v,n,M,e,f,S){const h=_("RouterLink"),d=_("a-skeleton"),T=_("a-menu-item"),q=_("a-menu-divider"),z=_("a-menu"),L=_("a-dropdown"),C=_("a-button"),E=_("a-select-option"),V=_("a-select"),k=_("a-col"),A=_("a-row"),U=_("a-rate"),O=_("a-modal");return o(),a(g,null,[t("div",de,[l(h,{class:"navigator-back-link d-flex align-items-center p-2",to:{name:"User_Library"}},{default:c(()=>[n[5]||(n[5]=t("i",{class:"me-1 bx bx-chevron-left"},null,-1)),m(" "+i(v.$t("detail_QS.other.library")),1)]),_:1,__:[5]}),t("div",ce,[e.loading?(o(),a("div",ue,[l(d,{loading:e.loading,active:""},null,8,["loading"]),l(d,{loading:e.loading,active:""},null,8,["loading"])])):(o(),a("div",_e,[t("div",me,[t("div",null,[t("span",null,i(e.quiz.name),1),t("span",null,i(e.quiz.description),1)]),e.permission.canEdit||e.permission.canDelete?(o(),a("div",ve,[l(L,{trigger:["click"],placement:"bottomRight"},{overlay:c(()=>[l(z,{class:"drop-down-container"},{default:c(()=>[e.permission.canEdit?(o(),D(T,{key:"1",onClick:e.onRedirectToEdit},{default:c(()=>[n[6]||(n[6]=t("i",{class:"bx bx-edit"},null,-1)),m(" "+i(v.$t("question_sets_index.buttons.edit")),1)]),_:1,__:[6]})):y("v-if",!0),l(q,{style:{"background-color":"#ddd"}}),e.permission.canDelete?(o(),D(T,{key:"2",onClick:e.onDelete},{default:c(()=>[t("span",pe,[n[7]||(n[7]=t("i",{class:"bx bx-trash-alt"},null,-1)),m(" "+i(v.$t("question_sets_index.buttons.delete")),1)])]),_:1})):y("v-if",!0)]),_:1})]),default:c(()=>[n[8]||(n[8]=t("i",{class:"bx bx-dots-horizontal-rounded ant-dropdown-link"},null,-1))]),_:1,__:[8]})])):y("v-if",!0)]),t("div",fe,[t("div",{class:"quiz-rating",onClick:n[0]||(n[0]=s=>e.modal_rate_open=!0)},i(e.quiz.ratingAverage)+" ⭐️ ("+i(e.quiz.ratingCount)+" "+i(v.$t("detail_QS.other.reviews"))+") ",1),t("div",ge,[(o(!0),a(g,null,b(e.quiz.tags,s=>(o(),a("div",{class:"quiz-tag-item",onClick:x=>e.onRedirectToSearch(s)},i(s.name),9,ye))),256))])]),t("div",be,[t("div",he,[l(C,{type:"primary",class:"main-color-btn share-btn",size:"large",onClick:e.onOpenShareModal},{default:c(()=>[n[9]||(n[9]=t("i",{class:"bx bx-share-alt"},null,-1)),m(" "+i(v.$t("detail_QS.buttons.share_quiz")),1)]),_:1,__:[9]})])]),t("div",we,[t("div",Te,[n[10]||(n[10]=t("div",{class:"user-image",alt:""},null,-1)),t("div",ke,[t("span",null,i(v.$t("detail_QS.other.created_by",{username:e.quiz.createBy})),1),t("span",null,i(e.dayjs(e.quiz.createdAt).format("DD/MM/YYYY")),1)])]),t("div",xe,[t("div",{class:"action-item",onClick:e.onRedirectToLearn},[m(i(v.$t("detail_QS.buttons.learn"))+" ",1),n[11]||(n[11]=t("i",{class:"bx bx-analyse"},null,-1))]),t("div",{class:"action-item",onClick:e.onRedirectToTest},[m(i(v.$t("detail_QS.buttons.test"))+" ",1),n[12]||(n[12]=t("i",{class:"bx bx-detail"},null,-1))])])])]))]),t("div",Ie,[t("div",Se,[t("div",null,[t("span",null,i(v.$t("detail_QS.other.questions",{number:e.quiz_questions.length})),1)])]),t("div",qe,[l(V,{class:"me-3",value:e.selected_type_option,"onUpdate:value":n[1]||(n[1]=s=>e.selected_type_option=s),style:{width:"200px"}},{default:c(()=>[(o(!0),a(g,null,b(e.question_type_options,s=>(o(),D(E,{value:s.value},{default:c(()=>[m(i(s.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),t("div",ze,[l(e.Input,{modelValue:e.searchValue,"onUpdate:modelValue":n[2]||(n[2]=s=>e.searchValue=s),placeholder:e.t("question_sets_index.search_placeholder")},{icon:c(()=>n[13]||(n[13]=[t("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])]),e.loading?(o(),a("div",Ce,[l(d,{loading:e.loading,active:""},null,8,["loading"]),l(d,{loading:e.loading,active:""},null,8,["loading"]),l(d,{loading:e.loading,active:""},null,8,["loading"]),l(d,{loading:e.loading,active:""},null,8,["loading"]),l(d,{loading:e.loading,active:""},null,8,["loading"])])):(o(),a("div",Ee,[(o(!0),a(g,null,b(e.quiz_questions,(s,x)=>(o(),a("div",Qe,[t("div",Re,[s.questionHTML?(o(),a("div",{key:0,class:"question-html",innerHTML:s.questionHTML},null,8,Me)):(o(),a("div",Le,i(s.questionText),1)),t("div",{class:"question-item-answer",id:`question-item-answer-${x}`,style:{display:"none"}},[s.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(o(),a("div",Ae,[t("ul",null,[(o(!0),a(g,null,b(s.multipleChoices,u=>(o(),a("li",null,[m(i(u.text)+" ",1),u.isAnswer?(o(),a("span",Ue," ("+i(u.isAnswer)+") ",1)):y("v-if",!0)]))),256))])])):y("v-if",!0),s.type===e.QUESTION_TYPE.MATCHING?(o(!0),a(g,{key:1},b(s.matchingPairs,u=>(o(),a("div",Oe,[t("span",De,i(u.leftItem),1),n[14]||(n[14]=t("i",{class:"bx bx-right-arrow-alt"},null,-1)),t("span",Ne,i(u.rightItem),1)]))),256)):y("v-if",!0),s.type===e.QUESTION_TYPE.ORDERING?(o(),a("div",Be,[t("div",Pe,[(o(!0),a(g,null,b(s.orderingItems,u=>(o(),a("div",null,i(u.text),1))),256))]),n[15]||(n[15]=t("i",{class:"bx bx-right-arrow-alt"},null,-1)),t("div",Ye,[(o(!0),a(g,null,b(s.orderingItems,(u,Q)=>(o(),a("div",He,[t("span",null,"#"+i(Q+1),1),m(" - "+i(u.text),1)]))),256))])])):y("v-if",!0),s.type===e.QUESTION_TYPE.SHORT_TEXT?(o(),a(g,{key:3},[n[16]||(n[16]=t("span",null,"Answer:",-1)),t("div",Ge,i(s.shortAnswer),1)],64)):y("v-if",!0)],8,Ve)]),t("div",je,[t("i",{class:"bx bx-chevron-down",onClick:u=>e.toggleDisplayAnswer(x,u.currentTarget)},null,8,Fe)])]))),256))]))])]),l(e.ShareModal,{ref:"shareModalRef",id:e.quiz.id,name:e.quiz.name,mode:e.t("share_modal.mode.quiz"),options:e.VISIBILITY,visibility:e.quiz.visibilityMode},null,8,["id","name","mode","options","visibility"]),l(O,{"wrap-class-name":"medium-modal",open:e.modal_rate_open},{footer:c(()=>[l(C,{type:"primary",class:"main-color-btn"},{default:c(()=>n[19]||(n[19]=[m("Send")])),_:1,__:[19]})]),default:c(()=>[t("div",Xe,[l(A,{class:"w-100 d-flex align-items-center justify-content-between"},{default:c(()=>[l(k,{span:1},{default:c(()=>[t("div",{onClick:n[3]||(n[3]=s=>e.modal_rate_open=!1)},n[17]||(n[17]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)]))]),_:1}),l(k,{class:"main-title",span:20},{default:c(()=>n[18]||(n[18]=[t("span",null,"Rate the question set",-1),m(),t("br",null,null,-1)])),_:1,__:[18]})]),_:1})]),t("div",Je,[l(U,{value:e.rateValue,"onUpdate:value":n[4]||(n[4]=s=>e.rateValue=s),style:{"font-size":"40px"}},null,8,["value"])])]),_:1},8,["open"])],64)}const lt=ne(re,[["render",Ke],["__scopeId","data-v-307050af"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/question_sets/detail.vue"]]);export{lt as default};
