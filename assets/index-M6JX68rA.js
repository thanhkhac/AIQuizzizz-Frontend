import{d as B,q as F,l as A,u as E,B as O,i as x,j as U,C as Y,s as j,k as G,G as Q,_ as H,r as _,a as g,o as c,b as a,c as d,f as v,t as l,w as m,F as q,D as k,E as K,e as J}from"./index-DUuWFW7L.js";import{A as P}from"./ApiTestTemplate-DaU9sbtO.js";import{F as D}from"./folderShareMode-BudLQ2R2.js";import{I as W}from"./Input-CcRvp5JS.js";import{S as X}from"./ShareModal-Ddl_Yk9d.js";import{V as Z}from"./visibility-PZlBDoOn.js";import"./ApiQuestionSet-Be3cmt0i.js";import"./ApiClass-BIZmniOr.js";import"./ApiFolder-DSNuadMV.js";const $=B({__name:"index",emits:["updateSidebar"],setup(r,{expose:s,emit:C}){var N;s();const e=F(),u=A(),{t:z}=E(),y=C,f=Object.values(D),h=O(()=>f.map(n=>({label:z(`folder_index.select_option.${n}`),value:n!==D.ALL?n:""}))),b=x([]),t=U({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,name:((N=e.query.name)==null?void 0:N.toString())||"",shareMode:e.query.shareMode||h.value[0].value,totalCount:0,statusFilter:!1}),p=async()=>{try{let n=await P.GetAllByLimit(t);if(n.data.success){let i=n.data.data;b.value=i.items,t.pageNumber=i.pageNumber,t.pageSize=i.pageSize,t.totalCount=i.totalCount,t.statusFilter&&(t.pageNumber>i.totalPages&&t.totalCount>0?(t.pageNumber=1,u.push({name:"User_TestTemplate",query:{pageNumber:1,pageSize:t.pageSize,name:t.name,shareMode:t.shareMode}})):u.push({name:"User_TestTemplate",query:{pageNumber:t.pageNumber,pageSize:t.pageSize,name:t.name,shareMode:t.shareMode}}),t.statusFilter=!t.statusFilter)}}catch(n){console.log("ERROR: GETALLBYLIMIT testtemplate: "+n)}};Y(()=>Object.keys(e.query).length,()=>{var n;t.pageNumber=e.query.pageNumber||1,t.pageSize=e.query.pageSize||10,t.name=((n=e.query.name)==null?void 0:n.toString())||"",t.shareMode=e.query.shareMode||h.value[0].value,t.statusFilter=!0,p()});const o=(n,i)=>{t.pageNumber=n,t.pageSize=i,t.statusFilter=!0,p()},I=()=>{u.push({name:"User_TestTemplate_Create"})},L=async n=>{u.push({name:"User_TestTemplate_Detail",params:{id:n}})},S=x({canEdit:!1,canDelete:!1}),M=async n=>{const i=await P.GetPermissions(n);i.data.success&&(S.value=i.data.data)},R=x(null),V=async n=>{var i;if(T.value=n,await M(T.value.testTemplateId),!S.value.canEdit){G.warning("You don't have permission to perform this function!");return}await Q(),(i=R.value)==null||i.openModal()},T=x({testTemplateId:"",name:"",createBy:"",numberOfQuestion:0,dateCreated:"",description:""});j(async()=>{y("updateSidebar","folder"),await p(),T.value=b.value[0]});const w={route:e,router:u,t:z,emit:y,optionKeys:f,share_mode_options:h,test_template_data:b,pageParams:t,getData:p,onPaginationChange:o,onRefirectToCreate:I,onRefirectToDetail:L,permission:S,getPermission:M,shareModalRef:R,onOpenShareModal:V,chosenTemplate:T,Input:W,ShareModal:X,get VISIBILITY(){return Z}};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),ee={class:"page-container"},te={class:"title-container"},ae={class:"main-title"},se={class:"title-button-container"},ne={class:"content"},oe={class:"content-item"},ie={class:"content-item-functions"},le={class:"content-item-navigators"},re={class:"navigator-container"},de={class:"filter-container"},ce={style:{width:"300px",padding:"0px"}},me={key:0,class:"quiz-item-container"},ue=["onClick"],pe={class:"quiz-item-title"},_e={class:"quiz-item-info quiz-info-detail"},ge={class:"quiz-item-questions"},ve={class:"quiz-item-created-by"},fe={key:1,class:"w-100 d-flex justify-content-center"},he={class:"pagination-container"};function be(r,s,C,e,u,z){const y=_("a-button"),f=_("RouterLink"),h=_("a-select-option"),b=_("a-select"),t=_("a-empty"),p=_("a-pagination");return c(),g(q,null,[a("div",ee,[a("div",te,[a("div",ae,[a("span",null,l(r.$t("folder_index.title")),1),s[3]||(s[3]=v()),s[4]||(s[4]=a("br",null,null,-1)),a("span",null,l(r.$t("folder_index.sub_title")),1)]),a("div",se,[d(y,{type:"primary",class:"ms-3 main-color-btn",size:"large",onClick:e.onRefirectToCreate},{default:m(()=>s[5]||(s[5]=[v(" Create new template "),a("i",{class:"bx bx-plus"},null,-1)])),_:1,__:[5]})])]),a("div",ne,[a("div",oe,[a("div",ie,[a("div",le,[a("div",re,[d(f,{class:"navigator-item",to:{name:"User_Folder"}},{default:m(()=>[v(l(r.$t("folder_index.navigators.folder")),1)]),_:1}),d(f,{class:"navigator-item navigator-active",to:{name:""}},{default:m(()=>[v(l(r.$t("folder_index.navigators.test_template")),1)]),_:1})])]),a("div",de,[d(b,{class:"me-3",value:e.pageParams.shareMode,"onUpdate:value":s[0]||(s[0]=o=>e.pageParams.shareMode=o),style:{width:"200px"},onChange:e.getData},{default:m(()=>[(c(!0),g(q,null,k(e.share_mode_options,o=>(c(),K(h,{value:o.value},{default:m(()=>[v(l(o.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),a("div",ce,[d(e.Input,{onInput:e.getData,modelValue:e.pageParams.name,"onUpdate:modelValue":s[1]||(s[1]=o=>e.pageParams.name=o),placeholder:e.t("question_sets_index.search_placeholder")},{icon:m(()=>s[6]||(s[6]=[a("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),e.test_template_data.length>0?(c(),g("div",me,[(c(!0),g(q,null,k(e.test_template_data,o=>(c(),g("div",{class:"quiz-item",onClick:I=>e.onRefirectToDetail(o.testTemplateId)},[s[8]||(s[8]=a("i",{class:"bx bx-book-open quiz-item-icon"},null,-1)),a("div",null,[a("div",pe,l(o.name),1),a("div",_e,[a("div",ge,[s[7]||(s[7]=a("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),v(" "+l(o.numberOfQuestion)+" "+l(r.$t("dashboards.list_items.quiz.questions")),1)]),a("div",ve,l(r.$t("class_question_set.other.created_by"))+" "+l(o.createBy),1)])]),J(` <div class="exam-item-actions">
                            <i class="bx bx-share-alt" @click="onOpenShareModal(template)"></i>
                            <i
                                class="bx bx-detail"
                                @click="onRefirectToDetail(template.testTemplateId)"
                            ></i>
                            <i
                                class="bx bx-edit"
                                @click="onRefirectToUpdate(template.testTemplateId)"
                            ></i>
                            <i
                                class="text-danger bx bx-trash-alt"
                                @click="onDelete(template.testTemplateId)"
                            ></i>
                        </div> `)],8,ue))),256))])):(c(),g("div",fe,[d(t,null,{description:m(()=>[a("span",null,l(r.$t("class_index.other.no_data_matches")),1)]),_:1})])),a("div",he,[d(p,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":s[2]||(s[2]=o=>e.pageParams.pageNumber=o),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(o,I)=>`${I[0]}-${I[1]} of ${o} ${e.t("test_template_index.other.items")}`,"show-size-changer":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("folder_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])]),d(e.ShareModal,{ref:"shareModalRef",id:e.chosenTemplate.testTemplateId,name:e.chosenTemplate.name,mode:"template",options:[e.VISIBILITY.PRIVATE],visibility:e.VISIBILITY.PRIVATE},null,8,["id","name","options","visibility"])],64)}const Re=H($,[["render",be],["__scopeId","data-v-3b3a6f2e"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/test_template/index.vue"]]);export{Re as default};
