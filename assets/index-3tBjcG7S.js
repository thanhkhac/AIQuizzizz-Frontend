import{d as R,l as D,q as M,u as F,B as Q,i as A,j as U,C as V,s as O,_ as j,r as u,a as g,o as _,b as a,c,w as m,f,t as i,F as I,D as E,E as T}from"./index-C_chIrRM.js";import{A as H}from"./ApiQuestionSet-659bAWgT.js";import{V as k}from"./visibility-PZlBDoOn.js";import{I as Y}from"./Input-DD60LmDa.js";/* empty css                                                              */const L={ALL:"All",CREATED_BY_ME:"CreatedByMe",SHARE_WITH_ME:"ShareWithMe"},G=R({__name:"index",emits:["updateSidebar"],setup(r,{expose:n,emit:N}){var P;n();const e=D(),l=M(),{t:z}=F(),h=N,C=Object.values(L),b=Q(()=>C.map(o=>({label:z(`question_sets_index.credit.${o}`),value:o!==L.ALL?o:""}))),v=A(!1),q=A([]),t=U({pageNumber:l.query.pageNumber||1,pageSize:l.query.pageSize||10,name:((P=l.query.name)==null?void 0:P.toString())||"",filterBy:l.query.filterBy||b.value[0].value,totalCount:0,statusFilter:!1}),p=async()=>{try{v.value=!0;let o=await H.GetAllByLimit(t);if(o.data.success){let d=o.data.data;q.value=d.items,t.pageNumber=d.pageNumber,t.pageSize=d.pageSize,t.totalCount=d.totalCount,t.statusFilter&&(t.pageNumber>d.totalPages&&t.totalCount>0?(t.pageNumber=1,e.push({name:"User_Library",query:{pageNumber:1,pageSize:t.pageSize,name:t.name,filterBy:t.filterBy}})):e.push({name:"User_Library",query:{pageNumber:t.pageNumber,pageSize:t.pageSize,name:t.name,filterBy:t.filterBy}}),t.statusFilter=!t.statusFilter)}}catch(o){console.log("ERROR: GETALLEXAMBYLIMIT class exam: "+o)}finally{v.value=!1}};V(()=>Object.keys(l.query).length,()=>{var o;t.pageNumber=l.query.pageNumber||1,t.pageSize=l.query.pageSize||10,t.name=((o=l.query.name)==null?void 0:o.toString())||"",t.filterBy=l.query.filterBy||b.value[0].value,t.statusFilter=!0,p()});const S=(o,d)=>{t.pageNumber=o,t.pageSize=d,t.statusFilter=!0,p()},x=(o,d)=>Math.floor(d/o*100),B=o=>{switch(o){case k.PUBLIC:return"#22C55E";case k.PRIVATE:return"#C52225";default:return"#C52225"}},s=o=>{e.push({name:"User_QuestionSet_Detail",params:{id:o}})},y=()=>{e.push({name:"User_QuestionSet_Create"})};O(async()=>{h("updateSidebar","library"),await p()});const w={router:e,route:l,t:z,emit:h,optionKeys:C,share_mode_options:b,loading:v,quiz_data:q,pageParams:t,getData:p,onPaginationChange:S,getPercentageComplete:x,getTagColor:B,onRedirectToDetail:s,onRedirectToCreate:y,Input:Y};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),W={class:"page-container"},K={class:"title-container"},X={class:"content"},J={class:"content-item"},Z={class:"content-item-title d-flex align-items-center"},$={class:"content-item-functions"},ee={style:{width:"300px",padding:"0px"}},te={class:"quiz-item-container"},ae={key:0},se=["onClick"],ne={class:"quiz-item-title"},oe={class:"quiz-item-info"},ie={class:"quiz-item-progress"},le={class:"quiz-item-credit"},re={class:"pagination-container"};function ue(r,n,N,e,l,z){const h=u("a-col"),C=u("a-row"),b=u("a-button"),v=u("a-select-option"),q=u("a-select"),t=u("a-skeleton"),p=u("a-progress"),S=u("a-tag"),x=u("a-empty"),B=u("a-pagination");return _(),g("div",W,[a("div",K,[c(C,{class:"w-100"},{default:m(()=>[c(h,{class:"main-title",span:20},{default:m(()=>[a("span",null,i(r.$t("question_sets_index.title")),1),n[3]||(n[3]=f()),n[4]||(n[4]=a("br",null,null,-1)),a("span",null,i(r.$t("question_sets_index.sub_title")),1)]),_:1,__:[3,4]})]),_:1})]),a("div",X,[a("div",J,[a("div",Z,[a("div",null,[a("span",null,i(r.$t("question_sets_index.sections.quiz.title")),1),a("span",null,i(r.$t("question_sets_index.sections.quiz.sub_title")),1)]),c(b,{onClick:e.onRedirectToCreate,type:"primary",class:"main-color-btn content-item-button",size:"large"},{default:m(()=>[f(i(r.$t("dashboards.buttons.createNewQuiz"))+" ",1),n[5]||(n[5]=a("i",{class:"bx bx-plus"},null,-1))]),_:1,__:[5]})]),a("div",$,[c(q,{value:e.pageParams.filterBy,"onUpdate:value":n[0]||(n[0]=s=>e.pageParams.filterBy=s),style:{width:"200px"},onChange:e.getData},{default:m(()=>[(_(!0),g(I,null,E(e.share_mode_options,s=>(_(),T(v,{value:s.value},{default:m(()=>[f(i(s.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),a("div",ee,[c(e.Input,{modelValue:e.pageParams.name,"onUpdate:modelValue":n[1]||(n[1]=s=>e.pageParams.name=s),placeholder:e.t("question_sets_index.search_placeholder"),onInput:e.getData},{icon:m(()=>n[6]||(n[6]=[a("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])]),a("div",te,[e.loading?(_(),g("div",ae,[c(t,{loading:e.loading,active:""},null,8,["loading"]),c(t,{loading:e.loading,active:""},null,8,["loading"])])):(_(),g(I,{key:1},[e.quiz_data.length>0?(_(!0),g(I,{key:0},E(e.quiz_data,s=>(_(),g("div",{class:"quiz-item",onClick:y=>e.onRedirectToDetail(s.id)},[n[8]||(n[8]=a("i",{class:"bx bx-book-open quiz-item-icon"},null,-1)),a("div",null,[a("div",ne,i(s.name),1),a("div",oe,[a("div",null,[n[7]||(n[7]=a("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),f(" "+i(s.totalQuestionCount)+" "+i(r.$t("dashboards.list_items.quiz.questions")),1)]),a("div",ie,[c(p,{"stroke-color":"var(--main-color)",status:"active",percent:e.getPercentageComplete(s.totalQuestionCount,s.completedQuestionCount)},null,8,["percent"])])]),a("div",le,[c(S,{color:e.getTagColor(s.visibilityMode)},{default:m(()=>[f(i(r.$t(`question_sets_index.visibility.${s.visibilityMode}`)),1)]),_:2},1032,["color"]),a("span",null," | "+i(r.$t("question_sets_index.credit.createdBy",{user:s.createBy})),1)])])],8,se))),256)):(_(),T(x,{key:1},{description:m(()=>[a("span",null,i(r.$t("question_sets_index.empty_description")),1)]),_:1}))],64))]),a("div",re,[c(B,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":n[2]||(n[2]=s=>e.pageParams.pageNumber=s),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(s,y)=>`${y[0]}-${y[1]} of ${s} ${e.t("class_question_set.other.items")}`,"show-size-changer":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("class_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])])}const ge=j(G,[["render",ue],["__scopeId","data-v-6178daa2"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/question_sets/index.vue"]]);export{ge as default};
