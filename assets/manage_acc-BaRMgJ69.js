import{y as N,z as xe,d as Oe,u as Re,B as re,i as B,C as Ce,s as qe,j as Ae,M,_ as Ue,r as O,a as R,o as w,e as y,b as j,c as C,w as S,t as z,F as oe,D as ie,E as G,f as ce}from"./index-BCUxjaAq.js";import{I as Ee}from"./Input-DiOVXk72.js";import{A}from"./ApiAdmin-HVO1RBl4.js";var D,se;function we(){if(se)return D;se=1;function r(t){var o=typeof t;return t!=null&&(o=="object"||o=="function")}return D=r,D}var L,le;function Ne(){if(le)return L;le=1;var r=typeof N=="object"&&N&&N.Object===Object&&N;return L=r,L}var F,ue;function ke(){if(ue)return F;ue=1;var r=Ne(),t=typeof self=="object"&&self&&self.Object===Object&&self,o=r||t||Function("return this")();return F=o,F}var V,de;function Be(){if(de)return V;de=1;var r=ke(),t=function(){return r.Date.now()};return V=t,V}var W,fe;function Me(){if(fe)return W;fe=1;var r=/\s/;function t(o){for(var e=o.length;e--&&r.test(o.charAt(e)););return e}return W=t,W}var K,me;function Pe(){if(me)return K;me=1;var r=Me(),t=/^\s+/;function o(e){return e&&e.slice(0,r(e)+1).replace(t,"")}return K=o,K}var Q,_e;function Se(){if(_e)return Q;_e=1;var r=ke(),t=r.Symbol;return Q=t,Q}var H,ve;function ze(){if(ve)return H;ve=1;var r=Se(),t=Object.prototype,o=t.hasOwnProperty,e=t.toString,c=r?r.toStringTag:void 0;function p(m){var l=o.call(m,c),f=m[c];try{m[c]=void 0;var n=!0}catch{}var u=e.call(m);return n&&(l?m[c]=f:delete m[c]),u}return H=p,H}var X,be;function Ge(){if(be)return X;be=1;var r=Object.prototype,t=r.toString;function o(e){return t.call(e)}return X=o,X}var Y,ge;function De(){if(ge)return Y;ge=1;var r=Se(),t=ze(),o=Ge(),e="[object Null]",c="[object Undefined]",p=r?r.toStringTag:void 0;function m(l){return l==null?l===void 0?c:e:p&&p in Object(l)?t(l):o(l)}return Y=m,Y}var J,ye;function Le(){if(ye)return J;ye=1;function r(t){return t!=null&&typeof t=="object"}return J=r,J}var Z,pe;function Fe(){if(pe)return Z;pe=1;var r=De(),t=Le(),o="[object Symbol]";function e(c){return typeof c=="symbol"||t(c)&&r(c)==o}return Z=e,Z}var $,he;function Ve(){if(he)return $;he=1;var r=Pe(),t=we(),o=Fe(),e=NaN,c=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,m=/^0o[0-7]+$/i,l=parseInt;function f(n){if(typeof n=="number")return n;if(o(n))return e;if(t(n)){var u=typeof n.valueOf=="function"?n.valueOf():n;n=t(u)?u+"":u}if(typeof n!="string")return n===0?n:+n;n=r(n);var v=p.test(n);return v||m.test(n)?l(n.slice(2),v?2:8):c.test(n)?e:+n}return $=f,$}var ee,Te;function We(){if(Te)return ee;Te=1;var r=we(),t=Be(),o=Ve(),e="Expected a function",c=Math.max,p=Math.min;function m(l,f,n){var u,v,i,_,s,T,I=0,U=!1,h=!1,b=!0;if(typeof l!="function")throw new TypeError(e);f=o(f)||0,r(n)&&(U=!!n.leading,h="maxWait"in n,i=h?c(o(n.maxWait)||0,f):i,b="trailing"in n?!!n.trailing:b);function x(d){var k=u,q=v;return u=v=void 0,I=d,_=l.apply(q,k),_}function a(d){return I=d,s=setTimeout(E,f),U?x(d):_}function g(d){var k=d-T,q=d-I,ae=f-k;return h?p(ae,i-q):ae}function te(d){var k=d-T,q=d-I;return T===void 0||k>=f||k<0||h&&q>=i}function E(){var d=t();if(te(d))return ne(d);s=setTimeout(E,g(d))}function ne(d){return s=void 0,b&&u?x(d):(u=v=void 0,_)}function Ie(){s!==void 0&&clearTimeout(s),I=0,u=T=v=s=void 0}function je(){return s===void 0?_:ne(t())}function P(){var d=t(),k=te(d);if(u=arguments,v=this,T=d,k){if(s===void 0)return a(T);if(h)return clearTimeout(s),s=setTimeout(E,f),x(T)}return s===void 0&&(s=setTimeout(E,f)),_}return P.cancel=Ie,P.flush=je,P}return ee=m,ee}var Ke=We();const Qe=xe(Ke),He=Oe({__name:"manage_acc",emits:["updateSidebar"],setup(r,{expose:t,emit:o}){t();const e=o,{t:c}=Re(),p=["all","active","ban"],m=re(()=>p.map(a=>({label:c(`admin.manage_acc.acc_status.${a}`),value:a}))),l=B(m.value[0].value),f=["all","Administrator","Moderator","User"],n=re(()=>f.map(a=>({label:c(`admin.manage_acc.acc_role.${a}`),value:a}))),u=B(n.value[0].value),v=B(""),i=async()=>{console.log({search:v.value,status:l.value,role:u.value}),h.keyword=v.value,l.value==="all"?delete h.IsBanned:h.IsBanned=l.value==="ban",h.role=u.value==="all"?"":u.value,b()};Ce(v,Qe(a=>{i()},300));const _=[{title:"ID",dataIndex:"id",customRender:({index:a})=>a+1,width:50,align:"center"},{title:"Fullname",dataIndex:"fullName",key:"fullName",sorter:(a,g)=>a.fullName.localeCompare(g.fullName),width:350,align:"center"},{title:"Email",dataIndex:"email",key:"email",sorter:(a,g)=>a.email.localeCompare(g.email),width:450,align:"center"},{title:"Token",dataIndex:"token",key:"token",sorter:(a,g)=>a.token-g.token,width:100,align:"center"},{title:"Role",dataIndex:"role",key:"role",sorter:(a,g)=>a.role.localeCompare(g.role),defaultSortOrder:"ascend",width:100,align:"center"},{title:"Ban",key:"ban",width:120,align:"center"}];qe(()=>{e("updateSidebar","account"),b()});const s=B([]);async function T(a){try{a.isBanned?M.confirm({title:"Confirm Ban User",content:"Are you sure you want to ban this user?",centered:!0,onOk:async()=>{await A.BanUser(a.id,{isBanned:!0}),await b()},onCancel:async()=>{await b()}}):M.confirm({title:"Confirm Active User",content:"Are you sure you want to activate this user?",centered:!0,onOk:async()=>{await A.BanUser(a.id,{isBanned:!1}),await b()},onCancel:async()=>{await b()}})}catch(g){console.error("Toggle active ERROR:",g)}}async function I(a){try{console.log("Promote uid: ",a.id),M.confirm({title:"Promote User to Moderator",content:"Are you sure you want to promote this user to Moderator?",centered:!0,onOk:async()=>{await A.AssignRole(a.id,{role:"Moderator"}),await b()},onCancel:async()=>{await b()}})}catch(g){console.error("Promote to Moderator:",g)}}async function U(a){try{console.log("Demote uid: ",a.id),M.confirm({title:"Demote Moderator to User",content:"Are you sure you want to demote this moderator to User?",centered:!0,onOk:async()=>{await A.AssignRole(a.id,{role:"User"}),await b()},onCancel:async()=>{await b()}})}catch(g){console.error("Toggle active ERROR:",g)}}const h=Ae({fieldName:"Email",keyword:"",pageNumber:1,pageSize:15}),b=async()=>{try{let a=await A.GetAllUser(h);a.data.success&&(s.value=a.data.data.items)}catch(a){console.log("ERROR: GETALLBYLIMIT testtemplate: "+a)}},x={emit:e,t:c,optionKeysAccStatus:p,account_status_credit_options:m,selected_acc_status_option:l,optionKeysAccRole:f,account_role_credit_options:n,selected_acc_role_option:u,searchValue:v,onFilter:i,columns:_,dataSource:s,onToggle:T,onPromoteToModerator:I,onDemoteToUser:U,payloadGetUsers:h,getUsersData:b,Input:Ee};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}}),Xe={class:"page-container"},Ye={class:"title-container"},Je={class:"content"},Ze={class:"filter-input-item"},$e={class:"filter-input-full"},et={class:"account-table"},tt={key:0,class:"action-cell"},nt=["onClick"],at=["onClick"];function rt(r,t,o,e,c,p){const m=O("a-col"),l=O("a-row"),f=O("a-select-option"),n=O("a-select"),u=O("a-switch"),v=O("a-table");return w(),R("div",Xe,[y(" header title "),j("div",Ye,[C(l,{class:"w-100"},{default:S(()=>[C(m,{class:"main-title",span:20},{default:S(()=>[j("span",null,z(e.t("admin.manage_acc.title")),1)]),_:1})]),_:1})]),j("div",Je,[y(" filter area "),j("div",Ze,[y(" filter text input  "),j("div",$e,[C(e.Input,{class:"custom-input",value:e.searchValue,"onUpdate:value":t[0]||(t[0]=i=>e.searchValue=i),placeholder:e.t("admin.manage_acc.search_placeholder")},{icon:S(()=>t[3]||(t[3]=[j("i",{class:"bx bx-search"},null,-1)])),_:1},8,["value","placeholder"])]),y(" filter account status "),C(n,{style:{width:"calc(19%)"},value:e.selected_acc_status_option,"onUpdate:value":t[1]||(t[1]=i=>e.selected_acc_status_option=i),onChange:e.onFilter},{default:S(()=>[(w(!0),R(oe,null,ie(e.account_status_credit_options,i=>(w(),G(f,{key:i.value,value:i.value},{default:S(()=>[ce(z(i.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"]),y(" filter account role "),C(n,{style:{width:"calc(19%)"},value:e.selected_acc_role_option,"onUpdate:value":t[2]||(t[2]=i=>e.selected_acc_role_option=i),onChange:e.onFilter},{default:S(()=>[(w(!0),R(oe,null,ie(e.account_role_credit_options,i=>(w(),G(f,{key:i.value,value:i.value},{default:S(()=>[ce(z(i.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),y(" table list account "),j("div",et,[C(v,{"data-source":e.dataSource,columns:e.columns,"row-key":"id"},{bodyCell:S(({column:i,record:_})=>[i.key==="ban"?(w(),R("div",tt,[y(" icon assign moderator "),_.role==="Moderator"?(w(),R("i",{key:0,class:"bx bx-id-card",title:"Demote moderator to User",style:{color:"#ff002e","font-size":"25px"},onClick:s=>e.onDemoteToUser(_)},null,8,nt)):y("v-if",!0),y(" icon assign user "),_.role==="User"?(w(),R("i",{key:1,class:"bx bx-id-card",title:"Promote user to Moderator",style:{color:"#fff","font-size":"25px"},onClick:s=>e.onPromoteToModerator(_)},null,8,at)):y("v-if",!0),y(" button ban.active user "),_.role!=="Administrator"?(w(),G(u,{key:2,checked:_.isBanned,"onUpdate:checked":s=>_.isBanned=s,title:"Ban/Active","checked-children":"","un-checked-children":"",onChange:s=>e.onToggle(_)},null,8,["checked","onUpdate:checked","onChange"])):y("v-if",!0)])):y("v-if",!0)]),_:1},8,["data-source"]),y(` <div class="pagination-container">
                    <a-pagination
                        @change="onPaginationChange"
                        v-model:current="pageParams.pageNumber"
                        :total="pageParams.totalCount"
                        :pageSize="pageParams.pageSize"
                        :show-total="
                            (total: any, range: any) =>
                                \`\${range[0]}-\${range[1]} of \${total} \${t('class_member.other.items')}\`
                        "
                        show-size-changer
                        show-quick-jumper
                        class="crud-layout-pagination"
                        :locale="{
                            items_per_page: t('class_index.other.pages'),
                        }"
                    ></a-pagination>
                </div> `)])])])}const st=Ue(He,[["render",rt],["__scopeId","data-v-a9d2c947"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/admin/account/manage_acc.vue"]]);export{st as default};
