var dt=Object.defineProperty;var mt=(_,n,T)=>n in _?dt(_,n,{enumerable:!0,configurable:!0,writable:!0,value:T}):_[n]=T;var oe=(_,n,T)=>mt(_,typeof n!="symbol"?n+"":n,T);import{H as ve,d as _t,u as vt,q as gt,l as ht,g as ft,i as d,z as Ue,j as pt,s as bt,R as yt,k as se,D as wt,S as Ct,_ as Qt,r as A,c as l,o as r,b as t,a as u,e as f,C as j,w as v,f as p,t as i,F as S,p as y,B as L}from"./index-DQ5VBJ-w.js";import{A as ie}from"./ApiQuestionSet-D7H97fGN.js";import{Q as M}from"./questionTypes-CS3lcRlq.js";import{T as St,l as Tt}from"./vue-draggable-plus-pUTbv92G.js";import{V as xt}from"./Validator-CWeiTIFe.js";import{D as It}from"./index-uZRR8qZ7.js";import{H as kt}from"./HolderOutlined-DHvCWaQi.js";/* empty css                                                                 */const At={HTML:"Html",PLAIN_TEXT:"PlainText"},Pe=[{id:"q1",quote:"Keep pushing. You're almost there!"},{id:"q2",quote:"Stay focused. You've got this!"},{id:"q3",quote:"One step at a time. Keep going!"},{id:"q4",quote:"You're doing great. Don't stop now!"},{id:"q5",quote:"Every effort counts. Keep it up!"},{id:"q6",quote:"Strong mind. Strong progress."},{id:"q7",quote:"Momentum is yours. Own it!"},{id:"q8",quote:"Eyes forward. Energy up!"},{id:"q9",quote:"You're closer than you think."},{id:"q10",quote:"Rise up. Power through!"}],Mt="/assets/trophy-BqY0IuVX.png",ge={GET_ALL_BY_QUESTION_ID:"Comment/Question/{questionId}",CREATE:"Comment/Question/{questionId}",REPLY:"Comment/{commentId}/Reply",DELETE:"Comment/{commentId}"};class qt{constructor(){oe(this,"GetAllByQuestionId",async n=>{const T=ge.GET_ALL_BY_QUESTION_ID.replace("{questionId}",n.questionId);return await ve.get(T,{params:{pageNumber:n.pageNumber,pageSize:n.pageSize}})});oe(this,"Create",async n=>{const T=ge.CREATE.replace("{questionId}",n.questionId);return await ve.post(T,n)});oe(this,"Reply",async n=>{const T=ge.REPLY.replace("{commentId}",n.commentId);return await ve.post(T,n)});oe(this,"Delete",async n=>{const T=ge.DELETE.replace("{commentId}",n);return await ve.delete(T)})}}const ae=new qt,Et=_t({__name:"learn",setup(_,{expose:n}){n();const T=new URL("/assets/confetti-bjvcnoca.lottie",import.meta.url).href,{t:e}=vt(),he=gt(),U=ht(),X=ft(),w=d({title:"",description:"",completedQuestionCount:0,totalQuestionCount:0,questions:[]}),E=d(he.params.id),N=d(!1),K=d(!0),W=async()=>{if(N.value=!0,!xt.isValidGuid(E.value.toString())){U.push({name:"404"});return}try{let o=await ie.GetDetailById(E.value.toString()),a=await ie.LearnQuestions(E.value.toString(),7);if(!o.data.success||!a.data.success){U.push({name:"404"});return}if(w.value=a.data.data,w.value.completedQuestionCount===w.value.totalQuestionCount){Ie();return}w.value.title=o.data.data.name,w.value.description=o.data.data.description,R.value=[...w.value.questions],g.value=R.value[0],R.value.shift()}catch(o){Object.keys(o.response.data.errors).includes(yt.PLAN_REQUIRE_PLAN)&&(K.value=!1,U.back())}finally{N.value=!1}},fe=d(w.value.completedQuestionCount),x=d([]),O=d(new Set),R=d([]),P=d(!1),g=d({}),z=d(""),s=d(!1),C=d(!1),q=d([]),I=Ue(()=>{var o;return(o=g.value.questionData.multipleChoice)==null?void 0:o.some(a=>a.text.length>=100)}),b=d([]),k=d([]),V=d([]),Y=d(""),D=d({result:!1,resultText:e("learn_QS.result.wrong")}),J=Ue(()=>Math.floor(w.value.completedQuestionCount/w.value.totalQuestionCount*100)),pe=()=>{var c;let o=(c=g.value.questionData.multipleChoice)==null?void 0:c.filter(m=>m.isAnswer).map(m=>m.id||[]).sort(),a=q.value.sort();return q.value.length!==(o==null?void 0:o.length)?!1:a.every((m,h)=>m===o[h])},ze=o=>{var h;const a=w.value.questions.findIndex(Q=>Q.id===g.value.id);let c=(h=w.value.questions[a].questionData.multipleChoice)==null?void 0:h.filter(Q=>Q.isAnswer).map(Q=>Q.id||[]),m=q.value;return c!=null&&c.includes(o.id)?!0:!(m!=null&&m.includes(o.id)&&!o.isAnswer)},be=()=>{var c;let o=((c=g.value.questionData.ordering)==null?void 0:c.map(m=>m.correctOrder).sort())||[];return V.value.map(m=>m.correctOrder).every((m,h)=>m===o[h])},ye=()=>{let o=g.value.questionData.matching.matches,a=b.value.map(h=>h.id),c=k.value.map(h=>h.id);return a.map((h,Q)=>({leftId:h,rightId:c[Q]})).every(h=>o.some(Q=>Q.leftId===h.leftId&&Q.rightId===h.rightId))},Ve=o=>{var Q,F;const a=g.value.questionData.matching;if(!a)return!1;let c=a.leftItems.some(H=>H.id===o),m=a.matches.find(H=>c?H.leftId===o:H.rightId===o);const h=c?b.value.findIndex(H=>H.id===o):k.value.findIndex(H=>H.id===o);return h===-1||!m?!1:c?((Q=k.value[h])==null?void 0:Q.id)===m.rightId:((F=b.value[h])==null?void 0:F.id)===m.leftId},we=o=>o.trim().toLowerCase().normalize("NFKC").replace(/[\u2019\u2018\u201B\u0060]/g,"'").replace(/\s+/g," "),Ce=()=>we(Y.value)===we(g.value.questionData.shortText),Ye=d(null),Qe=d(!1),Z=()=>{Qe.value=!Qe.value},Se=d(!1),Be=X.getUserInfo(),ee=d([]),re=d(""),te=d(null),le=d(!1),G=pt({pageNumber:1,pageSize:10,questionId:""}),B=d(!1),Te=d(1),ce=async()=>{B.value=!0;const o=await ae.GetAllByQuestionId(G);o.data.success&&(ee.value=o.data.data.items.filter(a=>!a.parentId),Te.value=o.data.data.totalPages),B.value=!1},Fe=async()=>{try{B.value=!0;let o;if(le.value&&te.value?o=await ae.Reply({commentId:te.value.id,content:re.value}):o=await ae.Create({questionId:g.value.id,content:re.value}),o.data.success){se.success(e("message.added_successfully")),await ce();return}se.error(e("message.added_failed"))}catch(o){console.log(o)}finally{B.value=!1}},Ge=async o=>{},je=async o=>{if((await ae.Delete(o)).data.success){se.success(e("message.deleted_successfully")),await ce();return}se.error(e("message.deleted_failed")),qe()},Xe=o=>{le.value=!0,te.value=o},qe=()=>{re.value="",le.value=!1,te.value=null},ue=d([]),Ke=o=>{ue.value[o]=!ue.value[o],$(`#reply-items-${o}`).slideToggle()},We=async()=>{G.pageNumber<Te.value&&(G.pageNumber+=1),B.value=!0;const o=await ae.GetAllByQuestionId(G);if(o.data.success){const a=o.data.data.items.filter(c=>!c.parentId);ee.value=[...ee.value,...a]}B.value=!1},Je=async()=>{Se.value=!0,G.questionId=g.value.id,await ce()},Ze=()=>{Se.value=!1},Ee=()=>{ie.LearnHistory(E.value.toString(),[{questionId:g.value.id,isCorrect:!0}])},$e=()=>{switch(Z(),s.value=!0,g.value.type){case M.MULTIPLE_CHOICE:{D.value={result:pe(),resultText:pe()?e("learn_QS.result.correct"):e("learn_QS.result.wrong")};break}case M.ORDERING:{D.value={result:be(),resultText:be()?e("learn_QS.result.correct"):e("learn_QS.result.wrong")};break}case M.MATCHING:{D.value={result:ye(),resultText:ye()?e("learn_QS.result.correct"):e("learn_QS.result.wrong")};break}case M.SHORT_TEXT:{D.value={result:Ce(),resultText:Ce()?e("learn_QS.result.correct"):e("learn_QS.result.wrong")};break}}const o=D.value.result,a=P.value,c=g.value;o?(a&&O.value.delete(c),x.value.push(c),w.value.completedQuestionCount++,Ee()):O.value.add(c),_e()},et=o=>{var a;switch(Z(),s.value=!0,C.value=!0,D.value={result:!1,resultText:e("learn_QS.result.skipped")},O.value.add(g.value),g.value.type){case M.MULTIPLE_CHOICE:{q.value=(a=g.value.questionData.multipleChoice)==null?void 0:a.filter(c=>c.isAnswer).map(c=>c.id);break}case M.MATCHING:{const c=g.value.questionData.matching,m=(c==null?void 0:c.matches)??[],h=(c==null?void 0:c.leftItems)??[],Q=(c==null?void 0:c.rightItems)??[],F=m.map(Ae=>h.find(Me=>Me.id==Ae.leftId)),H=m.map(Ae=>Q.find(Me=>Me.id==Ae.rightId));b.value=F,k.value=H;break}case M.ORDERING:{V.value=V.value.sort((c,m)=>c.correctOrder-m.correctOrder);break}case M.SHORT_TEXT:{Y.value=g.value.questionData.shortText;break}}_e()},de=()=>{var o;switch(g.value.type){case M.MULTIPLE_CHOICE:{z.value=e("learn_QS.instructions.multiple_choice",{number:(o=g.value.questionData.multipleChoice)==null?void 0:o.filter(a=>a.isAnswer).length}),q.value=[];break}case M.ORDERING:{z.value=e("learn_QS.instructions.matching"),V.value=g.value.questionData.ordering;break}case M.MATCHING:{z.value=e("learn_QS.instructions.ordering"),b.value=g.value.questionData.matching.leftItems,k.value=g.value.questionData.matching.rightItems;break}case M.SHORT_TEXT:{z.value=e("learn_QS.instructions.short_text"),Y.value="";break}}},tt=()=>{ne(),_e(),!(R.value.length<=0)&&(g.value=R.value.shift(),s.value=!1,C.value=!1,de(),Z())},me=d(!1),Oe=d(""),Le=()=>{Oe.value=e(`learn_QS.final_modal.quotes.${Pe[Math.floor(Math.random()*Pe.length)].id}`),setTimeout(()=>{me.value=!0},1e3)},Re=()=>{me.value=!1},_e=async()=>{if(R.value.length>0)return;const o=O.value.size>0;if(o&&!P.value){P.value=!0,R.value=Array.from(O.value);return}if(!o||P.value){if(o){const a=w.value.questions.filter(c=>O.value.has(c)).map(c=>({questionId:c.id,isCorrect:!1}));await ie.LearnHistory(E.value.toString(),a)}Le()}},nt=(o,a)=>{$(a).toggleClass("bx-chevron-down bx-chevron-up");const m=$(`#question-item-answer-${o}`);m&&$(m).slideToggle()},ot=async()=>{if(w.value.completedQuestionCount===w.value.totalQuestionCount){Re(),Ie();return}await W(),P.value=!1,C.value=!1,s.value=!1,z.value="",me.value=!1,O.value=new Set,x.value=[],Z(),de(),ne()},xe=d(!1),Ie=()=>{xe.value=!0,He()},De=d(),ke=d(!1),He=()=>{var o,a;ke.value=!0,(a=(o=De.value)==null?void 0:o.getDotLottieInstance())==null||a.play(),setTimeout(()=>{ke.value=!1},5e3)},st=async()=>{(await ie.resetLearnHistory(E.value.toString())).data.success&&(se.success(e("learn_QS.msg.learn_mode_reset")),xe.value=!1,window.location.reload())},it={scroll:!0,scrollSensitivity:100,scrollSpeed:100,scrollTarget:document.scrollingElement};function ne(){wt(()=>{requestAnimationFrame(()=>{const o=document.querySelectorAll(".matching-option-container.left .answer-option-matching"),a=document.querySelectorAll(".matching-option-container.right .answer-option-matching"),c=Math.min(o.length,a.length);for(let m=0;m<c;m++){const h=o[m],Q=a[m];if(!h||!Q)continue;h.style.height="auto",Q.style.height="auto";const F=Math.max(h.offsetHeight,Q.offsetHeight);h.style.height=`${F}px`,Q.style.height=`${F}px`}})})}const at=()=>{sessionStorage.setItem("setting_key","Subscription"),U.push({name:"User_Settings"})},rt=()=>{U.push({name:"User_QuestionSet_Test",params:{id:E.value}})},lt=()=>{U.push({name:"User_Library"})},ct=o=>{if(!o)return!1;let a=o==null?void 0:o.replace(/`[^`]*`/g,"");return a=a.trim().replace(/^<p>/i,"").replace(/<\/p>$/i,""),a.includes("<pre>")&&a.includes("</pre>")||a.includes("<code>")&&a.includes("</code>")||a.includes("<strong>")&&a.includes("</strong>")||a.includes("<i>")&&a.includes("</i>")||a.includes("<u>")&&a.includes("</u>")||a.includes("<ul>")&&a.includes("</ul>")||a.includes("<ol>")&&a.includes("</ol>")||a.includes("<li>")&&a.includes("</li>")},ut=o=>o?o.replace(/^<p>/i,"").replace(/<\/p>$/i,"").replace("<","'<").replace(">",">'"):"";bt(async()=>{await W(),de(),ne(),window.addEventListener("resize",ne),ue.value=ee.value.map(()=>!1)});const Ne={animationPath:T,t:e,route:he,router:U,authStore:X,quiz:w,questionSetId:E,loading:N,isAllowed:K,getQuizData:W,totalCompleted:fe,completed:x,incorrect:O,currentSession:R,isCurrentSessionReLearn:P,currentQuestion:g,currentQuestionInstruction:z,currentQuestionIsSubmitted:s,currentQuestionIsSkipped:C,userAnswerMultipleChoice:q,isOptionExceed:I,userAnswerMatchingLeft:b,userAnswerMatchingRight:k,userAnswerOrdering:V,userAnswerShortText:Y,currentQuestionResult:D,completionPercentage:J,checkMultipleChoice:pe,checkMultipleChoiceAnswerCorrect:ze,checkOrdering:be,checkMatching:ye,checkMatchingAnswerCorrect:Ve,cleanShortTextAnswer:we,checkShortText:Ce,explainModal:Ye,explainModalOpen:Qe,toggleExplainModal:Z,commentModalOpen:Se,user_info:Be,currentQuestionComments:ee,commentValue:re,chosenComment:te,isReplying:le,commentPageParams:G,commentLoading:B,commentTotalPage:Te,getCommentData:ce,onAddComment:Fe,onEditComment:Ge,onDeleteComment:je,onTriggerReply:Xe,onCancelReplying:qe,repliesOpen:ue,onToggleReplyContainer:Ke,onLoadMoreComment:We,onOpenCommentModal:Je,onCloseCommentModal:Ze,sendCorrectQuestionHistory:Ee,onSubmitAnswer:$e,onSkipQuestion:et,resetUserAnswer:de,onNextQuestion:tt,finalModalOpen:me,finalModalQuote:Oe,openFinalModal:Le,closeFinalModal:Re,triggerFinalModal:_e,toggleDisplayAnswer:nt,onContinuesLearn:ot,completeModalOpen:xe,openCompleteModal:Ie,animationRef:De,isAnimationDisplaying:ke,triggerAnimation:He,onResetLearnHistory:st,dragOptions:it,syncMatchingHeights:ne,onRedirectToSubcription:at,onRedirectToTest:rt,onRedirectToLibrary:lt,isHTMLContent:ct,processTextWithHtmlTag:ut,get QUESTION_FORMAT(){return At},get QUESTION_TYPE(){return M},TextArea:St,get VueDraggable(){return Tt},get HolderOutlined(){return kt},get dayjs(){return Ct},get DotLottieVue(){return It},get trophy_png(){return Mt}};return Object.defineProperty(Ne,"__isScriptSetup",{enumerable:!1,value:!0}),Ne}}),Ot={class:"page-container"},Lt={class:"title-container"},Rt={key:1,class:"progress-bar-container"},Dt={class:"progress-info"},Ht={class:"progress-info-number"},Nt={class:"progress-info-percentage"},Ut={class:"content"},Pt={class:"content-item"},zt={class:"section question-section"},Vt=["innerHTML"],Yt={key:1,class:"learn-question text"},Bt={class:"section answer-section"},Ft={key:0,class:"relearn-ins"},Gt={class:"d-flex align-items-center"},jt={class:"answer-section-ins"},Xt={class:"answer-option-content"},Kt={key:0,class:"bx bx-check answer-icon"},Wt={key:1,class:"bx bx-x answer-icon"},Jt={key:2,class:"answer-option-container matching"},Zt={class:"matching-option-container left"},$t={class:"d-flex align-items-center"},en={class:"answer-option-order"},tn={class:"answer-option-content"},nn={class:"matching-option-container right"},on={class:"d-flex align-items-center"},sn={class:"answer-option-content"},an={class:"answer-option-order"},rn={key:3,class:"answer-option-container ordering"},ln={class:"answer-option-order"},cn={class:"answer-option-content"},un={key:4,class:"answer-option-container"},dn={class:"w-100 d-flex align-items-center"},mn={key:0,class:"bx bx-check answer-icon"},_n={key:1,class:"bx bx-x answer-icon"},vn={key:0,class:"short-text-correct-answer"},gn={class:"learn-question-footer"},hn={class:"d-flex"},fn=["innerHTML"],pn={key:1,class:"learn-question-explain text"},bn={class:"comment-section"},yn={class:"comment-container"},wn={class:"comment-main-content"},Cn={class:"w-100 d-flex flex-column"},Qn={class:"comment-content-info"},Sn={key:0,class:"comment-actions"},Tn={class:"comment-content"},xn={class:"comment-reply"},In=["onClick"],kn=["onClick"],An=["id"],Mn={class:"comment-item"},qn={class:"comment-main-content"},En={class:"w-100 d-flex flex-column"},On={class:"comment-content-info"},Ln={key:0,class:"comment-actions"},Rn={class:"comment-content"},Dn={key:1,class:"w-100 h-100 d-flex justify-content-center align-items-center"},Hn={key:0},Nn={key:1},Un={class:"comment-form-footer"},Pn={class:"title-container"},zn={class:"content-item modal-final-container"},Vn={class:"final-modal-quote"},Yn={class:"progress-bar-container final"},Bn={class:"progress-info"},Fn={class:"progress-info-percentage"},Gn={class:"progress-info"},jn={class:"progress-info-percentage"},Xn={class:"progress-info-percentage"},Kn={class:"content-item modal-final-container"},Wn={class:"preview-question-title"},Jn={class:"preview-question-container"},Zn={class:"preview-question-item"},$n={class:"question-item-content"},eo=["innerHTML"],to={key:1,class:"question-text"},no=["id"],oo={key:0,class:"multiple-choice-answer"},so={key:0,class:"text-success"},io={class:"pair-answer"},ao={class:"pair-answer-item"},ro={class:"pair-answer-item"},lo={key:2,class:"ordering-answer"},co={class:"ordering-answer-item"},uo={class:"ordering-answer-item"},mo={class:"ordering-answer-item"},_o={class:"short-text-answer"},vo={class:"question-item-toogle-btn"},go=["onClick"],ho={class:"content-item final-modal-footer"},fo={class:"modal-complete-container"},po={class:"content-item modal-complete"},bo=["src"],yo={class:"modal-complete-content-container"},wo={class:"modal-complete-content"},Co={class:"modal-complete-content sub-content"},Qo={class:"modal-complete-buttons-container"};function So(_,n,T,e,he,U){const X=A("RouterLink"),w=A("a-col"),E=A("a-row"),N=A("a-skeleton"),K=A("a-progress"),W=A("a-checkbox"),fe=A("a-checkbox-group"),x=A("a-button"),O=A("a-popconfirm"),R=A("a-empty"),P=A("a-form"),g=A("a-drawer"),z=A("a-divider");return r(),l(S,null,[t("div",Ot,[t("div",Lt,[u(E,{class:"w-100 d-flex align-items-center"},{default:v(()=>[u(w,{span:1},{default:v(()=>[u(X,{to:{name:"User_Library"}},{default:v(()=>n[8]||(n[8]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[8]})]),_:1}),u(w,{class:"main-title",span:23},{default:v(()=>[t("span",null,i(e.quiz.title),1),n[9]||(n[9]=p()),n[10]||(n[10]=t("br",null,null,-1)),t("span",null,i(e.quiz.description),1)]),_:1,__:[9,10]})]),_:1})]),e.loading?(r(),j(N,{key:0,"activeactive:loading":"loading"})):(r(),l("div",Rt,[t("div",Dt,[t("div",Ht,i(_.$t("learn_QS.other.progress_count",{current:e.quiz.completedQuestionCount,total:e.quiz.totalQuestionCount})),1),t("div",Nt,[t("span",null,i(e.completionPercentage),1),p(" % "+i(_.$t("learn_QS.other.completed")),1)])]),u(K,{"show-info":!1,"stroke-color":"var(--main-color)",status:"active",percent:e.completionPercentage},null,8,["percent"])])),t("div",Ut,[t("div",Pt,[e.loading?(r(),l(S,{key:0},[u(N,{active:"",loading:e.loading},null,8,["loading"]),u(N,{active:"",loading:e.loading},null,8,["loading"]),u(N,{active:"",loading:e.loading},null,8,["loading"])],64)):(r(),l(S,{key:1},[t("div",zt,[e.isHTMLContent(e.currentQuestion.questionText)?(r(),l("div",{key:0,class:"learn-question html",innerHTML:e.currentQuestion.questionText},null,8,Vt)):(r(),l("div",Yt,i(e.processTextWithHtmlTag(e.currentQuestion.questionText)),1)),f(` <div
                                :class="[
                                    'learn-question',
                                    currentQuestion.textFormat === QUESTION_FORMAT.HTML
                                        ? 'd-none'
                                        : '',
                                ]"
                            >
                                {{ currentQuestion.questionText }}
                            </div> `),t("div",Bt,[e.isCurrentSessionReLearn?(r(),l("div",Ft,i(_.$t("learn_QS.instructions.re_learn_ins")),1)):f("v-if",!0),t("div",Gt,[t("div",jt,i(e.currentQuestionInstruction),1),t("div",{class:y(["ms-3 learn-question-result",e.currentQuestionIsSubmitted?"":"d-none",e.currentQuestionIsSubmitted?e.currentQuestionResult.result?"result-correct":"result-incorrect":"",e.currentQuestionIsSkipped?"result-skipped":""])},i(e.currentQuestionResult.resultText),3)]),e.currentQuestion.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(r(),j(fe,{key:1,value:e.userAnswerMultipleChoice,"onUpdate:value":n[0]||(n[0]=s=>e.userAnswerMultipleChoice=s),class:y(["answer-option-container multiplechoice",e.isOptionExceed?"column":""])},{default:v(()=>[(r(!0),l(S,null,L(e.currentQuestion.questionData.multipleChoice,s=>(r(),j(W,{value:s.id,"onUpdate:value":C=>s.id=C,disabled:e.currentQuestionIsSubmitted,class:y(["answer-option answer-option-multiplechoice",e.currentQuestionIsSubmitted&&e.checkMultipleChoiceAnswerCorrect(s)&&s.isAnswer?"answer-correct":"",e.currentQuestionIsSubmitted&&!e.checkMultipleChoiceAnswerCorrect(s)&&!s.isAnswer?"answer-incorrect":""])},{default:v(()=>[t("div",Xt,i(s.text),1),e.currentQuestionIsSubmitted&&e.checkMultipleChoiceAnswerCorrect(s)&&s.isAnswer?(r(),l("i",Kt)):f("v-if",!0),e.currentQuestionIsSubmitted&&!e.checkMultipleChoiceAnswerCorrect(s)&&!s.isAnswer?(r(),l("i",Wt)):f("v-if",!0)]),_:2},1032,["value","onUpdate:value","disabled","class"]))),256))]),_:1},8,["value","class"])):f("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.MATCHING?(r(),l("div",Jt,[t("div",Zt,[u(e.VueDraggable,{disabled:e.currentQuestionIsSubmitted,modelValue:e.userAnswerMatchingLeft,"onUpdate:modelValue":n[1]||(n[1]=s=>e.userAnswerMatchingLeft=s),options:e.dragOptions,onEnd:e.syncMatchingHeights},{default:v(()=>[(r(!0),l(S,null,L(e.userAnswerMatchingLeft,(s,C)=>(r(),l("div",$t,[t("div",{class:y(["answer-option answer-option-matching",e.currentQuestionIsSubmitted?e.checkMatchingAnswerCorrect(s.id)?"answer-correct":"answer-incorrect":""])},[t("div",en,[u(e.HolderOutlined)]),t("div",tn,i(s.text),1)],2),t("i",{class:y(["bx bxs-label matching-icon",e.currentQuestionIsSubmitted?e.checkMatchingAnswerCorrect(s.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2)]))),256))]),_:1},8,["disabled","modelValue"])]),t("div",nn,[u(e.VueDraggable,{disabled:e.currentQuestionIsSubmitted,modelValue:e.userAnswerMatchingRight,"onUpdate:modelValue":n[2]||(n[2]=s=>e.userAnswerMatchingRight=s),options:e.dragOptions,onEnd:e.syncMatchingHeights},{default:v(()=>[(r(!0),l(S,null,L(e.userAnswerMatchingRight,(s,C)=>(r(),l("div",on,[t("i",{class:y(["bx bxs-label matching-icon",e.currentQuestionIsSubmitted?e.checkMatchingAnswerCorrect(s.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2),t("div",{class:y(["answer-option answer-option-matching",e.currentQuestionIsSubmitted?e.checkMatchingAnswerCorrect(s.id)?"answer-correct":"answer-incorrect":""])},[t("div",sn,i(s.text),1),t("div",an,[u(e.HolderOutlined)])],2)]))),256))]),_:1},8,["disabled","modelValue"])])])):f("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.ORDERING?(r(),l("div",rn,[u(e.VueDraggable,{disabled:e.currentQuestionIsSubmitted,modelValue:e.userAnswerOrdering,"onUpdate:modelValue":n[3]||(n[3]=s=>e.userAnswerOrdering=s),options:e.dragOptions},{default:v(()=>[(r(!0),l(S,null,L(e.userAnswerOrdering,(s,C)=>(r(),l("div",{class:y(["answer-option answer-option-ordering",e.currentQuestionIsSubmitted?C===s.correctOrder?"answer-correct":"answer-incorrect":""])},[t("div",ln,[u(e.HolderOutlined),p(" "+i(C+1),1)]),t("div",cn,i(s.text),1),t("div",{class:y(["answer-option-order answer-icon",e.currentQuestionIsSubmitted?"":"d-none"])},[n[11]||(n[11]=t("i",{class:"bx bx-hash answer-icon"},null,-1)),p(" "+i(s.correctOrder),1)],2)],2))),256))]),_:1},8,["disabled","modelValue"])])):f("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.SHORT_TEXT?(r(),l("div",un,[t("div",{layout:"vertical",class:y(["answer-short-text",e.currentQuestionIsSubmitted?e.checkShortText()?"answer-correct":"answer-incorrect":""])},[t("div",dn,[u(e.TextArea,{readonly:e.currentQuestionIsSubmitted,placeholder:"Enter your answer...",modelValue:e.userAnswerShortText,"onUpdate:modelValue":n[4]||(n[4]=s=>e.userAnswerShortText=s)},null,8,["readonly","modelValue"]),e.currentQuestionIsSubmitted&&e.checkShortText()?(r(),l("i",mn)):f("v-if",!0),e.currentQuestionIsSubmitted&&!e.checkShortText()?(r(),l("i",_n)):f("v-if",!0)]),e.currentQuestionIsSubmitted&&!e.checkShortText()?(r(),l("div",vn,[p(i(_.$t("learn_QS.instructions.short_text_answer"))+" ",1),t("span",null,i(e.currentQuestion.questionData.shortText),1)])):f("v-if",!0)],2)])):f("v-if",!0)])]),t("div",gn,[t("div",{class:y(["main-color-btn-ghost",e.currentQuestionIsSubmitted?"main-color-btn-ghost-disabled":""]),onClick:n[5]||(n[5]=s=>e.onSkipQuestion(s))},i(_.$t("learn_QS.buttons.dont_know")),3),t("div",hn,[t("div",{class:y(["main-color-btn-ghost me-3",e.currentQuestionIsSubmitted?"":"d-none"]),onClick:e.onOpenCommentModal},[n[12]||(n[12]=t("i",{class:"bx bx-conversation me-2"},null,-1)),p(" "+i(_.$t("learn_QS.buttons.comment")),1)],2),t("div",{class:y(["main-color-btn-ghost me-3",e.currentQuestionIsSubmitted?"":"d-none"]),onClick:e.toggleExplainModal},[n[13]||(n[13]=t("i",{class:"bx bx-bulb me-2"},null,-1)),p(" "+i(_.$t("learn_QS.buttons.explaination")),1)],2),u(x,{class:y(["main-color-btn",e.currentQuestionIsSubmitted?"main-color-btn-disabled":""]),type:"primary",size:"large",onClick:e.onSubmitAnswer},{default:v(()=>[p(i(_.$t("learn_QS.buttons.submit")),1)]),_:1},8,["class"])])])],64))]),t("div",{ref:"explainModal",class:y(["explain-modal explain-modal-up",{show:e.explainModalOpen}])},[e.isHTMLContent(e.currentQuestion.explainText)?(r(),l("div",{key:0,class:"learn-question-explain html",innerHTML:e.currentQuestion.explainText},null,8,fn)):(r(),l("div",pn,i(e.processTextWithHtmlTag(e.currentQuestion.explainText)),1)),u(x,{class:y(["main-color-btn close-modal-btn"]),type:"primary",size:"large",onClick:e.toggleExplainModal},{default:v(()=>n[14]||(n[14]=[t("i",{class:"bx bx-chevrons-down"},null,-1)])),_:1,__:[14]}),u(x,{class:y(["main-color-btn",e.currentSession.length<=0?"main-color-btn-disabled":""]),type:"primary",size:"large",onClick:e.onNextQuestion},{default:v(()=>[p(i(_.$t("learn_QS.buttons.next_question"))+" ",1),n[15]||(n[15]=t("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[15]},8,["class"])],2),u(g,{width:500,title:"Comment section",placement:"right",open:e.commentModalOpen,onClose:e.onCloseCommentModal},{default:v(()=>[t("div",bn,[t("div",yn,[e.currentQuestionComments.length>0?(r(),l(S,{key:0},[(r(!0),l(S,null,L(e.currentQuestionComments,(s,C)=>{var q;return r(),l("div",{class:y(["comment-item",((q=e.chosenComment)==null?void 0:q.id)===s.id?"comment-item-chosen":""])},[t("div",wn,[n[19]||(n[19]=t("i",{class:"bx bx-user-circle comment-user-img"},null,-1)),t("div",Cn,[t("div",Qn,[p(i(s.createBy.fullName)+" ",1),t("span",null,i(e.dayjs(s.createdAt).format("DD/MM/YYYY HH:mm")),1),s.createBy.userId===e.user_info.id?(r(),l("div",Sn,[f(` <i
                                                        class="me-3 bx bx-edit"
                                                        @click="onEditComment(comment.id)"
                                                    ></i> `),u(O,{class:"pop-confirm-delete",title:_.$t("create_QS.quiz.confirm"),onConfirm:I=>e.onDeleteComment(s.id)},{default:v(()=>[...n[16]||(n[16]=[t("i",{class:"text-danger bx bx-trash-alt"},null,-1)])]),_:2},1032,["title","onConfirm"])])):f("v-if",!0)]),t("div",Tn,i(s.content),1),t("div",xn,[t("div",{class:"comment-reply-btn",onClick:I=>e.onTriggerReply(s)}," Reply ",8,In),t("div",{class:"comment-children-open-btn",onClick:I=>e.onToggleReplyContainer(C)},i(e.repliesOpen[C]?"Close":"View")+" ("+i(s.childComments.length)+") replies ",9,kn)]),t("div",{id:"reply-items-"+C,class:"child-comment-container",style:{display:"none"}},[(r(!0),l(S,null,L(s.childComments,(I,b)=>(r(),l("div",Mn,[t("div",qn,[n[18]||(n[18]=t("i",{class:"bx bx-user-circle comment-user-img"},null,-1)),t("div",En,[t("div",On,[p(i(I.createBy.fullName)+" ",1),t("span",null,i(e.dayjs(I.createdAt).format("DD/MM/YYYY HH:mm")),1),I.createBy.userId===e.user_info.id?(r(),l("div",Ln,[f(` <i
                                                                        class="me-3 bx bx-edit"
                                                                        @click="
                                                                            onEditComment(
                                                                                childComment.id,
                                                                            )
                                                                        "
                                                                    ></i> `),u(O,{class:"pop-confirm-delete",title:_.$t("create_QS.quiz.confirm"),onConfirm:k=>e.onDeleteComment(I.id)},{default:v(()=>[...n[17]||(n[17]=[t("i",{class:"text-danger bx bx-trash-alt"},null,-1)])]),_:2},1032,["title","onConfirm"])])):f("v-if",!0)]),t("div",Rn,i(I.content),1)])])]))),256))],8,An)])])],2)}),256)),e.commentLoading?(r(),j(N,{key:0,loading:e.commentLoading},null,8,["loading"])):f("v-if",!0),e.commentPageParams.pageNumber<e.commentTotalPage?(r(),j(x,{key:1,type:"primary",class:"main-color-btn",onClick:e.onLoadMoreComment,loading:e.commentLoading},{default:v(()=>n[20]||(n[20]=[p(" Load more ")])),_:1,__:[20]},8,["loading"])):f("v-if",!0)],64)):(r(),l("div",Dn,[u(R,null,{description:v(()=>n[21]||(n[21]=[t("span",null,"No one has commented yet.",-1)])),_:1})]))]),u(P,{layout:"vertical",class:"comment-form"},{default:v(()=>{var s;return[e.isReplying?(r(),l("label",Hn," Replying to @"+i((s=e.chosenComment)==null?void 0:s.createBy.fullName),1)):(r(),l("label",Nn,"Your comment")),u(e.TextArea,{value:e.commentValue,"onUpdate:value":n[6]||(n[6]=C=>e.commentValue=C),placeholder:"Enter comment","max-length":500},null,8,["value"]),t("div",Un,[u(x,{type:"primary",shape:"round",class:y(["me-3 main-color-btn-ghost",e.isReplying?"":"main-color-btn-ghost-disabled"]),onClick:e.onCancelReplying},{default:v(()=>[p(i(_.$t("learn_QS.buttons.cancel")),1)]),_:1},8,["class"]),u(x,{loading:e.commentLoading,type:"primary",shape:"round",class:y(["main-color-btn",e.commentValue?"":"main-color-btn-disabled"]),onClick:e.onAddComment},{default:v(()=>[p(i(_.$t("learn_QS.buttons.send_comment")),1)]),_:1},8,["loading","class"])])]}),_:1})])]),_:1},8,["open"])])]),u(g,{open:e.finalModalOpen,placement:"top",height:"100vh",closable:!1,onClose:e.closeFinalModal,"body-style":{padding:0,height:"100%"}},{title:v(()=>[t("div",Pn,[u(E,{class:"w-100 d-flex align-items-center"},{default:v(()=>[u(w,{span:1},{default:v(()=>[u(X,{to:{name:"User_Library"}},{default:v(()=>n[22]||(n[22]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[22]})]),_:1}),u(w,{class:"main-title",span:23},{default:v(()=>[t("span",null,i(e.quiz.title),1),n[23]||(n[23]=p()),n[24]||(n[24]=t("br",null,null,-1))]),_:1,__:[23,24]})]),_:1})])]),default:v(()=>[t("div",zn,[t("div",Vn,i(e.finalModalQuote),1)]),t("div",Yn,[t("div",Bn,[t("div",Fn,[p(i(_.$t("learn_QS.other.total_set_progress"))+" ",1),t("span",null,i(e.completionPercentage)+"%",1)])]),u(K,{"show-info":!1,"stroke-color":"#7C3AED",status:"active",percent:e.completionPercentage},null,8,["percent"]),t("div",Gn,[t("div",jn,[p(i(_.$t("learn_QS.other.completed"))+": ",1),t("span",null,i(e.quiz.completedQuestionCount),1)]),t("div",Xn,[p(i(_.$t("learn_QS.other.total_question"))+" ",1),t("span",null,i(e.quiz.totalQuestionCount),1)])])]),t("div",Kn,[u(z,{style:{"background-color":"var(--content-item-border-color)"}}),t("div",Wn,i(_.$t("learn_QS.other.preview_modal_title")),1),t("div",Jn,[(r(!0),l(S,null,L(e.completed,(s,C)=>{var q,I;return r(),l("div",Zn,[t("div",$n,[s.textFormat===e.QUESTION_FORMAT.HTML?(r(),l("div",{key:0,class:"question-html",innerHTML:s.questionText},null,8,eo)):(r(),l("div",to,i(s.questionText),1)),t("div",{class:"question-item-answer",id:`question-item-answer-${C}`},[s.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(r(),l("div",oo,[t("ul",null,[(r(!0),l(S,null,L(s.questionData.multipleChoice,b=>(r(),l("li",null,[p(i(b.text)+" ",1),b.isAnswer?(r(),l("span",so," ("+i(b.isAnswer)+") ",1)):f("v-if",!0)]))),256))])])):f("v-if",!0),s.type===e.QUESTION_TYPE.MATCHING?(r(!0),l(S,{key:1},L((q=s.questionData.matching)==null?void 0:q.matches,b=>{var k,V,Y,D;return r(),l("div",io,[t("span",ao,i((V=(k=s.questionData.matching)==null?void 0:k.leftItems.find(J=>J.id===b.leftId))==null?void 0:V.text),1),n[25]||(n[25]=t("i",{class:"bx bx-right-arrow-alt"},null,-1)),t("span",ro,i((D=(Y=s.questionData.matching)==null?void 0:Y.rightItems.find(J=>J.id===b.rightId))==null?void 0:D.text),1)])}),256)):f("v-if",!0),s.type===e.QUESTION_TYPE.ORDERING?(r(),l("div",lo,[t("div",co,[(r(!0),l(S,null,L(s.questionData.ordering,b=>(r(),l("div",null,i(b.text),1))),256))]),n[26]||(n[26]=t("i",{class:"bx bx-right-arrow-alt"},null,-1)),t("div",uo,[(r(!0),l(S,null,L((I=s.questionData.ordering)==null?void 0:I.sort((b,k)=>b.correctOrder-k.correctOrder),(b,k)=>(r(),l("div",mo,[t("span",null,"#"+i(b.correctOrder),1),p(" - "+i(b.text),1)]))),256))])])):f("v-if",!0),s.type===e.QUESTION_TYPE.SHORT_TEXT?(r(),l(S,{key:3},[n[27]||(n[27]=t("span",null,"Answer:",-1)),t("div",_o,i(s.questionData.shortText),1)],64)):f("v-if",!0)],8,no)]),t("div",vo,[t("i",{class:"bx bx-chevron-up",onClick:b=>e.toggleDisplayAnswer(C,b.currentTarget)},null,8,go)])])}),256))]),t("div",ho,[t("div",null,i(_.$t("learn_QS.other.preview_modal_continues_ins")),1),u(x,{class:y(["main-color-btn"]),type:"primary",size:"large",shape:"round",onClick:e.onContinuesLearn},{default:v(()=>[p(i(_.$t("learn_QS.buttons.continue")),1)]),_:1})])])]),_:1},8,["open"]),u(g,{open:e.completeModalOpen,placement:"top",height:"100vh",closable:!1,onClose:e.closeFinalModal,"body-style":{padding:0,height:"100%"}},{default:v(()=>[e.isAnimationDisplaying?(r(),j(e.DotLottieVue,{key:0,autoplay:e.isAnimationDisplaying,ref:"animationRef",class:y(["animation-container"]),onComplete:n[7]||(n[7]=s=>e.isAnimationDisplaying=!1),src:e.animationPath},null,8,["autoplay","src"])):f("v-if",!0),t("div",fo,[t("div",po,[t("img",{class:"modal-complete-img",src:e.trophy_png,alt:""},null,8,bo),t("div",yo,[t("div",wo,i(_.$t("learn_QS.other.complete_modal_congratulation")),1),t("div",Co,i(_.$t("learn_QS.other.complete_modal_ins")),1)]),t("div",Qo,[u(x,{type:"primary",class:"main-color-btn-ghost",size:"large",onClick:e.onRedirectToLibrary},{default:v(()=>[p(i(_.$t("learn_QS.buttons.back_to_home")),1)]),_:1}),u(x,{type:"primary",class:"main-color-btn",size:"large",onClick:e.onRedirectToTest},{default:v(()=>[p(i(_.$t("learn_QS.buttons.take_a_test")),1)]),_:1}),u(x,{type:"primary",class:"main-color-btn",size:"large",onClick:e.onResetLearnHistory},{default:v(()=>[p(i(_.$t("learn_QS.buttons.reset_learn_mode")),1)]),_:1})])])])]),_:1},8,["open"]),f(` <template v-else>
        <div class="page-container">
            <div class="w-100 h-100 d-flex align-items-center justify-content-center">
                <a-result
                    status="error"
                    :title="t('now_allowed.main_msg')"
                    :sub-title="t('now_allowed.errorMessage')"
                >
                    <template #icon>
                        <CloseSquareFilled />
                    </template>
                    <template #extra>
                        <div class="d-flex justify-content-center">
                            <a-button key="console" type="primary" class="me-3 main-color-btn">
                                {{ $t("now_allowed.libraryNavigator") }}
                            </a-button>
                            <a-button
                                @click="onRedirectToSubcription"
                                key="buy"
                                type="ghost"
                                class="main-color-btn-ghost"
                            >
                                {{ $t("now_allowed.subscriptionNavigator") }}
                            </a-button>
                        </div>
                    </template></a-result
                >
            </div>
        </div>
    </template> `)],64)}const Lo=Qt(Et,[["render",So],["__scopeId","data-v-5fe31f19"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/question_sets/learn.vue"]]);export{Lo as default};
