import{d as A,q as E,l as O,u as L,i as S,j as Q,C as B,s as V,M,k as T,_ as j,r as q,a as b,o as p,b as t,c as r,w as u,f as h,t as o,e as P,F as N,D as G,E as Y}from"./index-Cmj4Sauw.js";import{A as I}from"./ApiClass-D7Qkk9XC.js";import{I as X}from"./Input-7s2qH2uT.js";import{C as H}from"./classStudentPosition-B7ChrNvq.js";const J=A({__name:"quiz",emits:["updateSidebar"],setup(l,{expose:n,emit:k}){var x;n();const e=E(),g=O(),{t:d}=L(),_=k,c=S(e.params.id||""),f=S({classId:"",name:"",topic:""}),a=Q({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,name:((x=e.query.name)==null?void 0:x.toString())||"",totalCount:0,statusFilter:!1}),z=S([]),C=S(""),i=S(!1),v=async()=>{try{const s=await I.GetUserPermission(f.value.classId);s.data.success&&(C.value=s.data.data)}catch(s){console.log(s)}},D=async()=>{try{c.value||g.push({name:"404"});let s=await I.GetById(c.value.toString());s.data.success||g.push({name:"404"}),f.value=s.data.data}catch(s){console.log("ERROR: GETBYID class: "+s)}},y=async()=>{try{i.value=!0;let s=await I.GetAllQSByLimit(c.value.toString(),a);if(s.data.success){let m=s.data.data;z.value=m.items,a.pageNumber=m.pageNumber,a.pageSize=m.pageSize,a.totalCount=m.totalCount,a.statusFilter&&(a.pageNumber>m.totalPages&&a.totalCount>0?(a.pageNumber=1,g.push({name:"User_Class_Quiz",params:{id:c.value},query:{pageNumber:1,pageSize:a.pageSize,name:a.name}})):g.push({name:"User_Class_Quiz",params:{id:c.value},query:{pageNumber:a.pageNumber,pageSize:a.pageSize,name:a.name}}),a.statusFilter=!a.statusFilter)}}catch(s){console.log("ERROR: GETALLEXAMBYLIMIT class qs: "+s)}finally{i.value=!1}};B(()=>Object.keys(e.query).length,()=>{var s;a.pageNumber=e.query.pageNumber||1,a.pageSize=e.query.pageSize||10,a.name=((s=e.query.name)==null?void 0:s.toString())||"",a.statusFilter=!0,y()});const R=(s,m)=>{a.pageNumber=s,a.pageSize=m,a.statusFilter=!0,y()},F=s=>{M.confirm({title:d("class_question_set.modal.delete_title"),content:d("class_question_set.modal.delete_content"),okText:d("sidebar.buttons.ok"),cancelText:d("sidebar.buttons.cancel"),onOk:async()=>{if(!(await I.DeleteQuestionSetFromClass(f.value.classId,s)).data.success){T.success(d("message.removed_failed"));return}T.success(d("message.removed_successfully")),y()}})},U=s=>{g.push({name:"User_Class_Quiz_Detail",params:{id:s}})};V(async()=>{_("updateSidebar","class"),await D(),await v(),await y()});const w={route:e,router:g,t:d,emit:_,classId:c,classData:f,pageParams:a,question_set_data:z,userRoleInClass:C,loading:i,getPermission:v,getClassData:D,getData:y,onPaginationChange:R,onDeleteQSFromClass:F,onRedirectToDetail:U,Input:X,get CLASS_STUDENT_POSITION(){return H}};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),K={class:"page-container"},W={class:"title-container"},Z={class:"breadcrumb-container"},$={class:"title-breadcrumb-item"},ee={class:"title-breadcrumb-item"},te={class:"breadcrumb-item-topic"},ae={class:"content"},se={class:"content-item"},ne={class:"content-item-title"},oe={class:"content-item-functions"},ie={class:"content-item-navigators"},le={class:"navigator-container"},re={style:{width:"300px",padding:"0px"}},ce={key:0,class:"quiz-item-container"},ue={class:"quiz-item"},de={class:"quiz-item-title"},_e={class:"quiz-item-description"},me={class:"quiz-item-info quiz-info-detail"},pe={class:"quiz-item-questions"},ge={class:"quiz-item-created-by"},ve={class:"exam-item-actions"},be=["onClick"],he={key:1,class:"w-100 d-flex justify-content-center"},fe={class:"pagination-container"};function qe(l,n,k,e,g,d){const _=q("RouterLink"),c=q("a-skeleton"),f=q("a-button"),a=q("a-tooltip"),z=q("a-empty"),C=q("a-pagination");return p(),b("div",K,[t("div",W,[t("div",Z,[t("ul",null,[t("li",$,[r(_,{to:{name:"User_Class"}},{default:u(()=>[t("span",null,o(l.$t("class_index.title")),1),n[2]||(n[2]=h()),n[3]||(n[3]=t("br",null,null,-1))]),_:1,__:[2,3]}),n[4]||(n[4]=t("i",{class:"bx bx-chevron-right"},null,-1))]),t("li",ee,[r(_,{to:{name:""},class:"breadcrumb-item-class"},{default:u(()=>[t("span",null,o(e.classData.name),1),t("span",te,o(e.classData.topic),1)]),_:1})])])])]),t("div",ae,[t("div",se,[t("div",ne,[t("div",null,[t("span",null,o(l.$t("class_question_set.title")),1),t("span",null,o(l.$t("class_question_set.sub_title")),1)])]),t("div",oe,[t("div",ie,[t("div",le,[r(_,{class:"navigator-item",to:{name:"User_Class_Exam"}},{default:u(()=>[h(o(l.$t("class_index.navigators.exam")),1)]),_:1}),r(_,{class:"navigator-item navigator-active",to:{name:""}},{default:u(()=>[h(o(l.$t("class_index.navigators.quiz")),1)]),_:1}),r(_,{class:"navigator-item",to:{name:"User_Class_Student"}},{default:u(()=>[h(o(l.$t("class_index.navigators.member")),1)]),_:1})])]),P(` <a-select
                        v-model:value="pageParams.shareMode"
                        style="width: 200px"
                        @change="getData"
                    >
                        <a-select-option v-for="option in share_mode_options" :value="option.value">
                            {{ option.label }}
                        </a-select-option>
                    </a-select> `),t("div",re,[r(e.Input,{onInput:e.getData,modelValue:e.pageParams.name,"onUpdate:modelValue":n[0]||(n[0]=i=>e.pageParams.name=i),placeholder:e.t("question_sets_index.search_placeholder")},{icon:u(()=>n[5]||(n[5]=[t("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])]),e.loading?(p(),b(N,{key:0},[r(c,{loading:e.loading},null,8,["loading"]),r(c,{loading:e.loading},null,8,["loading"]),r(c,{loading:e.loading},null,8,["loading"])],64)):(p(),b(N,{key:1},[e.question_set_data.length>0?(p(),b("div",ce,[(p(!0),b(N,null,G(e.question_set_data,i=>(p(),b("div",ue,[n[7]||(n[7]=t("i",{class:"bx bx-book-open quiz-item-icon"},null,-1)),t("div",null,[t("div",de,o(i.name),1),t("div",_e,o(i.description),1),t("div",me,[t("div",pe,[n[6]||(n[6]=t("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),h(" "+o(i.totalQuestionCount)+" "+o(l.$t("dashboards.list_items.quiz.questions")),1)]),t("div",ge,o(l.$t("class_question_set.other.created_by"))+" "+o(i.createBy),1)])]),t("div",ve,[r(f,{type:"primary",class:"me-3 main-color-btn",onClick:v=>e.onRedirectToDetail(i.id)},{default:u(()=>[h(o(l.$t("class_question_set.buttons.view")),1)]),_:2},1032,["onClick"]),e.userRoleInClass!==e.CLASS_STUDENT_POSITION.STUDENT?(p(),Y(a,{key:0},{title:u(()=>[h(o(l.$t("question_sets_index.buttons.delete")),1)]),default:u(()=>[t("i",{style:{cursor:"pointer"},class:"text-danger bx bx-trash-alt",onClick:v=>e.onDeleteQSFromClass(i.id)},null,8,be)]),_:2},1024)):P("v-if",!0)])]))),256))])):(p(),b("div",he,[r(z,null,{description:u(()=>[t("span",null,o(l.$t("class_index.other.no_data_matches")),1)]),_:1})]))],64)),t("div",fe,[r(C,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":n[1]||(n[1]=i=>e.pageParams.pageNumber=i),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(i,v)=>`${v[0]}-${v[1]} of ${i} ${e.t("class_question_set.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("class_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])])}const Ie=j(J,[["render",qe],["__scopeId","data-v-b4964186"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/class/quiz.vue"]]);export{Ie as default};
