import{d as j,q as E,l as M,u as Q,i as v,j as A,s as G,M as N,k as h,v as Y,_ as H,r as m,a as x,o as z,b as e,c as n,f as u,w as l,t as i,F as V,E as J}from"./index-CNC2148x.js";import{A as w}from"./ApiFolder-Bv-Wx8C2.js";import{V as K}from"./Validator-CWeiTIFe.js";import{I as W}from"./Input-B6AzPJuz.js";const X=j({__name:"detail",emits:["updateSidebar"],setup(d,{expose:t,emit:T}){var P;t();const a=E(),_=M(),{t:S}=Q(),c=T,r=v(a.params.id||""),b=v({folderTestId:"",name:"",createBy:""}),p=A({pageNumber:a.query.pageNumber||1,pageSize:a.query.pageSize||10,name:((P=a.query.name)==null?void 0:P.toString())||"",shareMode:"",totalCount:0,statusFilter:!1}),F=v([]),k=async()=>{if(!K.isValidGuid(r.value.toString())){_.push({name:"404"});return}try{r.value||_.push({name:"404"});let o=await w.GetAllTestTemplateByLimit(r.value.toString(),p);o.data.success||_.push({name:"404"}),r.value=o.data.data}catch(o){console.log("ERROR: GETBYID class: "+o)}},f=async()=>{},q=(o,y)=>{p.pageNumber=o,p.pageSize=y,p.statusFilter=!0,f()},s=o=>{_.push({name:"User_TestTemplate_Update",params:{id:o}})},g=o=>{N.confirm({title:"Are you sure to delete this test template?",content:"Please double check the important resources!",onOk:async()=>{(await w.DeleteTestTemplate(b.value.folderTestId,o)).data.success&&(h.success("Removed successfully!"),await f())}})},L=()=>{N.confirm({title:"Are you sure to delete this folder?",content:Y("div",{style:"color: red"},"This action is inreversible, every related data will be erased forever. Careful!"),centered:!0,okText:"Confirm",onOk:async()=>{if(!(await w.DeleteFolder(r.value.toString())).data.success){h.success("Delete folder failed.");return}h.success("Delete folder successfully."),_.push({name:"User_Folder"})}})},B={name:[{required:!0,message:"This field is required.",trigger:"change"},{max:100,message:"Limit 100.",trigger:"change"}]},I=v(!1),U=v(),D=A({name:b.value.name||"123"}),C=v(!1),O=async()=>{var o;C.value=!0;try{if(await((o=U.value)==null?void 0:o.validate()),!(await w.Update(r.value.toString(),D.name)).data.success){h.error("Update folder failed");return}I.value=!1,h.success("Update folder successfully."),await f()}catch(y){console.log(y)}finally{C.value=!1}};G(async()=>{c("updateSidebar","folder")});const R={route:a,router:_,t:S,emit:c,folderId:r,folderData:b,pageParams:p,test_template_data:F,getFolderData:k,getData:f,onPaginationChange:q,onRefirectToUpdate:s,onRemoveTestTemplate:g,onOpenConfirmDelete:L,rules:B,modal_update_open:I,updateFolderFormRef:U,updateFolderFormState:D,isUpdateLoading:C,onUpdateFolder:O,Input:W};return Object.defineProperty(R,"__isScriptSetup",{enumerable:!1,value:!0}),R}}),Z={class:"page-container"},$={class:"title-container"},ee={class:"title-button-container"},te={class:"content"},ae={class:"content-item"},se={class:"content-item-title"},oe={class:"content-item-functions"},ne={class:"filter-container"},le={style:{width:"300px",padding:"0px"}},ie={key:0,class:"quiz-item-container"},re={class:"quiz-item"},de={class:"quiz-item-title"},ce={class:"quiz-item-info quiz-info-detail"},me={class:"quiz-item-questions"},ue={class:"quiz-item-created-by"},_e={class:"exam-item-actions"},pe=["onClick"],fe=["onClick"],ge={key:1,class:"w-100 d-flex justify-content-center"},ve={class:"pagination-container"},be={class:"mt-4 content-item"},ye={class:"content-item-title"},he={class:"text-danger"},xe={class:"danger-zone mt-3 p-4"},ze={class:"text-secondary"},Fe={class:"modal-container"},we={class:"modal-title-container"};function ke(d,t,T,a,_,S){const c=m("a-button"),r=m("a-empty"),b=m("a-pagination"),p=m("RouterLink"),F=m("a-col"),k=m("a-row"),f=m("a-form"),q=m("a-modal");return z(),x(V,null,[e("div",Z,[e("div",$,[t[8]||(t[8]=e("div",{class:"main-title"},[e("span",null,"Library Folder Test Details"),u(),e("br")],-1)),e("div",ee,[n(c,{type:"primary",class:"ms-3 main-color-btn",size:"large"},{default:l(()=>[t[6]||(t[6]=e("i",{class:"me-2 bx bx-share-alt"},null,-1)),u(" "+i(d.$t("detail_QS.buttons.share_quiz")),1)]),_:1,__:[6]}),n(c,{type:"primary",class:"ms-3 main-color-btn",size:"large"},{default:l(()=>t[7]||(t[7]=[e("i",{class:"me-2 bx bx-plus"},null,-1),u(" Create new test template ")])),_:1,__:[7]})])]),e("div",te,[e("div",ae,[e("div",se,[e("span",null,[t[9]||(t[9]=u(" Folder name ")),e("i",{class:"bx bx-edit",onClick:t[0]||(t[0]=s=>a.modal_update_open=!0)})])]),e("div",oe,[e("div",ne,[e("div",le,[n(a.Input,{onInput:a.getData,modelValue:a.pageParams.name,"onUpdate:modelValue":t[1]||(t[1]=s=>a.pageParams.name=s),placeholder:a.t("class_index.other.search_class_placeholder")},{icon:l(()=>t[10]||(t[10]=[e("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),a.test_template_data.length>0?(z(),x("div",ie,[(z(!0),x(V,null,J(a.test_template_data,s=>(z(),x("div",re,[t[12]||(t[12]=e("i",{class:"bx bx-book-open quiz-item-icon"},null,-1)),e("div",null,[e("div",de,i(s.name),1),e("div",ce,[e("div",me,[t[11]||(t[11]=e("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),u(" "+i(s.numberOfQuestion)+" "+i(d.$t("dashboards.list_items.quiz.questions")),1)]),e("div",ue,i(d.$t("class_question_set.other.created_by"))+" "+i(s.createdBy),1)])]),e("div",_e,[n(c,{type:"primary",class:"me-3 main-color-btn"},{default:l(()=>[u(i(d.$t("class_question_set.buttons.view")),1)]),_:1}),e("i",{class:"bx bx-edit",onClick:g=>a.onRefirectToUpdate(s.testTemplateId)},null,8,pe),e("i",{class:"text-danger bx bx-trash-alt",onClick:g=>a.onRemoveTestTemplate(s.testTemplateId)},null,8,fe)])]))),256))])):(z(),x("div",ge,[n(r,null,{description:l(()=>t[13]||(t[13]=[e("span",null," No data matches. ",-1)])),_:1})])),e("div",ve,[n(b,{onChange:a.onPaginationChange,current:a.pageParams.pageNumber,"onUpdate:current":t[2]||(t[2]=s=>a.pageParams.pageNumber=s),total:a.pageParams.totalCount,pageSize:a.pageParams.pageSize,"show-total":(s,g)=>`${g[0]}-${g[1]} of ${s} ${a.t("folder_index.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:a.t("folder_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])]),e("div",be,[e("div",ye,[e("div",null,[e("span",he,i(d.$t("class_member.danger_zone.title")),1),e("span",null,i(d.$t("class_member.danger_zone.sub_title")),1)])]),e("div",xe,[t[15]||(t[15]=e("div",{class:"text-danger fs-6 fw-bold"},"Delete folder",-1)),e("div",ze,i(d.$t("class_member.danger_zone.warning_explain")),1),n(c,{class:"mt-3",type:"primary",danger:"",size:"large",onClick:a.onOpenConfirmDelete},{default:l(()=>t[14]||(t[14]=[u(" Delete folder ")])),_:1,__:[14]})])])])]),n(q,{centered:"","wrap-class-name":"medium-modal",open:a.modal_update_open,onCancel:t[5]||(t[5]=s=>a.modal_update_open=!1)},{footer:l(()=>[n(c,{loading:a.isUpdateLoading,class:"main-color-btn",key:"submit",type:"primary",onClick:a.onUpdateFolder},{default:l(()=>t[17]||(t[17]=[u(" Update ")])),_:1,__:[17]},8,["loading"])]),default:l(()=>[e("div",Fe,[e("div",we,[n(k,{class:"w-100 d-flex align-items-center"},{default:l(()=>[n(F,{span:4},{default:l(()=>[n(p,{onClick:t[3]||(t[3]=s=>a.modal_update_open=!1),to:{name:""}},{default:l(()=>t[16]||(t[16]=[e("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[16]})]),_:1}),n(F,{class:"main-title",span:20},{default:l(()=>[e("span",null,i(a.t("folder_index.modal.create_title")),1)]),_:1})]),_:1})]),n(f,{ref:"updateFolderFormRef",layout:"vertical",rules:a.rules,model:a.updateFolderFormState},{default:l(()=>[n(a.Input,{label:"Folder name",name:"name",value:a.updateFolderFormState.name,"onUpdate:value":t[4]||(t[4]=s=>a.updateFolderFormState.name=s),placeholder:a.t("folder_index.modal.create_folder_name_placeholder"),"is-required":!0,"max-length":100},null,8,["value","placeholder"])]),_:1},8,["model"])])]),_:1},8,["open"])],64)}const Ie=H(X,[["render",ke],["__scopeId","data-v-2d07fd31"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/folder/detail.vue"]]);export{Ie as default};
