import{X as rt,d as at,q as lt,l as ut,u as ct,i as C,z as Z,j as dt,S as de,E as ht,s as mt,R as ft,M as gt,D as vt,_ as _t,r as N,c as b,o as _,a as p,C as he,e as B,b as s,p as I,w as y,f as U,t as m,F as ee,B as re}from"./index-CHQ5wIb3.js";import{A as Re}from"./ApiQuestionSet-CAmsUV8L.js";import{Q as q}from"./questionTypes-CS3lcRlq.js";import{D as pt}from"./index-DwoUZaAe.js";import{T as bt,l as xt}from"./vue-draggable-plus-BWa1I-wc.js";import{H as De}from"./highcharts-doP2o70w.js";import{V as yt}from"./Validator-CWeiTIFe.js";import{H as St}from"./HolderOutlined-CWq0iMiQ.js";/* empty css                                                                 */class wt{shuffleArray(r,A=5){let e=[],R=0;do{e=r.slice();for(let h=e.length-1;h>0;h--){const c=Math.floor(Math.random()*(h+1));[e[h],e[c]]=[e[c],e[h]]}if(R++,r.length<=1)break}while(e.every((h,c)=>h===r[c])&&R<A);return e}shuffleQuestionOptions(r){const A=JSON.parse(JSON.stringify(r));return A.type===q.MATCHING&&A.questionData.matching&&(A.questionData.matching.rightItems=this.shuffleArray(A.questionData.matching.rightItems)),A.type===q.ORDERING&&A.questionData.ordering&&(A.questionData.ordering=this.shuffleArray(A.questionData.ordering.sort((e,R)=>e.correctOrder-R.correctOrder))),A}}const Tt=new wt;var me={exports:{}},kt=me.exports,Ee;function qt(){return Ee||(Ee=1,function(k,r){(function(A,e){k.exports=e()})(kt,function(){var A,e,R=1e3,h=6e4,c=36e5,E=864e5,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,P=31536e6,Q=2628e6,J=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,X={years:P,months:Q,days:E,hours:c,minutes:h,seconds:R,milliseconds:1,weeks:6048e5},F=function(g){return g instanceof K},V=function(g,u,i){return new K(g,i,u.$l)},z=function(g){return e.p(g)+"s"},W=function(g){return g<0},L=function(g){return W(g)?Math.ceil(g):Math.floor(g)},x=function(g){return Math.abs(g)},G=function(g,u){return g?W(g)?{negative:!0,format:""+x(g)+u}:{negative:!1,format:""+g+u}:{negative:!1,format:""}},K=function(){function g(i,w,M){var T=this;if(this.$d={},this.$l=M,i===void 0&&(this.$ms=0,this.parseFromMilliseconds()),w)return V(i*X[z(w)],this);if(typeof i=="number")return this.$ms=i,this.parseFromMilliseconds(),this;if(typeof i=="object")return Object.keys(i).forEach(function(Y){T.$d[z(Y)]=i[Y]}),this.calMilliseconds(),this;if(typeof i=="string"){var O=i.match(J);if(O){var D=O.slice(2).map(function(Y){return Y!=null?Number(Y):0});return this.$d.years=D[0],this.$d.months=D[1],this.$d.weeks=D[2],this.$d.days=D[3],this.$d.hours=D[4],this.$d.minutes=D[5],this.$d.seconds=D[6],this.calMilliseconds(),this}}return this}var u=g.prototype;return u.calMilliseconds=function(){var i=this;this.$ms=Object.keys(this.$d).reduce(function(w,M){return w+(i.$d[M]||0)*X[M]},0)},u.parseFromMilliseconds=function(){var i=this.$ms;this.$d.years=L(i/P),i%=P,this.$d.months=L(i/Q),i%=Q,this.$d.days=L(i/E),i%=E,this.$d.hours=L(i/c),i%=c,this.$d.minutes=L(i/h),i%=h,this.$d.seconds=L(i/R),i%=R,this.$d.milliseconds=i},u.toISOString=function(){var i=G(this.$d.years,"Y"),w=G(this.$d.months,"M"),M=+this.$d.days||0;this.$d.weeks&&(M+=7*this.$d.weeks);var T=G(M,"D"),O=G(this.$d.hours,"H"),D=G(this.$d.minutes,"M"),Y=this.$d.seconds||0;this.$d.milliseconds&&(Y+=this.$d.milliseconds/1e3,Y=Math.round(1e3*Y)/1e3);var se=G(Y,"S"),ae=i.negative||w.negative||T.negative||O.negative||D.negative||se.negative,ce=O.format||D.format||se.format?"T":"",ie=(ae?"-":"")+"P"+i.format+w.format+T.format+ce+O.format+D.format+se.format;return ie==="P"||ie==="-P"?"P0D":ie},u.toJSON=function(){return this.toISOString()},u.format=function(i){var w=i||"YYYY-MM-DDTHH:mm:ss",M={Y:this.$d.years,YY:e.s(this.$d.years,2,"0"),YYYY:e.s(this.$d.years,4,"0"),M:this.$d.months,MM:e.s(this.$d.months,2,"0"),D:this.$d.days,DD:e.s(this.$d.days,2,"0"),H:this.$d.hours,HH:e.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:e.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:e.s(this.$d.seconds,2,"0"),SSS:e.s(this.$d.milliseconds,3,"0")};return w.replace(d,function(T,O){return O||String(M[T])})},u.as=function(i){return this.$ms/X[z(i)]},u.get=function(i){var w=this.$ms,M=z(i);return M==="milliseconds"?w%=1e3:w=M==="weeks"?L(w/X[M]):this.$d[M],w||0},u.add=function(i,w,M){var T;return T=w?i*X[z(w)]:F(i)?i.$ms:V(i,this).$ms,V(this.$ms+T*(M?-1:1),this)},u.subtract=function(i,w){return this.add(i,w,!0)},u.locale=function(i){var w=this.clone();return w.$l=i,w},u.clone=function(){return V(this.$ms,this)},u.humanize=function(i){return A().add(this.$ms,"ms").locale(this.$l).fromNow(!i)},u.valueOf=function(){return this.asMilliseconds()},u.milliseconds=function(){return this.get("milliseconds")},u.asMilliseconds=function(){return this.as("milliseconds")},u.seconds=function(){return this.get("seconds")},u.asSeconds=function(){return this.as("seconds")},u.minutes=function(){return this.get("minutes")},u.asMinutes=function(){return this.as("minutes")},u.hours=function(){return this.get("hours")},u.asHours=function(){return this.as("hours")},u.days=function(){return this.get("days")},u.asDays=function(){return this.as("days")},u.weeks=function(){return this.get("weeks")},u.asWeeks=function(){return this.as("weeks")},u.months=function(){return this.get("months")},u.asMonths=function(){return this.as("months")},u.years=function(){return this.get("years")},u.asYears=function(){return this.as("years")},g}(),l=function(g,u,i){return g.add(u.years()*i,"y").add(u.months()*i,"M").add(u.days()*i,"d").add(u.hours()*i,"h").add(u.minutes()*i,"m").add(u.seconds()*i,"s").add(u.milliseconds()*i,"ms")};return function(g,u,i){A=i,e=i().$utils(),i.duration=function(T,O){var D=i.locale();return V(T,{$l:D},O)},i.isDuration=F;var w=u.prototype.add,M=u.prototype.subtract;u.prototype.add=function(T,O){return F(T)?l(this,T,1):w.bind(this)(T,O)},u.prototype.subtract=function(T,O){return F(T)?l(this,T,-1):M.bind(this)(T,O)}}})}(me)),me.exports}var Ct=qt();const It=rt(Ct),Qt=at({__name:"test",setup(k,{expose:r}){r();const A=new URL("/assets/confetti-bjvcnoca.lottie",import.meta.url).href,e=lt(),R=ut(),{t:h}=ct(),c=C({title:"",description:"",totalQuestionCount:0,questions:[]}),E=Z(()=>x.value.filter(n=>n.result===!1)),d=C({}),P=C(""),Q=C(!1),J=C(!1),X=Z(()=>{var n;return(n=d.value.questionData.multipleChoice)==null?void 0:n.some(t=>t.text.length>=100)}),F=C([]),V=C([]),z=C([]),W=C([]),L=C(""),x=C([]),G=()=>{x.value=[],J.value=!1,ne(0),ue(),ye()},K=C(!1),l=()=>{K.value=!0;let n=sessionStorage.getItem("test_settings");n&&(i.numberOfQuestion=JSON.parse(n).numberOfQuestion,i.questionTypes=JSON.parse(n).questionTypes)},g=()=>{K.value=!1},u=C(),i=dt({numberOfQuestion:1,questionTypes:[q.MULTIPLE_CHOICE,q.MATCHING,q.ORDERING,q.SHORT_TEXT]}),w=(n,t)=>{if(t)i.questionTypes.includes(n)||i.questionTypes.push(n);else{const o=i.questionTypes.indexOf(n);o!==-1&&i.questionTypes.splice(o,1)}},M=async()=>{G(),await Y(),sessionStorage.setItem("test_settings",JSON.stringify(i)),g()},T=C(e.params.id.toString()),O=C(!1),D=C(!0),Y=async()=>{if(!yt.isValidGuid(T.value.toString())){R.push({name:"404"});return}try{O.value=!0;let n=await Re.GetDetailById(T.value.toString());c.value.title=n.data.data.name,c.value.description=n.data.data.description,c.value.totalQuestionCount=n.data.data.questionCount;let t=await Re.TestQuestions(T.value.toString(),i.numberOfQuestion,i.questionTypes.join(","));if(!n.data.success||!t.data.success){R.push({name:"404"});return}c.value.questions=t.data.data.map(o=>Tt.shuffleQuestionOptions(o)),ne(0)}catch(n){Object.keys(n.response.data.errors).includes(ft.PLAN_REQUIRE_PLAN)&&(D.value=!1,R.back())}finally{O.value=!1}},se=C(),ae=C(!1),ce=()=>{var n,t;ae.value=!0,(t=(n=se.value)==null?void 0:n.getDotLottieInstance())==null||t.play(),setTimeout(()=>{ae.value=!1},5e3)},ie=(n,t)=>{var S;const o=c.value.questions.findIndex(v=>v.id===n);if(o===-1)return!1;let f=(S=c.value.questions[o].questionData.multipleChoice)==null?void 0:S.filter(v=>v.isAnswer).map(v=>v.id||[]).sort(),a=t.sort();return t.length!==(f==null?void 0:f.length)?!1:a.every((v,H)=>v===f[H])},Le=n=>{var S;const t=c.value.questions.findIndex(v=>v.id===d.value.id);let o=(S=c.value.questions[t].questionData.multipleChoice)==null?void 0:S.filter(v=>v.isAnswer).map(v=>v.id||[]);const f=x.value.findIndex(v=>v.questionId===d.value.id);let a=x.value[f].multipleChoices;return o!=null&&o.includes(n.id)?!0:!(a!=null&&a.includes(n.id)&&!n.isAnswer)},Te=(n,t)=>{var S;const o=c.value.questions.findIndex(v=>v.id===n);if(o===-1)return!1;let f=((S=c.value.questions[o].questionData.ordering)==null?void 0:S.map(v=>v.correctOrder).sort())||[];return t.map(v=>v.correctOrder).every((v,H)=>v===f[H])},ke=(n,t,o)=>{const f=c.value.questions.findIndex(j=>j.id===n);if(f===-1)return!1;let a=c.value.questions[f].questionData.matching.matches,S=t.map(j=>j.id),v=o.map(j=>j.id);return S.map((j,oe)=>({leftId:j,rightId:v[oe]})).every(j=>a.some(oe=>oe.leftId===j.leftId&&oe.rightId===j.rightId))},He=n=>{var S,v;const t=d.value.questionData.matching;if(!t)return!1;let o=t.leftItems.some(H=>H.id===n),f=t.matches.find(H=>o?H.leftId===n:H.rightId===n);const a=o?V.value.findIndex(H=>H.id===n):z.value.findIndex(H=>H.id===n);return a===-1||!f?!1:o?((S=z.value[a])==null?void 0:S.id)===f.rightId:((v=V.value[a])==null?void 0:v.id)===f.leftId},le=n=>n.trim().toLowerCase().normalize("NFKC").replace(/[\u2019\u2018\u201B\u0060]/g,"'").replace(/\s+/g," "),qe=(n,t)=>{const o=c.value.questions.findIndex(f=>f.id===n);return o===-1?!1:le(t)===le(c.value.questions[o].questionData.shortText)},Ce=()=>{var o,f;const n=(o=x.value.find(a=>a.questionId===d.value.id))==null?void 0:o.shortText;if(!n)return!1;const t=(f=c.value.questions.find(a=>a.id===d.value.id))==null?void 0:f.questionData.shortText;return le(n)===le(t)},Ne=Z(()=>{var n;if(d.value.type===q.SHORT_TEXT&&J.value&&!Ce())return(n=c.value.questions.find(t=>t.id===d.value.id))==null?void 0:n.questionData.shortText}),Ue=C(null),fe=C(!1),Pe=()=>{fe.value=!fe.value},te=(n,t)=>{n===-1?x.value.push(t):x.value[n]=t},Ve=()=>{if(J.value)return;const n=x.value.findIndex(f=>f.questionId===d.value.id),t=Q.value,o=Q.value?h("learn_QS.result.skipped"):"";switch(d.value.type){case q.MULTIPLE_CHOICE:{F.value.length>0?te(n,{questionId:d.value.id,type:d.value.type,isSkipped:t,result:!1,resultText:o,multipleChoices:[...F.value],matchingLeft:null,matchingRight:null,ordering:null,shortText:""}):n!==-1&&x.value.splice(n,1);break}case q.MATCHING:{te(n,{questionId:d.value.id,type:d.value.type,isSkipped:t,result:!1,resultText:o,multipleChoices:null,matchingLeft:[...V.value],matchingRight:[...z.value],ordering:null,shortText:""});break}case q.ORDERING:{te(n,{questionId:d.value.id,type:d.value.type,isSkipped:t,result:!1,resultText:o,multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:[...W.value],shortText:""});break}case q.SHORT_TEXT:{L.value.trim()?te(n,{questionId:d.value.id,type:d.value.type,isSkipped:t,result:!1,resultText:o,multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:null,shortText:L.value.trim()}):n!==-1&&x.value.splice(n,1);break}}},ge=(n,t)=>{var o,f;switch(n.type){case q.MULTIPLE_CHOICE:return{...t,multipleChoices:((o=n.questionData.multipleChoice)==null?void 0:o.filter(a=>a.isAnswer).map(a=>a.id))??[]};case q.MATCHING:{const a=n.questionData.matching,S=(a==null?void 0:a.matches)??[],v=(a==null?void 0:a.leftItems)??[],H=(a==null?void 0:a.rightItems)??[],j=S.map(Se=>v.find(we=>we.id==Se.leftId)),oe=S.map(Se=>H.find(we=>we.id==Se.rightId));return{...t,matchingLeft:j,matchingRight:oe}}case q.ORDERING:return{...t,ordering:((f=n.questionData.ordering)==null?void 0:f.slice().sort((a,S)=>a.correctOrder-S.correctOrder))??[]};case q.SHORT_TEXT:return{...t,shortText:n.questionData.shortText??""};default:return t}},Ie=()=>{c.value.questions.forEach(n=>{const t={questionId:n.id,type:n.type,isSkipped:!0,result:!1,resultText:h("learn_QS.result.skipped"),multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:null,shortText:""};let o=x.value.findIndex(f=>f.questionId===n.id);o===-1&&(x.value.push(ge(n,t)),o=x.value.length-1),x.value[o].isSkipped&&te(o,{...x.value[o],...ge(n,{})})})},ze=()=>{Ae(),x.value.length<c.value.questions.length?gt.confirm({title:`You missed ${c.value.questions.length-x.value.length} questions.`,content:"Are you certain about this decision?",okText:h("sidebar.buttons.ok"),cancelText:h("sidebar.buttons.cancel"),centered:!0,onOk:()=>{J.value=!0,Ie(),ve()}}):(J.value=!0,ve())},ve=()=>{const n=c.value.questions.findIndex(t=>t.id===d.value.id);ne(n),x.value.filter(t=>t.isSkipped===!1).forEach(t=>{let o;switch(t.type){case q.MULTIPLE_CHOICE:{o=ie(t.questionId,t.multipleChoices),t.result=o,t.resultText=h(o?"learn_QS.result.correct":"learn_QS.result.wrong");break}case q.MATCHING:{o=ke(t.questionId,t.matchingLeft,t.matchingRight),t.result=o,t.resultText=h(o?"learn_QS.result.correct":"learn_QS.result.wrong");break}case q.ORDERING:{o=Te(t.questionId,t.ordering),t.result=o,t.resultText=h(o?"learn_QS.result.correct":"learn_QS.result.wrong");break}case q.SHORT_TEXT:{o=qe(t.questionId,t.shortText),t.result=o,t.resultText=h(o?"learn_QS.result.correct":"learn_QS.result.wrong");break}}}),Me(),E.value.length===0&&ce()},Ye=()=>{Q.value=!0;const n=x.value.findIndex(t=>t.questionId===d.value.id);te(n,{questionId:d.value.id,type:d.value.type,isSkipped:!0,result:!1,resultText:h("learn_QS.result.skipped"),multipleChoices:F.value,matchingLeft:V.value,matchingRight:z.value,ordering:W.value,shortText:L.value})},ne=n=>{var o,f;ue(),Q.value=!1,d.value=c.value.questions[n];const t=x.value.find(a=>a.questionId===d.value.id);switch(d.value.type){case q.MULTIPLE_CHOICE:{P.value=h("learn_QS.instructions.multiple_choice",{number:(o=d.value.questionData.multipleChoice)==null?void 0:o.filter(a=>a.isAnswer).length}),F.value=t?t==null?void 0:t.multipleChoices:[];break}case q.ORDERING:{P.value=h("learn_QS.instructions.ordering"),W.value=t?t==null?void 0:t.ordering:((f=d.value.questionData.ordering)==null?void 0:f.map(a=>a))||[];break}case q.MATCHING:{P.value=h("learn_QS.instructions.matching"),V.value=t?t==null?void 0:t.matchingLeft:d.value.questionData.matching.leftItems.map(a=>a)||[],z.value=t?t==null?void 0:t.matchingRight:d.value.questionData.matching.rightItems.map(a=>a)||{};break}case q.SHORT_TEXT:{P.value=h("learn_QS.instructions.short_text"),L.value=t?t==null?void 0:t.shortText:"";break}}},Fe=()=>{Q.value=!1;const n=c.value.questions.findIndex(t=>t.id===d.value.id);n<c.value.questions.length-1&&ne(n+1)},Ge=()=>{Q.value=!1;const n=c.value.questions.findIndex(t=>t.id===d.value.id);n>0&&ne(n-1)},je=n=>Array.from(x.value).some(t=>t.questionId===n),Be=n=>{var t;return(t=x.value.find(o=>o.questionId===n&&!o.isSkipped))==null?void 0:t.result},Je=Z(()=>x.value.some(n=>n.questionId===d.value.id&&n.isSkipped)),We=Z(()=>{const n=x.value.find(t=>t.questionId===d.value.id);return{result:n==null?void 0:n.result,resultText:n==null?void 0:n.resultText}}),Xe=Z(()=>{const n=c.value.questions.findIndex(t=>t.id===d.value.id);return n!==-1&&n<c.value.questions.length-1}),Ke=Z(()=>{const n=c.value.questions.findIndex(t=>t.id===d.value.id);return n!==-1&&n>0}),Ze=Z(()=>c.value.questions.findIndex(n=>n.id===d.value.id)),_e=()=>Math.floor((c.value.questions.length-E.value.length)/c.value.questions.length*100),Qe=()=>Math.floor(E.value.length/c.value.questions.length*100),pe=()=>{const n=$(".content-item-test-result");n&&$(n).slideToggle()},Me=()=>{pe(),De.setOptions({lang:{decimalPoint:".",thousandsSep:","}}),De.chart("result_chart_container",{chart:{type:"pie",custom:{},events:{render:function(){const n=this,t=n.series[0];let o=n.options.chart.custom.label;o||(o=n.options.chart.custom.label=n.renderer.label(`<strong>${_e()}%</strong>`,0,0).css({color:"var(--text-color)",textAnchor:"middle"}).add());const f=t.center[0]+n.plotLeft,a=t.center[1]+n.plotTop-o.attr("height")/2;o.attr({x:f,y:a}),o.css({fontSize:`${t.center[2]/8}px`})}}},credits:{enabled:!1},plotOptions:{pie:{borderWidth:0,borderRadius:3}},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.0f}%</b>"},series:[{type:"pie",name:"Result",colorByPoint:!0,innerSize:"75%",dataLabels:{enabled:!1},data:[{name:h("practice_test.other.correct"),y:_e(),color:"var(--correct-answer-color)"},{name:h("practice_test.other.incorrect"),y:Qe(),color:"var(--incorrect-answer-color)"}]}]})};de.extend(It);const be=C(),xe=C(""),ye=()=>{be.value=de()},Ae=()=>{const t=de().diff(be.value),o=Math.floor(t/1e3);if(o<60)xe.value=`${h("practice_test.other.your_time")} ${o} ${h(o===1?"practice_test.other.second":"practice_test.other.second_plural")}`;else{const f=de.duration(t),a=f.hours(),S=f.minutes();let v=h("practice_test.other.your_time");a>0&&(v+=`${a} ${a>1?h("practice_test.other.hour"):h("practice_test.other.hour_plural")} `),S>0&&(v+=`${S} ${S>1?h("practice_test.other.minute"):h("practice_test.other.minute_plural")}`),xe.value=v.trim()}},$e={scroll:!0,scrollSensitivity:100,scrollSpeed:100,scrollTarget:document.scrollingElement};function ue(){vt(()=>{requestAnimationFrame(()=>{const n=document.querySelectorAll(".matching-option-container.left .answer-option-matching"),t=document.querySelectorAll(".matching-option-container.right .answer-option-matching"),o=Math.min(n.length,t.length);for(let f=0;f<o;f++){const a=n[f],S=t[f];if(!a||!S)continue;a.style.height="auto",S.style.height="auto";const v=Math.max(a.offsetHeight,S.offsetHeight);a.style.height=`${v}px`,S.style.height=`${v}px`}})})}const et=()=>{window.location.reload()},tt=()=>{R.push({name:"User_QuestionSet_Learn",params:{id:T.value}})},nt=()=>{const n=E.value.map(t=>t.questionId);c.value.questions=c.value.questions.filter(t=>n.includes(t.id)),G(),pe()},st=()=>{sessionStorage.setItem("setting_key","Subscription"),R.push({name:"User_Settings"})},it=n=>{if(!n)return!1;let t=n==null?void 0:n.replace(/`[^`]*`/g,"");return t=t.trim().replace(/^<p>/i,"").replace(/<\/p>$/i,""),t.includes("<pre>")&&t.includes("</pre>")||t.includes("<code>")&&t.includes("</code>")||t.includes("<strong>")&&t.includes("</strong>")||t.includes("<i>")&&t.includes("</i>")||t.includes("<u>")&&t.includes("</u>")||t.includes("<ul>")&&t.includes("</ul>")||t.includes("<ol>")&&t.includes("</ol>")||t.includes("<li>")&&t.includes("</li>")},ot=n=>n?n.replace(/^<p>/i,"").replace(/<\/p>$/i,"").replace("<","'<").replace(">",">'"):"";ht(()=>i.numberOfQuestion,()=>{i.numberOfQuestion>c.value.totalQuestionCount?i.numberOfQuestion=c.value.totalQuestionCount:i.numberOfQuestion<1&&(i.numberOfQuestion=1)}),mt(async()=>{let n=sessionStorage.getItem("test_settings");n&&(i.numberOfQuestion=Math.max(1,Math.min(c.value.totalQuestionCount,JSON.parse(n).numberOfQuestion)),i.questionTypes=JSON.parse(n).questionTypes),await Y(),l(),ne(0),ue(),window.addEventListener("resize",ue),ye()});const Oe={animationPath:A,route:e,router:R,t:h,quiz:c,incorrect:E,currentQuestion:d,currentQuestionInstruction:P,currentQuestionIsSkipped:Q,isSubmitted:J,isOptionExceed:X,userAnswerMultipleChoice:F,userAnswerMatchingLeft:V,userAnswerMatchingRight:z,userAnswerOrdering:W,userAnswerShortText:L,userAnswer:x,reset:G,setting_modal_open:K,openSettingModal:l,closeSettingModal:g,settingFormRef:u,settingFormState:i,toggleQuestionType:w,onCreateNewTest:M,questionSetId:T,loading:O,isAllowed:D,getQuizData:Y,animationRef:se,isAnimationDisplaying:ae,triggerAnimation:ce,checkMultipleChoice:ie,checkMultipleChoiceAnswerCorrect:Le,checkOrdering:Te,checkMatching:ke,checkMatchingAnswerCorrect:He,cleanShortTextAnswer:le,checkShortText:qe,checkShortextCorrect:Ce,getShortTextCorrectAnswer:Ne,explainModal:Ue,explainModalOpen:fe,toggleExplainModal:Pe,updateUserAnswer:te,onUserAnswerChange:Ve,refactorLeftOverUserAnswer:ge,handleSkippedQuestion:Ie,onSubmitAnswer:ze,getUserAnswerResult:ve,onSkipQuestion:Ye,onLoadCurrentQuestion:ne,onNextQuestion:Fe,onPreviousQuestion:Ge,userAnswerContainQuestion:je,getUserAnswerResultById:Be,userAnswerCurrentQuestionSkipped:Je,userAnswerCurrentQuestionResult:We,hasNextQuestion:Xe,hasPreviousQuestion:Ke,currentQuestionIndex:Ze,getCorrectPercentage:_e,getInCorrectPercentage:Qe,toggleResult:pe,generateChart:Me,startTime:be,timerResult:xe,timerStart:ye,timerEnd:Ae,dragOptions:$e,syncMatchingHeights:ue,onNewTest:et,onRedirectToLearn:tt,onRetest:nt,onRedirectToSubcription:st,isHTMLContent:it,processTextWithHtmlTag:ot,get QUESTION_TYPE(){return q},get DotLottieVue(){return pt},TextArea:bt,get VueDraggable(){return xt},get HolderOutlined(){return St}};return Object.defineProperty(Oe,"__isScriptSetup",{enumerable:!1,value:!0}),Oe}}),Mt={key:0,class:"page-container"},At={class:"title-container title-container-header"},Ot={class:"content content-test d-flex flex-column"},Rt={class:"d-flex"},Dt={class:"content-item question-navigators"},Et={class:"question-navigator-title"},Lt={key:1,class:"question-navigator-container"},Ht=["onClick"],Nt={class:"content-item content-item-test-result"},Ut={class:"result-container"},Pt={class:"result-section"},Vt={class:"result-section-title"},zt={class:"result-section-statistic"},Yt={class:"result-text-container"},Ft={class:"result-text correct"},Gt={class:"result-text incorrect"},jt={class:"result-section result-section-buttons"},Bt={class:"result-section-title"},Jt={class:"result-button-title"},Wt={class:"result-button-content"},Xt={class:"result-button-title"},Kt={class:"result-button-content"},Zt={class:"result-button-title"},$t={class:"result-button-content"},en={class:"content-item"},tn={key:1,class:"section question-section"},nn={class:"question-info-index"},sn=["innerHTML"],on={key:1,class:"learn-question text"},rn={class:"section answer-section"},an={class:"d-flex align-items-center"},ln={class:"answer-section-ins"},un={class:"answer-option-content"},cn={key:0,class:"bx bx-check answer-icon"},dn={key:1,class:"bx bx-x answer-icon"},hn={key:1,class:"answer-option-container matching"},mn={class:"matching-option-container left"},fn={class:"d-flex align-items-center"},gn={class:"answer-option-order"},vn={class:"answer-option-content"},_n={class:"matching-option-container right"},pn={class:"d-flex align-items-center"},bn={class:"answer-option-content"},xn={class:"answer-option-order"},yn={key:2,class:"answer-option-container ordering"},Sn={class:"answer-option-order"},wn={class:"answer-option-content"},Tn={key:3,class:"answer-option-container"},kn={class:"w-100 d-flex align-items-center"},qn={key:0,class:"bx bx-check answer-icon"},Cn={key:1,class:"bx bx-x answer-icon"},In={key:0,class:"short-text-correct-answer"},Qn={class:"learn-question-footer"},Mn={class:"d-flex"},An=["innerHTML"],On={key:1,class:"learn-question-explain text"},Rn={key:1,class:"page-container"},Dn={class:"w-100 h-100 d-flex align-items-center justify-content-center"},En={class:"d-flex justify-content-center"},Ln={class:"title-container"},Hn={class:"setting-form-item"},Nn={class:"setting-form-item setting-form-switch"};function Un(k,r,A,e,R,h){const c=N("RouterLink"),E=N("a-col"),d=N("a-row"),P=N("a-skeleton"),Q=N("a-button"),J=N("a-checkbox"),X=N("a-checkbox-group"),F=N("CloseSquareFilled"),V=N("a-result"),z=N("a-input-number"),W=N("a-form-item"),L=N("a-divider"),x=N("a-switch"),G=N("a-form"),K=N("a-modal");return _(),b(ee,null,[e.isAllowed?(_(),b("div",Mt,[e.isAnimationDisplaying?(_(),he(e.DotLottieVue,{key:0,autoplay:e.isAnimationDisplaying,ref:"animationRef",class:I(["animation-container"]),onComplete:r[0]||(r[0]=l=>e.isAnimationDisplaying=!1),src:e.animationPath},null,8,["autoplay","src"])):B("v-if",!0),s("div",At,[p(d,{class:"w-100 d-flex align-items-center"},{default:y(()=>[p(E,{span:1},{default:y(()=>[p(c,{to:{name:"User_Library"}},{default:y(()=>r[10]||(r[10]=[s("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[10]})]),_:1}),p(E,{class:"main-title",span:22},{default:y(()=>[s("span",null,m(e.quiz.title),1),r[11]||(r[11]=U()),r[12]||(r[12]=s("br",null,null,-1)),s("span",null,m(e.quiz.description),1)]),_:1,__:[11,12]}),p(E,{span:1},{default:y(()=>[s("i",{class:"bx bx-cog test-setting-btn",onClick:e.openSettingModal})]),_:1})]),_:1})]),s("div",Ot,[s("div",Rt,[s("div",Dt,[s("div",Et,m(e.t("practice_test.other.question_list")),1),e.loading?(_(),he(P,{key:0,active:"",loading:e.loading},null,8,["loading"])):(_(),b("div",Lt,[(_(!0),b(ee,null,re(e.quiz.questions,(l,g)=>(_(),b("div",{class:I(["question-navigation-item-outer",e.currentQuestion.id===l.id?"current-question":""])},[s("div",{class:I(["question-navigator-item",e.userAnswerContainQuestion(l.id)?"completed-question":"",e.isSubmitted?e.getUserAnswerResultById(l.id)?"correct":"incorrect":""]),onClick:u=>e.onLoadCurrentQuestion(g)},[s("span",null,m(g+1),1)],10,Ht)],2))),256))])),p(Q,{disabled:e.isSubmitted,type:"primary",class:I(["main-color-btn",e.isSubmitted?"main-color-btn-disabled":""]),onClick:e.onSubmitAnswer},{default:y(()=>[U(m(k.$t("learn_QS.buttons.submit")),1)]),_:1},8,["disabled","class"])]),s("div",Nt,[s("div",Ut,[s("div",Pt,[s("div",Vt,m(e.timerResult),1),s("div",zt,[r[13]||(r[13]=s("div",{id:"result_chart_container"},null,-1)),s("div",Yt,[s("div",Ft,[U(m(k.$t("practice_test.other.correct"))+" ",1),s("span",null,m(e.quiz.questions.length-e.incorrect.length),1)]),s("div",Gt,[U(m(k.$t("practice_test.other.incorrect"))+" ",1),s("span",null,m(e.incorrect.length),1)])])])]),s("div",jt,[s("div",Bt,m(k.$t("practice_test.final_modal.button_title")),1),s("div",{class:"result-button",onClick:e.onNewTest},[r[14]||(r[14]=s("i",{class:"bx bxs-news"},null,-1)),s("div",null,[s("div",Jt,m(k.$t("practice_test.final_modal.buttons.new_test")),1),s("div",Wt,m(k.$t("practice_test.final_modal.buttons_ins.new_test")),1)])]),e.getInCorrectPercentage()>0?(_(),b("div",{key:0,class:"result-button",onClick:e.onRetest},[r[15]||(r[15]=s("i",{class:"bx bx-reset"},null,-1)),s("div",null,[s("div",Xt,m(k.$t("practice_test.final_modal.buttons.re_test")),1),s("div",Kt,m(k.$t("practice_test.final_modal.buttons_ins.re_test")),1)])])):(_(),b("div",{key:1,class:"result-button",onClick:e.onRedirectToLearn},[r[16]||(r[16]=s("i",{class:"bx bx-analyse"},null,-1)),s("div",null,[s("div",Zt,m(k.$t("practice_test.final_modal.buttons.practice")),1),s("div",$t,m(k.$t("practice_test.final_modal.buttons_ins.practice")),1)])]))])])])]),s("div",en,[e.loading?(_(),b(ee,{key:0},[p(P,{active:"",loading:e.loading},null,8,["loading"]),p(P,{active:"",loading:e.loading},null,8,["loading"]),p(P,{active:"",loading:e.loading},null,8,["loading"])],64)):(_(),b("div",tn,[s("div",nn,m(k.$t("create_QS.question.question"))+" "+m(e.currentQuestionIndex+1),1),e.isHTMLContent(e.currentQuestion.questionText)?(_(),b("div",{key:0,class:"learn-question html",innerHTML:e.currentQuestion.questionText},null,8,sn)):(_(),b("div",on,m(e.processTextWithHtmlTag(e.currentQuestion.questionText)),1)),B(` <div
                            :class="[
                                'learn-question',
                                currentQuestion.textFormat === QUESTION_FORMAT.HTML ? 'd-none' : '',
                            ]"
                        >
                            {{ currentQuestion.questionText }}
                        </div> `),s("div",rn,[s("div",an,[s("div",ln,m(e.currentQuestionInstruction),1),s("div",{class:I(["ms-3 learn-question-result",e.isSubmitted?e.userAnswerCurrentQuestionResult.result?"result-correct":"result-incorrect":"",e.userAnswerCurrentQuestionSkipped?"result-skipped":""])},m(e.userAnswerCurrentQuestionResult.resultText),3)]),e.currentQuestion.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(_(),he(X,{key:0,onChange:e.onUserAnswerChange,value:e.userAnswerMultipleChoice,"onUpdate:value":r[1]||(r[1]=l=>e.userAnswerMultipleChoice=l),class:I(["answer-option-container multiplechoice",e.isOptionExceed?"column":""])},{default:y(()=>[(_(!0),b(ee,null,re(e.currentQuestion.questionData.multipleChoice,(l,g)=>(_(),he(J,{value:l.id,"onUpdate:value":u=>l.id=u,disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,class:I(["answer-option answer-option-multiplechoice",e.isSubmitted&&e.checkMultipleChoiceAnswerCorrect(l)&&l.isAnswer?"answer-correct":"",e.isSubmitted&&!e.checkMultipleChoiceAnswerCorrect(l)&&!l.isAnswer?"answer-incorrect":""])},{default:y(()=>[s("div",un,m(l.text),1),e.isSubmitted&&e.checkMultipleChoiceAnswerCorrect(l)&&l.isAnswer?(_(),b("i",cn)):B("v-if",!0),e.isSubmitted&&!e.checkMultipleChoiceAnswerCorrect(l)&&!l.isAnswer?(_(),b("i",dn)):B("v-if",!0)]),_:2},1032,["value","onUpdate:value","disabled","class"]))),256))]),_:1},8,["value","class"])):B("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.MATCHING?(_(),b("div",hn,[s("div",mn,[p(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerMatchingLeft,"onUpdate:modelValue":r[2]||(r[2]=l=>e.userAnswerMatchingLeft=l),options:e.dragOptions,onMove:e.syncMatchingHeights,onEnd:r[3]||(r[3]=()=>{e.syncMatchingHeights(),e.onUserAnswerChange()})},{default:y(()=>[(_(!0),b(ee,null,re(e.userAnswerMatchingLeft,(l,g)=>(_(),b("div",fn,[s("div",{class:I(["answer-option answer-option-matching",e.isSubmitted?e.checkMatchingAnswerCorrect(l.id)?"answer-correct":"answer-incorrect":""])},[s("div",gn,[p(e.HolderOutlined)]),s("div",vn,m(l.text),1)],2),s("i",{class:I(["bx bxs-label matching-icon",e.isSubmitted?e.checkMatchingAnswerCorrect(l.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2)]))),256))]),_:1},8,["disabled","modelValue"])]),s("div",_n,[p(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerMatchingRight,"onUpdate:modelValue":r[4]||(r[4]=l=>e.userAnswerMatchingRight=l),options:e.dragOptions,onMove:e.syncMatchingHeights,onEnd:r[5]||(r[5]=()=>{e.syncMatchingHeights(),e.onUserAnswerChange()})},{default:y(()=>[(_(!0),b(ee,null,re(e.userAnswerMatchingRight,(l,g)=>(_(),b("div",pn,[s("i",{class:I(["bx bxs-label matching-icon",e.isSubmitted?e.checkMatchingAnswerCorrect(l.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2),s("div",{class:I(["answer-option answer-option-matching",e.isSubmitted?e.checkMatchingAnswerCorrect(l.id)?"answer-correct":"answer-incorrect":""])},[s("div",bn,m(l.text),1),s("div",xn,[p(e.HolderOutlined)])],2)]))),256))]),_:1},8,["disabled","modelValue"])])])):B("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.ORDERING?(_(),b("div",yn,[p(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerOrdering,"onUpdate:modelValue":r[6]||(r[6]=l=>e.userAnswerOrdering=l),options:e.dragOptions,onEnd:e.onUserAnswerChange},{default:y(()=>[(_(!0),b(ee,null,re(e.userAnswerOrdering,(l,g)=>(_(),b("div",{class:I(["answer-option answer-option-ordering",e.isSubmitted?g===l.correctOrder?"answer-correct":"answer-incorrect":""])},[s("div",Sn,[p(e.HolderOutlined),U(" "+m(g+1),1)]),s("div",wn,m(l.text),1),s("div",{class:I(["answer-option-order answer-icon",e.isSubmitted?"":"d-none"])},[r[17]||(r[17]=s("i",{class:"bx bx-hash answer-icon"},null,-1)),U(" "+m(l.correctOrder+1),1)],2)],2))),256))]),_:1},8,["disabled","modelValue"])])):B("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.SHORT_TEXT?(_(),b("div",Tn,[s("div",{class:I(["answer-short-text",e.isSubmitted?e.checkShortextCorrect()?"answer-correct":"answer-incorrect":""])},[s("div",kn,[p(e.TextArea,{readonly:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,placeholder:"Enter your answer...",modelValue:e.userAnswerShortText,"onUpdate:modelValue":r[7]||(r[7]=l=>e.userAnswerShortText=l),onChange:e.onUserAnswerChange},null,8,["readonly","modelValue"]),e.isSubmitted&&e.checkShortextCorrect()?(_(),b("i",qn)):B("v-if",!0),e.isSubmitted&&!e.checkShortextCorrect()?(_(),b("i",Cn)):B("v-if",!0)]),e.isSubmitted&&!e.checkShortextCorrect()?(_(),b("div",In,[r[18]||(r[18]=U(" Correct answer: ")),s("span",null,m(e.getShortTextCorrectAnswer),1)])):B("v-if",!0)],2)])):B("v-if",!0)]),s("div",Qn,[p(Q,{class:I(["main-color-btn",e.hasPreviousQuestion?"":"main-color-btn-disabled"]),type:"primary",size:"large",onClick:e.onPreviousQuestion},{default:y(()=>[r[19]||(r[19]=s("i",{class:"bx bx-chevron-left"},null,-1)),U(" "+m(k.$t("practice_test.buttons.previous")),1)]),_:1,__:[19]},8,["class"]),e.isSubmitted?(_(),b("div",{key:1,class:I(["main-color-btn-ghost me-3"]),onClick:e.toggleExplainModal},[r[20]||(r[20]=s("i",{class:"bx bx-bulb me-2"},null,-1)),U(" "+m(k.$t("learn_QS.buttons.explaination")),1)])):(_(),b("div",{key:0,class:I(["main-color-btn-ghost",e.userAnswerCurrentQuestionSkipped||e.isSubmitted?"main-color-btn-ghost-disabled":""]),onClick:r[8]||(r[8]=l=>e.onSkipQuestion())},m(k.$t("learn_QS.buttons.dont_know")),3)),s("div",Mn,[p(Q,{class:I(["main-color-btn",e.hasNextQuestion?"":"main-color-btn-disabled"]),type:"primary",size:"large",onClick:e.onNextQuestion},{default:y(()=>[U(m(k.$t("learn_QS.buttons.next_question"))+" ",1),r[21]||(r[21]=s("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[21]},8,["class"])])])]))]),s("div",{ref:"explainModal",class:I(["explain-modal explain-modal-up",{show:e.explainModalOpen}])},[e.isHTMLContent(e.currentQuestion.explainText)?(_(),b("div",{key:0,class:"learn-question-explain html",innerHTML:e.currentQuestion.explainText},null,8,An)):(_(),b("div",On,m(e.processTextWithHtmlTag(e.currentQuestion.explainText)),1)),p(Q,{class:I(["main-color-btn close-modal-btn"]),type:"primary",size:"large",onClick:e.toggleExplainModal},{default:y(()=>r[22]||(r[22]=[s("i",{class:"bx bx-chevrons-down"},null,-1)])),_:1,__:[22]}),p(Q,{class:I(["main-color-btn",e.hasNextQuestion?"":"main-color-btn-disabled"]),type:"primary",size:"large",onClick:e.onNextQuestion},{default:y(()=>[U(m(k.$t("learn_QS.buttons.next_question"))+" ",1),r[23]||(r[23]=s("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[23]},8,["class"])],2)])])):(_(),b("div",Rn,[s("div",Dn,[p(V,{status:"error",title:e.t("now_allowed.main_msg"),"sub-title":e.t("now_allowed.errorMessage")},{icon:y(()=>[p(F)]),extra:y(()=>[s("div",En,[p(Q,{key:"console",type:"primary",class:"me-3 main-color-btn"},{default:y(()=>[U(m(k.$t("now_allowed.libraryNavigator")),1)]),_:1}),p(Q,{onClick:e.onRedirectToSubcription,key:"buy",type:"ghost",class:"main-color-btn-ghost"},{default:y(()=>[U(m(k.$t("now_allowed.subscriptionNavigator")),1)]),_:1})])]),_:1},8,["title","sub-title"])])])),p(K,{centered:"","wrap-class-name":"medium-modal",open:e.setting_modal_open,onCancel:e.closeSettingModal},{footer:y(()=>[p(Q,{type:"primary",class:"main-color-btn",size:"large",shape:"round",onClick:e.onCreateNewTest},{default:y(()=>[U(m(e.t("practice_test.setting_modal.create_new_test")),1)]),_:1})]),default:y(()=>[s("div",Ln,[p(d,{class:"w-100 d-flex align-items-center justify-content-between"},{default:y(()=>[p(E,{span:1},{default:y(()=>[s("div",{onClick:e.closeSettingModal},r[24]||(r[24]=[s("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)]))]),_:1}),p(E,{class:"main-title",span:20},{default:y(()=>[s("span",null,m(k.$t("practice_test.setting_modal.title")),1),r[25]||(r[25]=U()),r[26]||(r[26]=s("br",null,null,-1))]),_:1,__:[25,26]})]),_:1})]),p(G,{class:"setting-form"},{default:y(()=>[p(W,null,{default:y(()=>[s("div",Hn,[s("div",null,m(k.$t("practice_test.setting_modal.max_question",{length:e.quiz.totalQuestionCount})),1),p(z,{size:"large",id:"inputNumber",value:e.settingFormState.numberOfQuestion,"onUpdate:value":r[9]||(r[9]=l=>e.settingFormState.numberOfQuestion=l),min:1,max:e.quiz.totalQuestionCount,precision:0},null,8,["value","max"])])]),_:1}),p(L,{style:{"background-color":"var(--form-item-border-color)"}}),p(W,null,{default:y(()=>[(_(!0),b(ee,null,re(e.QUESTION_TYPE,l=>(_(),b("div",Nn,[s("div",null,m(e.t(`create_QS.type.${l}`)),1),p(x,{disabled:e.settingFormState.questionTypes.length<=1&&e.settingFormState.questionTypes.includes(l),checked:e.settingFormState.questionTypes.includes(l),onChange:g=>e.toggleQuestionType(l,g)},null,8,["disabled","checked","onChange"])]))),256))]),_:1})]),_:1})]),_:1},8,["open"])],64)}const Wn=_t(Qt,[["render",Un],["__scopeId","data-v-4662dd21"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/question_sets/test.vue"]]);export{Wn as default};
