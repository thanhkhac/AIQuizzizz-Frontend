import{d as Y,q as j,l as Q,u as G,i as g,j as P,s as H,M as L,k as h,v as J,_ as K,r as u,a as x,o as I,b as t,c as n,f as _,w as l,t as i,F as A,E as W}from"./index-C2jtDg6B.js";import{A as T}from"./ApiFolder-DE_T1vB3.js";import{V as X}from"./Validator-CWeiTIFe.js";import{I as Z}from"./Input-0Otcuoto.js";import{S as $}from"./ShareModal-BiXPYbo-.js";import{V as ee}from"./visibility-PZlBDoOn.js";import"./ApiTestTemplate-Ds5LzdWO.js";const te=Y({__name:"detail",emits:["updateSidebar"],setup(d,{expose:a,emit:k}){var N;a();const e=j(),p=Q(),{t:q}=G(),m=k,r=g(e.params.id.toString()||""),y=g({folderTestId:"",name:"",createBy:""}),f=P({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,testTemplateName:((N=e.query.testTemplateName)==null?void 0:N.toString())||"",totalCount:0,statusFilter:!1}),z=g([]),S=async()=>{if(!X.isValidGuid(r.value.toString())){p.push({name:"404"});return}try{r.value||p.push({name:"404"});let s=await T.GetAllTestTemplateByLimit(r.value.toString(),f);s.data.success||p.push({name:"404"}),r.value=s.data.data}catch(s){console.log("ERROR: GETBYID class: "+s)}},v=async()=>{},F=(s,c)=>{f.pageNumber=s,f.pageSize=c,f.statusFilter=!0,v()},o=s=>{p.push({name:"User_TestTemplate_Update",params:{id:s}})},b=s=>{L.confirm({title:"Are you sure to delete this test template?",content:"Please double check the important resources!",onOk:async()=>{(await T.DeleteTestTemplate(y.value.folderTestId,s)).data.success&&(h.success("Removed successfully!"),await v())}})},B=()=>{L.confirm({title:"Are you sure to delete this folder?",content:J("div",{style:"color: red"},"This action is inreversible, every related data will be erased forever. Careful!"),centered:!0,okText:"Confirm",onOk:async()=>{if(!(await T.DeleteFolder(r.value.toString())).data.success){h.success("Delete folder failed.");return}h.success("Delete folder successfully."),p.push({name:"User_Folder"})}})},M={name:[{required:!0,message:"This field is required.",trigger:"change"},{max:100,message:"Limit 100.",trigger:"change"}]},C=g(!1),R=g(),D=P({name:y.value.name||"123"}),w=g(!1),O=async()=>{var s;w.value=!0;try{if(await((s=R.value)==null?void 0:s.validate()),!(await T.Update(r.value.toString(),D.name)).data.success){h.error("Update folder failed");return}C.value=!1,h.success("Update folder successfully."),await v()}catch(c){console.log(c)}finally{w.value=!1}},U=g(null),E=s=>{var c;(c=U.value)==null||c.openModal()};H(async()=>{m("updateSidebar","folder")});const V={route:e,router:p,t:q,emit:m,folderId:r,folderData:y,pageParams:f,test_template_data:z,getFolderData:S,getData:v,onPaginationChange:F,onRefirectToUpdate:o,onRemoveTestTemplate:b,onOpenConfirmDelete:B,rules:M,modal_update_open:C,updateFolderFormRef:R,updateFolderFormState:D,isUpdateLoading:w,onUpdateFolder:O,shareModalRef:U,onOpenShareModal:E,Input:Z,ShareModal:$,get VISIBILITY(){return ee}};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}}),ae={class:"page-container"},oe={class:"title-container"},se={class:"title-button-container"},ne={class:"content"},le={class:"content-item"},ie={class:"content-item-title"},re={class:"content-item-functions"},de={class:"filter-container"},me={style:{width:"300px",padding:"0px"}},ce={key:0,class:"quiz-item-container"},ue={class:"quiz-item"},_e={class:"quiz-item-title"},pe={class:"quiz-item-info quiz-info-detail"},fe={class:"quiz-item-questions"},ge={class:"quiz-item-created-by"},ve={class:"exam-item-actions"},be=["onClick"],ye=["onClick"],he={key:1,class:"w-100 d-flex justify-content-center"},xe={class:"pagination-container"},Ie={class:"mt-4 content-item"},ze={class:"content-item-title"},Te={class:"text-danger"},Se={class:"danger-zone mt-3 p-4"},Fe={class:"text-secondary"},we={class:"modal-container"},ke={class:"modal-title-container"};function qe(d,a,k,e,p,q){const m=u("a-button"),r=u("a-empty"),y=u("a-pagination"),f=u("RouterLink"),z=u("a-col"),S=u("a-row"),v=u("a-form"),F=u("a-modal");return I(),x(A,null,[t("div",ae,[t("div",oe,[a[8]||(a[8]=t("div",{class:"main-title"},[t("span",null,"Library Folder Test Details"),_(),t("br")],-1)),t("div",se,[n(m,{type:"primary",class:"ms-3 main-color-btn",size:"large",onClick:e.onOpenShareModal},{default:l(()=>[a[6]||(a[6]=t("i",{class:"me-2 bx bx-share-alt"},null,-1)),_(" "+i(d.$t("detail_QS.buttons.share_quiz")),1)]),_:1,__:[6]}),n(m,{type:"primary",class:"ms-3 main-color-btn",size:"large"},{default:l(()=>a[7]||(a[7]=[t("i",{class:"me-2 bx bx-plus"},null,-1),_(" Create new test template ")])),_:1,__:[7]})])]),t("div",ne,[t("div",le,[t("div",ie,[t("span",null,[a[9]||(a[9]=_(" Folder name ")),t("i",{class:"bx bx-edit",onClick:a[0]||(a[0]=o=>e.modal_update_open=!0)})])]),t("div",re,[t("div",de,[t("div",me,[n(e.Input,{onInput:e.getData,modelValue:e.pageParams.testTemplateName,"onUpdate:modelValue":a[1]||(a[1]=o=>e.pageParams.testTemplateName=o),placeholder:e.t("class_index.other.search_class_placeholder")},{icon:l(()=>a[10]||(a[10]=[t("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),e.test_template_data.length>0?(I(),x("div",ce,[(I(!0),x(A,null,W(e.test_template_data,o=>(I(),x("div",ue,[a[12]||(a[12]=t("i",{class:"bx bx-book-open quiz-item-icon"},null,-1)),t("div",null,[t("div",_e,i(o.name),1),t("div",pe,[t("div",fe,[a[11]||(a[11]=t("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),_(" "+i(o.numberOfQuestion)+" "+i(d.$t("dashboards.list_items.quiz.questions")),1)]),t("div",ge,i(d.$t("class_question_set.other.created_by"))+" "+i(o.createdBy),1)])]),t("div",ve,[n(m,{type:"primary",class:"me-3 main-color-btn"},{default:l(()=>[_(i(d.$t("class_question_set.buttons.view")),1)]),_:1}),t("i",{class:"bx bx-edit",onClick:b=>e.onRefirectToUpdate(o.testTemplateId)},null,8,be),t("i",{class:"text-danger bx bx-trash-alt",onClick:b=>e.onRemoveTestTemplate(o.testTemplateId)},null,8,ye)])]))),256))])):(I(),x("div",he,[n(r,null,{description:l(()=>a[13]||(a[13]=[t("span",null," No data matches. ",-1)])),_:1})])),t("div",xe,[n(y,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":a[2]||(a[2]=o=>e.pageParams.pageNumber=o),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(o,b)=>`${b[0]}-${b[1]} of ${o} ${e.t("folder_index.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("folder_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])]),t("div",Ie,[t("div",ze,[t("div",null,[t("span",Te,i(d.$t("class_member.danger_zone.title")),1),t("span",null,i(d.$t("class_member.danger_zone.sub_title")),1)])]),t("div",Se,[a[15]||(a[15]=t("div",{class:"text-danger fs-6 fw-bold"},"Delete folder",-1)),t("div",Fe,i(d.$t("class_member.danger_zone.warning_explain")),1),n(m,{class:"mt-3",type:"primary",danger:"",size:"large",onClick:e.onOpenConfirmDelete},{default:l(()=>a[14]||(a[14]=[_(" Delete folder ")])),_:1,__:[14]})])])])]),n(F,{centered:"","wrap-class-name":"medium-modal",open:e.modal_update_open,onCancel:a[5]||(a[5]=o=>e.modal_update_open=!1)},{footer:l(()=>[n(m,{loading:e.isUpdateLoading,class:"main-color-btn",key:"submit",type:"primary",onClick:e.onUpdateFolder},{default:l(()=>a[17]||(a[17]=[_(" Update ")])),_:1,__:[17]},8,["loading"])]),default:l(()=>[t("div",we,[t("div",ke,[n(S,{class:"w-100 d-flex align-items-center"},{default:l(()=>[n(z,{span:4},{default:l(()=>[n(f,{onClick:a[3]||(a[3]=o=>e.modal_update_open=!1),to:{name:""}},{default:l(()=>a[16]||(a[16]=[t("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[16]})]),_:1}),n(z,{class:"main-title",span:20},{default:l(()=>[t("span",null,i(e.t("folder_index.modal.create_title")),1)]),_:1})]),_:1})]),n(v,{ref:"updateFolderFormRef",layout:"vertical",rules:e.rules,model:e.updateFolderFormState},{default:l(()=>[n(e.Input,{label:"Folder name",name:"name",value:e.updateFolderFormState.name,"onUpdate:value":a[4]||(a[4]=o=>e.updateFolderFormState.name=o),placeholder:e.t("folder_index.modal.create_folder_name_placeholder"),"is-required":!0,"max-length":100},null,8,["value","placeholder"])]),_:1},8,["model"])])]),_:1},8,["open"]),n(e.ShareModal,{ref:"shareModalRef",id:e.folderId,name:e.folderData.name,mode:"folder",options:[e.VISIBILITY.PRIVATE],visibility:e.VISIBILITY.PRIVATE},null,8,["id","name","options","visibility"])],64)}const Le=K(te,[["render",qe],["__scopeId","data-v-2d07fd31"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/folder/detail.vue"]]);export{Le as default};
