import{B as Qe,ak as $e,d as et,q as tt,l as nt,u as it,C as ee,i as A,j as st,O as ce,s as rt,M as ot,X as at,_ as lt,r as P,a as y,o as w,b as i,c as _,G as Se,e as U,p as C,w as T,f as F,t as f,F as te,E as oe}from"./index-C2jtDg6B.js";import{D as ct}from"./index-Uv2E7VfO.js";import{Q as q}from"./questionTypes-CS3lcRlq.js";import{T as ut}from"./TextArea-SkV_8IH8.js";import{l as dt}from"./vue-draggable-plus-DALPiNCD.js";import{H as ht}from"./HolderOutlined-DGSrVOt0.js";/* empty css                                                                 */var mt=$e();const Ae=Qe(mt);var ue={exports:{}},gt=ue.exports,Oe;function ft(){return Oe||(Oe=1,function(k,o){(function(ne,e){k.exports=e()})(gt,function(){var ne,e,W=1e3,v=6e4,X=36e5,h=864e5,z=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,u=31536e6,Y=2628e6,G=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,D={years:u,months:Y,days:h,hours:X,minutes:v,seconds:W,milliseconds:1,weeks:6048e5},j=function(p){return p instanceof J},R=function(p,c,r){return new J(p,r,c.$l)},H=function(p){return e.p(p)+"s"},V=function(p){return p<0},E=function(p){return V(p)?Math.ceil(p):Math.floor(p)},a=function(p){return Math.abs(p)},d=function(p,c){return p?V(p)?{negative:!0,format:""+a(p)+c}:{negative:!1,format:""+p+c}:{negative:!1,format:""}},J=function(){function p(r,b,I){var S=this;if(this.$d={},this.$l=I,r===void 0&&(this.$ms=0,this.parseFromMilliseconds()),b)return R(r*D[H(b)],this);if(typeof r=="number")return this.$ms=r,this.parseFromMilliseconds(),this;if(typeof r=="object")return Object.keys(r).forEach(function(L){S.$d[H(L)]=r[L]}),this.calMilliseconds(),this;if(typeof r=="string"){var O=r.match(G);if(O){var M=O.slice(2).map(function(L){return L!=null?Number(L):0});return this.$d.years=M[0],this.$d.months=M[1],this.$d.weeks=M[2],this.$d.days=M[3],this.$d.hours=M[4],this.$d.minutes=M[5],this.$d.seconds=M[6],this.calMilliseconds(),this}}return this}var c=p.prototype;return c.calMilliseconds=function(){var r=this;this.$ms=Object.keys(this.$d).reduce(function(b,I){return b+(r.$d[I]||0)*D[I]},0)},c.parseFromMilliseconds=function(){var r=this.$ms;this.$d.years=E(r/u),r%=u,this.$d.months=E(r/Y),r%=Y,this.$d.days=E(r/h),r%=h,this.$d.hours=E(r/X),r%=X,this.$d.minutes=E(r/v),r%=v,this.$d.seconds=E(r/W),r%=W,this.$d.milliseconds=r},c.toISOString=function(){var r=d(this.$d.years,"Y"),b=d(this.$d.months,"M"),I=+this.$d.days||0;this.$d.weeks&&(I+=7*this.$d.weeks);var S=d(I,"D"),O=d(this.$d.hours,"H"),M=d(this.$d.minutes,"M"),L=this.$d.seconds||0;this.$d.milliseconds&&(L+=this.$d.milliseconds/1e3,L=Math.round(1e3*L)/1e3);var ie=d(L,"S"),de=r.negative||b.negative||S.negative||O.negative||M.negative||ie.negative,he=O.format||M.format||ie.format?"T":"",K=(de?"-":"")+"P"+r.format+b.format+S.format+he+O.format+M.format+ie.format;return K==="P"||K==="-P"?"P0D":K},c.toJSON=function(){return this.toISOString()},c.format=function(r){var b=r||"YYYY-MM-DDTHH:mm:ss",I={Y:this.$d.years,YY:e.s(this.$d.years,2,"0"),YYYY:e.s(this.$d.years,4,"0"),M:this.$d.months,MM:e.s(this.$d.months,2,"0"),D:this.$d.days,DD:e.s(this.$d.days,2,"0"),H:this.$d.hours,HH:e.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:e.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:e.s(this.$d.seconds,2,"0"),SSS:e.s(this.$d.milliseconds,3,"0")};return b.replace(z,function(S,O){return O||String(I[S])})},c.as=function(r){return this.$ms/D[H(r)]},c.get=function(r){var b=this.$ms,I=H(r);return I==="milliseconds"?b%=1e3:b=I==="weeks"?E(b/D[I]):this.$d[I],b||0},c.add=function(r,b,I){var S;return S=b?r*D[H(b)]:j(r)?r.$ms:R(r,this).$ms,R(this.$ms+S*(I?-1:1),this)},c.subtract=function(r,b){return this.add(r,b,!0)},c.locale=function(r){var b=this.clone();return b.$l=r,b},c.clone=function(){return R(this.$ms,this)},c.humanize=function(r){return ne().add(this.$ms,"ms").locale(this.$l).fromNow(!r)},c.valueOf=function(){return this.asMilliseconds()},c.milliseconds=function(){return this.get("milliseconds")},c.asMilliseconds=function(){return this.as("milliseconds")},c.seconds=function(){return this.get("seconds")},c.asSeconds=function(){return this.as("seconds")},c.minutes=function(){return this.get("minutes")},c.asMinutes=function(){return this.as("minutes")},c.hours=function(){return this.get("hours")},c.asHours=function(){return this.as("hours")},c.days=function(){return this.get("days")},c.asDays=function(){return this.as("days")},c.weeks=function(){return this.get("weeks")},c.asWeeks=function(){return this.as("weeks")},c.months=function(){return this.get("months")},c.asMonths=function(){return this.as("months")},c.years=function(){return this.get("years")},c.asYears=function(){return this.as("years")},p}(),ae=function(p,c,r){return p.add(c.years()*r,"y").add(c.months()*r,"M").add(c.days()*r,"d").add(c.hours()*r,"h").add(c.minutes()*r,"m").add(c.seconds()*r,"s").add(c.milliseconds()*r,"ms")};return function(p,c,r){ne=r,e=r().$utils(),r.duration=function(S,O){var M=r.locale();return R(S,{$l:M},O)},r.isDuration=j;var b=c.prototype.add,I=c.prototype.subtract;c.prototype.add=function(S,O){return j(S)?ae(this,S,1):b.bind(this)(S,O)},c.prototype.subtract=function(S,O){return j(S)?ae(this,S,-1):I.bind(this)(S,O)}}})}(ue)),ue.exports}var vt=ft();const pt=Qe(vt),_t=et({__name:"test",setup(k,{expose:o}){o();const ne=new URL("/assets/confetti-bjvcnoca.lottie",import.meta.url).href,e=tt(),W=nt(),{t:v}=it(),X={HTML:"HTML",PLAIN_TEXT:"PlainText"},h={id:"123456",title:"Programming fundamental",description:"Basic knowledge about programming.",totalQuestion:30,completed:8,question:[{id:"11111111-aaaa-aaaa-aaaa-111111111111",questionSetId:"11111111-1111-1111-1111-111111111111",type:"MultipleChoice",textFormat:"HTML",questionText:"<p>Which of the following are valid variable declarations in JavaScript?<br/><pre>let x = 5;<br>const y = 'hello';<br>var 1name = 'error';</pre></p>",score:10,scoreGraded:0,explainText:`Variables in JavaScript cannot start with a number. 'let x = 5' and 'const y = "hello"' are valid, but 'var 1name = "error"' is invalid.`,questionData:{multipleChoice:[{id:"a1",text:"Giữ vững địa vị thống trị của giai cấp công nhân thông qua Đảng Cộng sản Việt Nam trong mối liên minh giai cấp",isAnswer:!0},{id:"a2",text:"Giữ vững lập trường chính trị - tư tưởng của giai cấp công nhân, vai trò lãnh đạo của Đảng Cộng sản Việt Nam, giữ vững độc lập dân tộc và định hướng đi lên chủ nghĩa xã hội",isAnswer:!0},{id:"a3",text:"Giữ vững nền kinh tế thị trường theo hướng hiện đại, kiên định con đường đi lên chủ nghĩa xã hội",isAnswer:!1},{id:"a4",text:"Giữ vững nền kinh tế thị trường theo hướng hiện đại, kiên định con đường đi lên chủ nghĩa xã hội",isAnswer:!1}],matching:null,ordering:null,shortText:null}},{id:"44444444-dddd-dddd-dddd-444444444444",questionSetId:"11111111-1111-1111-1111-111111111111",type:"ShortText",textFormat:"HTML",questionText:"What is the output of the following code?<br/><pre>console.log(typeof null);</pre>",score:5,scoreGraded:5,explainText:"`typeof null` returns `'object'` due to a historical bug in JavaScript that has been preserved for backward compatibility.",questionData:{multipleChoice:null,matching:null,ordering:null,shortText:"object"}},{id:"22222222-bbbb-bbbb-bbbb-222222222222",questionSetId:"11111111-1111-1111-1111-111111111111",type:"Matching",textFormat:"PlainText",questionText:"Match the data types with appropriate examples.",score:10,scoreGraded:10,explainText:"A string is a series of characters like 'Hello World'. A boolean can be true or false. A number is a numeric value like 42.",questionData:{multipleChoice:null,ordering:null,shortText:null,matching:{leftItems:[{id:"l1",text:"String"},{id:"l2",text:"Boolean"},{id:"l3",text:"Number"}],rightItems:[{id:"r1",text:"'Hello World'"},{id:"r2",text:"true"},{id:"r3",text:"42"}],matches:[{leftId:"l1",rightId:"r1"},{leftId:"l2",rightId:"r2"},{leftId:"l3",rightId:"r3"}]}}},{id:"33333333-cccc-cccc-cccc-333333333333",questionSetId:"11111111-1111-1111-1111-111111111111",type:"Ordering",textFormat:"PlainText",questionText:"Arrange the steps of executing a JavaScript function.",score:10,scoreGraded:10,explainText:"First, the function must be declared. Then it can be called, at which point the body of the function will execute.",questionData:{multipleChoice:null,matching:null,shortText:null,ordering:[{id:"s2",text:"Function is called",correctOrder:2},{id:"s3",text:"Function body is executed",correctOrder:3},{id:"s1",text:"Function is declared",correctOrder:1}]}},{id:"55555555-aaaa-aaaa-aaaa-555555555555",questionSetId:"11111111-1111-1111-1111-111111111111",type:"MultipleChoice",textFormat:"HTML",questionText:"Which of the following statements correctly define a function in JavaScript?<br/><pre>function greet() { return 'Hi'; }</pre>",score:10,scoreGraded:0,explainText:"`function greet()` and `let greet = () => 'Hi';` are valid JavaScript function declarations. `def greet()` is Python syntax and not valid in JavaScript.",questionData:{multipleChoice:[{id:"f1",text:"function greet() { return 'Hi'; }",isAnswer:!0},{id:"f2",text:"def greet(): return 'Hi'",isAnswer:!1},{id:"f3",text:"let greet = () => 'Hi';",isAnswer:!0}],matching:null,ordering:null,shortText:null}},{id:"66666666-bbbb-bbbb-bbbb-666666666666",questionSetId:"11111111-1111-1111-1111-111111111111",type:"Matching",textFormat:"PlainText",questionText:"Match the loop type with its primary use case.",score:10,scoreGraded:10,explainText:"`for` is used when the number of iterations is known, `while` is better when the condition is dynamic, and `forEach` is designed for arrays.",questionData:{multipleChoice:null,ordering:null,shortText:null,matching:{leftItems:[{id:"lp1",text:"for loop"},{id:"lp2",text:"while loop"},{id:"lp3",text:"forEach loop"}],rightItems:[{id:"ru1",text:"Known number of iterations"},{id:"ru2",text:"Iterating over array elements"},{id:"ru3",text:"Unknown loop condition"}],matches:[{leftId:"lp1",rightId:"ru1"},{leftId:"lp2",rightId:"ru3"},{leftId:"lp3",rightId:"ru2"}]}}},{id:"77777777-cccc-cccc-cccc-777777777777",questionSetId:"11111111-1111-1111-1111-111111111111",type:"Ordering",textFormat:"PlainText",questionText:"Arrange the steps for writing and running a basic JavaScript program.",score:10,scoreGraded:10,explainText:"JavaScript code is typically written in a .js file, then linked in HTML, and finally run in the browser when the HTML is opened.",questionData:{multipleChoice:null,matching:null,shortText:null,ordering:[{id:"j1",text:"Write code in a .js file",correctOrder:1},{id:"j2",text:"Link the file to an HTML document",correctOrder:2},{id:"j3",text:"Open the HTML file in a browser",correctOrder:3}]}},{id:"88888888-dddd-dddd-dddd-888888888888",questionSetId:"11111111-1111-1111-1111-111111111111",type:"ShortText",textFormat:"HTML",questionText:"What will be the output of the following JavaScript code?<br/><pre>console.log(2 + '2');</pre>",score:5,scoreGraded:5,explainText:"When using `+` with a number and a string, JavaScript performs string concatenation. So `2 + '2'` becomes `'22'`.",questionData:{multipleChoice:null,matching:null,ordering:null,shortText:"22"}},{id:"99999999-eeee-eeee-eeee-999999999999",questionSetId:"11111111-1111-1111-1111-111111111111",type:"ShortText",textFormat:"PlainText",questionText:"In programming, what does 'DRY' stand for?",score:5,scoreGraded:5,explainText:"DRY stands for 'Don't Repeat Yourself', a principle aimed at reducing code duplication and improving maintainability.",questionData:{multipleChoice:null,matching:null,ordering:null,shortText:"Don't Repeat Yourself"}}]},z=ee(()=>d.value.filter(n=>n.result===!1)),u=A(h.question[0]),Y=A(""),G=A(!1),D=A(!1),j=ee(()=>{var n;return(n=u.value.questionData.multipleChoice)==null?void 0:n.some(t=>t.text.length>=100)}),R=A([]),H=A([]),V=A([]),E=A([]),a=A(""),d=A([]),J=A(e.params.id.toString()),ae=A(),p=A(!1),c=()=>{var n,t;p.value=!0,(t=(n=ae.value)==null?void 0:n.getDotLottieInstance())==null||t.play(),setTimeout(()=>{p.value=!1},5e3)},r=(n,t)=>{var x;const s=h.question.findIndex(g=>g.id===n);if(s===-1)return!1;let m=(x=h.question[s].questionData.multipleChoice)==null?void 0:x.filter(g=>g.isAnswer).map(g=>g.id||[]).sort(),l=t.sort();return t.length!==(m==null?void 0:m.length)?!1:l.every((g,Q)=>g===m[Q])},b=n=>{var x;const t=h.question.findIndex(g=>g.id===u.value.id);let s=(x=h.question[t].questionData.multipleChoice)==null?void 0:x.filter(g=>g.isAnswer).map(g=>g.id||[]);const m=d.value.findIndex(g=>g.questionId===u.value.id);let l=d.value[m].multipleChoices;return s!=null&&s.includes(n.id)?!0:!(l!=null&&l.includes(n.id)&&!n.isAnswer)},I=(n,t)=>{var x;const s=h.question.findIndex(g=>g.id===n);if(s===-1)return!1;let m=((x=h.question[s].questionData.ordering)==null?void 0:x.map(g=>g.correctOrder).sort())||[];return t.map(g=>g.correctOrder).every((g,Q)=>g===m[Q])},S=(n,t,s)=>{const m=h.question.findIndex(N=>N.id===n);if(m===-1)return!1;let l=h.question[m].questionData.matching.matches,x=t.map(N=>N.id),g=s.map(N=>N.id);return x.map((N,re)=>({leftId:N,rightId:g[re]})).every(N=>l.some(re=>re.leftId===N.leftId&&re.rightId===N.rightId))},O=n=>{var x,g;const t=u.value.questionData.matching;if(!t)return!1;let s=t.leftItems.some(Q=>Q.id===n),m=t.matches.find(Q=>s?Q.leftId===n:Q.rightId===n);const l=s?H.value.findIndex(Q=>Q.id===n):V.value.findIndex(Q=>Q.id===n);return l===-1||!m?!1:s?((x=V.value[l])==null?void 0:x.id)===m.rightId:((g=H.value[l])==null?void 0:g.id)===m.leftId},M=n=>n.trim().toLowerCase().normalize("NFKC").replace(/[\u2019\u2018\u201B\u0060]/g,"'").replace(/\s+/g," "),L=(n,t)=>{const s=h.question.findIndex(m=>m.id===n);return s===-1?!1:M(t)===M(h.question[s].questionData.shortText)},ie=()=>{var s,m;const n=(s=d.value.find(l=>l.questionId===u.value.id))==null?void 0:s.shortText;if(!n)return!1;const t=(m=h.question.find(l=>l.id===u.value.id))==null?void 0:m.questionData.shortText;return M(n)===M(t)},de=ee(()=>{var n;if(u.value.type===q.SHORT_TEXT&&D.value&&!ie())return(n=h.question.find(t=>t.id===u.value.id))==null?void 0:n.questionData.shortText}),he=A(null),K=A(!1),De=()=>{K.value=!K.value},me=A(!1),ye=()=>{me.value=!0;let n=sessionStorage.getItem("test_settings");n&&(B.numberOfQuestion=JSON.parse(n).numberOfQuestion,B.questionTypes=JSON.parse(n).questionTypes)},He=()=>{me.value=!1},Ee=A(),B=st({numberOfQuestion:20,questionTypes:[q.MULTIPLE_CHOICE,q.MATCHING,q.ORDERING,q.SHORT_TEXT]}),Re=(n,t)=>{if(t)B.questionTypes.includes(n)||B.questionTypes.push(n);else{const s=B.questionTypes.indexOf(n);s!==-1&&B.questionTypes.splice(s,1)}},Le=()=>{sessionStorage.setItem("test_settings",JSON.stringify(B))},Z=(n,t)=>{n===-1?d.value.push(t):d.value[n]=t},Ne=()=>{if(D.value)return;const n=d.value.findIndex(m=>m.questionId===u.value.id),t=G.value,s=G.value?v("learn_QS.result.skipped"):"";switch(u.value.type){case q.MULTIPLE_CHOICE:{R.value.length>0?Z(n,{questionId:u.value.id,type:u.value.type,isSkipped:t,result:!1,resultText:s,multipleChoices:[...R.value],matchingLeft:null,matchingRight:null,ordering:null,shortText:""}):n!==-1&&d.value.splice(n,1);break}case q.MATCHING:{Z(n,{questionId:u.value.id,type:u.value.type,isSkipped:t,result:!1,resultText:s,multipleChoices:null,matchingLeft:[...H.value],matchingRight:[...V.value],ordering:null,shortText:""});break}case q.ORDERING:{Z(n,{questionId:u.value.id,type:u.value.type,isSkipped:t,result:!1,resultText:s,multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:[...E.value],shortText:""});break}case q.SHORT_TEXT:{a.value.trim()?Z(n,{questionId:u.value.id,type:u.value.type,isSkipped:t,result:!1,resultText:s,multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:null,shortText:a.value.trim()}):n!==-1&&d.value.splice(n,1);break}}},ge=(n,t)=>{var s,m;switch(n.type){case q.MULTIPLE_CHOICE:return{...t,multipleChoices:((s=n.questionData.multipleChoice)==null?void 0:s.filter(l=>l.isAnswer).map(l=>l.id))??[]};case q.MATCHING:{const l=n.questionData.matching,x=(l==null?void 0:l.matches)??[],g=(l==null?void 0:l.leftItems)??[],Q=(l==null?void 0:l.rightItems)??[],N=x.map(we=>g.find(Te=>Te.id==we.leftId)),re=x.map(we=>Q.find(Te=>Te.id==we.rightId));return{...t,matchingLeft:N,matchingRight:re}}case q.ORDERING:return{...t,ordering:((m=n.questionData.ordering)==null?void 0:m.slice().sort((l,x)=>l.correctOrder-x.correctOrder))??[]};case q.SHORT_TEXT:return{...t,shortText:n.questionData.shortText??""};default:return t}},qe=()=>{h.question.forEach(n=>{const t={questionId:n.id,type:n.type,isSkipped:!0,result:!1,resultText:v("learn_QS.result.skipped"),multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:null,shortText:""};let s=d.value.findIndex(m=>m.questionId===n.id);s===-1&&(d.value.push(ge(n,t)),s=d.value.length-1),d.value[s].isSkipped&&Z(s,{...d.value[s],...ge(n,{})})})},Pe=()=>{ke(),d.value.length<h.question.length?ot.confirm({title:`You missed ${h.question.length-d.value.length} questions.`,content:"Are you certain about this decision?",onOk:()=>{D.value=!0,qe(),fe()}}):(D.value=!0,fe())},fe=()=>{const n=h.question.findIndex(t=>t.id===u.value.id);se(n),d.value.filter(t=>t.isSkipped===!1).forEach(t=>{let s;switch(t.type){case q.MULTIPLE_CHOICE:{s=r(t.questionId,t.multipleChoices),t.result=s,t.resultText=v(s?"learn_QS.result.correct":"learn_QS.result.wrong");break}case q.MATCHING:{s=S(t.questionId,t.matchingLeft,t.matchingRight),t.result=s,t.resultText=v(s?"learn_QS.result.correct":"learn_QS.result.wrong");break}case q.ORDERING:{s=I(t.questionId,t.ordering),t.result=s,t.resultText=v(s?"learn_QS.result.correct":"learn_QS.result.wrong");break}case q.SHORT_TEXT:{s=L(t.questionId,t.shortText),t.result=s,t.resultText=v(s?"learn_QS.result.correct":"learn_QS.result.wrong");break}}}),Ce(),z.value.length===0&&c()},Ue=()=>{G.value=!0;const n=d.value.findIndex(t=>t.questionId===u.value.id);Z(n,{questionId:u.value.id,type:u.value.type,isSkipped:!0,result:!1,resultText:"Skipped",multipleChoices:R.value,matchingLeft:H.value,matchingRight:V.value,ordering:E.value,shortText:a.value})},se=n=>{var s,m;le(),G.value=!1,u.value=h.question[n];const t=d.value.find(l=>l.questionId===u.value.id);switch(u.value.type){case q.MULTIPLE_CHOICE:{Y.value=v("learn_QS.instructions.multiple_choice",{number:(s=u.value.questionData.multipleChoice)==null?void 0:s.filter(l=>l.isAnswer).length}),R.value=t?t==null?void 0:t.multipleChoices:[];break}case q.ORDERING:{Y.value=v("learn_QS.instructions.matching"),E.value=t?t==null?void 0:t.ordering:((m=u.value.questionData.ordering)==null?void 0:m.map(l=>l))||[];break}case q.MATCHING:{Y.value=v("learn_QS.instructions.ordering"),H.value=t?t==null?void 0:t.matchingLeft:u.value.questionData.matching.leftItems.map(l=>l)||[],V.value=t?t==null?void 0:t.matchingRight:u.value.questionData.matching.rightItems.map(l=>l)||{};break}case q.SHORT_TEXT:{Y.value=v("learn_QS.instructions.short_text"),a.value=t?t==null?void 0:t.shortText:"";break}}},Fe=()=>{G.value=!1;const n=h.question.findIndex(t=>t.id===u.value.id);n<h.question.length-1&&se(n+1)},Ye=()=>{G.value=!1;const n=h.question.findIndex(t=>t.id===u.value.id);n>0&&se(n-1)},Ge=n=>Array.from(d.value).some(t=>t.questionId===n),Ve=n=>{var t;return(t=d.value.find(s=>s.questionId===n&&!s.isSkipped))==null?void 0:t.result},ze=ee(()=>d.value.some(n=>n.questionId===u.value.id&&n.isSkipped)),je=ee(()=>{const n=d.value.find(t=>t.questionId===u.value.id);return{result:n==null?void 0:n.result,resultText:n==null?void 0:n.resultText}}),Je=ee(()=>{const n=h.question.findIndex(t=>t.id===u.value.id);return n!==-1&&n<h.question.length-1}),Be=ee(()=>{const n=h.question.findIndex(t=>t.id===u.value.id);return n!==-1&&n>0}),ve=()=>Math.floor((h.question.length-z.value.length)/h.question.length*100),Ie=()=>Math.floor(z.value.length/h.question.length*100),pe=()=>{const n=$(".content-item-test-result");n&&$(n).slideToggle()},Ce=()=>{pe(),Ae.setOptions({lang:{decimalPoint:".",thousandsSep:","}}),Ae.chart("result_chart_container",{chart:{type:"pie",custom:{},events:{render:function(){const n=this,t=n.series[0];let s=n.options.chart.custom.label;s||(s=n.options.chart.custom.label=n.renderer.label(`<strong>${ve()}%</strong>`,0,0).css({color:"var(--text-color)",textAnchor:"middle"}).add());const m=t.center[0]+n.plotLeft,l=t.center[1]+n.plotTop-s.attr("height")/2;s.attr({x:m,y:l}),s.css({fontSize:`${t.center[2]/8}px`})}}},credits:{enabled:!1},plotOptions:{pie:{borderWidth:0,borderRadius:3}},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.0f}%</b>"},series:[{type:"pie",name:"Result",colorByPoint:!0,innerSize:"75%",dataLabels:{enabled:!1},data:[{name:v("practice_test.other.correct"),y:ve(),color:"var(--correct-answer-color)"},{name:v("practice_test.other.incorrect"),y:Ie(),color:"var(--incorrect-answer-color)"}]}]})};ce.extend(pt);const _e=A(),xe=A(""),be=()=>{_e.value=ce()},ke=()=>{const t=ce().diff(_e.value),s=Math.floor(t/1e3);if(s<60)xe.value=`${v("practice_test.other.your_time")} ${s} ${v(s===1?"practice_test.other.second":"practice_test.other.second_plural")}`;else{const m=ce.duration(t),l=m.hours(),x=m.minutes();let g=v("practice_test.other.your_time");l>0&&(g+=`${l} ${l>1?v("practice_test.other.hour"):v("practice_test.other.hour_plural")} `),x>0&&(g+=`${x} ${x>1?v("practice_test.other.minute"):v("practice_test.other.minute_plural")}`),xe.value=g.trim()}},We={scroll:!0,scrollSensitivity:100,scrollSpeed:100,scrollTarget:document.scrollingElement};function le(){at(()=>{requestAnimationFrame(()=>{const n=document.querySelectorAll(".matching-option-container.left .answer-option-matching"),t=document.querySelectorAll(".matching-option-container.right .answer-option-matching"),s=Math.min(n.length,t.length);for(let m=0;m<s;m++){const l=n[m],x=t[m];if(!l||!x)continue;l.style.height="auto",x.style.height="auto";const g=Math.max(l.offsetHeight,x.offsetHeight);l.style.height=`${g}px`,x.style.height=`${g}px`}})})}const Xe=()=>{window.location.reload()},Ke=()=>{W.push({name:"User_QuestionSet_Learn",params:{id:J.value}})},Ze=()=>{const n=z.value.map(t=>t.questionId);h.question=h.question.filter(t=>n.includes(t.id)),d.value=[],D.value=!1,se(0),le(),be(),pe()};rt(()=>{ye(),se(0),le(),window.addEventListener("resize",le),be()});const Me={animationPath:ne,route:e,router:W,t:v,QUESTION_FORMAT:X,quiz:h,incorrect:z,currentQuestion:u,currentQuestionInstruction:Y,currentQuestionIsSkipped:G,isSubmitted:D,isOptionExceed:j,userAnswerMultipleChoice:R,userAnswerMatchingLeft:H,userAnswerMatchingRight:V,userAnswerOrdering:E,userAnswerShortText:a,userAnswer:d,questionSetId:J,animationRef:ae,isAnimationDisplaying:p,triggerAnimation:c,checkMultipleChoice:r,checkMultipleChoiceAnswerCorrect:b,checkOrdering:I,checkMatching:S,checkMatchingAnswerCorrect:O,cleanShortTextAnswer:M,checkShortText:L,checkShortextCorrect:ie,getShortTextCorrectAnswer:de,explainModal:he,explainModalOpen:K,toggleExplainModal:De,setting_modal_open:me,openSettingModal:ye,closeSettingModal:He,settingFormRef:Ee,settingFormState:B,toggleQuestionType:Re,onCreateNewTest:Le,updateUserAnswer:Z,onUserAnswerChange:Ne,refactorLeftOverUserAnswer:ge,handleSkippedQuestion:qe,onSubmitAnswer:Pe,getUserAnswerResult:fe,onSkipQuestion:Ue,onLoadCurrentQuestion:se,onNextQuestion:Fe,onPreviousQuestion:Ye,userAnswerContainQuestion:Ge,getUserAnswerResultById:Ve,userAnswerCurrentQuestionSkipped:ze,userAnswerCurrentQuestionResult:je,hasNextQuestion:Je,hasPreviousQuestion:Be,getCorrectPercentage:ve,getInCorrectPercentage:Ie,toggleResult:pe,generateChart:Ce,startTime:_e,timerResult:xe,timerStart:be,timerEnd:ke,dragOptions:We,syncMatchingHeights:le,onNewTest:Xe,onRedirectToLearn:Ke,onRetest:Ze,get DotLottieVue(){return ct},get QUESTION_TYPE(){return q},TextArea:ut,get VueDraggable(){return dt},get HolderOutlined(){return ht}};return Object.defineProperty(Me,"__isScriptSetup",{enumerable:!1,value:!0}),Me}}),xt={class:"page-container"},bt={class:"title-container title-container-header"},wt={class:"content content-test d-flex flex-column"},Tt={class:"d-flex"},St={class:"content-item question-navigators"},yt={class:"question-navigator-title"},qt={class:"question-navigator-container"},It=["onClick"],Ct={class:"content-item content-item-test-result"},kt={class:"result-container"},Mt={class:"result-section"},At={class:"result-section-title"},Ot={class:"result-section-statistic"},Qt={class:"result-text-container"},Dt={class:"result-text correct"},Ht={class:"result-text incorrect"},Et={class:"result-section result-section-buttons"},Rt={class:"result-section-title"},Lt={class:"result-button-title"},Nt={class:"result-button-content"},Pt={class:"result-button-title"},Ut={class:"result-button-content"},Ft={class:"result-button-title"},Yt={class:"result-button-content"},Gt={class:"content-item"},Vt={class:"section question-section"},zt=["innerHTML"],jt={class:"section answer-section"},Jt={class:"d-flex align-items-center"},Bt={class:"answer-section-ins"},Wt={class:"answer-option-content"},Xt={key:0,class:"bx bx-check answer-icon"},Kt={key:1,class:"bx bx-x answer-icon"},Zt={key:1,class:"answer-option-container matching"},$t={class:"matching-option-container left"},en={class:"d-flex align-items-center"},tn={class:"answer-option-order"},nn={class:"answer-option-content"},sn={class:"matching-option-container right"},rn={class:"d-flex align-items-center"},on={class:"answer-option-content"},an={class:"answer-option-order"},ln={key:2,class:"answer-option-container ordering"},cn={class:"answer-option-order"},un={class:"answer-option-content"},dn={key:3,class:"answer-option-container"},hn={class:"w-100 d-flex align-items-center"},mn={key:0,class:"bx bx-check answer-icon"},gn={key:1,class:"bx bx-x answer-icon"},fn={key:0,class:"short-text-correct-answer"},vn={class:"learn-question-footer"},pn={class:"d-flex"},_n={class:"learn-question-explain"},xn={class:"title-container"},bn={class:"setting-form-item"},wn={class:"setting-form-item setting-form-switch"};function Tn(k,o,ne,e,W,v){const X=P("RouterLink"),h=P("a-col"),z=P("a-row"),u=P("a-button"),Y=P("a-checkbox"),G=P("a-checkbox-group"),D=P("a-input-number"),j=P("a-form-item"),R=P("a-divider"),H=P("a-switch"),V=P("a-form"),E=P("a-modal");return w(),y(te,null,[i("div",xt,[e.isAnimationDisplaying?(w(),Se(e.DotLottieVue,{key:0,autoplay:e.isAnimationDisplaying,ref:"animationRef",class:C(["animation-container"]),onComplete:o[0]||(o[0]=a=>e.isAnimationDisplaying=!1),src:e.animationPath},null,8,["autoplay","src"])):U("v-if",!0),i("div",bt,[_(z,{class:"w-100 d-flex align-items-center"},{default:T(()=>[_(h,{span:1},{default:T(()=>[_(X,{to:{name:"User_Library"}},{default:T(()=>o[10]||(o[10]=[i("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[10]})]),_:1}),_(h,{class:"main-title",span:22},{default:T(()=>[i("span",null,f(e.quiz.title),1),o[11]||(o[11]=F()),o[12]||(o[12]=i("br",null,null,-1)),i("span",null,f(e.quiz.description),1)]),_:1,__:[11,12]}),_(h,{span:1},{default:T(()=>[i("i",{class:"bx bx-cog test-setting-btn",onClick:e.openSettingModal})]),_:1})]),_:1})]),i("div",wt,[i("div",Tt,[i("div",St,[i("div",yt,f(e.t("practice_test.other.question_list")),1),i("div",qt,[(w(!0),y(te,null,oe(e.quiz.question,(a,d)=>(w(),y("div",{class:C(["question-navigator-item",e.currentQuestion.id===a.id?"current-question":"",e.userAnswerContainQuestion(a.id)?"completed-question":"",e.isSubmitted?e.getUserAnswerResultById(a.id)?"correct":"incorrect":""]),onClick:J=>e.onLoadCurrentQuestion(d)},[i("span",null,f(d+1),1)],10,It))),256))]),_(u,{type:"primary",class:C(["main-color-btn",e.isSubmitted?"main-color-btn-disabled":""]),onClick:e.onSubmitAnswer},{default:T(()=>[F(f(k.$t("learn_QS.buttons.submit")),1)]),_:1},8,["class"])]),i("div",Ct,[i("div",kt,[i("div",Mt,[i("div",At,f(e.timerResult),1),i("div",Ot,[o[13]||(o[13]=i("div",{id:"result_chart_container"},null,-1)),i("div",Qt,[i("div",Dt,[F(f(k.$t("practice_test.other.correct"))+" ",1),i("span",null,f(e.quiz.question.length-e.incorrect.length),1)]),i("div",Ht,[F(f(k.$t("practice_test.other.incorrect"))+" ",1),i("span",null,f(e.incorrect.length),1)])])])]),i("div",Et,[i("div",Rt,f(k.$t("practice_test.final_modal.button_title")),1),i("div",{class:"result-button",onClick:e.onNewTest},[o[14]||(o[14]=i("i",{class:"bx bxs-news"},null,-1)),i("div",null,[i("div",Lt,f(k.$t("practice_test.final_modal.buttons.new_test")),1),i("div",Nt,f(k.$t("practice_test.final_modal.buttons_ins.new_test")),1)])]),e.getInCorrectPercentage()<=30?(w(),y("div",{key:0,class:"result-button",onClick:e.onRedirectToLearn},[o[15]||(o[15]=i("i",{class:"bx bx-analyse"},null,-1)),i("div",null,[i("div",Pt,f(k.$t("practice_test.final_modal.buttons.practice")),1),i("div",Ut,f(k.$t("practice_test.final_modal.buttons_ins.practice")),1)])])):U("v-if",!0),e.getInCorrectPercentage()>30?(w(),y("div",{key:1,class:"result-button",onClick:e.onRetest},[o[16]||(o[16]=i("i",{class:"bx bx-reset"},null,-1)),i("div",null,[i("div",Ft,f(k.$t("practice_test.final_modal.buttons.re_test")),1),i("div",Yt,f(k.$t("practice_test.final_modal.buttons_ins.re_test")),1)])])):U("v-if",!0)])])])]),i("div",Gt,[i("div",Vt,[i("div",{class:C(["learn-question",e.currentQuestion.textFormat===e.QUESTION_FORMAT.HTML?"":"d-none"]),innerHTML:e.currentQuestion.questionText},null,10,zt),i("div",{class:C(["learn-question",e.currentQuestion.textFormat===e.QUESTION_FORMAT.HTML?"d-none":""])},f(e.currentQuestion.questionText),3),i("div",jt,[i("div",Jt,[i("div",Bt,f(e.currentQuestionInstruction),1),i("div",{class:C(["ms-3 learn-question-result",e.isSubmitted?e.userAnswerCurrentQuestionResult.result?"result-correct":"result-incorrect":"",e.userAnswerCurrentQuestionSkipped?"result-skipped":""])},f(e.userAnswerCurrentQuestionResult.resultText),3)]),e.currentQuestion.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(w(),Se(G,{key:0,onChange:e.onUserAnswerChange,value:e.userAnswerMultipleChoice,"onUpdate:value":o[1]||(o[1]=a=>e.userAnswerMultipleChoice=a),class:C(["answer-option-container multiplechoice",e.isOptionExceed?"column":""])},{default:T(()=>[(w(!0),y(te,null,oe(e.currentQuestion.questionData.multipleChoice,(a,d)=>(w(),Se(Y,{value:a.id,"onUpdate:value":J=>a.id=J,disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,class:C(["answer-option answer-option-multiplechoice",e.isSubmitted&&e.checkMultipleChoiceAnswerCorrect(a)&&a.isAnswer?"answer-correct":"",e.isSubmitted&&!e.checkMultipleChoiceAnswerCorrect(a)&&!a.isAnswer?"answer-incorrect":""])},{default:T(()=>[i("div",Wt,f(a.text),1),e.isSubmitted&&e.checkMultipleChoiceAnswerCorrect(a)&&a.isAnswer?(w(),y("i",Xt)):U("v-if",!0),e.isSubmitted&&!e.checkMultipleChoiceAnswerCorrect(a)&&!a.isAnswer?(w(),y("i",Kt)):U("v-if",!0)]),_:2},1032,["value","onUpdate:value","disabled","class"]))),256))]),_:1},8,["value","class"])):U("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.MATCHING?(w(),y("div",Zt,[i("div",$t,[_(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerMatchingLeft,"onUpdate:modelValue":o[2]||(o[2]=a=>e.userAnswerMatchingLeft=a),options:e.dragOptions,onMove:e.syncMatchingHeights,onEnd:o[3]||(o[3]=()=>{e.syncMatchingHeights(),e.onUserAnswerChange()})},{default:T(()=>[(w(!0),y(te,null,oe(e.userAnswerMatchingLeft,(a,d)=>(w(),y("div",en,[i("div",{class:C(["answer-option answer-option-matching",e.isSubmitted?e.checkMatchingAnswerCorrect(a.id)?"answer-correct":"answer-incorrect":""])},[i("div",tn,[_(e.HolderOutlined)]),i("div",nn,f(a.text),1)],2),i("i",{class:C(["bx bxs-label matching-icon",e.isSubmitted?e.checkMatchingAnswerCorrect(a.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2)]))),256))]),_:1},8,["disabled","modelValue"])]),i("div",sn,[_(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerMatchingRight,"onUpdate:modelValue":o[4]||(o[4]=a=>e.userAnswerMatchingRight=a),options:e.dragOptions,onMove:e.syncMatchingHeights,onEnd:o[5]||(o[5]=()=>{e.syncMatchingHeights(),e.onUserAnswerChange()})},{default:T(()=>[(w(!0),y(te,null,oe(e.userAnswerMatchingRight,(a,d)=>(w(),y("div",rn,[i("i",{class:C(["bx bxs-label matching-icon",e.isSubmitted?e.checkMatchingAnswerCorrect(a.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2),i("div",{class:C(["answer-option answer-option-matching",e.isSubmitted?e.checkMatchingAnswerCorrect(a.id)?"answer-correct":"answer-incorrect":""])},[i("div",on,f(a.text),1),i("div",an,[_(e.HolderOutlined)])],2)]))),256))]),_:1},8,["disabled","modelValue"])])])):U("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.ORDERING?(w(),y("div",ln,[_(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerOrdering,"onUpdate:modelValue":o[6]||(o[6]=a=>e.userAnswerOrdering=a),options:e.dragOptions,onEnd:e.onUserAnswerChange},{default:T(()=>[(w(!0),y(te,null,oe(e.userAnswerOrdering,(a,d)=>(w(),y("div",{class:C(["answer-option answer-option-ordering",e.isSubmitted?d+1===a.correctOrder?"answer-correct":"answer-incorrect":""])},[i("div",cn,[_(e.HolderOutlined),F(" "+f(d+1),1)]),i("div",un,f(a.text),1),i("div",{class:C(["answer-option-order answer-icon",e.isSubmitted?"":"d-none"])},[o[17]||(o[17]=i("i",{class:"bx bx-hash answer-icon"},null,-1)),F(" "+f(a.correctOrder),1)],2)],2))),256))]),_:1},8,["disabled","modelValue"])])):U("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.SHORT_TEXT?(w(),y("div",dn,[i("div",{class:C(["answer-short-text",e.isSubmitted?e.checkShortextCorrect()?"answer-correct":"answer-incorrect":""])},[i("div",hn,[_(e.TextArea,{readonly:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,placeholder:"Enter your answer...",modelValue:e.userAnswerShortText,"onUpdate:modelValue":o[7]||(o[7]=a=>e.userAnswerShortText=a),onChange:e.onUserAnswerChange},null,8,["readonly","modelValue"]),e.isSubmitted&&e.checkShortextCorrect()?(w(),y("i",mn)):U("v-if",!0),e.isSubmitted&&!e.checkShortextCorrect()?(w(),y("i",gn)):U("v-if",!0)]),e.isSubmitted&&!e.checkShortextCorrect()?(w(),y("div",fn,[o[18]||(o[18]=F(" Correct answer: ")),i("span",null,f(e.getShortTextCorrectAnswer),1)])):U("v-if",!0)],2)])):U("v-if",!0)]),i("div",vn,[_(u,{class:C(["main-color-btn",e.hasPreviousQuestion?"":"main-color-btn-disabled"]),type:"primary",size:"large",onClick:e.onPreviousQuestion},{default:T(()=>[o[19]||(o[19]=i("i",{class:"bx bx-chevron-left"},null,-1)),F(" "+f(k.$t("practice_test.buttons.previous")),1)]),_:1,__:[19]},8,["class"]),i("div",{class:C(["main-color-btn-ghost",e.userAnswerCurrentQuestionSkipped||e.isSubmitted?"main-color-btn-ghost-disabled":""]),onClick:o[8]||(o[8]=a=>e.onSkipQuestion())},f(k.$t("learn_QS.buttons.dont_know")),3),i("div",pn,[_(u,{class:C(["main-color-btn",e.hasNextQuestion?"":"main-color-btn-disabled"]),type:"primary",size:"large",onClick:e.onNextQuestion},{default:T(()=>[F(f(k.$t("learn_QS.buttons.next_question"))+" ",1),o[20]||(o[20]=i("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[20]},8,["class"])])])])]),i("div",{ref:"explainModal",class:C(["explain-modal explain-modal-up",{show:e.explainModalOpen}])},[i("div",_n,f(e.currentQuestion.explainText),1),_(u,{class:C(["main-color-btn close-modal-btn"]),type:"primary",size:"large",onClick:e.toggleExplainModal},{default:T(()=>o[21]||(o[21]=[i("i",{class:"bx bx-chevrons-down"},null,-1)])),_:1,__:[21]}),_(u,{class:C(["main-color-btn"]),type:"primary",size:"large",onClick:e.onNextQuestion},{default:T(()=>[F(f(k.$t("learn_QS.buttons.next_question"))+" ",1),o[22]||(o[22]=i("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[22]})],2)])]),_(E,{centered:"","wrap-class-name":"medium-modal",open:e.setting_modal_open,onCancel:e.closeSettingModal},{footer:T(()=>[_(u,{type:"primary",class:"main-color-btn",size:"large",shape:"round",onClick:e.onCreateNewTest},{default:T(()=>[F(f(e.t("practice_test.setting_modal.create_new_test")),1)]),_:1})]),default:T(()=>[i("div",xn,[_(z,{class:"w-100 d-flex align-items-center justify-content-between"},{default:T(()=>[_(h,{span:1},{default:T(()=>[i("div",{onClick:e.closeSettingModal},o[23]||(o[23]=[i("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)]))]),_:1}),_(h,{class:"main-title",span:20},{default:T(()=>[i("span",null,f(k.$t("practice_test.setting_modal.title")),1),o[24]||(o[24]=F()),o[25]||(o[25]=i("br",null,null,-1))]),_:1,__:[24,25]})]),_:1})]),_(V,{class:"setting-form"},{default:T(()=>[_(j,null,{default:T(()=>[i("div",bn,[i("div",null,f(k.$t("practice_test.setting_modal.max_question",{length:e.quiz.question.length})),1),_(D,{size:"large",id:"inputNumber",value:e.settingFormState.numberOfQuestion,"onUpdate:value":o[9]||(o[9]=a=>e.settingFormState.numberOfQuestion=a),min:5,max:e.quiz.totalQuestion},null,8,["value","max"])])]),_:1}),_(R,{style:{"background-color":"var(--form-item-border-color)"}}),_(j,null,{default:T(()=>[(w(!0),y(te,null,oe(e.QUESTION_TYPE,a=>(w(),y("div",wn,[i("div",null,f(e.t(`create_QS.type.${a}`)),1),_(H,{disabled:e.settingFormState.questionTypes.length<=1&&e.settingFormState.questionTypes.includes(a),checked:e.settingFormState.questionTypes.includes(a),onChange:d=>e.toggleQuestionType(a,d)},null,8,["disabled","checked","onChange"])]))),256))]),_:1})]),_:1})]),_:1},8,["open"])],64)}const An=lt(_t,[["render",Tn],["__scopeId","data-v-4662dd21"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/question_sets/test.vue"]]);export{An as default};
