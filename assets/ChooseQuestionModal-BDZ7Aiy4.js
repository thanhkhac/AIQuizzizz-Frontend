import{d as U,Q as E,u as j,i as O,B as J,C as X,s as le,_ as V,r as m,E as P,o as p,w as n,b as a,c as s,t as d,a as v,F as L,D as N,f as M,q as B,l as te,j as Y,O as W,M as ie,p as re,e as D}from"./index-BTtyw8YW.js";import{I as G}from"./Input-OaAZgVyh.js";import{u as de}from"./utc-B88jE3dg.js";import{A as ae}from"./ApiFolder-BvCkcMgz.js";import{F as H}from"./folderShareMode-BudLQ2R2.js";import{A as oe}from"./ApiTestTemplate-DKO1nVex.js";import{Q as ee}from"./questionTypes-CS3lcRlq.js";const ce={LAST_ATTEMPT:"LastAttempt",HIGHEST_SCORE:"HighestScore"},K={PARTIAL:"Partial",ALL_OR_NOTHING:"AllOrNothing"},me=U({__name:"SettingTestModal",props:{className:{type:String,required:!0},formState:{type:null,required:!0},formRef:{type:null,required:!0}},setup(g,{expose:t}){E.extend(de);const{t:_}=j(),e=g,C=O(!1),y=()=>{C.value=!0,e.formState.startTime&&e.formState.endTime&&(f.value[0]=E(e.formState.startTime),f.value[1]=E(e.formState.endTime))},b=async()=>{e.formState.startTime=f.value[0].toISOString(),e.formState.endTime=f.value[1].toISOString();try{await l.value.validate()&&(C.value=!1)}catch{}};t({openTestSettingModal:y});const l=O(e.formRef),f=O([E(),E().add(1,"day")]),r=o=>{o&&(e.formState.startTime=o[0].toISOString(),e.formState.endTime=o[1].toISOString(),f.value[0]=o[0],f.value[1]=o[1])},x={range:[{validator(o,k){return f.value?f.value[1].diff(f.value[0],"minute")<e.formState.timeLimit?Promise.reject(_("message.invalid_time_range",{time_limit:e.formState.timeLimit})):Promise.resolve():Promise.reject(_("message.required"))},trigger:"change"}],title:[{required:!0,message:_("message.required"),trigger:"change"},{validator:(o,k)=>(k==null?void 0:k.length)>100?Promise.reject(_("message.out_of_range",{max_length:100})):Promise.resolve(),trigger:"change"}],timeLimit:[{required:!0,message:_("message.required"),trigger:"change"}],passingScore:[{required:!0,message:_("message.required"),trigger:"change"}],shuffle:[{required:!0,message:_("message.required"),trigger:"change"}],maxAttempt:[{required:!0,message:_("message.required"),trigger:"change"}]},S=Object.values(ce),T=J(()=>S.map(o=>({label:_(`setting_test_modal.final_score_options.${o}`),value:o}))),z=o=>{e.formState.gradeQuestionMethod=o?K.PARTIAL:K.ALL_OR_NOTHING};X(()=>[e.formState.startTime,e.formState.endTime],([o,k])=>{o&&k&&(f.value[0]=E(o),f.value[1]=E(k))},{immediate:!0}),X(()=>e.formState.timeLimit,async o=>{try{await l.value.validate()}catch{}}),le(async()=>{});const i={t:_,props:e,modal_open:C,openTestSettingModal:y,closeModal:b,formRef:l,range:f,onRangeChange:r,rules:x,optionAttemptKeys:S,select_attempt_options:T,onQuestionGradeMethodChange:z,get TEST_GRADE_QUESTION_METHOD(){return K},Input:G};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),ue={class:"modal-container"},_e={class:"modal-title-container"},pe={class:"content-item modal-test-setting"},fe={class:"content-item-title"},ge={class:"switch-content"},he={class:"switch-title"},ve={class:"switch-sub-title"},be={class:"switch-content"},Te={class:"switch-title"},Se={class:"switch-sub-title"},we={class:"switch-content"},ye={class:"switch-title"},xe={class:"switch-sub-title"};function ke(g,t,_,e,C,y){const b=m("RouterLink"),l=m("a-col"),f=m("a-row"),r=m("a-form-item"),x=m("a-range-picker"),S=m("a-input-number"),T=m("a-switch"),z=m("a-select-option"),i=m("a-select"),o=m("a-form"),k=m("a-button"),A=m("a-modal");return p(),P(A,{centered:"",width:"100%","wrap-class-name":"full-modal setting-modal",open:e.modal_open,onCancel:e.closeModal},{footer:n(()=>[s(k,{class:"main-color-btn-ghost",size:"large",key:"submit",type:"ghost",onClick:e.closeModal},{default:n(()=>[M(d(g.$t("sidebar.buttons.cancel")),1)]),_:1}),s(k,{class:"main-color-btn",size:"large",key:"submit",type:"primary",onClick:e.closeModal},{default:n(()=>[M(d(g.$t("assign_test.buttons.next")),1)]),_:1})]),default:n(()=>[a("div",ue,[a("div",_e,[s(f,{class:"w-100 d-flex align-items-center"},{default:n(()=>[s(l,{span:1},{default:n(()=>[s(b,{to:{name:"User_Class_Exam",params:{id:_.formState.classId}}},{default:n(()=>t[9]||(t[9]=[a("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[9]},8,["to"])]),_:1}),s(l,{class:"main-title",span:23},{default:n(()=>[a("span",null,d(e.t("setting_test_modal.other.back")),1)]),_:1})]),_:1})]),a("div",pe,[a("div",fe,[a("div",null,[a("span",null,d(e.t("setting_test_modal.title")),1),a("span",null,d(e.t("setting_test_modal.sub_title")),1)])]),s(o,{ref:"formRef",model:_.formState,rules:e.rules,class:"w-100",layout:"vertical"},{default:n(()=>[s(r,null,{default:n(()=>[s(e.Input,{class:"question-input-item",modelValue:_.formState.name,"onUpdate:modelValue":t[0]||(t[0]=u=>_.formState.name=u),isRequired:!0,placeholder:"Enter test title",label:e.t("setting_test_modal.form.title"),"max-length":100},null,8,["modelValue","label"])]),_:1}),s(f,{class:"form-item-row"},{default:n(()=>[s(l,{span:24},{default:n(()=>[s(r,{rules:e.rules.range,label:e.t("setting_test_modal.form.date"),class:"input-item",name:"range"},{default:n(()=>[s(x,{onChange:e.onRangeChange,size:"large","show-time":"",value:e.range,"onUpdate:value":t[1]||(t[1]=u=>e.range=u)},null,8,["value"])]),_:1},8,["rules","label"])]),_:1})]),_:1}),s(f,{class:"form-item-row"},{default:n(()=>[s(l,{span:10},{default:n(()=>[s(r,{label:e.t("setting_test_modal.form.number_of_attempt"),class:"input-item",name:"maxAttempt"},{default:n(()=>[s(S,{size:"large","addon-after":"time",value:_.formState.maxAttempt,"onUpdate:value":t[2]||(t[2]=u=>_.formState.maxAttempt=u),min:"1",max:"100"},{prefix:n(()=>t[10]||(t[10]=[a("i",{class:"bx bx-repost"},null,-1)])),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),s(l,{span:10},{default:n(()=>[s(r,{label:e.t("setting_test_modal.form.number_of_shuffle"),class:"input-item",name:"shuffle"},{default:n(()=>[s(S,{size:"large","addon-after":"times",value:_.formState.shuffle,"onUpdate:value":t[3]||(t[3]=u=>_.formState.shuffle=u),min:"1",max:"100"},{prefix:n(()=>t[11]||(t[11]=[a("i",{class:"bx bx-shuffle"},null,-1)])),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),s(f,{class:"form-item-row"},{default:n(()=>[s(l,{span:10},{default:n(()=>[s(r,{label:e.t("setting_test_modal.form.time_limit"),class:"input-item",name:"timeLimit"},{default:n(()=>[s(S,{size:"large","addon-after":"minutes",value:_.formState.timeLimit,"onUpdate:value":t[4]||(t[4]=u=>_.formState.timeLimit=u),min:"1",max:"1500"},{prefix:n(()=>t[12]||(t[12]=[a("i",{class:"bx bx-time-five"},null,-1)])),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),s(l,{span:10},{default:n(()=>[s(r,{label:e.t("setting_test_modal.form.passing_score"),class:"input-item",name:"passingScore"},{default:n(()=>[s(S,{size:"large","addon-after":"%",value:_.formState.passingScore,"onUpdate:value":t[5]||(t[5]=u=>_.formState.passingScore=u),min:"1",max:"100"},{prefix:n(()=>t[13]||(t[13]=[a("i",{class:"bx bx-check-circle"},null,-1)])),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),s(f,{class:"form-item-row"},{default:n(()=>[s(l,{span:10,class:"input-item switch"},{default:n(()=>[a("div",ge,[a("div",he,d(e.t("setting_test_modal.form.show_correct_answer")),1),a("div",ve,d(e.t("setting_test_modal.form.show_correct_answer_ins")),1)]),s(T,{checked:_.formState.isShowCorrectAnswerInReview,"onUpdate:checked":t[6]||(t[6]=u=>_.formState.isShowCorrectAnswerInReview=u)},null,8,["checked"])]),_:1}),s(l,{span:10},{default:n(()=>[s(r,{label:e.t("setting_test_modal.form.final_score"),class:"input-item"},{default:n(()=>[s(i,{size:"large",value:_.formState.gradeAttemptMethod,"onUpdate:value":t[7]||(t[7]=u=>_.formState.gradeAttemptMethod=u)},{default:n(()=>[(p(!0),v(L,null,N(e.select_attempt_options,u=>(p(),P(z,{value:u.value},{default:n(()=>[M(d(u.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),s(f,{class:"form-item-row"},{default:n(()=>[s(l,{span:10,class:"input-item switch"},{default:n(()=>[a("div",be,[a("div",Te,d(e.t("setting_test_modal.form.partial_grade_method")),1),a("div",Se,d(e.t("setting_test_modal.form.partial_grade_method_ins")),1)]),s(T,{checked:_.formState.gradeQuestionMethod===e.TEST_GRADE_QUESTION_METHOD.PARTIAL,onChange:e.onQuestionGradeMethodChange},null,8,["checked"])]),_:1}),s(l,{span:10,class:"input-item switch"},{default:n(()=>[a("div",we,[a("div",ye,d(e.t("setting_test_modal.form.review_attempt")),1),a("div",xe,d(e.t("setting_test_modal.form.review_attempt_ins")),1)]),s(T,{checked:_.formState.isAllowReviewAfterSubmit,"onUpdate:checked":t[8]||(t[8]=u=>_.formState.isAllowReviewAfterSubmit=u)},null,8,["checked"])]),_:1})]),_:1})]),_:1},8,["model"])])])]),_:1},8,["open"])}const pa=V(me,[["render",ke],["__scopeId","data-v-34f39973"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/SettingTestModal.vue"]]),ze=U({__name:"ChooseFolderModal",emits:["switchToTestTemplate","openFolder"],setup(g,{expose:t,emit:_}){var h;const e=B(),C=te(),{t:y}=j(),b=Object.values(H),l=J(()=>b.map(c=>({label:y(`folder_index.select_option.${c}`),value:c!==H.ALL?c:""}))),f=O([]),r=Y({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,folderName:((h=e.query.folderName)==null?void 0:h.toString())||"",shareMode:e.query.shareMode||l.value[0].value,totalCount:0,statusFilter:!1}),x=async()=>{try{let c=await ae.GetAllByLimit(r);if(c.data.success){let q=c.data.data;f.value=q.items,r.pageNumber=q.pageNumber,r.pageSize=q.pageSize,r.totalCount=q.totalCount}}catch(c){console.log("ERROR: GETALLBYLIMIT folder: "+c)}};W(()=>{var c;Object.keys(e.query).length===0&&(r.pageNumber=e.query.pageNumber||1,r.pageSize=e.query.pageSize||10,r.folderName=((c=e.query.folderName)==null?void 0:c.toString())||"",r.shareMode=e.query.shareMode||l.value[0].value,r.statusFilter=!0,x())});const S=(c,q)=>{r.pageNumber=c,r.pageSize=q,r.statusFilter=!0,x()},T=O(!1),z=()=>{T.value=!0},i=()=>{T.value=!1};t({openModal:z,closeModal:i});const o=_,u={route:e,router:C,t:y,optionKeys:b,folder_share_mode_options:l,folder_data:f,pageParams:r,getData:x,onPaginationChange:S,modal_open:T,openModal:z,closeModal:i,emit:o,handleSwitchToTestTemplate:()=>{o("switchToTestTemplate")},handleOpenFolder:c=>{o("openFolder",c)},Input:G};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),Me={class:"modal-container"},Ce={class:"modal-title-container"},qe={class:"content"},Ie={class:"content-item"},Ae={class:"title-container"},Oe={class:"main-title"},Le={class:"content-item-functions"},Ne={class:"content-item-navigators"},Pe={class:"navigator-container"},Ee={class:"filter-container"},Fe={style:{width:"300px",padding:"0px"}},Re={class:"folder-container"},Qe=["onClick"],De={class:"folder-name"},Ue={key:1,class:"w-100 m-2 d-flex justify-content-center"},je={class:"pagination-container"};function Ve(g,t,_,e,C,y){const b=m("RouterLink"),l=m("a-col"),f=m("a-row"),r=m("a-select-option"),x=m("a-select"),S=m("a-empty"),T=m("a-pagination"),z=m("a-modal");return p(),P(z,{centered:"",width:"100%","wrap-class-name":"medium-modal large",open:e.modal_open,onCancel:e.closeModal},{footer:n(()=>t[9]||(t[9]=[])),default:n(()=>[a("div",Me,[a("div",Ce,[s(f,{class:"w-100 d-flex align-items-center"},{default:n(()=>[s(l,{span:1},{default:n(()=>[s(b,{onClick:e.closeModal,to:{name:""}},{default:n(()=>t[3]||(t[3]=[a("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[3]})]),_:1}),s(l,{class:"main-title",span:23},{default:n(()=>t[4]||(t[4]=[a("span",null,"Choose from folder test",-1)])),_:1,__:[4]})]),_:1})]),a("div",qe,[a("div",Ie,[a("div",Ae,[a("div",Oe,[a("span",null,d(g.$t("folder_index.title")),1),t[5]||(t[5]=M()),t[6]||(t[6]=a("br",null,null,-1)),a("span",null,d(g.$t("folder_index.sub_title")),1)])]),a("div",Le,[a("div",Ne,[a("div",Pe,[s(b,{class:"navigator-item navigator-active",to:{name:""}},{default:n(()=>[M(d(g.$t("folder_index.navigators.folder")),1)]),_:1}),s(b,{class:"navigator-item",to:{name:""},onClick:e.handleSwitchToTestTemplate},{default:n(()=>[M(d(g.$t("folder_index.navigators.test_template")),1)]),_:1})])]),a("div",Ee,[s(x,{class:"me-3",value:e.pageParams.shareMode,"onUpdate:value":t[0]||(t[0]=i=>e.pageParams.shareMode=i),style:{width:"200px"},onChange:e.getData},{default:n(()=>[(p(!0),v(L,null,N(e.folder_share_mode_options,i=>(p(),P(r,{value:i.value},{default:n(()=>[M(d(i.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),a("div",Fe,[s(e.Input,{onInput:e.getData,modelValue:e.pageParams.folderName,"onUpdate:modelValue":t[1]||(t[1]=i=>e.pageParams.folderName=i),placeholder:e.t("class_index.other.search_class_placeholder")},{icon:n(()=>t[7]||(t[7]=[a("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),a("div",Re,[e.folder_data.length>0?(p(!0),v(L,{key:0},N(e.folder_data,i=>(p(),v("div",{class:"folder",onClick:o=>e.handleOpenFolder(i)},[t[8]||(t[8]=a("div",{class:"folder-icon"},[a("div",{class:"folder-top"}),a("div",{class:"folder-body"})],-1)),a("div",De,d(i.name),1)],8,Qe))),256)):(p(),v("div",Ue,[s(S,null,{description:n(()=>[a("span",null,d(g.$t("folder_index.other.no_data_matches")),1)]),_:1})]))]),a("div",je,[s(T,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":t[2]||(t[2]=i=>e.pageParams.pageNumber=i),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(i,o)=>`${o[0]}-${o[1]} of ${i} ${e.t("folder_index.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("folder_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])])]),_:1},8,["open"])}const fa=V(ze,[["render",Ve],["__scopeId","data-v-e4fbf0b7"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/ChooseFolderModal.vue"]]),Ge=U({__name:"ChooseFolderTestTemplateModal",props:{folder:{type:[Object,null],required:!0}},emits:["openTestTemplate","backToFolderModal"],setup(g,{expose:t,emit:_}){var A;const e=B(),{t:C}=j(),y=g,b=O([]),l=Y({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,testTemplateName:((A=e.query.testTemplateName)==null?void 0:A.toString())||"",totalCount:0,statusFilter:!1}),f=O(!1),r=async()=>{var u;try{if(!((u=y.folder)!=null&&u.folderTestId))return;f.value=!0;let h=await ae.GetAllTestTemplateByLimit(y.folder.folderTestId,l);if(h.data.success){let c=h.data.data;b.value=c.testTemplates.items,l.pageNumber=c.testTemplates.pageNumber,l.pageSize=c.testTemplates.pageSize,l.totalCount=c.testTemplates.totalCount}}catch(h){console.log("ERROR: GETALLBYLIMIT testtemplate: "+h)}};W(()=>{var u;Object.keys(e.query).length===0&&(l.pageNumber=e.query.pageNumber||1,l.pageSize=e.query.pageSize||10,l.testTemplateName=((u=e.query.testTemplateName)==null?void 0:u.toString())||"",l.statusFilter=!0,r())});const x=(u,h)=>{l.pageNumber=u,l.pageSize=h,l.statusFilter=!0,r()},S=_,T=O(!1),z=()=>{T.value=!0},i=()=>{T.value=!1,S("backToFolderModal")},o=u=>{i(),S("openTestTemplate",u,y.folder)};t({openModal:z,closeModal:i});const k={route:e,t:C,props:y,test_template_data:b,pageParams:l,loading:f,getData:r,onPaginationChange:x,emit:S,modal_open:T,openModal:z,closeModal:i,handleOpenTestTemplate:o,Input:G};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),He={class:"modal-container"},Be={class:"modal-title-container"},Ye={class:"content"},Ke={class:"content-item"},Xe={class:"title-container"},Je={class:"main-title"},We={class:"content-item-functions"},Ze={class:"filter-container"},$e={style:{width:"300px",padding:"0px"}},et={key:0,class:"quiz-item-container"},tt=["onClick"],at={class:"quiz-item-title"},ot={class:"quiz-item-info quiz-info-detail"},nt={class:"quiz-item-questions"},st={class:"quiz-item-created-by"},lt={class:"exam-item-actions"},it={key:1,class:"w-100 d-flex justify-content-center"},rt={class:"pagination-container"};function dt(g,t,_,e,C,y){const b=m("RouterLink"),l=m("a-col"),f=m("a-row"),r=m("a-button"),x=m("a-empty"),S=m("a-pagination"),T=m("a-modal");return p(),P(T,{centered:"",width:"100%","wrap-class-name":"medium-modal large",open:e.modal_open,onCancel:e.closeModal},{footer:n(()=>t[10]||(t[10]=[])),default:n(()=>{var z;return[a("div",He,[a("div",Be,[s(f,{class:"w-100 d-flex align-items-center"},{default:n(()=>[s(l,{span:1},{default:n(()=>[s(b,{onClick:e.closeModal,to:{name:""}},{default:n(()=>t[2]||(t[2]=[a("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[2]})]),_:1}),s(l,{class:"main-title",span:23},{default:n(()=>t[3]||(t[3]=[a("span",null,"Choose from folder test",-1)])),_:1,__:[3]})]),_:1})]),a("div",Ye,[a("div",Ke,[a("div",Xe,[a("div",Je,[a("span",null,"Folder test: "+d((z=_.folder)==null?void 0:z.name),1),t[4]||(t[4]=M()),t[5]||(t[5]=a("br",null,null,-1)),a("span",null,d(g.$t("folder_index.sub_title")),1)])]),a("div",We,[a("div",Ze,[a("div",$e,[s(e.Input,{onInput:e.getData,modelValue:e.pageParams.testTemplateName,"onUpdate:modelValue":t[0]||(t[0]=i=>e.pageParams.testTemplateName=i),placeholder:e.t("class_index.other.search_class_placeholder")},{icon:n(()=>t[6]||(t[6]=[a("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),e.test_template_data.length>0?(p(),v("div",et,[(p(!0),v(L,null,N(e.test_template_data,i=>(p(),v("div",{class:"quiz-item",onClick:o=>e.handleOpenTestTemplate(i.testTemplateId)},[t[8]||(t[8]=a("i",{class:"bx bx-book-open quiz-item-icon"},null,-1)),a("div",null,[a("div",at,d(i.name),1),a("div",ot,[a("div",nt,[t[7]||(t[7]=a("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),M(" "+d(i.numberOfQuestion)+" "+d(g.$t("dashboards.list_items.quiz.questions")),1)]),a("div",st,d(g.$t("class_question_set.other.created_by"))+" "+d(i.createdBy),1)])]),a("div",lt,[s(r,{type:"primary",class:"me-3 main-color-btn",onClick:o=>e.handleOpenTestTemplate(i.testTemplateId)},{default:n(()=>[M(d(g.$t("class_question_set.buttons.view")),1)]),_:2},1032,["onClick"])])],8,tt))),256))])):(p(),v("div",it,[s(x,null,{description:n(()=>t[9]||(t[9]=[a("span",null," No data matches. ",-1)])),_:1})])),a("div",rt,[s(S,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":t[1]||(t[1]=i=>e.pageParams.pageNumber=i),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(i,o)=>`${o[0]}-${o[1]} of ${i} ${e.t("folder_index.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("folder_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])])]}),_:1},8,["open"])}const ga=V(Ge,[["render",dt],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/ChooseFolderTestTemplateModal.vue"]]),ct=U({__name:"ChooseTestTemplateModal",emits:["switchToFolder","openTestTemplate"],setup(g,{expose:t,emit:_}){var h;const e=B(),C=te(),{t:y}=j(),b=Object.values(H),l=J(()=>b.map(c=>({label:y(`folder_index.select_option.${c}`),value:c!==H.ALL?c:""}))),f=O([]),r=Y({pageNumber:e.query.pageNumber||1,pageSize:e.query.pageSize||10,name:((h=e.query.name)==null?void 0:h.toString())||"",shareMode:e.query.shareMode||l.value[0].value,totalCount:0,statusFilter:!1}),x=async()=>{try{let c=await oe.GetAllByLimit(r);if(c.data.success){let q=c.data.data;f.value=q.items,r.pageNumber=q.pageNumber,r.pageSize=q.pageSize,r.totalCount=q.totalCount}}catch(c){console.log("ERROR: GETALLBYLIMIT testtemplate: "+c)}};W(()=>{var c;Object.keys(e.query).length===0&&(r.pageNumber=e.query.pageNumber||1,r.pageSize=e.query.pageSize||10,r.name=((c=e.query.name)==null?void 0:c.toString())||"",r.shareMode=e.query.shareMode||l.value[0].value,r.statusFilter=!0,x())});const S=(c,q)=>{r.pageNumber=c,r.pageSize=q,r.statusFilter=!0,x()},T=O(!1),z=()=>{T.value=!0},i=()=>{T.value=!1};t({openModal:z,closeModal:i});const o=_,u={route:e,router:C,t:y,optionKeys:b,share_mode_options:l,test_template_data:f,pageParams:r,getData:x,onPaginationChange:S,modal_open:T,openModal:z,closeModal:i,emit:o,handleSwitchToFolder:()=>{o("switchToFolder")},handleOpenTestTemplate:c=>{o("openTestTemplate",c,null)},Input:G};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),mt={class:"modal-container"},ut={class:"modal-title-container"},_t={class:"content"},pt={class:"content-item"},ft={class:"title-container"},gt={class:"main-title"},ht={class:"content-item-functions"},vt={class:"content-item-navigators"},bt={class:"navigator-container"},Tt={class:"filter-container"},St={style:{width:"300px",padding:"0px"}},wt={key:0,class:"quiz-item-container"},yt={class:"quiz-item"},xt={class:"quiz-item-title"},kt={class:"quiz-item-info quiz-info-detail"},zt={class:"quiz-item-questions"},Mt={class:"quiz-item-created-by"},Ct={class:"exam-item-actions"},qt={key:1,class:"w-100 d-flex justify-content-center"},It={class:"pagination-container"};function At(g,t,_,e,C,y){const b=m("RouterLink"),l=m("a-col"),f=m("a-row"),r=m("a-select-option"),x=m("a-select"),S=m("a-button"),T=m("a-empty"),z=m("a-pagination"),i=m("a-modal");return p(),P(i,{centered:"",width:"100%","wrap-class-name":"medium-modal large",open:e.modal_open,onCancel:e.closeModal},{footer:n(()=>t[11]||(t[11]=[])),default:n(()=>[a("div",mt,[a("div",ut,[s(f,{class:"w-100 d-flex align-items-center"},{default:n(()=>[s(l,{span:1},{default:n(()=>[s(b,{onClick:e.closeModal,to:{name:""}},{default:n(()=>t[3]||(t[3]=[a("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[3]})]),_:1}),s(l,{class:"main-title",span:23},{default:n(()=>t[4]||(t[4]=[a("span",null,"Choose from folder test",-1)])),_:1,__:[4]})]),_:1})]),a("div",_t,[a("div",pt,[a("div",ft,[a("div",gt,[a("span",null,d(g.$t("folder_index.title")),1),t[5]||(t[5]=M()),t[6]||(t[6]=a("br",null,null,-1)),a("span",null,d(g.$t("folder_index.sub_title")),1)])]),a("div",ht,[a("div",vt,[a("div",bt,[s(b,{class:"navigator-item",to:{name:""},onClick:e.handleSwitchToFolder},{default:n(()=>[M(d(g.$t("folder_index.navigators.folder")),1)]),_:1}),s(b,{class:"navigator-item navigator-active",to:{name:""}},{default:n(()=>[M(d(g.$t("folder_index.navigators.test_template")),1)]),_:1})])]),a("div",Tt,[s(x,{class:"me-3",value:e.pageParams.shareMode,"onUpdate:value":t[0]||(t[0]=o=>e.pageParams.shareMode=o),style:{width:"200px"},onChange:e.getData},{default:n(()=>[(p(!0),v(L,null,N(e.share_mode_options,o=>(p(),P(r,{value:o.value},{default:n(()=>[M(d(o.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),a("div",St,[s(e.Input,{onInput:e.getData,modelValue:e.pageParams.name,"onUpdate:modelValue":t[1]||(t[1]=o=>e.pageParams.name=o),placeholder:e.t("class_index.other.search_class_placeholder")},{icon:n(()=>t[7]||(t[7]=[a("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),e.test_template_data.length>0?(p(),v("div",wt,[(p(!0),v(L,null,N(e.test_template_data,o=>(p(),v("div",yt,[t[9]||(t[9]=a("i",{class:"bx bx-book-open quiz-item-icon"},null,-1)),a("div",null,[a("div",xt,d(o.name),1),a("div",kt,[a("div",zt,[t[8]||(t[8]=a("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),M(" "+d(o.numberOfQuestion)+" "+d(g.$t("dashboards.list_items.quiz.questions")),1)]),a("div",Mt,d(g.$t("class_question_set.other.created_by"))+" "+d(o.createBy),1)])]),a("div",Ct,[s(S,{type:"primary",class:"me-3 main-color-btn",onClick:k=>e.handleOpenTestTemplate(o.testTemplateId)},{default:n(()=>[M(d(g.$t("class_question_set.buttons.view")),1)]),_:2},1032,["onClick"])])]))),256))])):(p(),v("div",qt,[s(T,null,{description:n(()=>t[10]||(t[10]=[a("span",null," No data matches. ",-1)])),_:1})])),a("div",It,[s(z,{onChange:e.onPaginationChange,current:e.pageParams.pageNumber,"onUpdate:current":t[2]||(t[2]=o=>e.pageParams.pageNumber=o),total:e.pageParams.totalCount,pageSize:e.pageParams.pageSize,"show-total":(o,k)=>`${k[0]}-${k[1]} of ${o} ${e.t("folder_index.other.items")}`,"show-size-changer":"","show-quick-jumper":"",class:"crud-layout-pagination",locale:{items_per_page:e.t("folder_index.other.pages")}},null,8,["current","total","pageSize","show-total","locale"])])])])])]),_:1},8,["open"])}const ha=V(ct,[["render",At],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/ChooseTestTemplateModal.vue"]]),Ot=U({__name:"ChooseQuestionModal",props:{testTemplateId:{type:String,required:!0},folder:{type:[Object,null],required:!0}},emits:["import","backToFolderTestTemplateModal","backToTestTemplateModal"],setup(g,{expose:t,emit:_}){const e=B(),{t:C}=j(),y=g,b=O(),l=O(),f=async()=>{try{if(!y.testTemplateId)return;let w=await oe.GetById(y.testTemplateId||"");if(w.data.success){let I=w.data.data;b.value=I,l.value=I.questions}}catch(w){console.log("ERROR: GETBYID testtemplate: "+w)}},r={HTML:"HTML",PLAIN_TEXT:"PlainText"},x=Object.values(ee).map(w=>({label:C(`create_QS.type.${w}`),value:w})),S=O([...x.map(w=>w.value)]),T=O(""),z=()=>{var R,Q;i.checkedList=[];let w=(R=b.value)==null?void 0:R.questions;const I=T.value.trim().toLowerCase();w=(Q=b.value)==null?void 0:Q.questions.filter(Z=>{const ne=!I||Z.questionText.toLowerCase().includes(I),se=!S.value.length||S.value.includes(Z.type);return ne&&se}),l.value=w},i=Y({checkAll:!1,indeterminate:!1,checkedList:[]}),o=w=>{Object.assign(i,{checkedList:w.target.checked?l.value:[],indeterminate:!1})};X(()=>i.checkedList,w=>{var I;i.indeterminate=!!w.length&&w.length<l.value.length,i.checkAll=w.length===((I=l.value)==null?void 0:I.length)});const k=(w,I)=>{$(I).toggleClass("bx-chevron-up bx-chevron-down");const Q=$(`#question-item-answer-${w}`);Q&&$(Q).slideToggle()},A=_,u=O(!1),h=async()=>{i.checkAll=!1,i.checkedList=[],i.indeterminate=!1,u.value=!0,await f()},c=()=>{debugger;u.value=!1,y.folder!==null?A("backToFolderTestTemplateModal",y.folder):A("backToTestTemplateModal")};t({openModal:h,closeModal:c});const F={route:e,t:C,props:y,test_template_data:b,question_data:l,getData:f,QUESTION_FORMAT:r,questionTypeOptions:x,selectedQuestionTypes:S,searchValue:T,onFilter:z,importModalState:i,onCheckAll:o,toggleDisplayAnswer:k,emit:A,modal_open:u,openModal:h,closeModal:c,handleModalImport:()=>{ie.confirm({title:"Are your sure? ",content:"Import: "+i.checkedList.length+"?",okText:"Confirm",onOk:()=>{var I;const w=(I=l.value)==null?void 0:I.filter(R=>i.checkedList.includes(R));A("import",w),u.value=!1}})},get QUESTION_TYPE(){return ee},Input:G};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}}),Lt={class:"modal-container"},Nt={class:"modal-title-container"},Pt={class:"modal-content-item"},Et={class:"content-item-section preview-section"},Ft={class:"section-content"},Rt={class:"section-content-header"},Qt={class:"header-item"},Dt={class:"d-flex flex-fill align-items-center justify-content-end"},Ut={style:{width:"250px"}},jt={class:"preview-question-container"},Vt={class:"preview-question-item"},Gt={class:"question-item-content"},Ht=["innerHTML"],Bt={key:1,class:"question-text"},Yt=["id"],Kt={key:0,class:"multiple-choice-answer"},Xt={key:0,class:"text-success"},Jt={class:"pair-answer"},Wt={class:"pair-answer-item"},Zt={class:"pair-answer-item"},$t={key:2,class:"ordering-answer"},ea={class:"ordering-answer-item"},ta={class:"ordering-answer-item"},aa={class:"ordering-answer-item"},oa={class:"short-text-answer"},na={class:"question-item-toogle-btn"},sa=["onClick"];function la(g,t,_,e,C,y){const b=m("RouterLink"),l=m("a-col"),f=m("a-row"),r=m("a-checkbox"),x=m("a-select-option"),S=m("a-select"),T=m("a-checkbox-group"),z=m("a-button"),i=m("a-modal");return p(),P(i,{centered:"",width:"100%","wrap-class-name":"medium-modal large",open:e.modal_open,onCancel:e.closeModal},{footer:n(()=>[s(z,{class:"main-color-btn",size:"large",key:"submit",type:"primary",onClick:e.handleModalImport},{default:n(()=>t[12]||(t[12]=[M(" Import ")])),_:1,__:[12]})]),default:n(()=>[a("div",Lt,[a("div",Nt,[s(f,{class:"w-100 d-flex align-items-center"},{default:n(()=>[s(l,{span:1},{default:n(()=>[s(b,{onClick:e.closeModal,to:{name:""}},{default:n(()=>t[4]||(t[4]=[a("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[4]})]),_:1}),s(l,{class:"main-title",span:23},{default:n(()=>[a("span",null,d(g.$t("create_QS.title")),1),t[5]||(t[5]=M()),t[6]||(t[6]=a("br",null,null,-1)),a("span",null,d(g.$t("create_QS.sub_title")),1)]),_:1,__:[5,6]})]),_:1})]),a("div",Pt,[a("div",Et,[a("div",Ft,[a("div",Rt,[s(r,{class:re(["header-item",e.importModalState.checkAll?"check-all":""]),onClick:e.onCheckAll,checked:e.importModalState.checkAll,"onUpdate:checked":t[0]||(t[0]=o=>e.importModalState.checkAll=o),indeterminate:e.importModalState.indeterminate},{default:n(()=>t[7]||(t[7]=[M(" Check all ")])),_:1,__:[7]},8,["class","checked","indeterminate"]),a("div",Qt," Selected: "+d(e.importModalState.checkedList.length),1),a("div",Dt,[s(S,{size:"large",class:"me-3",mode:"multiple",value:e.selectedQuestionTypes,"onUpdate:value":t[1]||(t[1]=o=>e.selectedQuestionTypes=o),placeholder:"Filter question types",style:{width:"fit-content","min-width":"300px"},onChange:e.onFilter},{default:n(()=>[(p(!0),v(L,null,N(e.questionTypeOptions,o=>(p(),P(x,{value:o.value},{default:n(()=>[M(d(o.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"]),a("div",Ut,[s(e.Input,{onInput:e.onFilter,modelValue:e.searchValue,"onUpdate:modelValue":t[2]||(t[2]=o=>e.searchValue=o),placeholder:e.t("class_index.other.search_class_placeholder")},{icon:n(()=>t[8]||(t[8]=[a("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"])])])]),s(T,{value:e.importModalState.checkedList,"onUpdate:value":t[3]||(t[3]=o=>e.importModalState.checkedList=o)},{default:n(()=>[a("div",jt,[(p(!0),v(L,null,N(e.question_data,(o,k)=>{var A,u;return p(),v("div",Vt,[s(r,{value:o},null,8,["value"]),a("div",Gt,[o.textFormat===e.QUESTION_FORMAT.HTML?(p(),v("div",{key:0,class:"question-html",innerHTML:o.questionText},null,8,Ht)):(p(),v("div",Bt,d(o.questionText),1)),a("div",{class:"question-item-answer",id:`question-item-answer-${k}`},[o.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(p(),v("div",Kt,[a("ul",null,[(p(!0),v(L,null,N(o.questionData.multipleChoice,h=>(p(),v("li",null,[M(d(h.text)+" ",1),h.isAnswer?(p(),v("span",Xt," ("+d(h.isAnswer)+") ",1)):D("v-if",!0)]))),256))])])):D("v-if",!0),o.type===e.QUESTION_TYPE.MATCHING?(p(!0),v(L,{key:1},N((A=o.questionData.matching)==null?void 0:A.matches,h=>{var c,q,F,w;return p(),v("div",Jt,[a("span",Wt,d((q=(c=o.questionData.matching)==null?void 0:c.leftItems.find(I=>I.id===h.leftId))==null?void 0:q.text),1),t[9]||(t[9]=a("i",{class:"bx bx-right-arrow-alt"},null,-1)),a("span",Zt,d((w=(F=o.questionData.matching)==null?void 0:F.rightItems.find(I=>I.id===h.rightId))==null?void 0:w.text),1)])}),256)):D("v-if",!0),o.type===e.QUESTION_TYPE.ORDERING?(p(),v("div",$t,[a("div",ea,[(p(!0),v(L,null,N(o.questionData.ordering,h=>(p(),v("div",null,d(h.text),1))),256))]),t[10]||(t[10]=a("i",{class:"bx bx-right-arrow-alt"},null,-1)),a("div",ta,[(p(!0),v(L,null,N((u=o.questionData.ordering)==null?void 0:u.sort((h,c)=>h.correctOrder-c.correctOrder),(h,c)=>(p(),v("div",aa,[a("span",null,"#"+d(h.correctOrder),1),M(" - "+d(h.text),1)]))),256))])])):D("v-if",!0),o.type===e.QUESTION_TYPE.SHORT_TEXT?(p(),v(L,{key:3},[t[11]||(t[11]=a("span",null,"Answer:",-1)),a("div",oa,d(o.questionData.shortText),1)],64)):D("v-if",!0)],8,Yt)]),a("div",na,[a("i",{class:"bx bx-chevron-up",onClick:h=>e.toggleDisplayAnswer(k,h.currentTarget)},null,8,sa)])])}),256))])]),_:1},8,["value"])])])])])]),_:1},8,["open"])}const va=V(Ot,[["render",la],["__scopeId","data-v-3653897f"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/ChooseQuestionModal.vue"]]);export{va as C,pa as S,K as T,ce as a,ha as b,ga as c,fa as d};
