import{z as it,d as ot,q as rt,l as at,u as lt,i as C,B as Z,j as ct,T as de,s as ut,S as dt,M as ht,G as mt,_ as ft,r as H,c as y,o as p,a as _,E as he,e as B,b as s,p as I,w as x,f as U,t as f,F as ee,D as re}from"./index-DUeSh8Hp.js";import{A as Re}from"./ApiQuestionSet-B86nMJAB.js";import{Q as q}from"./questionTypes-CS3lcRlq.js";import{D as gt}from"./index-DkeW_tKO.js";import{T as vt,l as _t}from"./vue-draggable-plus-BQ8mQqOI.js";import{H as De}from"./highcharts-D1uGaC1K.js";import{V as pt}from"./Validator-CWeiTIFe.js";import{H as bt}from"./HolderOutlined-q6TUY7Xf.js";/* empty css                                                                 */class yt{shuffleArray(r,Q=5){let e=[],R=0;do{e=r.slice();for(let h=e.length-1;h>0;h--){const u=Math.floor(Math.random()*(h+1));[e[h],e[u]]=[e[u],e[h]]}if(R++,r.length<=1)break}while(e.every((h,u)=>h===r[u])&&R<Q);return e}shuffleQuestionOptions(r){const Q=JSON.parse(JSON.stringify(r));return Q.type===q.MATCHING&&Q.questionData.matching&&(Q.questionData.matching.rightItems=this.shuffleArray(Q.questionData.matching.rightItems)),Q.type===q.ORDERING&&Q.questionData.ordering&&(Q.questionData.ordering=this.shuffleArray(Q.questionData.ordering.sort((e,R)=>e.correctOrder-R.correctOrder))),Q}}const xt=new yt;var me={exports:{}},St=me.exports,Ee;function wt(){return Ee||(Ee=1,function(T,r){(function(Q,e){T.exports=e()})(St,function(){var Q,e,R=1e3,h=6e4,u=36e5,E=864e5,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,P=31536e6,A=2628e6,J=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,K={years:P,months:A,days:E,hours:u,minutes:h,seconds:R,milliseconds:1,weeks:6048e5},F=function(g){return g instanceof W},V=function(g,c,i){return new W(g,i,c.$l)},z=function(g){return e.p(g)+"s"},X=function(g){return g<0},L=function(g){return X(g)?Math.ceil(g):Math.floor(g)},b=function(g){return Math.abs(g)},G=function(g,c){return g?X(g)?{negative:!0,format:""+b(g)+c}:{negative:!1,format:""+g+c}:{negative:!1,format:""}},W=function(){function g(i,w,M){var k=this;if(this.$d={},this.$l=M,i===void 0&&(this.$ms=0,this.parseFromMilliseconds()),w)return V(i*K[z(w)],this);if(typeof i=="number")return this.$ms=i,this.parseFromMilliseconds(),this;if(typeof i=="object")return Object.keys(i).forEach(function(Y){k.$d[z(Y)]=i[Y]}),this.calMilliseconds(),this;if(typeof i=="string"){var O=i.match(J);if(O){var D=O.slice(2).map(function(Y){return Y!=null?Number(Y):0});return this.$d.years=D[0],this.$d.months=D[1],this.$d.weeks=D[2],this.$d.days=D[3],this.$d.hours=D[4],this.$d.minutes=D[5],this.$d.seconds=D[6],this.calMilliseconds(),this}}return this}var c=g.prototype;return c.calMilliseconds=function(){var i=this;this.$ms=Object.keys(this.$d).reduce(function(w,M){return w+(i.$d[M]||0)*K[M]},0)},c.parseFromMilliseconds=function(){var i=this.$ms;this.$d.years=L(i/P),i%=P,this.$d.months=L(i/A),i%=A,this.$d.days=L(i/E),i%=E,this.$d.hours=L(i/u),i%=u,this.$d.minutes=L(i/h),i%=h,this.$d.seconds=L(i/R),i%=R,this.$d.milliseconds=i},c.toISOString=function(){var i=G(this.$d.years,"Y"),w=G(this.$d.months,"M"),M=+this.$d.days||0;this.$d.weeks&&(M+=7*this.$d.weeks);var k=G(M,"D"),O=G(this.$d.hours,"H"),D=G(this.$d.minutes,"M"),Y=this.$d.seconds||0;this.$d.milliseconds&&(Y+=this.$d.milliseconds/1e3,Y=Math.round(1e3*Y)/1e3);var se=G(Y,"S"),ae=i.negative||w.negative||k.negative||O.negative||D.negative||se.negative,ue=O.format||D.format||se.format?"T":"",ie=(ae?"-":"")+"P"+i.format+w.format+k.format+ue+O.format+D.format+se.format;return ie==="P"||ie==="-P"?"P0D":ie},c.toJSON=function(){return this.toISOString()},c.format=function(i){var w=i||"YYYY-MM-DDTHH:mm:ss",M={Y:this.$d.years,YY:e.s(this.$d.years,2,"0"),YYYY:e.s(this.$d.years,4,"0"),M:this.$d.months,MM:e.s(this.$d.months,2,"0"),D:this.$d.days,DD:e.s(this.$d.days,2,"0"),H:this.$d.hours,HH:e.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:e.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:e.s(this.$d.seconds,2,"0"),SSS:e.s(this.$d.milliseconds,3,"0")};return w.replace(d,function(k,O){return O||String(M[k])})},c.as=function(i){return this.$ms/K[z(i)]},c.get=function(i){var w=this.$ms,M=z(i);return M==="milliseconds"?w%=1e3:w=M==="weeks"?L(w/K[M]):this.$d[M],w||0},c.add=function(i,w,M){var k;return k=w?i*K[z(w)]:F(i)?i.$ms:V(i,this).$ms,V(this.$ms+k*(M?-1:1),this)},c.subtract=function(i,w){return this.add(i,w,!0)},c.locale=function(i){var w=this.clone();return w.$l=i,w},c.clone=function(){return V(this.$ms,this)},c.humanize=function(i){return Q().add(this.$ms,"ms").locale(this.$l).fromNow(!i)},c.valueOf=function(){return this.asMilliseconds()},c.milliseconds=function(){return this.get("milliseconds")},c.asMilliseconds=function(){return this.as("milliseconds")},c.seconds=function(){return this.get("seconds")},c.asSeconds=function(){return this.as("seconds")},c.minutes=function(){return this.get("minutes")},c.asMinutes=function(){return this.as("minutes")},c.hours=function(){return this.get("hours")},c.asHours=function(){return this.as("hours")},c.days=function(){return this.get("days")},c.asDays=function(){return this.as("days")},c.weeks=function(){return this.get("weeks")},c.asWeeks=function(){return this.as("weeks")},c.months=function(){return this.get("months")},c.asMonths=function(){return this.as("months")},c.years=function(){return this.get("years")},c.asYears=function(){return this.as("years")},g}(),l=function(g,c,i){return g.add(c.years()*i,"y").add(c.months()*i,"M").add(c.days()*i,"d").add(c.hours()*i,"h").add(c.minutes()*i,"m").add(c.seconds()*i,"s").add(c.milliseconds()*i,"ms")};return function(g,c,i){Q=i,e=i().$utils(),i.duration=function(k,O){var D=i.locale();return V(k,{$l:D},O)},i.isDuration=F;var w=c.prototype.add,M=c.prototype.subtract;c.prototype.add=function(k,O){return F(k)?l(this,k,1):w.bind(this)(k,O)},c.prototype.subtract=function(k,O){return F(k)?l(this,k,-1):M.bind(this)(k,O)}}})}(me)),me.exports}var kt=wt();const Tt=it(kt),qt=ot({__name:"test",setup(T,{expose:r}){r();const Q=new URL("/assets/confetti-bjvcnoca.lottie",import.meta.url).href,e=rt(),R=at(),{t:h}=lt(),u=C({title:"",description:"",totalQuestionCount:0,questions:[]}),E=Z(()=>b.value.filter(t=>t.result===!1)),d=C({}),P=C(""),A=C(!1),J=C(!1),K=Z(()=>{var t;return(t=d.value.questionData.multipleChoice)==null?void 0:t.some(n=>n.text.length>=100)}),F=C([]),V=C([]),z=C([]),X=C([]),L=C(""),b=C([]),G=()=>{b.value=[],J.value=!1,ne(0),ce(),xe()},W=C(!1),l=()=>{W.value=!0;let t=sessionStorage.getItem("test_settings");t&&(i.numberOfQuestion=JSON.parse(t).numberOfQuestion,i.questionTypes=JSON.parse(t).questionTypes)},g=()=>{W.value=!1},c=C(),i=ct({numberOfQuestion:1,questionTypes:[q.MULTIPLE_CHOICE,q.MATCHING,q.ORDERING,q.SHORT_TEXT]}),w=(t,n)=>{if(n)i.questionTypes.includes(t)||i.questionTypes.push(t);else{const o=i.questionTypes.indexOf(t);o!==-1&&i.questionTypes.splice(o,1)}},M=async()=>{G(),await Y(),sessionStorage.setItem("test_settings",JSON.stringify(i)),g()},k=C(e.params.id.toString()),O=C(!1),D=C(!0),Y=async()=>{if(!pt.isValidGuid(k.value.toString())){R.push({name:"404"});return}try{O.value=!0;let t=await Re.GetDetailById(k.value.toString());u.value.title=t.data.data.name,u.value.description=t.data.data.description,u.value.totalQuestionCount=t.data.data.questionCount;let n=await Re.TestQuestions(k.value.toString(),i.numberOfQuestion,i.questionTypes.join(","));if(!t.data.success||!n.data.success){R.push({name:"404"});return}u.value.questions=n.data.data.map(o=>xt.shuffleQuestionOptions(o)),ne(0)}catch(t){Object.keys(t.response.data.errors).includes(dt.PLAN_REQUIRE_PLAN)&&(D.value=!1,R.back())}finally{O.value=!1}},se=C(),ae=C(!1),ue=()=>{var t,n;ae.value=!0,(n=(t=se.value)==null?void 0:t.getDotLottieInstance())==null||n.play(),setTimeout(()=>{ae.value=!1},5e3)},ie=(t,n)=>{var S;const o=u.value.questions.findIndex(v=>v.id===t);if(o===-1)return!1;let m=(S=u.value.questions[o].questionData.multipleChoice)==null?void 0:S.filter(v=>v.isAnswer).map(v=>v.id||[]).sort(),a=n.sort();return n.length!==(m==null?void 0:m.length)?!1:a.every((v,N)=>v===m[N])},Le=t=>{var S;const n=u.value.questions.findIndex(v=>v.id===d.value.id);let o=(S=u.value.questions[n].questionData.multipleChoice)==null?void 0:S.filter(v=>v.isAnswer).map(v=>v.id||[]);const m=b.value.findIndex(v=>v.questionId===d.value.id);let a=b.value[m].multipleChoices;return o!=null&&o.includes(t.id)?!0:!(a!=null&&a.includes(t.id)&&!t.isAnswer)},ke=(t,n)=>{var S;const o=u.value.questions.findIndex(v=>v.id===t);if(o===-1)return!1;let m=((S=u.value.questions[o].questionData.ordering)==null?void 0:S.map(v=>v.correctOrder).sort())||[];return n.map(v=>v.correctOrder).every((v,N)=>v===m[N])},Te=(t,n,o)=>{const m=u.value.questions.findIndex(j=>j.id===t);if(m===-1)return!1;let a=u.value.questions[m].questionData.matching.matches,S=n.map(j=>j.id),v=o.map(j=>j.id);return S.map((j,oe)=>({leftId:j,rightId:v[oe]})).every(j=>a.some(oe=>oe.leftId===j.leftId&&oe.rightId===j.rightId))},Ne=t=>{var S,v;const n=d.value.questionData.matching;if(!n)return!1;let o=n.leftItems.some(N=>N.id===t),m=n.matches.find(N=>o?N.leftId===t:N.rightId===t);const a=o?V.value.findIndex(N=>N.id===t):z.value.findIndex(N=>N.id===t);return a===-1||!m?!1:o?((S=z.value[a])==null?void 0:S.id)===m.rightId:((v=V.value[a])==null?void 0:v.id)===m.leftId},le=t=>t.trim().toLowerCase().normalize("NFKC").replace(/[\u2019\u2018\u201B\u0060]/g,"'").replace(/\s+/g," "),qe=(t,n)=>{const o=u.value.questions.findIndex(m=>m.id===t);return o===-1?!1:le(n)===le(u.value.questions[o].questionData.shortText)},Ce=()=>{var o,m;const t=(o=b.value.find(a=>a.questionId===d.value.id))==null?void 0:o.shortText;if(!t)return!1;const n=(m=u.value.questions.find(a=>a.id===d.value.id))==null?void 0:m.questionData.shortText;return le(t)===le(n)},He=Z(()=>{var t;if(d.value.type===q.SHORT_TEXT&&J.value&&!Ce())return(t=u.value.questions.find(n=>n.id===d.value.id))==null?void 0:t.questionData.shortText}),Ue=C(null),fe=C(!1),Pe=()=>{fe.value=!fe.value},te=(t,n)=>{t===-1?b.value.push(n):b.value[t]=n},Ve=()=>{if(J.value)return;const t=b.value.findIndex(m=>m.questionId===d.value.id),n=A.value,o=A.value?h("learn_QS.result.skipped"):"";switch(d.value.type){case q.MULTIPLE_CHOICE:{F.value.length>0?te(t,{questionId:d.value.id,type:d.value.type,isSkipped:n,result:!1,resultText:o,multipleChoices:[...F.value],matchingLeft:null,matchingRight:null,ordering:null,shortText:""}):t!==-1&&b.value.splice(t,1);break}case q.MATCHING:{te(t,{questionId:d.value.id,type:d.value.type,isSkipped:n,result:!1,resultText:o,multipleChoices:null,matchingLeft:[...V.value],matchingRight:[...z.value],ordering:null,shortText:""});break}case q.ORDERING:{te(t,{questionId:d.value.id,type:d.value.type,isSkipped:n,result:!1,resultText:o,multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:[...X.value],shortText:""});break}case q.SHORT_TEXT:{L.value.trim()?te(t,{questionId:d.value.id,type:d.value.type,isSkipped:n,result:!1,resultText:o,multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:null,shortText:L.value.trim()}):t!==-1&&b.value.splice(t,1);break}}},ge=(t,n)=>{var o,m;switch(t.type){case q.MULTIPLE_CHOICE:return{...n,multipleChoices:((o=t.questionData.multipleChoice)==null?void 0:o.filter(a=>a.isAnswer).map(a=>a.id))??[]};case q.MATCHING:{const a=t.questionData.matching,S=(a==null?void 0:a.matches)??[],v=(a==null?void 0:a.leftItems)??[],N=(a==null?void 0:a.rightItems)??[],j=S.map(Se=>v.find(we=>we.id==Se.leftId)),oe=S.map(Se=>N.find(we=>we.id==Se.rightId));return{...n,matchingLeft:j,matchingRight:oe}}case q.ORDERING:return{...n,ordering:((m=t.questionData.ordering)==null?void 0:m.slice().sort((a,S)=>a.correctOrder-S.correctOrder))??[]};case q.SHORT_TEXT:return{...n,shortText:t.questionData.shortText??""};default:return n}},Ie=()=>{u.value.questions.forEach(t=>{const n={questionId:t.id,type:t.type,isSkipped:!0,result:!1,resultText:h("learn_QS.result.skipped"),multipleChoices:null,matchingLeft:null,matchingRight:null,ordering:null,shortText:""};let o=b.value.findIndex(m=>m.questionId===t.id);o===-1&&(b.value.push(ge(t,n)),o=b.value.length-1),b.value[o].isSkipped&&te(o,{...b.value[o],...ge(t,{})})})},ze=()=>{Qe(),b.value.length<u.value.questions.length?ht.confirm({title:`You missed ${u.value.questions.length-b.value.length} questions.`,content:"Are you certain about this decision?",okText:h("sidebar.buttons.ok"),cancelText:h("sidebar.buttons.cancel"),centered:!0,onOk:()=>{J.value=!0,Ie(),ve()}}):(J.value=!0,ve())},ve=()=>{const t=u.value.questions.findIndex(n=>n.id===d.value.id);ne(t),b.value.filter(n=>n.isSkipped===!1).forEach(n=>{let o;switch(n.type){case q.MULTIPLE_CHOICE:{o=ie(n.questionId,n.multipleChoices),n.result=o,n.resultText=h(o?"learn_QS.result.correct":"learn_QS.result.wrong");break}case q.MATCHING:{o=Te(n.questionId,n.matchingLeft,n.matchingRight),n.result=o,n.resultText=h(o?"learn_QS.result.correct":"learn_QS.result.wrong");break}case q.ORDERING:{o=ke(n.questionId,n.ordering),n.result=o,n.resultText=h(o?"learn_QS.result.correct":"learn_QS.result.wrong");break}case q.SHORT_TEXT:{o=qe(n.questionId,n.shortText),n.result=o,n.resultText=h(o?"learn_QS.result.correct":"learn_QS.result.wrong");break}}}),Me(),E.value.length===0&&ue()},Ye=()=>{A.value=!0;const t=b.value.findIndex(n=>n.questionId===d.value.id);te(t,{questionId:d.value.id,type:d.value.type,isSkipped:!0,result:!1,resultText:"Skipped",multipleChoices:F.value,matchingLeft:V.value,matchingRight:z.value,ordering:X.value,shortText:L.value})},ne=t=>{var o,m;ce(),A.value=!1,d.value=u.value.questions[t];const n=b.value.find(a=>a.questionId===d.value.id);switch(d.value.type){case q.MULTIPLE_CHOICE:{P.value=h("learn_QS.instructions.multiple_choice",{number:(o=d.value.questionData.multipleChoice)==null?void 0:o.filter(a=>a.isAnswer).length}),F.value=n?n==null?void 0:n.multipleChoices:[];break}case q.ORDERING:{P.value=h("learn_QS.instructions.ordering"),X.value=n?n==null?void 0:n.ordering:((m=d.value.questionData.ordering)==null?void 0:m.map(a=>a))||[];break}case q.MATCHING:{P.value=h("learn_QS.instructions.matching"),V.value=n?n==null?void 0:n.matchingLeft:d.value.questionData.matching.leftItems.map(a=>a)||[],z.value=n?n==null?void 0:n.matchingRight:d.value.questionData.matching.rightItems.map(a=>a)||{};break}case q.SHORT_TEXT:{P.value=h("learn_QS.instructions.short_text"),L.value=n?n==null?void 0:n.shortText:"";break}}},Fe=()=>{A.value=!1;const t=u.value.questions.findIndex(n=>n.id===d.value.id);t<u.value.questions.length-1&&ne(t+1)},Ge=()=>{A.value=!1;const t=u.value.questions.findIndex(n=>n.id===d.value.id);t>0&&ne(t-1)},je=t=>Array.from(b.value).some(n=>n.questionId===t),Be=t=>{var n;return(n=b.value.find(o=>o.questionId===t&&!o.isSkipped))==null?void 0:n.result},Je=Z(()=>b.value.some(t=>t.questionId===d.value.id&&t.isSkipped)),Xe=Z(()=>{const t=b.value.find(n=>n.questionId===d.value.id);return{result:t==null?void 0:t.result,resultText:t==null?void 0:t.resultText}}),Ke=Z(()=>{const t=u.value.questions.findIndex(n=>n.id===d.value.id);return t!==-1&&t<u.value.questions.length-1}),We=Z(()=>{const t=u.value.questions.findIndex(n=>n.id===d.value.id);return t!==-1&&t>0}),Ze=Z(()=>u.value.questions.findIndex(t=>t.id===d.value.id)),_e=()=>Math.floor((u.value.questions.length-E.value.length)/u.value.questions.length*100),Ae=()=>Math.floor(E.value.length/u.value.questions.length*100),pe=()=>{const t=$(".content-item-test-result");t&&$(t).slideToggle()},Me=()=>{pe(),De.setOptions({lang:{decimalPoint:".",thousandsSep:","}}),De.chart("result_chart_container",{chart:{type:"pie",custom:{},events:{render:function(){const t=this,n=t.series[0];let o=t.options.chart.custom.label;o||(o=t.options.chart.custom.label=t.renderer.label(`<strong>${_e()}%</strong>`,0,0).css({color:"var(--text-color)",textAnchor:"middle"}).add());const m=n.center[0]+t.plotLeft,a=n.center[1]+t.plotTop-o.attr("height")/2;o.attr({x:m,y:a}),o.css({fontSize:`${n.center[2]/8}px`})}}},credits:{enabled:!1},plotOptions:{pie:{borderWidth:0,borderRadius:3}},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.0f}%</b>"},series:[{type:"pie",name:"Result",colorByPoint:!0,innerSize:"75%",dataLabels:{enabled:!1},data:[{name:h("practice_test.other.correct"),y:_e(),color:"var(--correct-answer-color)"},{name:h("practice_test.other.incorrect"),y:Ae(),color:"var(--incorrect-answer-color)"}]}]})};de.extend(Tt);const be=C(),ye=C(""),xe=()=>{be.value=de()},Qe=()=>{const n=de().diff(be.value),o=Math.floor(n/1e3);if(o<60)ye.value=`${h("practice_test.other.your_time")} ${o} ${h(o===1?"practice_test.other.second":"practice_test.other.second_plural")}`;else{const m=de.duration(n),a=m.hours(),S=m.minutes();let v=h("practice_test.other.your_time");a>0&&(v+=`${a} ${a>1?h("practice_test.other.hour"):h("practice_test.other.hour_plural")} `),S>0&&(v+=`${S} ${S>1?h("practice_test.other.minute"):h("practice_test.other.minute_plural")}`),ye.value=v.trim()}},$e={scroll:!0,scrollSensitivity:100,scrollSpeed:100,scrollTarget:document.scrollingElement};function ce(){mt(()=>{requestAnimationFrame(()=>{const t=document.querySelectorAll(".matching-option-container.left .answer-option-matching"),n=document.querySelectorAll(".matching-option-container.right .answer-option-matching"),o=Math.min(t.length,n.length);for(let m=0;m<o;m++){const a=t[m],S=n[m];if(!a||!S)continue;a.style.height="auto",S.style.height="auto";const v=Math.max(a.offsetHeight,S.offsetHeight);a.style.height=`${v}px`,S.style.height=`${v}px`}})})}const et=()=>{window.location.reload()},tt=()=>{R.push({name:"User_QuestionSet_Learn",params:{id:k.value}})},nt=()=>{const t=E.value.map(n=>n.questionId);u.value.questions=u.value.questions.filter(n=>t.includes(n.id)),G(),pe()},st=()=>{sessionStorage.setItem("setting_key","Subscription"),R.push({name:"User_Settings"})};ut(async()=>{let t=sessionStorage.getItem("test_settings");t&&(i.numberOfQuestion=JSON.parse(t).numberOfQuestion,i.questionTypes=JSON.parse(t).questionTypes),await Y(),l(),ne(0),ce(),window.addEventListener("resize",ce),console.log(d.value),xe()});const Oe={animationPath:Q,route:e,router:R,t:h,quiz:u,incorrect:E,currentQuestion:d,currentQuestionInstruction:P,currentQuestionIsSkipped:A,isSubmitted:J,isOptionExceed:K,userAnswerMultipleChoice:F,userAnswerMatchingLeft:V,userAnswerMatchingRight:z,userAnswerOrdering:X,userAnswerShortText:L,userAnswer:b,reset:G,setting_modal_open:W,openSettingModal:l,closeSettingModal:g,settingFormRef:c,settingFormState:i,toggleQuestionType:w,onCreateNewTest:M,questionSetId:k,loading:O,isAllowed:D,getQuizData:Y,animationRef:se,isAnimationDisplaying:ae,triggerAnimation:ue,checkMultipleChoice:ie,checkMultipleChoiceAnswerCorrect:Le,checkOrdering:ke,checkMatching:Te,checkMatchingAnswerCorrect:Ne,cleanShortTextAnswer:le,checkShortText:qe,checkShortextCorrect:Ce,getShortTextCorrectAnswer:He,explainModal:Ue,explainModalOpen:fe,toggleExplainModal:Pe,updateUserAnswer:te,onUserAnswerChange:Ve,refactorLeftOverUserAnswer:ge,handleSkippedQuestion:Ie,onSubmitAnswer:ze,getUserAnswerResult:ve,onSkipQuestion:Ye,onLoadCurrentQuestion:ne,onNextQuestion:Fe,onPreviousQuestion:Ge,userAnswerContainQuestion:je,getUserAnswerResultById:Be,userAnswerCurrentQuestionSkipped:Je,userAnswerCurrentQuestionResult:Xe,hasNextQuestion:Ke,hasPreviousQuestion:We,currentQuestionIndex:Ze,getCorrectPercentage:_e,getInCorrectPercentage:Ae,toggleResult:pe,generateChart:Me,startTime:be,timerResult:ye,timerStart:xe,timerEnd:Qe,dragOptions:$e,syncMatchingHeights:ce,onNewTest:et,onRedirectToLearn:tt,onRetest:nt,onRedirectToSubcription:st,get QUESTION_TYPE(){return q},get DotLottieVue(){return gt},TextArea:vt,get VueDraggable(){return _t},get HolderOutlined(){return bt}};return Object.defineProperty(Oe,"__isScriptSetup",{enumerable:!1,value:!0}),Oe}}),Ct={key:0,class:"page-container"},It={class:"title-container title-container-header"},At={class:"content content-test d-flex flex-column"},Mt={class:"d-flex"},Qt={class:"content-item question-navigators"},Ot={class:"question-navigator-title"},Rt={key:1,class:"question-navigator-container"},Dt=["onClick"],Et={class:"content-item content-item-test-result"},Lt={class:"result-container"},Nt={class:"result-section"},Ht={class:"result-section-title"},Ut={class:"result-section-statistic"},Pt={class:"result-text-container"},Vt={class:"result-text correct"},zt={class:"result-text incorrect"},Yt={class:"result-section result-section-buttons"},Ft={class:"result-section-title"},Gt={class:"result-button-title"},jt={class:"result-button-content"},Bt={class:"result-button-title"},Jt={class:"result-button-content"},Xt={class:"result-button-title"},Kt={class:"result-button-content"},Wt={class:"content-item"},Zt={key:1,class:"section question-section"},$t={class:"question-info-index"},en=["innerHTML"],tn={class:"section answer-section"},nn={class:"d-flex align-items-center"},sn={class:"answer-section-ins"},on={class:"answer-option-content"},rn={key:0,class:"bx bx-check answer-icon"},an={key:1,class:"bx bx-x answer-icon"},ln={key:1,class:"answer-option-container matching"},cn={class:"matching-option-container left"},un={class:"d-flex align-items-center"},dn={class:"answer-option-order"},hn={class:"answer-option-content"},mn={class:"matching-option-container right"},fn={class:"d-flex align-items-center"},gn={class:"answer-option-content"},vn={class:"answer-option-order"},_n={key:2,class:"answer-option-container ordering"},pn={class:"answer-option-order"},bn={class:"answer-option-content"},yn={key:3,class:"answer-option-container"},xn={class:"w-100 d-flex align-items-center"},Sn={key:0,class:"bx bx-check answer-icon"},wn={key:1,class:"bx bx-x answer-icon"},kn={key:0,class:"short-text-correct-answer"},Tn={class:"learn-question-footer"},qn={class:"d-flex"},Cn=["innerHTML"],In={key:1,class:"page-container"},An={class:"w-100 h-100 d-flex align-items-center justify-content-center"},Mn={class:"d-flex justify-content-center"},Qn={class:"title-container"},On={class:"setting-form-item"},Rn={class:"setting-form-item setting-form-switch"};function Dn(T,r,Q,e,R,h){const u=H("RouterLink"),E=H("a-col"),d=H("a-row"),P=H("a-skeleton"),A=H("a-button"),J=H("a-checkbox"),K=H("a-checkbox-group"),F=H("CloseSquareFilled"),V=H("a-result"),z=H("a-input-number"),X=H("a-form-item"),L=H("a-divider"),b=H("a-switch"),G=H("a-form"),W=H("a-modal");return p(),y(ee,null,[e.isAllowed?(p(),y("div",Ct,[e.isAnimationDisplaying?(p(),he(e.DotLottieVue,{key:0,autoplay:e.isAnimationDisplaying,ref:"animationRef",class:I(["animation-container"]),onComplete:r[0]||(r[0]=l=>e.isAnimationDisplaying=!1),src:e.animationPath},null,8,["autoplay","src"])):B("v-if",!0),s("div",It,[_(d,{class:"w-100 d-flex align-items-center"},{default:x(()=>[_(E,{span:1},{default:x(()=>[_(u,{to:{name:"User_Library"}},{default:x(()=>r[10]||(r[10]=[s("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[10]})]),_:1}),_(E,{class:"main-title",span:22},{default:x(()=>[s("span",null,f(e.quiz.title),1),r[11]||(r[11]=U()),r[12]||(r[12]=s("br",null,null,-1)),s("span",null,f(e.quiz.description),1)]),_:1,__:[11,12]}),_(E,{span:1},{default:x(()=>[s("i",{class:"bx bx-cog test-setting-btn",onClick:e.openSettingModal})]),_:1})]),_:1})]),s("div",At,[s("div",Mt,[s("div",Qt,[s("div",Ot,f(e.t("practice_test.other.question_list")),1),e.loading?(p(),he(P,{key:0,active:"",loading:e.loading},null,8,["loading"])):(p(),y("div",Rt,[(p(!0),y(ee,null,re(e.quiz.questions,(l,g)=>(p(),y("div",{class:I(["question-navigation-item-outer",e.currentQuestion.id===l.id?"current-question":""])},[s("div",{class:I(["question-navigator-item",e.userAnswerContainQuestion(l.id)?"completed-question":"",e.isSubmitted?e.getUserAnswerResultById(l.id)?"correct":"incorrect":""]),onClick:c=>e.onLoadCurrentQuestion(g)},[s("span",null,f(g+1),1)],10,Dt)],2))),256))])),_(A,{type:"primary",class:I(["main-color-btn",e.isSubmitted?"main-color-btn-disabled":""]),onClick:e.onSubmitAnswer},{default:x(()=>[U(f(T.$t("learn_QS.buttons.submit")),1)]),_:1},8,["class"])]),s("div",Et,[s("div",Lt,[s("div",Nt,[s("div",Ht,f(e.timerResult),1),s("div",Ut,[r[13]||(r[13]=s("div",{id:"result_chart_container"},null,-1)),s("div",Pt,[s("div",Vt,[U(f(T.$t("practice_test.other.correct"))+" ",1),s("span",null,f(e.quiz.questions.length-e.incorrect.length),1)]),s("div",zt,[U(f(T.$t("practice_test.other.incorrect"))+" ",1),s("span",null,f(e.incorrect.length),1)])])])]),s("div",Yt,[s("div",Ft,f(T.$t("practice_test.final_modal.button_title")),1),s("div",{class:"result-button",onClick:e.onNewTest},[r[14]||(r[14]=s("i",{class:"bx bxs-news"},null,-1)),s("div",null,[s("div",Gt,f(T.$t("practice_test.final_modal.buttons.new_test")),1),s("div",jt,f(T.$t("practice_test.final_modal.buttons_ins.new_test")),1)])]),e.getInCorrectPercentage()>0?(p(),y("div",{key:0,class:"result-button",onClick:e.onRetest},[r[15]||(r[15]=s("i",{class:"bx bx-reset"},null,-1)),s("div",null,[s("div",Bt,f(T.$t("practice_test.final_modal.buttons.re_test")),1),s("div",Jt,f(T.$t("practice_test.final_modal.buttons_ins.re_test")),1)])])):(p(),y("div",{key:1,class:"result-button",onClick:e.onRedirectToLearn},[r[16]||(r[16]=s("i",{class:"bx bx-analyse"},null,-1)),s("div",null,[s("div",Xt,f(T.$t("practice_test.final_modal.buttons.practice")),1),s("div",Kt,f(T.$t("practice_test.final_modal.buttons_ins.practice")),1)])]))])])])]),s("div",Wt,[e.loading?(p(),y(ee,{key:0},[_(P,{active:"",loading:e.loading},null,8,["loading"]),_(P,{active:"",loading:e.loading},null,8,["loading"]),_(P,{active:"",loading:e.loading},null,8,["loading"])],64)):(p(),y("div",Zt,[s("div",$t,f(T.$t("create_QS.question.question"))+" "+f(e.currentQuestionIndex+1),1),s("div",{class:I(["learn-question"]),innerHTML:e.currentQuestion.questionText},null,8,en),B(` <div
                            :class="[
                                'learn-question',
                                currentQuestion.textFormat === QUESTION_FORMAT.HTML ? 'd-none' : '',
                            ]"
                        >
                            {{ currentQuestion.questionText }}
                        </div> `),s("div",tn,[s("div",nn,[s("div",sn,f(e.currentQuestionInstruction),1),s("div",{class:I(["ms-3 learn-question-result",e.isSubmitted?e.userAnswerCurrentQuestionResult.result?"result-correct":"result-incorrect":"",e.userAnswerCurrentQuestionSkipped?"result-skipped":""])},f(e.userAnswerCurrentQuestionResult.resultText),3)]),e.currentQuestion.type===e.QUESTION_TYPE.MULTIPLE_CHOICE?(p(),he(K,{key:0,onChange:e.onUserAnswerChange,value:e.userAnswerMultipleChoice,"onUpdate:value":r[1]||(r[1]=l=>e.userAnswerMultipleChoice=l),class:I(["answer-option-container multiplechoice",e.isOptionExceed?"column":""])},{default:x(()=>[(p(!0),y(ee,null,re(e.currentQuestion.questionData.multipleChoice,(l,g)=>(p(),he(J,{value:l.id,"onUpdate:value":c=>l.id=c,disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,class:I(["answer-option answer-option-multiplechoice",e.isSubmitted&&e.checkMultipleChoiceAnswerCorrect(l)&&l.isAnswer?"answer-correct":"",e.isSubmitted&&!e.checkMultipleChoiceAnswerCorrect(l)&&!l.isAnswer?"answer-incorrect":""])},{default:x(()=>[s("div",on,f(l.text),1),e.isSubmitted&&e.checkMultipleChoiceAnswerCorrect(l)&&l.isAnswer?(p(),y("i",rn)):B("v-if",!0),e.isSubmitted&&!e.checkMultipleChoiceAnswerCorrect(l)&&!l.isAnswer?(p(),y("i",an)):B("v-if",!0)]),_:2},1032,["value","onUpdate:value","disabled","class"]))),256))]),_:1},8,["value","class"])):B("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.MATCHING?(p(),y("div",ln,[s("div",cn,[_(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerMatchingLeft,"onUpdate:modelValue":r[2]||(r[2]=l=>e.userAnswerMatchingLeft=l),options:e.dragOptions,onMove:e.syncMatchingHeights,onEnd:r[3]||(r[3]=()=>{e.syncMatchingHeights(),e.onUserAnswerChange()})},{default:x(()=>[(p(!0),y(ee,null,re(e.userAnswerMatchingLeft,(l,g)=>(p(),y("div",un,[s("div",{class:I(["answer-option answer-option-matching",e.isSubmitted?e.checkMatchingAnswerCorrect(l.id)?"answer-correct":"answer-incorrect":""])},[s("div",dn,[_(e.HolderOutlined)]),s("div",hn,f(l.text),1)],2),s("i",{class:I(["bx bxs-label matching-icon",e.isSubmitted?e.checkMatchingAnswerCorrect(l.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2)]))),256))]),_:1},8,["disabled","modelValue"])]),s("div",mn,[_(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerMatchingRight,"onUpdate:modelValue":r[4]||(r[4]=l=>e.userAnswerMatchingRight=l),options:e.dragOptions,onMove:e.syncMatchingHeights,onEnd:r[5]||(r[5]=()=>{e.syncMatchingHeights(),e.onUserAnswerChange()})},{default:x(()=>[(p(!0),y(ee,null,re(e.userAnswerMatchingRight,(l,g)=>(p(),y("div",fn,[s("i",{class:I(["bx bxs-label matching-icon",e.isSubmitted?e.checkMatchingAnswerCorrect(l.id)?"answer-correct-icon":"answer-incorrect-icon":""])},null,2),s("div",{class:I(["answer-option answer-option-matching",e.isSubmitted?e.checkMatchingAnswerCorrect(l.id)?"answer-correct":"answer-incorrect":""])},[s("div",gn,f(l.text),1),s("div",vn,[_(e.HolderOutlined)])],2)]))),256))]),_:1},8,["disabled","modelValue"])])])):B("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.ORDERING?(p(),y("div",_n,[_(e.VueDraggable,{disabled:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,modelValue:e.userAnswerOrdering,"onUpdate:modelValue":r[6]||(r[6]=l=>e.userAnswerOrdering=l),options:e.dragOptions,onEnd:e.onUserAnswerChange},{default:x(()=>[(p(!0),y(ee,null,re(e.userAnswerOrdering,(l,g)=>(p(),y("div",{class:I(["answer-option answer-option-ordering",e.isSubmitted?g===l.correctOrder?"answer-correct":"answer-incorrect":""])},[s("div",pn,[_(e.HolderOutlined),U(" "+f(g+1),1)]),s("div",bn,f(l.text),1),s("div",{class:I(["answer-option-order answer-icon",e.isSubmitted?"":"d-none"])},[r[17]||(r[17]=s("i",{class:"bx bx-hash answer-icon"},null,-1)),U(" "+f(l.correctOrder+1),1)],2)],2))),256))]),_:1},8,["disabled","modelValue"])])):B("v-if",!0),e.currentQuestion.type===e.QUESTION_TYPE.SHORT_TEXT?(p(),y("div",yn,[s("div",{class:I(["answer-short-text",e.isSubmitted?e.checkShortextCorrect()?"answer-correct":"answer-incorrect":""])},[s("div",xn,[_(e.TextArea,{readonly:e.userAnswerCurrentQuestionSkipped||e.isSubmitted,placeholder:"Enter your answer...",modelValue:e.userAnswerShortText,"onUpdate:modelValue":r[7]||(r[7]=l=>e.userAnswerShortText=l),onChange:e.onUserAnswerChange},null,8,["readonly","modelValue"]),e.isSubmitted&&e.checkShortextCorrect()?(p(),y("i",Sn)):B("v-if",!0),e.isSubmitted&&!e.checkShortextCorrect()?(p(),y("i",wn)):B("v-if",!0)]),e.isSubmitted&&!e.checkShortextCorrect()?(p(),y("div",kn,[r[18]||(r[18]=U(" Correct answer: ")),s("span",null,f(e.getShortTextCorrectAnswer),1)])):B("v-if",!0)],2)])):B("v-if",!0)]),s("div",Tn,[_(A,{class:I(["main-color-btn",e.hasPreviousQuestion?"":"main-color-btn-disabled"]),type:"primary",size:"large",onClick:e.onPreviousQuestion},{default:x(()=>[r[19]||(r[19]=s("i",{class:"bx bx-chevron-left"},null,-1)),U(" "+f(T.$t("practice_test.buttons.previous")),1)]),_:1,__:[19]},8,["class"]),e.isSubmitted?(p(),y("div",{key:1,class:I(["main-color-btn-ghost me-3"]),onClick:e.toggleExplainModal},[r[20]||(r[20]=s("i",{class:"bx bx-bulb me-2"},null,-1)),U(" "+f(T.$t("learn_QS.buttons.explaination")),1)])):(p(),y("div",{key:0,class:I(["main-color-btn-ghost",e.userAnswerCurrentQuestionSkipped||e.isSubmitted?"main-color-btn-ghost-disabled":""]),onClick:r[8]||(r[8]=l=>e.onSkipQuestion())},f(T.$t("learn_QS.buttons.dont_know")),3)),s("div",qn,[_(A,{class:I(["main-color-btn",e.hasNextQuestion?"":"main-color-btn-disabled"]),type:"primary",size:"large",onClick:e.onNextQuestion},{default:x(()=>[U(f(T.$t("learn_QS.buttons.next_question"))+" ",1),r[21]||(r[21]=s("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[21]},8,["class"])])])]))]),s("div",{ref:"explainModal",class:I(["explain-modal explain-modal-up",{show:e.explainModalOpen}])},[s("div",{class:"learn-question-explain",innerHTML:e.currentQuestion.explainText},null,8,Cn),_(A,{class:I(["main-color-btn close-modal-btn"]),type:"primary",size:"large",onClick:e.toggleExplainModal},{default:x(()=>r[22]||(r[22]=[s("i",{class:"bx bx-chevrons-down"},null,-1)])),_:1,__:[22]}),_(A,{class:I(["main-color-btn",e.hasNextQuestion?"":"main-color-btn-disabled"]),type:"primary",size:"large",onClick:e.onNextQuestion},{default:x(()=>[U(f(T.$t("learn_QS.buttons.next_question"))+" ",1),r[23]||(r[23]=s("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[23]},8,["class"])],2)])])):(p(),y("div",In,[s("div",An,[_(V,{status:"error",title:e.t("now_allowed.main_msg"),"sub-title":e.t("now_allowed.errorMessage")},{icon:x(()=>[_(F)]),extra:x(()=>[s("div",Mn,[_(A,{key:"console",type:"primary",class:"me-3 main-color-btn"},{default:x(()=>[U(f(T.$t("now_allowed.libraryNavigator")),1)]),_:1}),_(A,{onClick:e.onRedirectToSubcription,key:"buy",type:"ghost",class:"main-color-btn-ghost"},{default:x(()=>[U(f(T.$t("now_allowed.subscriptionNavigator")),1)]),_:1})])]),_:1},8,["title","sub-title"])])])),_(W,{centered:"","wrap-class-name":"medium-modal",open:e.setting_modal_open,onCancel:e.closeSettingModal},{footer:x(()=>[_(A,{type:"primary",class:"main-color-btn",size:"large",shape:"round",onClick:e.onCreateNewTest},{default:x(()=>[U(f(e.t("practice_test.setting_modal.create_new_test")),1)]),_:1})]),default:x(()=>[s("div",Qn,[_(d,{class:"w-100 d-flex align-items-center justify-content-between"},{default:x(()=>[_(E,{span:1},{default:x(()=>[s("div",{onClick:e.closeSettingModal},r[24]||(r[24]=[s("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)]))]),_:1}),_(E,{class:"main-title",span:20},{default:x(()=>[s("span",null,f(T.$t("practice_test.setting_modal.title")),1),r[25]||(r[25]=U()),r[26]||(r[26]=s("br",null,null,-1))]),_:1,__:[25,26]})]),_:1})]),_(G,{class:"setting-form"},{default:x(()=>[_(X,null,{default:x(()=>[s("div",On,[s("div",null,f(T.$t("practice_test.setting_modal.max_question",{length:e.quiz.totalQuestionCount})),1),_(z,{size:"large",id:"inputNumber",value:e.settingFormState.numberOfQuestion,"onUpdate:value":r[9]||(r[9]=l=>e.settingFormState.numberOfQuestion=l),min:1,max:e.quiz.totalQuestionCount,precision:0},null,8,["value","max"])])]),_:1}),_(L,{style:{"background-color":"var(--form-item-border-color)"}}),_(X,null,{default:x(()=>[(p(!0),y(ee,null,re(e.QUESTION_TYPE,l=>(p(),y("div",Rn,[s("div",null,f(e.t(`create_QS.type.${l}`)),1),_(b,{disabled:e.settingFormState.questionTypes.length<=1&&e.settingFormState.questionTypes.includes(l),checked:e.settingFormState.questionTypes.includes(l),onChange:g=>e.toggleQuestionType(l,g)},null,8,["disabled","checked","onChange"])]))),256))]),_:1})]),_:1})]),_:1},8,["open"])],64)}const Fn=ft(qt,[["render",Dn],["__scopeId","data-v-4662dd21"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/question_sets/test.vue"]]);export{Fn as default};
