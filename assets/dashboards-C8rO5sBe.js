import{d as M,u as O,l as V,i as h,j as y,s as U,_ as F,r as p,a as l,o as r,b as t,c as d,w as b,f as g,t as e,e as k,p as Y,F as f,D as S}from"./index-BTtyw8YW.js";import{A as I}from"./ApiQuestionSet-Jnp3U1vt.js";import{Q as E}from"./questionSetSortCate-BudA85fH.js";import{I as $}from"./Input-OaAZgVyh.js";const j=M({__name:"dashboards",emits:["updateSidebar"],setup(i,{expose:n,emit:T}){n();const a=T,{t:A}=O(),z=V(),C=(o,c)=>Math.floor(c/o*100),u=h([]),_=y({pageNumber:1,pageSize:10,name:"",tagIds:[],sortBy:E.RATING}),m=async()=>{const o=await I.GetPublicByLimit(_);o.data.success&&(u.value=o.data.data.items,s.value=o.data.data.items)},q=h(null),s=h([]);function v(o){var c;!_.name||!((c=q.value)!=null&&c.contains(o.target))?u.value=[]:u.value=[...s.value]}const Q=h([]),w=y({pageNumber:1,pageSize:5}),P=async()=>{try{let o=await I.GetRecentByLimit(w);if(o.data.success){let c=o.data.data;Q.value=c.items}}catch(o){console.log("ERROR: GETALLEXAMBYLIMIT class exam: "+o)}},D=h([]),L=y({pageNumber:1,pageSize:10,sortBy:E.RATING}),R=h(!1),B=async()=>{try{R.value=!0;let o=await I.GetPublicByLimit(L);if(o.data.success){let c=o.data.data;D.value=c.items}}catch(o){console.log("ERROR: GETALLEXAMBYLIMIT search qs: "+o)}finally{R.value=!1}},x=o=>{z.push({name:"User_QuestionSet_Detail",params:{id:o}})},G=()=>{z.push({name:"User_QuestionSet_Create"})};U(async()=>{document.addEventListener("click",v),a("updateSidebar","dashboard"),await P(),await B()});const N={emit:a,t:A,router:z,getPercentageComplete:C,search_data:u,searchPageParams:_,getSearchData:m,searchResultRef:q,lastSearchResult:s,handleMouseClickOutside:v,quiz_data:Q,pageParams:w,getData:P,public_quiz_data:D,publicPageParams:L,loading:R,getPublicQuizData:B,onRedirectToDetail:x,onRedirectToCreate:G,Input:$};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}}),X={class:"page-container"},H={class:"title-container"},J={class:"content"},K={class:"search-bar",ref:"searchResultRef"},W={key:0,class:Y(["search-result-container"])},Z={class:"search-result"},tt=["onClick"],et={class:"result-item-title"},st={class:"result-item-description"},at={class:"result-item-noq"},nt={class:"content-item"},ot={class:"content-item-title"},it={"e-else":"",class:"quiz-container"},lt=["onClick"],rt={class:"quiz-item-title"},dt={class:"quiz-item-info"},ct={class:"quiz-item-progress"},ut={class:"add-button-context"},_t={class:"content-item"},mt={class:"content-item-title"},ht={class:"popular-quiz-container"},vt=["onClick"],pt={class:"p-quiz-item-info"},bt={class:"p-quiz-item-title"},gt={class:"p-quiz-item-rating"},ft={class:"p-quiz-item-question-count"},zt={class:"p-quiz-item-question-rate"},qt={class:"p-quiz-item-credit"};function Ct(i,n,T,a,A,z){const C=p("a-col"),u=p("a-row"),_=p("RouterLink"),m=p("a-skeleton"),q=p("a-progress");return r(),l("div",X,[t("div",H,[d(u,{class:"w-100"},{default:b(()=>[d(C,{class:"main-title",span:20},{default:b(()=>[t("span",null,e(i.$t("dashboards.title")),1),n[1]||(n[1]=g()),n[2]||(n[2]=t("br",null,null,-1)),t("span",null,e(i.$t("dashboards.sub_title",{username:"NguyenTanDuc"})),1)]),_:1,__:[1,2]})]),_:1})]),t("div",J,[t("div",K,[d(a.Input,{onInput:a.getSearchData,modelValue:a.searchPageParams.name,"onUpdate:modelValue":n[0]||(n[0]=s=>a.searchPageParams.name=s),placeholder:a.t("class_index.other.search_class_placeholder")},{icon:b(()=>n[3]||(n[3]=[t("i",{class:"bx bx-search"},null,-1)])),_:1},8,["modelValue","placeholder"]),a.search_data.length>0?(r(),l("div",W,[t("div",Z,[(r(!0),l(f,null,S(a.search_data,s=>(r(),l("div",{class:"search-result-item",onClick:v=>a.onRedirectToDetail(s.id)},[t("div",et,e(s.name)+" ("+e(s.ratingAverage)+"⭐️) ",1),t("div",st,[t("span",at,e(s.totalQuestionCount)+" "+e(i.$t("dashboards.list_items.quiz.questions")),1),g(" "+e(i.$t("detail_QS.other.created_by",{username:s.createBy})),1)])],8,tt))),256))])])):k("v-if",!0)],512),t("div",nt,[t("div",ot,[t("div",null,[t("span",null,e(i.$t("dashboards.sections.quiz.title")),1),t("span",null,e(i.$t("dashboards.sections.quiz.sub_title")),1)]),d(_,{to:{name:"User_Library"},class:"content-item-navigator"},{default:b(()=>[t("span",null,e(i.$t("dashboards.buttons.viewAll")),1),n[4]||(n[4]=t("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[4]})]),a.loading?(r(),l(f,{key:0},[d(m,{loading:a.loading},null,8,["loading"]),d(m,{loading:a.loading},null,8,["loading"])],64)):k("v-if",!0),t("div",it,[(r(!0),l(f,null,S(a.quiz_data,s=>(r(),l("div",{class:"quiz-item",onClick:v=>a.onRedirectToDetail(s.id)},[t("div",rt,[g(e(s.name)+" ",1),n[5]||(n[5]=t("i",{class:"bx bx-chevron-right"},null,-1))]),t("div",dt,[n[6]||(n[6]=t("i",{class:"bx bx-message-square-edit bx-rotate-270"},null,-1)),g(" "+e(s.totalQuestionCount)+" "+e(i.$t("dashboards.list_items.quiz.questions")),1)]),t("div",ct,[t("div",null,e(i.$t("dashboards.list_items.quiz.learningProgress")),1),d(q,{"stroke-color":"var(--main-color)",percent:a.getPercentageComplete(s.totalQuestionCount,s.completedQuestionCount),status:"active"},null,8,["percent"])])],8,lt))),256)),t("div",{class:"quiz-item add-button",onClick:a.onRedirectToCreate},[n[7]||(n[7]=t("i",{class:"bx bx-plus add-button-icon"},null,-1)),t("div",ut,[t("span",null,e(i.$t("dashboards.buttons.createNewQuiz")),1),t("span",null,e(i.$t("dashboards.buttons.add_button_ins")),1)])])])]),t("div",_t,[t("div",mt,[t("div",null,[t("span",null,e(i.$t("dashboards.sections.schedule.title")),1),t("span",null,e(i.$t("dashboards.sections.schedule.sub_title")),1)]),d(_,{to:{name:"User_QuestionSet_Search"},class:"content-item-navigator"},{default:b(()=>[t("span",null,e(i.$t("dashboards.buttons.viewAll")),1),n[8]||(n[8]=t("i",{class:"bx bx-chevron-right"},null,-1))]),_:1,__:[8]})]),t("div",ht,[a.loading?(r(),l(f,{key:0},[d(m,{loading:a.loading},null,8,["loading"]),d(m,{loading:a.loading},null,8,["loading"])],64)):(r(!0),l(f,{key:1},S(a.public_quiz_data,s=>(r(),l("div",{class:"popular-quiz-item",onClick:v=>a.onRedirectToDetail(s.id)},[t("div",pt,[t("div",bt,e(s.name),1),k(' <div class="p-quiz-item-description">{{ quiz.description }}</div> ')]),t("div",gt,[t("div",ft,e(s.totalQuestionCount)+" "+e(i.$t("dashboards.list_items.quiz.questions")),1),t("div",zt,e(s.ratingAverage)+"⭐️ ("+e(s.ratingCount)+" "+e(i.$t("detail_QS.other.reviews"))+") ",1)]),t("div",qt,[t("span",null,[n[9]||(n[9]=t("i",{class:"bx bx-user"},null,-1)),g(" "+e(s.createBy),1)])])],8,vt))),256))])])])])}const It=F(j,[["render",Ct],["__scopeId","data-v-4aacc9ef"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/views/user/dashboards.vue"]]);export{It as default};
