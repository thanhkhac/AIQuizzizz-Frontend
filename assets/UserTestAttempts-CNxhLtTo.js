import{d as M,q as N,l as E,u as Y,i as w,S as p,_ as z,r as s,C as x,o as l,w as a,b as o,a as c,t as d,c as T,e as f,f as C}from"./index--4eqDeQq.js";import{A as U,T as D}from"./ApiTest-CLZHHVO0.js";import"./lodash-DVCQFWkP.js";const j=M({__name:"UserTestAttempts",props:{testId:{type:String,required:!0},userId:{type:[String,null],required:!0},testName:{type:String,required:!0},studentName:{type:[String,null],required:!0},passingScore:{type:[Number,null],required:!0}},setup(b,{expose:n}){const y=N(),e=E(),{t:I}=Y(),v=b,u=w(!1),m=async()=>{u.value=!0,await k()},g=()=>{u.value=!1};n({openModal:m,closeModal:g});const S=w([]),_=w(!1),k=async()=>{try{_.value=!0;let t=await U.GetUserExamHistory(v.testId,v.userId);if(t.data.success){let r=t.data.data;S.value=r.items}}catch(t){console.log("ERROR: GETALLEXAMBYLIMIT user exam result: "+t)}finally{_.value=!1}},i={route:y,router:e,t:I,props:v,modal_open:u,openModal:m,closeModal:g,attemptData:S,loading:_,getData:k,columns:[{title:"No",key:"no",customRender:t=>t.index+1},{title:"Start",dataIndex:"timeStart",key:"timeStart",sorter:(t,r)=>p(t.timeStart).unix()-p(r.timeStart).unix()},{title:"Submit",dataIndex:"timeSubmit",key:"timeSubmit",sorter:(t,r)=>p(t.timeSubmit).unix()-p(r.timeSubmit).unix()},{title:"Student score",dataIndex:"score",key:"score",sorter:(t,r)=>t.score-r.score},{title:"Result",dataIndex:"status",key:"status"},{title:"Action",dataIndex:"action",key:"action"}],getTagColor:t=>{switch(t){case D.PASSED:return"#22C55E";case D.FAILED:return"#cd201f"}},onRedirectToReview:t=>{e.push({name:"User_Test_Review",params:{id:t}})},get dayjs(){return p}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),q={class:"modal-container"},L={class:"modal-title-container"},B={class:"content"},H={class:"content-item"},V={class:"content-item-title"},F={key:0,class:"text-nowrap"},G={key:1,class:"text-nowrap"},O={key:1,class:"w-110 d-flex justify-content-center"};function P(b,n,y,e,I,v){const u=s("RouterLink"),m=s("a-col"),g=s("a-row"),S=s("a-tag"),_=s("a-button"),k=s("a-table"),R=s("a-config-provider"),h=s("a-empty"),A=s("a-modal");return l(),x(A,{centered:"",width:"100%","wrap-class-name":"medium-modal large",open:e.modal_open,onCancel:e.closeModal},{footer:a(()=>n[2]||(n[2]=[])),default:a(()=>[o("div",q,[o("div",L,[c(g,{class:"w-100 d-flex align-items-center"},{default:a(()=>[c(m,{span:1},{default:a(()=>[c(u,{onClick:e.closeModal,to:{name:""}},{default:a(()=>n[0]||(n[0]=[o("i",{class:"bx bx-chevron-left navigator-back-button"},null,-1)])),_:1,__:[0]})]),_:1}),c(m,{class:"main-title",span:23},{default:a(()=>[o("span",null,d(y.testName),1)]),_:1})]),_:1})]),o("div",B,[o("div",H,[o("div",V,[o("div",null,[o("span",null,d(y.studentName),1)])]),e.attemptData.length>0?(l(),x(R,{key:0,locale:{Table:{cancelSort:"",triggerAsc:"",triggerDesc:""}}},{default:a(()=>[c(k,{columns:e.columns,"data-source":e.attemptData,"row-key":"studentId",pagination:!1},{bodyCell:a(({column:i,record:t})=>[i.key==="timeStart"?(l(),T("div",F,d(e.dayjs(t.timeStart).format("DD/MM/YYYY HH:mm:ss")),1)):f("v-if",!0),i.key==="timeSubmit"?(l(),T("div",G,d(e.dayjs(t.timeSubmit).format("DD/MM/YYYY HH:mm:ss")),1)):f("v-if",!0),f(` <template v-if="column.key === 'passingScore' && passingScore">
                                    <div class="text-nowrap">{{ passingScore }}%</div>
                                </template> `),i.key==="status"?(l(),x(S,{key:2,color:e.getTagColor(t.status)},{default:a(()=>[C(d(t.status),1)]),_:2},1032,["color"])):f("v-if",!0),i.key==="action"?(l(),x(_,{key:3,type:"ghost",class:"main-color-btn-ghost",onClick:r=>e.onRedirectToReview(t.attemptId)},{default:a(()=>n[1]||(n[1]=[C(" Review ")])),_:2,__:[1]},1032,["onClick"])):f("v-if",!0)]),_:1},8,["data-source"])]),_:1})):(l(),T("div",O,[c(h,null,{description:a(()=>[o("span",null,d(b.$t("class_index.other.no_data_matches")),1)]),_:1})]))])])])]),_:1},8,["open"])}const K=z(j,[["render",P],["__scopeId","data-v-84e7c737"],["__file","/home/runner/work/AIQuizzizz-Frontend/AIQuizzizz-Frontend/src/shared/modals/UserTestAttempts.vue"]]);export{K as U};
